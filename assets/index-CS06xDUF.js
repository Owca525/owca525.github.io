function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var n=function e(){var n=!1;try{n=this instanceof e}catch{}return n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}),n}var n,r,i={exports:{}},s={};var a,o,A=(r||(r=1,i.exports=function(){if(n)return s;n=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(t,n,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==n.key&&(i=""+n.key),"key"in n)for(var s in r={},n)"key"!==s&&(r[s]=n[s]);else r=n;return n=r.ref,{$$typeof:e,type:t,key:i,ref:void 0!==n?n:null,props:r}}return s.Fragment=t,s.jsx=r,s.jsxs=r,s}()),i.exports),l={exports:{}},c={};function u(){if(a)return c;a=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,g(b,y.prototype),b.isPureReactComponent=!0;var E=Array.isArray;function B(){}var C={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function T(t,n,r){var i=r.ref;return{$$typeof:e,type:t,key:n,ref:void 0!==i?i:null,props:r}}function x(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var k=/\/+/g;function I(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function F(n,r,i,s,a){var o=typeof n;"undefined"!==o&&"boolean"!==o||(n=null);var A,l,c=!1;if(null===n)c=!0;else switch(o){case"bigint":case"string":case"number":c=!0;break;case"object":switch(n.$$typeof){case e:case t:c=!0;break;case d:return F((c=n._init)(n._payload),r,i,s,a)}}if(c)return a=a(n),c=""===s?"."+I(n,0):s,E(a)?(i="",null!=c&&(i=c.replace(k,"$&/")+"/"),F(a,r,i,"",function(e){return e})):null!=a&&(x(a)&&(A=a,l=i+(null==a.key||n&&n.key===a.key?"":(""+a.key).replace(k,"$&/")+"/")+c,a=T(A.type,l,A.props)),r.push(a)),1;c=0;var u,h=""===s?".":s+":";if(E(n))for(var p=0;p<n.length;p++)c+=F(s=n[p],r,i,o=h+I(s,p),a);else if("function"==typeof(p=null===(u=n)||"object"!=typeof u?null:"function"==typeof(u=f&&u[f]||u["@@iterator"])?u:null))for(n=p.call(n),p=0;!(s=n.next()).done;)c+=F(s=s.value,r,i,o=h+I(s,p++),a);else if("object"===o){if("function"==typeof n.then)return F(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(B,B):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(n),r,i,s,a);throw r=String(n),Error("Objects are not valid as a React child (found: "+("[object Object]"===r?"object with keys {"+Object.keys(n).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.")}return c}function L(e,t,n){if(null==e)return e;var r=[],i=0;return F(e,r,"","",function(e){return t.call(n,e,i++)}),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var _="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},U={map:L,forEach:function(e,t,n){L(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return L(e,function(){t++}),t},toArray:function(e){return L(e,function(e){return e})||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};return c.Activity=h,c.Children=U,c.Component=y,c.Fragment=n,c.Profiler=i,c.PureComponent=w,c.StrictMode=r,c.Suspense=l,c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,c.__COMPILER_RUNTIME={__proto__:null,c:function(e){return C.H.useMemoCache(e)}},c.cache=function(e){return function(){return e.apply(null,arguments)}},c.cacheSignal=function(){return null},c.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.key&&(i=""+t.key),t)!S.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];r.children=a}return T(e.type,i,r)},c.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},c.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var o=Array(a),A=0;A<a;A++)o[A]=arguments[A+2];i.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return T(e,s,i)},c.createRef=function(){return{current:null}},c.forwardRef=function(e){return{$$typeof:A,render:e}},c.isValidElement=x,c.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:D}},c.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},c.startTransition=function(e){var t=C.T,n={};C.T=n;try{var r=e(),i=C.S;null!==i&&i(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(B,_)}catch(s){_(s)}finally{null!==t&&null!==n.types&&(t.types=n.types),C.T=t}},c.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},c.use=function(e){return C.H.use(e)},c.useActionState=function(e,t,n){return C.H.useActionState(e,t,n)},c.useCallback=function(e,t){return C.H.useCallback(e,t)},c.useContext=function(e){return C.H.useContext(e)},c.useDebugValue=function(){},c.useDeferredValue=function(e,t){return C.H.useDeferredValue(e,t)},c.useEffect=function(e,t){return C.H.useEffect(e,t)},c.useEffectEvent=function(e){return C.H.useEffectEvent(e)},c.useId=function(){return C.H.useId()},c.useImperativeHandle=function(e,t,n){return C.H.useImperativeHandle(e,t,n)},c.useInsertionEffect=function(e,t){return C.H.useInsertionEffect(e,t)},c.useLayoutEffect=function(e,t){return C.H.useLayoutEffect(e,t)},c.useMemo=function(e,t){return C.H.useMemo(e,t)},c.useOptimistic=function(e,t){return C.H.useOptimistic(e,t)},c.useReducer=function(e,t,n){return C.H.useReducer(e,t,n)},c.useRef=function(e){return C.H.useRef(e)},c.useState=function(e){return C.H.useState(e)},c.useSyncExternalStore=function(e,t,n){return C.H.useSyncExternalStore(e,t,n)},c.useTransition=function(){return C.H.useTransition()},c.version="19.2.0",c}function d(){return o||(o=1,l.exports=u()),l.exports}var h=d();const f=e(h);var p,g,m={exports:{}},y={},v={exports:{}},w={};function b(){return g||(g=1,v.exports=(p||(p=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,A=e[o],l=o+1,c=e[l];if(0>i(A,n))l<s&&0>i(c,A)?(e[r]=c,e[l]=n,r=l):(e[r]=A,e[o]=n,r=o);else{if(!(l<s&&0>i(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var A=[],l=[],c=1,u=null,d=3,h=!1,f=!1,p=!1,g=!1,m="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var i=n(l);null!==i;){if(null===i.callback)r(l);else{if(!(i.startTime<=e))break;r(l),i.sortIndex=i.expirationTime,t(A,i)}i=n(l)}}function b(e){if(p=!1,w(e),!f)if(null!==n(A))f=!0,B||(B=!0,E());else{var t=n(l);null!==t&&L(b,t.startTime-e)}}var E,B=!1,C=-1,S=5,T=-1;function x(){return!(!g&&e.unstable_now()-T<S)}function k(){if(g=!1,B){var t=e.unstable_now();T=t;var i=!0;try{e:{f=!1,p&&(p=!1,y(C),C=-1),h=!0;var s=d;try{t:{for(w(t),u=n(A);null!==u&&!(u.expirationTime>t&&x());){var a=u.callback;if("function"==typeof a){u.callback=null,d=u.priorityLevel;var o=a(u.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof o){u.callback=o,w(t),i=!0;break t}u===n(A)&&r(A),w(t)}else r(A);u=n(A)}if(null!==u)i=!0;else{var c=n(l);null!==c&&L(b,c.startTime-t),i=!1}}break e}finally{u=null,d=s,h=!1}i=void 0}}finally{i?E():B=!1}}}if("function"==typeof v)E=function(){v(k)};else if("undefined"!=typeof MessageChannel){var I=new MessageChannel,F=I.port2;I.port1.onmessage=k,E=function(){F.postMessage(null)}}else E=function(){m(k,0)};function L(t,n){C=m(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},e.unstable_scheduleCallback=function(r,i,s){var a=e.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?a+s:a,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:c++,callback:i,priorityLevel:r,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(r.sortIndex=s,t(l,r),null===n(A)&&r===n(l)&&(p?(y(C),C=-1):p=!0,L(b,s-a))):(r.sortIndex=o,t(A,r),f||h||(f=!0,B||(B=!0,E()))),r},e.unstable_shouldYield=x,e.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}}(w)),w)),v.exports}var E,B,C,S,T={exports:{}},x={};function k(){if(E)return x;E=1;var e=d();function t(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}return x.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,x.createPortal=function(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!n||1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType)throw Error(t(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:i,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,n,null,r)},x.flushSync=function(e){var t=s.T,n=r.p;try{if(s.T=null,r.p=2,e)return e()}finally{s.T=t,r.p=n,r.d.f()}},x.preconnect=function(e,t){"string"==typeof e&&(t?t="string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,r.d.C(e,t))},x.prefetchDNS=function(e){"string"==typeof e&&r.d.D(e)},x.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,i=a(n,t.crossOrigin),s="string"==typeof t.integrity?t.integrity:void 0,o="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?r.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:o}):"script"===n&&r.d.X(e,{crossOrigin:i,integrity:s,fetchPriority:o,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},x.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=a(t.as,t.crossOrigin);r.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&r.d.M(e)},x.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,i=a(n,t.crossOrigin);r.d.L(e,n,{crossOrigin:i,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},x.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=a(t.as,t.crossOrigin);r.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else r.d.m(e)},x.requestFormReset=function(e){r.d.r(e)},x.unstable_batchedUpdates=function(e,t){return e(t)},x.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},x.useFormStatus=function(){return s.H.useHostTransitionStatus()},x.version="19.2.0",x}function I(){if(B)return T.exports;return B=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),T.exports=k(),T.exports}
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function F(){if(C)return y;C=1;var e=b(),t=d(),n=I();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function s(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function a(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function o(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function A(e){if(s(e)!==e)throw Error(r(188))}function l(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=l(e)))return t;e=e.sibling}return null}var c=Object.assign,u=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),v=Symbol.for("react.consumer"),w=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function D(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=L&&e[L]||e["@@iterator"])?e:null}var _=Symbol.for("react.client.reference");function U(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===_?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case p:return"Fragment";case m:return"Profiler";case g:return"StrictMode";case B:return"Suspense";case S:return"SuspenseList";case k:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case f:return"Portal";case w:return e.displayName||"Context";case v:return(e._context.displayName||"Context")+".Consumer";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case x:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}var P=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},N=[],M=-1;function H(e){return{current:e}}function j(e){0>M||(e.current=N[M],N[M]=null,M--)}function $(e,t){M++,N[M]=e.current,e.current=t}var K,V,G=H(null),W=H(null),z=H(null),Y=H(null);function q(e,t){switch($(z,t),$(W,e),$(G,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vu(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=wu(t=vu(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}j(G),$(G,e)}function X(){j(G),j(W),j(z)}function J(e){null!==e.memoizedState&&$(Y,e);var t=G.current,n=wu(t,e.type);t!==n&&($(W,e),$(G,n))}function Z(e){W.current===e&&(j(G),j(W)),Y.current===e&&(j(Y),dd._currentValue=Q)}function ee(e){if(void 0===K)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);K=t&&t[1]||"",V=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+K+e+V}var te=!1;function ne(e,t){if(!e||te)return"";te=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"==typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var A=a.split("\n"),l=o.split("\n");for(i=r=0;r<A.length&&!A[r].includes("DetermineComponentFrameRoot");)r++;for(;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;if(r===A.length||i===l.length)for(r=A.length-1,i=l.length-1;1<=r&&0<=i&&A[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(A[r]!==l[i]){if(1!==r||1!==i)do{if(r--,0>--i||A[r]!==l[i]){var c="\n"+A[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=i);break}}}finally{te=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ee(n):""}function re(e,t){switch(e.tag){case 26:case 27:case 5:return ee(e.type);case 16:return ee("Lazy");case 13:return e.child!==t&&null!==t?ee("Suspense Fallback"):ee("Suspense");case 19:return ee("SuspenseList");case 0:case 15:return ne(e.type,!1);case 11:return ne(e.type.render,!1);case 1:return ne(e.type,!0);case 31:return ee("Activity");default:return""}}function ie(e){try{var t="",n=null;do{t+=re(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var se=Object.prototype.hasOwnProperty,ae=e.unstable_scheduleCallback,oe=e.unstable_cancelCallback,Ae=e.unstable_shouldYield,le=e.unstable_requestPaint,ce=e.unstable_now,ue=e.unstable_getCurrentPriorityLevel,de=e.unstable_ImmediatePriority,he=e.unstable_UserBlockingPriority,fe=e.unstable_NormalPriority,pe=e.unstable_LowPriority,ge=e.unstable_IdlePriority,me=e.log,ye=e.unstable_setDisableYieldValue,ve=null,we=null;function be(e){if("function"==typeof me&&ye(e),we&&"function"==typeof we.setStrictMode)try{we.setStrictMode(ve,e)}catch(t){}}var Ee=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Be(e)/Ce|0)|0},Be=Math.log,Ce=Math.LN2;var Se=256,Te=262144,xe=4194304;function ke(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ie(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~s)?i=ke(r):0!==(a&=o)?i=ke(a):n||0!==(n=o&~e)&&(i=ke(n)):0!==(o=r&~s)?i=ke(o):0!==a?i=ke(a):n||0!==(n=r&~e)&&(i=ke(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&4194048&n)?t:i}function Fe(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Le(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function De(){var e=xe;return!(62914560&(xe<<=1))&&(xe=4194304),e}function _e(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ue(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Pe(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Ee(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Re(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ee(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Oe(e,t){var n=t&-t;return 0!==((n=42&n?1:Qe(n))&(e.suspendedLanes|t))?0:n}function Qe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ne(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Me(){var e=O.p;return 0!==e?e:void 0===(e=window.event)?32:kd(e.type)}function He(e,t){var n=O.p;try{return O.p=e,t()}finally{O.p=n}}var je=Math.random().toString(36).slice(2),$e="__reactFiber$"+je,Ke="__reactProps$"+je,Ve="__reactContainer$"+je,Ge="__reactEvents$"+je,We="__reactListeners$"+je,ze="__reactHandles$"+je,Ye="__reactResources$"+je,qe="__reactMarker$"+je;function Xe(e){delete e[$e],delete e[Ke],delete e[Ge],delete e[We],delete e[ze]}function Je(e){var t=e[$e];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ve]||n[$e]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Qu(e);null!==e;){if(n=e[$e])return n;e=Qu(e)}return t}n=(e=n).parentNode}return null}function Ze(e){if(e=e[$e]||e[Ve]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function et(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(r(33))}function tt(e){var t=e[Ye];return t||(t=e[Ye]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function nt(e){e[qe]=!0}var rt=new Set,it={};function st(e,t){at(e,t),at(e+"Capture",t)}function at(e,t){for(it[e]=t,e=0;e<t.length;e++)rt.add(t[e])}var ot=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),At={},lt={};function ct(e,t,n){if(i=t,se.call(lt,i)||!se.call(At,i)&&(ot.test(i)?lt[i]=!0:(At[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function ut(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function dt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ft(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function pt(e){if(!e._valueTracker){var t=ft(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function gt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ft(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var yt=/[\n"\\]/g;function vt(e){return e.replace(yt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function wt(e,t,n,r,i,s,a,o){e.name="",null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ht(t)):e.value!==""+ht(t)&&(e.value=""+ht(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?Et(e,a,ht(t)):null!=n?Et(e,a,ht(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!=typeof i&&"symbol"!=typeof i),null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.name=""+ht(o):e.removeAttribute("name")}function bt(e,t,n,r,i,s,a,o){if(null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s&&(e.type=s),null!=t||null!=n){if(("submit"===s||"reset"===s)&&null==t)return void pt(e);n=null!=n?""+ht(n):"",t=null!=t?""+ht(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:i)&&"symbol"!=typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.name=a),pt(e)}function Et(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Bt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ht(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Ct(e,t,n){null==t||((t=""+ht(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ht(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,i){if(null==t){if(null!=i){if(null!=n)throw Error(r(92));if(P(i)){if(1<i.length)throw Error(r(93));i=i[0]}n=i}null==n&&(n=""),t=n}n=ht(t),e.defaultValue=n,(i=e.textContent)===n&&""!==i&&null!==i&&(e.value=i),pt(e)}function Tt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var xt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||xt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function It(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(r(62));if(e=e.style,null!=n){for(var i in n)!n.hasOwnProperty(i)||null!=t&&t.hasOwnProperty(i)||(0===i.indexOf("--")?e.setProperty(i,""):"float"===i?e.cssFloat="":e[i]="");for(var s in t)i=t[s],t.hasOwnProperty(s)&&n[s]!==i&&kt(e,s,i)}else for(var a in t)t.hasOwnProperty(a)&&kt(e,a,t[a])}function Ft(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _t(e){return Dt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ut(){}var Pt=null;function Rt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ot=null,Qt=null;function Nt(e){var t=Ze(e);if(t&&(e=t.stateNode)){var n=e[Ke]||null;e:switch(e=t.stateNode,t.type){case"input":if(wt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+vt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=i[Ke]||null;if(!s)throw Error(r(90));wt(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(i=n[t]).form===e.form&&gt(i)}break e;case"textarea":Ct(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&Bt(e,!!n.multiple,t,!1)}}}var Mt=!1;function Ht(e,t,n){if(Mt)return e(t,n);Mt=!0;try{return e(t)}finally{if(Mt=!1,(null!==Ot||null!==Qt)&&(tc(),Ot&&(t=Ot,e=Qt,Qt=Ot=null,Nt(t),e)))for(t=0;t<e.length;t++)Nt(e[t])}}function jt(e,t){var n=e.stateNode;if(null===n)return null;var i=n[Ke]||null;if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(r(231,t,typeof n));return n}var $t=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Kt=!1;if($t)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Kt=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(Zd){Kt=!1}var Gt=null,Wt=null,zt=null;function Yt(){if(zt)return zt;var e,t,n=Wt,r=n.length,i="value"in Gt?Gt.value:Gt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return zt=i.slice(e,1<t?1-t:void 0)}function qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Xt(){return!0}function Jt(){return!1}function Zt(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Xt:Jt,this.isPropagationStopped=Jt,this}return c(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Xt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Xt)},persist:function(){},isPersistent:Xt}),t}var en,tn,nn,rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sn=Zt(rn),an=c({},rn,{view:0,detail:0}),on=Zt(an),An=c({},an,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nn&&(nn&&"mousemove"===e.type?(en=e.screenX-nn.screenX,tn=e.screenY-nn.screenY):tn=en=0,nn=e),en)},movementY:function(e){return"movementY"in e?e.movementY:tn}}),ln=Zt(An),cn=Zt(c({},An,{dataTransfer:0})),un=Zt(c({},an,{relatedTarget:0})),dn=Zt(c({},rn,{animationName:0,elapsedTime:0,pseudoElement:0})),hn=Zt(c({},rn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),fn=Zt(c({},rn,{data:0})),pn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function vn(){return yn}var wn=Zt(c({},an,{key:function(e){if(e.key){var t=pn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?gn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(e){return"keypress"===e.type?qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),bn=Zt(c({},An,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=Zt(c({},an,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn})),Bn=Zt(c({},rn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Cn=Zt(c({},An,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Sn=Zt(c({},rn,{newState:0,oldState:0})),Tn=[9,13,27,32],xn=$t&&"CompositionEvent"in window,kn=null;$t&&"documentMode"in document&&(kn=document.documentMode);var In=$t&&"TextEvent"in window&&!kn,Fn=$t&&(!xn||kn&&8<kn&&11>=kn),Ln=String.fromCharCode(32),Dn=!1;function _n(e,t){switch(e){case"keyup":return-1!==Tn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Pn=!1;var Rn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function On(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Rn[e.type]:"textarea"===t}function Qn(e,t,n,r){Ot?Qt?Qt.push(r):Qt=[r]:Ot=r,0<(t=su(t,"onChange")).length&&(n=new sn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Nn=null,Mn=null;function Hn(e){Xc(e,0)}function jn(e){if(gt(et(e)))return e}function $n(e,t){if("change"===e)return t}var Kn=!1;if($t){var Vn;if($t){var Gn="oninput"in document;if(!Gn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),Gn="function"==typeof Wn.oninput}Vn=Gn}else Vn=!1;Kn=Vn&&(!document.documentMode||9<document.documentMode)}function zn(){Nn&&(Nn.detachEvent("onpropertychange",Yn),Mn=Nn=null)}function Yn(e){if("value"===e.propertyName&&jn(Mn)){var t=[];Qn(t,Mn,e,Rt(e)),Ht(Hn,t)}}function qn(e,t,n){"focusin"===e?(zn(),Mn=n,(Nn=t).attachEvent("onpropertychange",Yn)):"focusout"===e&&zn()}function Xn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return jn(Mn)}function Jn(e,t){if("click"===e)return jn(t)}function Zn(e,t){if("input"===e||"change"===e)return jn(t)}var er="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function tr(e,t){if(er(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!se.call(t,i)||!er(e[i],t[i]))return!1}return!0}function nr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rr(e,t){var n,r=nr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=nr(r)}}function ir(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ir(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function sr(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ar(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var or=$t&&"documentMode"in document&&11>=document.documentMode,Ar=null,lr=null,cr=null,ur=!1;function dr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ur||null==Ar||Ar!==mt(r)||("selectionStart"in(r=Ar)&&ar(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},cr&&tr(cr,r)||(cr=r,0<(r=su(lr,"onSelect")).length&&(t=new sn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ar)))}function hr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fr={animationend:hr("Animation","AnimationEnd"),animationiteration:hr("Animation","AnimationIteration"),animationstart:hr("Animation","AnimationStart"),transitionrun:hr("Transition","TransitionRun"),transitionstart:hr("Transition","TransitionStart"),transitioncancel:hr("Transition","TransitionCancel"),transitionend:hr("Transition","TransitionEnd")},pr={},gr={};function mr(e){if(pr[e])return pr[e];if(!fr[e])return e;var t,n=fr[e];for(t in n)if(n.hasOwnProperty(t)&&t in gr)return pr[e]=n[t];return e}$t&&(gr=document.createElement("div").style,"AnimationEvent"in window||(delete fr.animationend.animation,delete fr.animationiteration.animation,delete fr.animationstart.animation),"TransitionEvent"in window||delete fr.transitionend.transition);var yr=mr("animationend"),vr=mr("animationiteration"),wr=mr("animationstart"),br=mr("transitionrun"),Er=mr("transitionstart"),Br=mr("transitioncancel"),Cr=mr("transitionend"),Sr=new Map,Tr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xr(e,t){Sr.set(e,t),st(t,[e])}Tr.push("scrollEnd");var kr="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Ir=[],Fr=0,Lr=0;function Dr(){for(var e=Fr,t=Lr=Fr=0;t<e;){var n=Ir[t];Ir[t++]=null;var r=Ir[t];Ir[t++]=null;var i=Ir[t];Ir[t++]=null;var s=Ir[t];if(Ir[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==s&&Rr(n,i,s)}}function _r(e,t,n,r){Ir[Fr++]=e,Ir[Fr++]=t,Ir[Fr++]=n,Ir[Fr++]=r,Lr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ur(e,t,n,r){return _r(e,t,n,r),Or(e)}function Pr(e,t){return _r(e,null,null,t),Or(e)}function Rr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-Ee(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Or(e){if(50<Gl)throw Gl=0,Wl=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Qr={};function Nr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(e,t,n,r){return new Nr(e,t,n,r)}function Hr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jr(e,t){var n=e.alternate;return null===n?((n=Mr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function $r(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Kr(e,t,n,i,s,a){var o=0;if(i=e,"function"==typeof e)Hr(e)&&(o=1);else if("string"==typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,G.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case k:return(e=Mr(31,n,t,s)).elementType=k,e.lanes=a,e;case p:return Vr(n.children,s,a,t);case g:o=8,s|=24;break;case m:return(e=Mr(12,n,t,2|s)).elementType=m,e.lanes=a,e;case B:return(e=Mr(13,n,t,s)).elementType=B,e.lanes=a,e;case S:return(e=Mr(19,n,t,s)).elementType=S,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case w:o=10;break e;case v:o=9;break e;case E:o=11;break e;case T:o=14;break e;case x:o=16,i=null;break e}o=29,n=Error(r(130,null===e?"null":typeof e,"")),i=null}return(t=Mr(o,n,t,s)).elementType=e,t.type=i,t.lanes=a,t}function Vr(e,t,n,r){return(e=Mr(7,e,r,t)).lanes=n,e}function Gr(e,t,n){return(e=Mr(6,e,null,t)).lanes=n,e}function Wr(e){var t=Mr(18,null,null,0);return t.stateNode=e,t}function zr(e,t,n){return(t=Mr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Yr=new WeakMap;function qr(e,t){if("object"==typeof e&&null!==e){var n=Yr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ie(t)},Yr.set(e,t),t)}return{value:e,source:t,stack:ie(t)}}var Xr=[],Jr=0,Zr=null,ei=0,ti=[],ni=0,ri=null,ii=1,si="";function ai(e,t){Xr[Jr++]=ei,Xr[Jr++]=Zr,Zr=e,ei=t}function oi(e,t,n){ti[ni++]=ii,ti[ni++]=si,ti[ni++]=ri,ri=e;var r=ii;e=si;var i=32-Ee(r)-1;r&=~(1<<i),n+=1;var s=32-Ee(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ii=1<<32-Ee(t)+i|n<<i|r,si=s+e}else ii=1<<s|n<<i|r,si=e}function Ai(e){null!==e.return&&(ai(e,1),oi(e,1,0))}function li(e){for(;e===Zr;)Zr=Xr[--Jr],Xr[Jr]=null,ei=Xr[--Jr],Xr[Jr]=null;for(;e===ri;)ri=ti[--ni],ti[ni]=null,si=ti[--ni],ti[ni]=null,ii=ti[--ni],ti[ni]=null}function ci(e,t){ti[ni++]=ii,ti[ni++]=si,ti[ni++]=ri,ii=t.id,si=t.overflow,ri=e}var ui=null,di=null,hi=!1,fi=null,pi=!1,gi=Error(r(519));function mi(e){throw Bi(qr(Error(r(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),gi}function yi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[$e]=e,t[Ke]=r,n){case"dialog":Jc("cancel",t),Jc("close",t);break;case"iframe":case"object":case"embed":Jc("load",t);break;case"video":case"audio":for(n=0;n<Yc.length;n++)Jc(Yc[n],t);break;case"source":Jc("error",t);break;case"img":case"image":case"link":Jc("error",t),Jc("load",t);break;case"details":Jc("toggle",t);break;case"input":Jc("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Jc("invalid",t);break;case"textarea":Jc("invalid",t),St(t,r.value,r.defaultValue,r.children)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||uu(t.textContent,n)?(null!=r.popover&&(Jc("beforetoggle",t),Jc("toggle",t)),null!=r.onScroll&&Jc("scroll",t),null!=r.onScrollEnd&&Jc("scrollend",t),null!=r.onClick&&(t.onclick=Ut),t=!0):t=!1,t||mi(e,!0)}function vi(e){for(ui=e.return;ui;)switch(ui.tag){case 5:case 31:case 13:return void(pi=!1);case 27:case 3:return void(pi=!0);default:ui=ui.return}}function wi(e){if(e!==ui)return!1;if(!hi)return vi(e),hi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||bu(e.type,e.memoizedProps)),t=!t),t&&di&&mi(e),vi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));di=Ou(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));di=Ou(e)}else 27===n?(n=di,ku(e.type)?(e=Ru,Ru=null,di=e):di=n):di=ui?Pu(e.stateNode.nextSibling):null;return!0}function bi(){di=ui=null,hi=!1}function Ei(){var e=fi;return null!==e&&(null===Dl?Dl=e:Dl.push.apply(Dl,e),fi=null),e}function Bi(e){null===fi?fi=[e]:fi.push(e)}var Ci=H(null),Si=null,Ti=null;function xi(e,t,n){$(Ci,t._currentValue),t._currentValue=n}function ki(e){e._currentValue=Ci.current,j(Ci)}function Ii(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Fi(e,t,n,i){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var a=s.dependencies;if(null!==a){var o=s.child;a=a.firstContext;e:for(;null!==a;){var A=a;a=s;for(var l=0;l<t.length;l++)if(A.context===t[l]){a.lanes|=n,null!==(A=a.alternate)&&(A.lanes|=n),Ii(a.return,n,e),i||(o=null);break e}a=A.next}}else if(18===s.tag){if(null===(o=s.return))throw Error(r(341));o.lanes|=n,null!==(a=o.alternate)&&(a.lanes|=n),Ii(o,n,e),o=null}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}function Li(e,t,n,i){e=null;for(var s=t,a=!1;null!==s;){if(!a)if(524288&s.flags)a=!0;else if(262144&s.flags)break;if(10===s.tag){var o=s.alternate;if(null===o)throw Error(r(387));if(null!==(o=o.memoizedProps)){var A=s.type;er(s.pendingProps.value,o.value)||(null!==e?e.push(A):e=[A])}}else if(s===Y.current){if(null===(o=s.alternate))throw Error(r(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(dd):e=[dd])}s=s.return}null!==e&&Fi(t,e,n,i),t.flags|=262144}function Di(e){for(e=e.firstContext;null!==e;){if(!er(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _i(e){Si=e,Ti=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ui(e){return Ri(Si,e)}function Pi(e,t){return null===Si&&_i(e),Ri(e,t)}function Ri(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Ti){if(null===e)throw Error(r(308));Ti=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ti=Ti.next=t;return n}var Oi="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Qi=e.unstable_scheduleCallback,Ni=e.unstable_NormalPriority,Mi={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hi(){return{controller:new Oi,data:new Map,refCount:0}}function ji(e){e.refCount--,0===e.refCount&&Qi(Ni,function(){e.controller.abort()})}var $i=null,Ki=0,Vi=0,Gi=null;function Wi(){if(0===--Ki&&null!==$i){null!==Gi&&(Gi.status="fulfilled");var e=$i;$i=null,Vi=0,Gi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var zi=R.S;R.S=function(e,t){Pl=ce(),"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===$i){var n=$i=[];Ki=0,Vi=Kc(),Gi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ki++,t.then(Wi,Wi)}(0,t),null!==zi&&zi(e,t)};var Yi=H(null);function qi(){var e=Yi.current;return null!==e?e:gl.pooledCache}function Xi(e,t){$(Yi,null===t?Yi.current:t.pool)}function Ji(){var e=qi();return null===e?null:{parent:Mi._currentValue,pool:e}}var Zi=Error(r(460)),es=Error(r(474)),ts=Error(r(542)),ns={then:function(){}};function rs(e){return"fulfilled"===(e=e.status)||"rejected"===e}function is(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Ut,Ut),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw As(e=t.reason),e;default:if("string"==typeof t.status)t.then(Ut,Ut);else{if(null!==(e=gl)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw As(e=t.reason),e}throw as=t,Zi}}function ss(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"==typeof t&&"function"==typeof t.then)throw as=t,Zi;throw t}}var as=null;function os(){if(null===as)throw Error(r(459));var e=as;return as=null,e}function As(e){if(e===Zi||e===ts)throw Error(r(483))}var ls=null,cs=0;function us(e){var t=cs;return cs+=1,null===ls&&(ls=[]),is(ls,e,t)}function ds(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function hs(e,t){if(t.$$typeof===u)throw Error(r(525));throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function i(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=jr(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function A(e,t,n,r){return null===t||6!==t.tag?((t=Gr(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function l(e,t,n,r){var i=n.type;return i===p?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===x&&ss(i)===t.type)?(ds(t=s(t,n.props),n),t.return=e,t):(ds(t=Kr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zr(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,r,i){return null===t||7!==t.tag?((t=Vr(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Gr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case h:return ds(n=Kr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case f:return(t=zr(t,e.mode,n)).return=e,t;case x:return d(e,t=ss(t),n)}if(P(t)||D(t))return(t=Vr(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return d(e,us(t),n);if(t.$$typeof===w)return d(e,Pi(e,t),n);hs(e,t)}return null}function g(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==i?null:A(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case h:return n.key===i?l(e,t,n,r):null;case f:return n.key===i?c(e,t,n,r):null;case x:return g(e,t,n=ss(n),r)}if(P(n)||D(n))return null!==i?null:u(e,t,n,r,null);if("function"==typeof n.then)return g(e,t,us(n),r);if(n.$$typeof===w)return g(e,t,Pi(e,n),r);hs(e,n)}return null}function m(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return A(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case h:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case f:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return m(e,t,n,r=ss(r),i)}if(P(r)||D(r))return u(t,e=e.get(n)||null,r,i,null);if("function"==typeof r.then)return m(e,t,n,us(r),i);if(r.$$typeof===w)return m(e,t,n,Pi(t,r),i);hs(t,r)}return null}function y(A,l,c,u){if("object"==typeof c&&null!==c&&c.type===p&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case h:e:{for(var v=c.key;null!==l;){if(l.key===v){if((v=c.type)===p){if(7===l.tag){n(A,l.sibling),(u=s(l,c.props.children)).return=A,A=u;break e}}else if(l.elementType===v||"object"==typeof v&&null!==v&&v.$$typeof===x&&ss(v)===l.type){n(A,l.sibling),ds(u=s(l,c.props),c),u.return=A,A=u;break e}n(A,l);break}t(A,l),l=l.sibling}c.type===p?((u=Vr(c.props.children,A.mode,u,c.key)).return=A,A=u):(ds(u=Kr(c.type,c.key,c.props,null,A.mode,u),c),u.return=A,A=u)}return o(A);case f:e:{for(v=c.key;null!==l;){if(l.key===v){if(4===l.tag&&l.stateNode.containerInfo===c.containerInfo&&l.stateNode.implementation===c.implementation){n(A,l.sibling),(u=s(l,c.children||[])).return=A,A=u;break e}n(A,l);break}t(A,l),l=l.sibling}(u=zr(c,A.mode,u)).return=A,A=u}return o(A);case x:return y(A,l,c=ss(c),u)}if(P(c))return function(r,s,o,A){for(var l=null,c=null,u=s,h=s=0,f=null;null!==u&&h<o.length;h++){u.index>h?(f=u,u=null):f=u.sibling;var p=g(r,u,o[h],A);if(null===p){null===u&&(u=f);break}e&&u&&null===p.alternate&&t(r,u),s=a(p,s,h),null===c?l=p:c.sibling=p,c=p,u=f}if(h===o.length)return n(r,u),hi&&ai(r,h),l;if(null===u){for(;h<o.length;h++)null!==(u=d(r,o[h],A))&&(s=a(u,s,h),null===c?l=u:c.sibling=u,c=u);return hi&&ai(r,h),l}for(u=i(u);h<o.length;h++)null!==(f=m(u,r,h,o[h],A))&&(e&&null!==f.alternate&&u.delete(null===f.key?h:f.key),s=a(f,s,h),null===c?l=f:c.sibling=f,c=f);return e&&u.forEach(function(e){return t(r,e)}),hi&&ai(r,h),l}(A,l,c,u);if(D(c)){if("function"!=typeof(v=D(c)))throw Error(r(150));return function(s,o,A,l){if(null==A)throw Error(r(151));for(var c=null,u=null,h=o,f=o=0,p=null,y=A.next();null!==h&&!y.done;f++,y=A.next()){h.index>f?(p=h,h=null):p=h.sibling;var v=g(s,h,y.value,l);if(null===v){null===h&&(h=p);break}e&&h&&null===v.alternate&&t(s,h),o=a(v,o,f),null===u?c=v:u.sibling=v,u=v,h=p}if(y.done)return n(s,h),hi&&ai(s,f),c;if(null===h){for(;!y.done;f++,y=A.next())null!==(y=d(s,y.value,l))&&(o=a(y,o,f),null===u?c=y:u.sibling=y,u=y);return hi&&ai(s,f),c}for(h=i(h);!y.done;f++,y=A.next())null!==(y=m(h,s,f,y.value,l))&&(e&&null!==y.alternate&&h.delete(null===y.key?f:y.key),o=a(y,o,f),null===u?c=y:u.sibling=y,u=y);return e&&h.forEach(function(e){return t(s,e)}),hi&&ai(s,f),c}(A,l,c=v.call(c),u)}if("function"==typeof c.then)return y(A,l,us(c),u);if(c.$$typeof===w)return y(A,l,Pi(A,c),u);hs(A,c)}return"string"==typeof c&&""!==c||"number"==typeof c||"bigint"==typeof c?(c=""+c,null!==l&&6===l.tag?(n(A,l.sibling),(u=s(l,c)).return=A,A=u):(n(A,l),(u=Gr(c,A.mode,u)).return=A,A=u),o(A)):n(A,l)}return function(e,t,n,r){try{cs=0;var i=y(e,t,n,r);return ls=null,i}catch(a){if(a===Zi||a===ts)throw a;var s=Mr(29,a,null,e.mode);return s.lanes=r,s.return=e,s}}}var ps=fs(!0),gs=fs(!1),ms=!1;function ys(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ws(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function bs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&pl){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Or(e),Rr(e,null,n),t}return _r(e,r,t,n),Or(e)}function Es(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Re(e,n)}}function Bs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Cs=!1;function Ss(){if(Cs){if(null!==Gi)throw Gi}}function Ts(e,t,n,r){Cs=!1;var i=e.updateQueue;ms=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var A=o,l=A.next;A.next=null,null===a?s=l:a.next=l,a=A;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=l:o.next=l,u.lastBaseUpdate=A))}if(null!==s){var d=i.baseState;for(a=0,u=l=A=null,o=s;;){var h=-536870913&o.lane,f=h!==o.lane;if(f?(yl&h)===h:(r&h)===h){0!==h&&h===Vi&&(Cs=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,g=o;h=t;var m=n;switch(g.tag){case 1:if("function"==typeof(p=g.payload)){d=p.call(m,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=g.payload)?p.call(m,d,h):p))break e;d=c({},d,h);break e;case 2:ms=!0}}null!==(h=o.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=i.callbacks)?i.callbacks=[h]:f.push(h))}else f={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(l=u=f,A=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(f=o).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}null===u&&(A=d),i.baseState=A,i.firstBaseUpdate=l,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),Tl|=a,e.lanes=a,e.memoizedState=d}}function xs(e,t){if("function"!=typeof e)throw Error(r(191,e));e.call(t)}function ks(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)xs(n[e],t)}var Is=H(null),Fs=H(0);function Ls(e,t){$(Fs,e=Cl),$(Is,t),Cl=e|t.baseLanes}function Ds(){$(Fs,Cl),$(Is,Is.current)}function _s(){Cl=Fs.current,j(Is),j(Fs)}var Us=H(null),Ps=null;function Rs(e){var t=e.alternate;$(Hs,1&Hs.current),$(Us,e),null===Ps&&(null===t||null!==Is.current||null!==t.memoizedState)&&(Ps=e)}function Os(e){$(Hs,Hs.current),$(Us,e),null===Ps&&(Ps=e)}function Qs(e){22===e.tag?($(Hs,Hs.current),$(Us,e),null===Ps&&(Ps=e)):Ns()}function Ns(){$(Hs,Hs.current),$(Us,Us.current)}function Ms(e){j(Us),Ps===e&&(Ps=null),j(Hs)}var Hs=H(0);function js(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||_u(n)||Uu(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(128&t.flags)return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $s=0,Ks=null,Vs=null,Gs=null,Ws=!1,zs=!1,Ys=!1,qs=0,Xs=0,Js=null,Zs=0;function ea(){throw Error(r(321))}function ta(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!er(e[n],t[n]))return!1;return!0}function na(e,t,n,r,i,s){return $s=s,Ks=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=null===e||null===e.memoizedState?yo:vo,Ys=!1,s=n(r,i),Ys=!1,zs&&(s=ia(t,n,r,i)),ra(e),s}function ra(e){R.H=mo;var t=null!==Vs&&null!==Vs.next;if($s=0,Gs=Vs=Ks=null,Ws=!1,Xs=0,Js=null,t)throw Error(r(300));null===e||Po||null!==(e=e.dependencies)&&Di(e)&&(Po=!0)}function ia(e,t,n,i){Ks=e;var s=0;do{if(zs&&(Js=null),Xs=0,zs=!1,25<=s)throw Error(r(301));if(s+=1,Gs=Vs=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}R.H=wo,a=t(n,i)}while(zs);return a}function sa(){var e=R.H,t=e.useState()[0];return t="function"==typeof t.then?ua(t):t,e=e.useState()[0],(null!==Vs?Vs.memoizedState:null)!==e&&(Ks.flags|=1024),t}function aa(){var e=0!==qs;return qs=0,e}function oa(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Aa(e){if(Ws){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ws=!1}$s=0,Gs=Vs=Ks=null,zs=!1,Xs=qs=0,Js=null}function la(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Gs?Ks.memoizedState=Gs=e:Gs=Gs.next=e,Gs}function ca(){if(null===Vs){var e=Ks.alternate;e=null!==e?e.memoizedState:null}else e=Vs.next;var t=null===Gs?Ks.memoizedState:Gs.next;if(null!==t)Gs=t,Vs=e;else{if(null===e){if(null===Ks.alternate)throw Error(r(467));throw Error(r(310))}e={memoizedState:(Vs=e).memoizedState,baseState:Vs.baseState,baseQueue:Vs.baseQueue,queue:Vs.queue,next:null},null===Gs?Ks.memoizedState=Gs=e:Gs=Gs.next=e}return Gs}function ua(e){var t=Xs;return Xs+=1,null===Js&&(Js=[]),e=is(Js,e,t),t=Ks,null===(null===Gs?t.memoizedState:Gs.next)&&(t=t.alternate,R.H=null===t||null===t.memoizedState?yo:vo),e}function da(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return ua(e);if(e.$$typeof===w)return Ui(e)}throw Error(r(438,String(e)))}function ha(e){var t=null,n=Ks.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Ks.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Ks.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=F;return t.index++,n}function fa(e,t){return"function"==typeof t?t(e):t}function pa(e){return ga(ca(),Vs,e)}function ga(e,t,n){var i=e.queue;if(null===i)throw Error(r(311));i.lastRenderedReducer=n;var s=e.baseQueue,a=i.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}t.baseQueue=s=a,i.pending=null}if(a=e.baseState,null===s)e.memoizedState=a;else{var A=o=null,l=null,c=t=s.next,u=!1;do{var d=-536870913&c.lane;if(d!==c.lane?(yl&d)===d:($s&d)===d){var h=c.revertLane;if(0===h)null!==l&&(l=l.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===Vi&&(u=!0);else{if(($s&h)===h){c=c.next,h===Vi&&(u=!0);continue}d={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===l?(A=l=d,o=a):l=l.next=d,Ks.lanes|=h,Tl|=h}d=c.action,Ys&&n(a,d),a=c.hasEagerState?c.eagerState:n(a,d)}else h={lane:d,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===l?(A=l=h,o=a):l=l.next=h,Ks.lanes|=d,Tl|=d;c=c.next}while(null!==c&&c!==t);if(null===l?o=a:l.next=A,!er(a,e.memoizedState)&&(Po=!0,u&&null!==(n=Gi)))throw n;e.memoizedState=a,e.baseState=o,e.baseQueue=l,i.lastRenderedState=a}return null===s&&(i.lanes=0),[e.memoizedState,i.dispatch]}function ma(e){var t=ca(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);er(a,t.memoizedState)||(Po=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function ya(e,t,n){var i=Ks,s=ca(),a=hi;if(a){if(void 0===n)throw Error(r(407));n=n()}else n=t();var o=!er((Vs||s).memoizedState,n);if(o&&(s.memoizedState=n,Po=!0),s=s.queue,$a(ba.bind(null,i,s,e),[e]),s.getSnapshot!==t||o||null!==Gs&&1&Gs.memoizedState.tag){if(i.flags|=2048,Qa(9,{destroy:void 0},wa.bind(null,i,s,n,t),null),null===gl)throw Error(r(349));a||127&$s||va(i,t,n)}return n}function va(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Ks.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Ks.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function wa(e,t,n,r){t.value=n,t.getSnapshot=r,Ea(t)&&Ba(e)}function ba(e,t,n){return n(function(){Ea(t)&&Ba(e)})}function Ea(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!er(e,n)}catch(r){return!0}}function Ba(e){var t=Pr(e,2);null!==t&&ql(t,e,2)}function Ca(e){var t=la();if("function"==typeof e){var n=e;if(e=n(),Ys){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:e},t}function Sa(e,t,n,r){return e.baseState=n,ga(e,Vs,"function"==typeof r?r:fa)}function Ta(e,t,n,i,s){if(fo(e))throw Error(r(485));if(null!==(e=t.action)){var a={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==R.T?n(!0):a.isTransition=!1,i(a),null===(n=t.pending)?(a.next=t.pending=a,xa(t,a)):(a.next=n.next,t.pending=n.next=a)}}function xa(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=R.T,a={};R.T=a;try{var o=n(i,r),A=R.S;null!==A&&A(a,o),ka(e,t,o)}catch(l){Fa(e,t,l)}finally{null!==s&&null!==a.types&&(s.types=a.types),R.T=s}}else try{ka(e,t,s=n(i,r))}catch(c){Fa(e,t,c)}}function ka(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){Ia(e,t,n)},function(n){return Fa(e,t,n)}):Ia(e,t,n)}function Ia(e,t,n){t.status="fulfilled",t.value=n,La(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,xa(e,n)))}function Fa(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,La(t),t=t.next}while(t!==r)}e.action=null}function La(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Da(e,t){return t}function _a(e,t){if(hi){var n=gl.formState;if(null!==n){e:{var r=Ks;if(hi){if(di){t:{for(var i=di,s=pi;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=Pu(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){di=Pu(i.nextSibling),r="F!"===i.data;break e}}mi(r)}r=!1}r&&(t=n[0])}}return(n=la()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:t},n.queue=r,n=co.bind(null,Ks,r),r.dispatch=n,r=Ca(!1),s=ho.bind(null,Ks,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=la()).queue=i,n=Ta.bind(null,Ks,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function Ua(e){return Pa(ca(),Vs,e)}function Pa(e,t,n){if(t=ga(e,t,Da)[0],e=pa(fa)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=ua(t)}catch(a){if(a===Zi)throw ts;throw a}else r=t;var i=(t=ca()).queue,s=i.dispatch;return n!==t.memoizedState&&(Ks.flags|=2048,Qa(9,{destroy:void 0},Ra.bind(null,i,n),null)),[r,s,e]}function Ra(e,t){e.action=t}function Oa(e){var t=ca(),n=Vs;if(null!==n)return Pa(t,n,e);ca(),t=t.memoizedState;var r=(n=ca()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Qa(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Ks.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Ks.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Na(){return ca().memoizedState}function Ma(e,t,n,r){var i=la();Ks.flags|=e,i.memoizedState=Qa(1|t,{destroy:void 0},n,void 0===r?null:r)}function Ha(e,t,n,r){var i=ca();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==Vs&&null!==r&&ta(r,Vs.memoizedState.deps)?i.memoizedState=Qa(t,s,n,r):(Ks.flags|=e,i.memoizedState=Qa(1|t,s,n,r))}function ja(e,t){Ma(8390656,8,e,t)}function $a(e,t){Ha(2048,8,e,t)}function Ka(e){var t=ca().memoizedState;return function(e){Ks.flags|=4;var t=Ks.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Ks.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(2&pl)throw Error(r(440));return t.impl.apply(void 0,arguments)}}function Va(e,t){return Ha(4,2,e,t)}function Ga(e,t){return Ha(4,4,e,t)}function Wa(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function za(e,t,n){n=null!=n?n.concat([e]):null,Ha(4,4,Wa.bind(null,t,e),n)}function Ya(){}function qa(e,t){var n=ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&ta(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xa(e,t){var n=ca();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&ta(t,r[1]))return r[0];if(r=e(),Ys){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function Ja(e,t,n){return void 0===n||1073741824&$s&&!(261930&yl)?e.memoizedState=t:(e.memoizedState=n,e=Yl(),Ks.lanes|=e,Tl|=e,n)}function Za(e,t,n,r){return er(n,t)?n:null!==Is.current?(e=Ja(e,n,r),er(e,t)||(Po=!0),e):42&$s&&(!(1073741824&$s)||261930&yl)?(e=Yl(),Ks.lanes|=e,Tl|=e,t):(Po=!0,e.memoizedState=n)}function eo(e,t,n,r,i){var s=O.p;O.p=0!==s&&8>s?s:8;var a,o,A,l=R.T,c={};R.T=c,ho(e,!1,t,n);try{var u=i(),d=R.S;if(null!==d&&d(c,u),null!==u&&"object"==typeof u&&"function"==typeof u.then){var h=(a=r,o=[],A={status:"pending",value:null,reason:null,then:function(e){o.push(e)}},u.then(function(){A.status="fulfilled",A.value=a;for(var e=0;e<o.length;e++)(0,o[e])(a)},function(e){for(A.status="rejected",A.reason=e,e=0;e<o.length;e++)(0,o[e])(void 0)}),A);uo(e,t,h,zl())}else uo(e,t,r,zl())}catch(f){uo(e,t,{then:function(){},status:"rejected",reason:f},zl())}finally{O.p=s,null!==l&&null!==c.types&&(l.types=c.types),R.T=l}}function to(){}function no(e,t,n,i){if(5!==e.tag)throw Error(r(476));var s=ro(e).queue;eo(e,s,t,Q,null===n?to:function(){return io(e),n(i)})}function ro(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:Q},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function io(e){var t=ro(e);null===t.next&&(t=e.alternate.memoizedState),uo(e,t.next.queue,{},zl())}function so(){return Ui(dd)}function ao(){return ca().memoizedState}function oo(){return ca().memoizedState}function Ao(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=zl(),r=bs(t,e=ws(n),n);return null!==r&&(ql(r,t,n),Es(r,t,n)),t={cache:Hi()},void(e.payload=t)}t=t.return}}function lo(e,t,n){var r=zl();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},fo(e)?po(t,n):null!==(n=Ur(e,t,n,r))&&(ql(n,e,r),go(n,t,r))}function co(e,t,n){uo(e,t,n,zl())}function uo(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(fo(e))po(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,er(o,a))return _r(e,t,i,0),null===gl&&Dr(),!1}catch(A){}if(null!==(n=Ur(e,t,i,r)))return ql(n,e,r),go(n,t,r),!0}return!1}function ho(e,t,n,i){if(i={lane:2,revertLane:Kc(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},fo(e)){if(t)throw Error(r(479))}else null!==(t=Ur(e,n,i,2))&&ql(t,e,2)}function fo(e){var t=e.alternate;return e===Ks||null!==t&&t===Ks}function po(e,t){zs=Ws=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function go(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Re(e,n)}}var mo={readContext:Ui,use:da,useCallback:ea,useContext:ea,useEffect:ea,useImperativeHandle:ea,useLayoutEffect:ea,useInsertionEffect:ea,useMemo:ea,useReducer:ea,useRef:ea,useState:ea,useDebugValue:ea,useDeferredValue:ea,useTransition:ea,useSyncExternalStore:ea,useId:ea,useHostTransitionStatus:ea,useFormState:ea,useActionState:ea,useOptimistic:ea,useMemoCache:ea,useCacheRefresh:ea};mo.useEffectEvent=ea;var yo={readContext:Ui,use:da,useCallback:function(e,t){return la().memoizedState=[e,void 0===t?null:t],e},useContext:Ui,useEffect:ja,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,Ma(4194308,4,Wa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){Ma(4,2,e,t)},useMemo:function(e,t){var n=la();t=void 0===t?null:t;var r=e();if(Ys){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=la();if(void 0!==n){var i=n(t);if(Ys){be(!0);try{n(t)}finally{be(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=lo.bind(null,Ks,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},la().memoizedState=e},useState:function(e){var t=(e=Ca(e)).queue,n=co.bind(null,Ks,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ya,useDeferredValue:function(e,t){return Ja(la(),e,t)},useTransition:function(){var e=Ca(!1);return e=eo.bind(null,Ks,e.queue,!0,!1),la().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Ks,s=la();if(hi){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===gl)throw Error(r(349));127&yl||va(i,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,ja(ba.bind(null,i,a,e),[e]),i.flags|=2048,Qa(9,{destroy:void 0},wa.bind(null,i,a,n,t),null),n},useId:function(){var e=la(),t=gl.identifierPrefix;if(hi){var n=si;t="_"+t+"R_"+(n=(ii&~(1<<32-Ee(ii)-1)).toString(32)+n),0<(n=qs++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Zs++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:so,useFormState:_a,useActionState:_a,useOptimistic:function(e){var t=la();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ho.bind(null,Ks,!0,n),n.dispatch=t,[e,t]},useMemoCache:ha,useCacheRefresh:function(){return la().memoizedState=Ao.bind(null,Ks)},useEffectEvent:function(e){var t=la(),n={impl:e};return t.memoizedState=n,function(){if(2&pl)throw Error(r(440));return n.impl.apply(void 0,arguments)}}},vo={readContext:Ui,use:da,useCallback:qa,useContext:Ui,useEffect:$a,useImperativeHandle:za,useInsertionEffect:Va,useLayoutEffect:Ga,useMemo:Xa,useReducer:pa,useRef:Na,useState:function(){return pa(fa)},useDebugValue:Ya,useDeferredValue:function(e,t){return Za(ca(),Vs.memoizedState,e,t)},useTransition:function(){var e=pa(fa)[0],t=ca().memoizedState;return["boolean"==typeof e?e:ua(e),t]},useSyncExternalStore:ya,useId:ao,useHostTransitionStatus:so,useFormState:Ua,useActionState:Ua,useOptimistic:function(e,t){return Sa(ca(),0,e,t)},useMemoCache:ha,useCacheRefresh:oo};vo.useEffectEvent=Ka;var wo={readContext:Ui,use:da,useCallback:qa,useContext:Ui,useEffect:$a,useImperativeHandle:za,useInsertionEffect:Va,useLayoutEffect:Ga,useMemo:Xa,useReducer:ma,useRef:Na,useState:function(){return ma(fa)},useDebugValue:Ya,useDeferredValue:function(e,t){var n=ca();return null===Vs?Ja(n,e,t):Za(n,Vs.memoizedState,e,t)},useTransition:function(){var e=ma(fa)[0],t=ca().memoizedState;return["boolean"==typeof e?e:ua(e),t]},useSyncExternalStore:ya,useId:ao,useHostTransitionStatus:so,useFormState:Oa,useActionState:Oa,useOptimistic:function(e,t){var n=ca();return null!==Vs?Sa(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ha,useCacheRefresh:oo};function bo(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:c({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}wo.useEffectEvent=Ka;var Eo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=zl(),i=ws(r);i.payload=t,null!=n&&(i.callback=n),null!==(t=bs(e,i,r))&&(ql(t,e,r),Es(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=zl(),i=ws(r);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=bs(e,i,r))&&(ql(t,e,r),Es(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=zl(),r=ws(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=bs(e,r,n))&&(ql(t,e,n),Es(t,e,n))}};function Bo(e,t,n,r,i,s,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!tr(n,r)||!tr(i,s))}function Co(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Eo.enqueueReplaceState(t,t.state,null)}function So(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=c({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}function To(e){kr(e)}function xo(e){console.error(e)}function ko(e){kr(e)}function Io(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Fo(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Lo(e,t,n){return(n=ws(n)).tag=3,n.payload={element:null},n.callback=function(){Io(e,t)},n}function Do(e){return(e=ws(e)).tag=3,e}function _o(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"==typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){Fo(t,n,r)}}var a=n.stateNode;null!==a&&"function"==typeof a.componentDidCatch&&(e.callback=function(){Fo(t,n,r),"function"!=typeof i&&(null===Ql?Ql=new Set([this]):Ql.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Uo=Error(r(461)),Po=!1;function Ro(e,t,n,r){t.child=null===e?gs(t,null,n,r):ps(t,e.child,n,r)}function Oo(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return _i(t),r=na(e,t,n,a,s,i),o=aa(),null===e||Po?(hi&&o&&Ai(t),t.flags|=1,Ro(e,t,r,i),t.child):(oa(e,t,i),aA(e,t,i))}function Qo(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||Hr(s)||void 0!==s.defaultProps||null!==n.compare?((e=Kr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,No(e,t,s,r,i))}if(s=e.child,!oA(e,i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:tr)(a,r)&&e.ref===t.ref)return aA(e,t,i)}return t.flags|=1,(e=jr(s,r)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(tr(s,r)&&e.ref===t.ref){if(Po=!1,t.pendingProps=r=s,!oA(e,i))return t.lanes=e.lanes,aA(e,t,i);131072&e.flags&&(Po=!0)}}return Go(e,t,n,r,i)}function Mo(e,t,n,r){var i=r.children,s=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(128&t.flags){if(s=null!==s?s.baseLanes|n:n,null!==e){for(r=t.child=e.child,i=0;null!==r;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~s}else r=0,t.child=null;return jo(e,t,s,n,r)}if(!(536870912&n))return r=t.lanes=536870912,jo(e,t,null!==s?s.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Xi(0,null!==s?s.cachePool:null),null!==s?Ls(t,s):Ds(),Qs(t)}else null!==s?(Xi(0,s.cachePool),Ls(t,s),Ns(),t.memoizedState=null):(null!==e&&Xi(0,null),Ds(),Ns());return Ro(e,t,i,n),t.child}function Ho(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function jo(e,t,n,r,i){var s=qi();return s=null===s?null:{parent:Mi._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Xi(0,null),Ds(),Qs(t),null!==e&&Li(e,t,r,!0),t.childLanes=i,null}function $o(e,t){return(t=tA({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Ko(e,t,n){return ps(t,e.child,null,n),(e=$o(t,t.pendingProps)).flags|=2,Ms(t),t.memoizedState=null,e}function Vo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(r(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Go(e,t,n,r,i){return _i(t),n=na(e,t,n,r,void 0,i),r=aa(),null===e||Po?(hi&&r&&Ai(t),t.flags|=1,Ro(e,t,n,i),t.child):(oa(e,t,i),aA(e,t,i))}function Wo(e,t,n,r,i,s){return _i(t),t.updateQueue=null,n=ia(t,r,n,i),ra(e),r=aa(),null===e||Po?(hi&&r&&Ai(t),t.flags|=1,Ro(e,t,n,s),t.child):(oa(e,t,s),aA(e,t,s))}function zo(e,t,n,r,i){if(_i(t),null===t.stateNode){var s=Qr,a=n.contextType;"object"==typeof a&&null!==a&&(s=Ui(a)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=Eo,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},ys(t),a=n.contextType,s.context="object"==typeof a&&null!==a?Ui(a):Qr,s.state=t.memoizedState,"function"==typeof(a=n.getDerivedStateFromProps)&&(bo(t,n,a,r),s.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(a=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),a!==s.state&&Eo.enqueueReplaceState(s,s.state,null),Ts(t,r,s,i),Ss(),s.state=t.memoizedState),"function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,A=So(n,o);s.props=A;var l=s.context,c=n.contextType;a=Qr,"object"==typeof c&&null!==c&&(a=Ui(c));var u=n.getDerivedStateFromProps;c="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,c||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o||l!==a)&&Co(t,s,r,a),ms=!1;var d=t.memoizedState;s.state=d,Ts(t,r,s,i),Ss(),l=t.memoizedState,o||d!==l||ms?("function"==typeof u&&(bo(t,n,u,r),l=t.memoizedState),(A=ms||Bo(t,n,A,r,d,l,a))?(c||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=a,r=A):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,vs(e,t),c=So(n,a=t.memoizedProps),s.props=c,u=t.pendingProps,d=s.context,l=n.contextType,A=Qr,"object"==typeof l&&null!==l&&(A=Ui(l)),(l="function"==typeof(o=n.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==u||d!==A)&&Co(t,s,r,A),ms=!1,d=t.memoizedState,s.state=d,Ts(t,r,s,i),Ss();var h=t.memoizedState;a!==u||d!==h||ms||null!==e&&null!==e.dependencies&&Di(e.dependencies)?("function"==typeof o&&(bo(t,n,o,r),h=t.memoizedState),(c=ms||Bo(t,n,c,r,d,h,A)||null!==e&&null!==e.dependencies&&Di(e.dependencies))?(l||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,h,A),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,h,A)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),s.props=r,s.state=h,s.context=A,r=c):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Vo(e,t),r=!!(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=ps(t,e.child,null,i),t.child=ps(t,null,n,i)):Ro(e,t,n,i),t.memoizedState=s.state,e=t.child):e=aA(e,t,i),e}function Yo(e,t,n,r){return bi(),t.flags|=256,Ro(e,t,n,r),t.child}var qo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xo(e){return{baseLanes:e,cachePool:Ji()}}function Jo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Il),e}function Zo(e,t,n){var i,s=t.pendingProps,a=!1,o=!!(128&t.flags);if((i=o)||(i=(null===e||null!==e.memoizedState)&&!!(2&Hs.current)),i&&(a=!0,t.flags&=-129),i=!!(32&t.flags),t.flags&=-33,null===e){if(hi){if(a?Rs(t):Ns(),(e=di)?null!==(e=null!==(e=Du(e,pi))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ri?{id:ii,overflow:si}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,ui=t,di=null):e=null,null===e)throw mi(t);return Uu(e)?t.lanes=32:t.lanes=536870912,null}var A=s.children;return s=s.fallback,a?(Ns(),A=tA({mode:"hidden",children:A},a=t.mode),s=Vr(s,a,n,null),A.return=t,s.return=t,A.sibling=s,t.child=A,(s=t.child).memoizedState=Xo(n),s.childLanes=Jo(e,i,n),t.memoizedState=qo,Ho(null,s)):(Rs(t),eA(t,A))}var l=e.memoizedState;if(null!==l&&null!==(A=l.dehydrated)){if(o)256&t.flags?(Rs(t),t.flags&=-257,t=nA(e,t,n)):null!==t.memoizedState?(Ns(),t.child=e.child,t.flags|=128,t=null):(Ns(),A=s.fallback,a=t.mode,s=tA({mode:"visible",children:s.children},a),(A=Vr(A,a,n,null)).flags|=2,s.return=t,A.return=t,s.sibling=A,t.child=s,ps(t,e.child,null,n),(s=t.child).memoizedState=Xo(n),s.childLanes=Jo(e,i,n),t.memoizedState=qo,t=Ho(null,s));else if(Rs(t),Uu(A)){if(i=A.nextSibling&&A.nextSibling.dataset)var c=i.dgst;i=c,(s=Error(r(419))).stack="",s.digest=i,Bi({value:s,source:null,stack:null}),t=nA(e,t,n)}else if(Po||Li(e,t,n,!1),i=0!==(n&e.childLanes),Po||i){if(null!==(i=gl)&&(0!==(s=Oe(i,n))&&s!==l.retryLane))throw l.retryLane=s,Pr(e,s),ql(i,e,s),Uo;_u(A)||Ac(),t=nA(e,t,n)}else _u(A)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,di=Pu(A.nextSibling),ui=t,hi=!0,fi=null,pi=!1,null!==e&&ci(t,e),(t=eA(t,s.children)).flags|=4096);return t}return a?(Ns(),A=s.fallback,a=t.mode,c=(l=e.child).sibling,(s=jr(l,{mode:"hidden",children:s.children})).subtreeFlags=65011712&l.subtreeFlags,null!==c?A=jr(c,A):(A=Vr(A,a,n,null)).flags|=2,A.return=t,s.return=t,s.sibling=A,t.child=s,Ho(null,s),s=t.child,null===(A=e.child.memoizedState)?A=Xo(n):(null!==(a=A.cachePool)?(l=Mi._currentValue,a=a.parent!==l?{parent:l,pool:l}:a):a=Ji(),A={baseLanes:A.baseLanes|n,cachePool:a}),s.memoizedState=A,s.childLanes=Jo(e,i,n),t.memoizedState=qo,Ho(e.child,s)):(Rs(t),e=(n=e.child).sibling,(n=jr(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function eA(e,t){return(t=tA({mode:"visible",children:t},e.mode)).return=e,e.child=t}function tA(e,t){return(e=Mr(22,e,null,t)).lanes=0,e}function nA(e,t,n){return ps(t,e.child,null,n),(e=eA(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function rA(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ii(e.return,t,n)}function iA(e,t,n,r,i,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.treeForkCount=s)}function sA(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;r=r.children;var a=Hs.current,o=!!(2&a);if(o?(a=1&a|2,t.flags|=128):a&=1,$(Hs,a),Ro(e,t,r,n),r=hi?ei:0,!o&&null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&rA(e,n,t);else if(19===e.tag)rA(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===js(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),iA(t,!1,i,n,s,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===js(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}iA(t,!0,n,null,s,r);break;case"together":iA(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function aA(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Tl|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Li(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=jr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=jr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function oA(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Di(e))}function AA(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Po=!0;else{if(!(oA(e,n)||128&t.flags))return Po=!1,function(e,t,n){switch(t.tag){case 3:q(t,t.stateNode.containerInfo),xi(0,Mi,e.memoizedState.cache),bi();break;case 27:case 5:J(t);break;case 4:q(t,t.stateNode.containerInfo);break;case 10:xi(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Os(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Rs(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Zo(e,t,n):(Rs(t),null!==(e=aA(e,t,n))?e.sibling:null);Rs(t);break;case 19:var i=!!(128&e.flags);if((r=0!==(n&t.childLanes))||(Li(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return sA(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),$(Hs,Hs.current),r)break;return null;case 22:return t.lanes=0,Mo(e,t,n,t.pendingProps);case 24:xi(0,Mi,e.memoizedState.cache)}return aA(e,t,n)}(e,t,n);Po=!!(131072&e.flags)}else Po=!1,hi&&1048576&t.flags&&oi(t,ei,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=ss(t.elementType),t.type=e,"function"!=typeof e){if(null!=e){var s=e.$$typeof;if(s===E){t.tag=11,t=Oo(null,t,e,i,n);break e}if(s===T){t.tag=14,t=Qo(null,t,e,i,n);break e}}throw t=U(e)||e,Error(r(306,t,""))}Hr(e)?(i=So(e,i),t.tag=1,t=zo(null,t,e,i,n)):(t.tag=0,t=Go(null,t,e,i,n))}return t;case 0:return Go(e,t,t.type,t.pendingProps,n);case 1:return zo(e,t,i=t.type,s=So(i,t.pendingProps),n);case 3:e:{if(q(t,t.stateNode.containerInfo),null===e)throw Error(r(387));i=t.pendingProps;var a=t.memoizedState;s=a.element,vs(e,t),Ts(t,i,null,n);var o=t.memoizedState;if(i=o.cache,xi(0,Mi,i),i!==a.cache&&Fi(t,[Mi],n,!0),Ss(),i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Yo(e,t,i,n);break e}if(i!==s){Bi(s=qr(Error(r(424)),t)),t=Yo(e,t,i,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(di=Pu(e.firstChild),ui=t,hi=!0,fi=null,pi=!0,n=gs(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(bi(),i===s){t=aA(e,t,n);break e}Ro(e,t,i,n)}t=t.child}return t;case 26:return Vo(e,t),null===e?(n=Wu(t.type,null,t.pendingProps,null))?t.memoizedState=n:hi||(n=t.type,e=t.pendingProps,(i=yu(z.current).createElement(n))[$e]=t,i[Ke]=e,fu(i,n,e),nt(i),t.stateNode=i):t.memoizedState=Wu(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return J(t),null===e&&hi&&(i=t.stateNode=Nu(t.type,t.pendingProps,z.current),ui=t,pi=!0,s=di,ku(t.type)?(Ru=s,di=Pu(i.firstChild)):di=s),Ro(e,t,t.pendingProps.children,n),Vo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&hi&&((s=i=di)&&(null!==(i=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=Pu(e.nextSibling)))break}return null}(i,t.type,t.pendingProps,pi))?(t.stateNode=i,ui=t,di=Pu(i.firstChild),pi=!1,s=!0):s=!1),s||mi(t)),J(t),s=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,i=a.children,bu(s,a)?i=null:null!==o&&bu(s,o)&&(t.flags|=32),null!==t.memoizedState&&(s=na(e,t,sa,null,null,n),dd._currentValue=s),Vo(e,t),Ro(e,t,i,n),t.child;case 6:return null===e&&hi&&((e=n=di)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Pu(e.nextSibling)))return null}return e}(n,t.pendingProps,pi))?(t.stateNode=n,ui=t,di=null,e=!0):e=!1),e||mi(t)),null;case 13:return Zo(e,t,n);case 4:return q(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ps(t,null,i,n):Ro(e,t,i,n),t.child;case 11:return Oo(e,t,t.type,t.pendingProps,n);case 7:return Ro(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ro(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,xi(0,t.type,i.value),Ro(e,t,i.children,n),t.child;case 9:return s=t.type._context,i=t.pendingProps.children,_i(t),i=i(s=Ui(s)),t.flags|=1,Ro(e,t,i,n),t.child;case 14:return Qo(e,t,t.type,t.pendingProps,n);case 15:return No(e,t,t.type,t.pendingProps,n);case 19:return sA(e,t,n);case 31:return function(e,t,n){var i=t.pendingProps,s=!!(128&t.flags);if(t.flags&=-129,null===e){if(hi){if("hidden"===i.mode)return e=$o(t,i),t.lanes=536870912,Ho(null,e);if(Os(t),(e=di)?null!==(e=null!==(e=Du(e,pi))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ri?{id:ii,overflow:si}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,ui=t,di=null):e=null,null===e)throw mi(t);return t.lanes=536870912,null}return $o(t,i)}var a=e.memoizedState;if(null!==a){var o=a.dehydrated;if(Os(t),s)if(256&t.flags)t.flags&=-257,t=Ko(e,t,n);else{if(null===t.memoizedState)throw Error(r(558));t.child=e.child,t.flags|=128,t=null}else if(Po||Li(e,t,n,!1),s=0!==(n&e.childLanes),Po||s){if(null!==(i=gl)&&0!==(o=Oe(i,n))&&o!==a.retryLane)throw a.retryLane=o,Pr(e,o),ql(i,e,o),Uo;Ac(),t=Ko(e,t,n)}else e=a.treeContext,di=Pu(o.nextSibling),ui=t,hi=!0,fi=null,pi=!1,null!==e&&ci(t,e),(t=$o(t,i)).flags|=4096;return t}return(e=jr(e.child,{mode:i.mode,children:i.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Mo(e,t,n,t.pendingProps);case 24:return _i(t),i=Ui(Mi),null===e?(null===(s=qi())&&(s=gl,a=Hi(),s.pooledCache=a,a.refCount++,null!==a&&(s.pooledCacheLanes|=n),s=a),t.memoizedState={parent:i,cache:s},ys(t),xi(0,Mi,s)):(0!==(e.lanes&n)&&(vs(e,t),Ts(t,null,null,n),Ss()),s=e.memoizedState,a=t.memoizedState,s.parent!==i?(s={parent:i,cache:i},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),xi(0,Mi,i)):(i=a.cache,xi(0,Mi,i),i!==s.cache&&Fi(t,[Mi],n,!0))),Ro(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function lA(e){e.flags|=4}function cA(e,t,n,r,i){if((t=!!(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&i)===i)if(e.stateNode.complete)e.flags|=8192;else{if(!sc())throw as=ns,es;e.flags|=8192}}else e.flags&=-16777217}function uA(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!ad(t)){if(!sc())throw as=ns,es;e.flags|=8192}}function dA(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?De():536870912,e.lanes|=t,Fl|=t)}function hA(e,t){if(!hi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function fA(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pA(e,t,n){var i=t.pendingProps;switch(li(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return fA(t),null;case 3:return n=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ki(Mi),X(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(wi(t)?lA(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,Ei())),fA(t),null;case 26:var s=t.type,a=t.memoizedState;return null===e?(lA(t),null!==a?(fA(t),uA(t,a)):(fA(t),cA(t,s,0,0,n))):a?a!==e.memoizedState?(lA(t),fA(t),uA(t,a)):(fA(t),t.flags&=-16777217):((e=e.memoizedProps)!==i&&lA(t),fA(t),cA(t,s,0,0,n)),null;case 27:if(Z(t),n=z.current,s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&lA(t);else{if(!i){if(null===t.stateNode)throw Error(r(166));return fA(t),null}e=G.current,wi(t)?yi(t):(e=Nu(s,i,n),t.stateNode=e,lA(t))}return fA(t),null;case 5:if(Z(t),s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&lA(t);else{if(!i){if(null===t.stateNode)throw Error(r(166));return fA(t),null}if(a=G.current,wi(t))yi(t);else{var o=yu(z.current);switch(a){case 1:a=o.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:a=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":a=o.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":a=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":(a=o.createElement("div")).innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a="string"==typeof i.is?o.createElement("select",{is:i.is}):o.createElement("select"),i.multiple?a.multiple=!0:i.size&&(a.size=i.size);break;default:a="string"==typeof i.is?o.createElement(s,{is:i.is}):o.createElement(s)}}a[$e]=t,a[Ke]=i;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)a.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=a;e:switch(fu(a,s,i),s){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&lA(t)}}return fA(t),cA(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==i&&lA(t);else{if("string"!=typeof i&&null===t.stateNode)throw Error(r(166));if(e=z.current,wi(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,null!==(s=ui))switch(s.tag){case 27:case 5:i=s.memoizedProps}e[$e]=t,(e=!!(e.nodeValue===n||null!==i&&!0===i.suppressHydrationWarning||uu(e.nodeValue,n)))||mi(t,!0)}else(e=yu(e).createTextNode(i))[$e]=t,t.stateNode=e}return fA(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(i=wi(t),null!==n){if(null===e){if(!i)throw Error(r(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(r(557));e[$e]=t}else bi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fA(t),e=!1}else n=Ei(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Ms(t),t):(Ms(t),null);if(128&t.flags)throw Error(r(558))}return fA(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=wi(t),null!==i&&null!==i.dehydrated){if(null===e){if(!s)throw Error(r(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(r(317));s[$e]=t}else bi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fA(t),s=!1}else s=Ei(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(Ms(t),t):(Ms(t),null)}return Ms(t),128&t.flags?(t.lanes=n,t):(n=null!==i,e=null!==e&&null!==e.memoizedState,n&&(s=null,null!==(i=t.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(s=i.alternate.memoizedState.cachePool.pool),a=null,null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(a=i.memoizedState.cachePool.pool),a!==s&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),dA(t,t.updateQueue),fA(t),null);case 4:return X(),null===e&&tu(t.stateNode.containerInfo),fA(t),null;case 10:return ki(t.type),fA(t),null;case 19:if(j(Hs),null===(i=t.memoizedState))return fA(t),null;if(s=!!(128&t.flags),null===(a=i.rendering))if(s)hA(i,!1);else{if(0!==Sl||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=js(e))){for(t.flags|=128,hA(i,!1),e=a.updateQueue,t.updateQueue=e,dA(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)$r(n,e),n=n.sibling;return $(Hs,1&Hs.current|2),hi&&ai(t,i.treeForkCount),t.child}e=e.sibling}null!==i.tail&&ce()>Rl&&(t.flags|=128,s=!0,hA(i,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=js(a))){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,dA(t,e),hA(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!hi)return fA(t),null}else 2*ce()-i.renderingStartTime>Rl&&536870912!==n&&(t.flags|=128,s=!0,hA(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=i.last)?e.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ce(),e.sibling=null,n=Hs.current,$(Hs,s?1&n|2:1&n),hi&&ai(t,i.treeForkCount),e):(fA(t),null);case 22:case 23:return Ms(t),_s(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?!!(536870912&n)&&!(128&t.flags)&&(fA(t),6&t.subtreeFlags&&(t.flags|=8192)):fA(t),null!==(n=t.updateQueue)&&dA(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),null!==e&&j(Yi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ki(Mi),fA(t),null;case 25:case 30:return null}throw Error(r(156,t.tag))}function gA(e,t){switch(li(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ki(Mi),X(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Z(t),null;case 31:if(null!==t.memoizedState){if(Ms(t),null===t.alternate)throw Error(r(340));bi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Ms(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));bi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return j(Hs),null;case 4:return X(),null;case 10:return ki(t.type),null;case 22:case 23:return Ms(t),_s(),null!==e&&j(Yi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ki(Mi),null;default:return null}}function mA(e,t){switch(li(t),t.tag){case 3:ki(Mi),X();break;case 26:case 27:case 5:Z(t);break;case 4:X();break;case 31:null!==t.memoizedState&&Ms(t);break;case 13:Ms(t);break;case 19:j(Hs);break;case 10:ki(t.type);break;case 22:case 23:Ms(t),_s(),null!==e&&j(Yi);break;case 24:ki(Mi)}}function yA(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,a=n.inst;r=s(),a.destroy=r}n=n.next}while(n!==i)}}catch(o){Sc(t,t.return,o)}}function vA(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,i=t;var A=n,l=o;try{l()}catch(c){Sc(i,A,c)}}}r=r.next}while(r!==s)}}catch(c){Sc(t,t.return,c)}}function wA(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ks(t,n)}catch(r){Sc(e,e.return,r)}}}function bA(e,t,n){n.props=So(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Sc(e,t,r)}}function EA(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(i){Sc(e,t,i)}}function BA(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(i){Sc(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(s){Sc(e,t,s)}else n.current=null}function CA(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){Sc(e,e.return,i)}}function SA(e,t,n){try{var i=e.stateNode;!function(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,a=null,o=null,A=null,l=null,c=null,u=null;for(f in n){var d=n[f];if(n.hasOwnProperty(f)&&null!=d)switch(f){case"checked":case"value":break;case"defaultValue":l=d;default:i.hasOwnProperty(f)||du(e,t,f,null,i,d)}}for(var h in i){var f=i[h];if(d=n[h],i.hasOwnProperty(h)&&(null!=f||null!=d))switch(h){case"type":a=f;break;case"name":s=f;break;case"checked":c=f;break;case"defaultChecked":u=f;break;case"value":o=f;break;case"defaultValue":A=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(r(137,t));break;default:f!==d&&du(e,t,h,f,i,d)}}return void wt(e,o,A,l,c,u,a,s);case"select":for(a in f=o=A=h=null,n)if(l=n[a],n.hasOwnProperty(a)&&null!=l)switch(a){case"value":break;case"multiple":f=l;default:i.hasOwnProperty(a)||du(e,t,a,null,i,l)}for(s in i)if(a=i[s],l=n[s],i.hasOwnProperty(s)&&(null!=a||null!=l))switch(s){case"value":h=a;break;case"defaultValue":A=a;break;case"multiple":o=a;default:a!==l&&du(e,t,s,a,i,l)}return t=A,n=o,i=f,void(null!=h?Bt(e,!!n,h,!1):!!i!=!!n&&(null!=t?Bt(e,!!n,t,!0):Bt(e,!!n,n?[]:"",!1)));case"textarea":for(A in f=h=null,n)if(s=n[A],n.hasOwnProperty(A)&&null!=s&&!i.hasOwnProperty(A))switch(A){case"value":case"children":break;default:du(e,t,A,null,i,s)}for(o in i)if(s=i[o],a=n[o],i.hasOwnProperty(o)&&(null!=s||null!=a))switch(o){case"value":h=s;break;case"defaultValue":f=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(r(91));break;default:s!==a&&du(e,t,o,s,i,a)}return void Ct(e,h,f);case"option":for(var p in n)if(h=n[p],n.hasOwnProperty(p)&&null!=h&&!i.hasOwnProperty(p))if("selected"===p)e.selected=!1;else du(e,t,p,null,i,h);for(l in i)if(h=i[l],f=n[l],i.hasOwnProperty(l)&&h!==f&&(null!=h||null!=f))if("selected"===l)e.selected=h&&"function"!=typeof h&&"symbol"!=typeof h;else du(e,t,l,h,i,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)h=n[g],n.hasOwnProperty(g)&&null!=h&&!i.hasOwnProperty(g)&&du(e,t,g,null,i,h);for(c in i)if(h=i[c],f=n[c],i.hasOwnProperty(c)&&h!==f&&(null!=h||null!=f))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(r(137,t));break;default:du(e,t,c,h,i,f)}return;default:if(Ft(t)){for(var m in n)h=n[m],n.hasOwnProperty(m)&&void 0!==h&&!i.hasOwnProperty(m)&&hu(e,t,m,void 0,i,h);for(u in i)h=i[u],f=n[u],!i.hasOwnProperty(u)||h===f||void 0===h&&void 0===f||hu(e,t,u,h,i,f);return}}for(var y in n)h=n[y],n.hasOwnProperty(y)&&null!=h&&!i.hasOwnProperty(y)&&du(e,t,y,null,i,h);for(d in i)h=i[d],f=n[d],!i.hasOwnProperty(d)||h===f||null==h&&null==f||du(e,t,d,h,i,f)}(i,e.type,n,t),i[Ke]=t}catch(s){Sc(e,e.return,s)}}function TA(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&ku(e.type)||4===e.tag}function xA(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||TA(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&ku(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function kA(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Ut));else if(4!==r&&(27===r&&ku(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(kA(e,t,n),e=e.sibling;null!==e;)kA(e,t,n),e=e.sibling}function IA(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&ku(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(IA(e,t,n),e=e.sibling;null!==e;)IA(e,t,n),e=e.sibling}function FA(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);fu(t,r,n),t[$e]=e,t[Ke]=n}catch(s){Sc(e,e.return,s)}}var LA=!1,DA=!1,_A=!1,UA="function"==typeof WeakSet?WeakSet:Set,PA=null;function RA(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:qA(e,n),4&r&&yA(5,n);break;case 1:if(qA(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){Sc(n,n.return,a)}else{var i=So(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Sc(n,n.return,o)}}64&r&&wA(n),512&r&&EA(n,n.return);break;case 3:if(qA(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{ks(e,t)}catch(a){Sc(n,n.return,a)}}break;case 27:null===t&&4&r&&FA(n);case 26:case 5:qA(e,n),null===t&&4&r&&CA(n),512&r&&EA(n,n.return);break;case 12:qA(e,n);break;case 31:qA(e,n),4&r&&jA(e,n);break;case 13:qA(e,n),4&r&&$A(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Ic.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||LA)){t=null!==t&&null!==t.memoizedState||DA,i=LA;var s=DA;LA=r,(DA=t)&&!s?JA(e,n,!!(8772&n.subtreeFlags)):qA(e,n),LA=i,DA=s}break;case 30:break;default:qA(e,n)}}function OA(e){var t=e.alternate;null!==t&&(e.alternate=null,OA(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Xe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var QA=null,NA=!1;function MA(e,t,n){for(n=n.child;null!==n;)HA(e,t,n),n=n.sibling}function HA(e,t,n){if(we&&"function"==typeof we.onCommitFiberUnmount)try{we.onCommitFiberUnmount(ve,n)}catch(s){}switch(n.tag){case 26:DA||BA(n,t),MA(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:DA||BA(n,t);var r=QA,i=NA;ku(n.type)&&(QA=n.stateNode,NA=!1),MA(e,t,n),Mu(n.stateNode),QA=r,NA=i;break;case 5:DA||BA(n,t);case 6:if(r=QA,i=NA,QA=null,MA(e,t,n),NA=i,null!==(QA=r))if(NA)try{(9===QA.nodeType?QA.body:"HTML"===QA.nodeName?QA.ownerDocument.body:QA).removeChild(n.stateNode)}catch(a){Sc(n,t,a)}else try{QA.removeChild(n.stateNode)}catch(a){Sc(n,t,a)}break;case 18:null!==QA&&(NA?(Iu(9===(e=QA).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Gd(e)):Iu(QA,n.stateNode));break;case 4:r=QA,i=NA,QA=n.stateNode.containerInfo,NA=!0,MA(e,t,n),QA=r,NA=i;break;case 0:case 11:case 14:case 15:vA(2,n,t),DA||vA(4,n,t),MA(e,t,n);break;case 1:DA||(BA(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&bA(n,t,r)),MA(e,t,n);break;case 21:MA(e,t,n);break;case 22:DA=(r=DA)||null!==n.memoizedState,MA(e,t,n),DA=r;break;default:MA(e,t,n)}}function jA(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Gd(e)}catch(n){Sc(t,t.return,n)}}}function $A(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Gd(e)}catch(n){Sc(t,t.return,n)}}function KA(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new UA),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new UA),t;default:throw Error(r(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Fc.bind(null,e,t);t.then(r,r)}})}function VA(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var s=n[i],a=e,o=t,A=o;e:for(;null!==A;){switch(A.tag){case 27:if(ku(A.type)){QA=A.stateNode,NA=!1;break e}break;case 5:QA=A.stateNode,NA=!1;break e;case 3:case 4:QA=A.stateNode.containerInfo,NA=!0;break e}A=A.return}if(null===QA)throw Error(r(160));HA(a,o,s),QA=null,NA=!1,null!==(a=s.alternate)&&(a.return=null),s.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)WA(t,e),t=t.sibling}var GA=null;function WA(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:VA(t,e),zA(e),4&i&&(vA(3,e,e.return),yA(3,e),vA(5,e,e.return));break;case 1:VA(t,e),zA(e),512&i&&(DA||null===n||BA(n,n.return)),64&i&&LA&&(null!==(e=e.updateQueue)&&(null!==(i=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?i:n.concat(i))));break;case 26:var s=GA;if(VA(t,e),zA(e),512&i&&(DA||null===n||BA(n,n.return)),4&i){var a=null!==n?n.memoizedState:null;if(i=e.memoizedState,null===n)if(null===i)if(null===e.stateNode){e:{i=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(i){case"title":(!(a=s.getElementsByTagName("title")[0])||a[qe]||a[$e]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=s.createElement(i),s.head.insertBefore(a,s.querySelector("head > title"))),fu(a,i,n),a[$e]=e,nt(a),i=a;break e;case"link":var o=id("link","href",s).get(i+(n.href||""));if(o)for(var A=0;A<o.length;A++)if((a=o[A]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(A,1);break t}fu(a=s.createElement(i),i,n),s.head.appendChild(a);break;case"meta":if(o=id("meta","content",s).get(i+(n.content||"")))for(A=0;A<o.length;A++)if((a=o[A]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(A,1);break t}fu(a=s.createElement(i),i,n),s.head.appendChild(a);break;default:throw Error(r(468,i))}a[$e]=e,nt(a),i=a}e.stateNode=i}else sd(s,e.type,e.stateNode);else e.stateNode=Zu(s,i,e.memoizedProps);else a!==i?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===i?sd(s,e.type,e.stateNode):Zu(s,i,e.memoizedProps)):null===i&&null!==e.stateNode&&SA(e,e.memoizedProps,n.memoizedProps)}break;case 27:VA(t,e),zA(e),512&i&&(DA||null===n||BA(n,n.return)),null!==n&&4&i&&SA(e,e.memoizedProps,n.memoizedProps);break;case 5:if(VA(t,e),zA(e),512&i&&(DA||null===n||BA(n,n.return)),32&e.flags){s=e.stateNode;try{Tt(s,"")}catch(p){Sc(e,e.return,p)}}4&i&&null!=e.stateNode&&SA(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&i&&(_A=!0);break;case 6:if(VA(t,e),zA(e),4&i){if(null===e.stateNode)throw Error(r(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(p){Sc(e,e.return,p)}}break;case 3:if(rd=null,s=GA,GA=$u(t.containerInfo),VA(t,e),GA=s,zA(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Gd(t.containerInfo)}catch(p){Sc(e,e.return,p)}_A&&(_A=!1,YA(e));break;case 4:i=GA,GA=$u(e.stateNode.containerInfo),VA(t,e),zA(e),GA=i;break;case 12:default:VA(t,e),zA(e);break;case 31:case 19:VA(t,e),zA(e),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,KA(e,i)));break;case 13:VA(t,e),zA(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(Ul=ce()),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,KA(e,i)));break;case 22:s=null!==e.memoizedState;var l=null!==n&&null!==n.memoizedState,c=LA,u=DA;if(LA=c||s,DA=u||l,VA(t,e),DA=u,LA=c,zA(e),8192&i)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||l||LA||DA||XA(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){l=n=t;try{if(a=l.stateNode,s)"function"==typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{A=l.stateNode;var d=l.memoizedProps.style,h=null!=d&&d.hasOwnProperty("display")?d.display:null;A.style.display=null==h||"boolean"==typeof h?"":(""+h).trim()}}catch(p){Sc(l,l.return,p)}}}else if(6===t.tag){if(null===n){l=t;try{l.stateNode.nodeValue=s?"":l.memoizedProps}catch(p){Sc(l,l.return,p)}}}else if(18===t.tag){if(null===n){l=t;try{var f=l.stateNode;s?Fu(f,!0):Fu(l.stateNode,!1)}catch(p){Sc(l,l.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&i&&(null!==(i=e.updateQueue)&&(null!==(n=i.retryQueue)&&(i.retryQueue=null,KA(e,n))));case 30:case 21:}}function zA(e){var t=e.flags;if(2&t){try{for(var n,i=e.return;null!==i;){if(TA(i)){n=i;break}i=i.return}if(null==n)throw Error(r(160));switch(n.tag){case 27:var s=n.stateNode;IA(e,xA(e),s);break;case 5:var a=n.stateNode;32&n.flags&&(Tt(a,""),n.flags&=-33),IA(e,xA(e),a);break;case 3:case 4:var o=n.stateNode.containerInfo;kA(e,xA(e),o);break;default:throw Error(r(161))}}catch(A){Sc(e,e.return,A)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function YA(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;YA(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function qA(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)RA(e,t.alternate,t),t=t.sibling}function XA(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vA(4,t,t.return),XA(t);break;case 1:BA(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&bA(t,t.return,n),XA(t);break;case 27:Mu(t.stateNode);case 26:case 5:BA(t,t.return),XA(t);break;case 22:null===t.memoizedState&&XA(t);break;default:XA(t)}e=e.sibling}}function JA(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:JA(i,s,n),yA(4,s);break;case 1:if(JA(i,s,n),"function"==typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(l){Sc(r,r.return,l)}if(null!==(i=(r=s).updateQueue)){var o=r.stateNode;try{var A=i.shared.hiddenCallbacks;if(null!==A)for(i.shared.hiddenCallbacks=null,i=0;i<A.length;i++)xs(A[i],o)}catch(l){Sc(r,r.return,l)}}n&&64&a&&wA(s),EA(s,s.return);break;case 27:FA(s);case 26:case 5:JA(i,s,n),n&&null===r&&4&a&&CA(s),EA(s,s.return);break;case 12:JA(i,s,n);break;case 31:JA(i,s,n),n&&4&a&&jA(i,s);break;case 13:JA(i,s,n),n&&4&a&&$A(i,s);break;case 22:null===s.memoizedState&&JA(i,s,n),EA(s,s.return);break;case 30:break;default:JA(i,s,n)}t=t.sibling}}function ZA(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&ji(n))}function el(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&ji(e))}function tl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)nl(e,t,n,r),t=t.sibling}function nl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:tl(e,t,n,r),2048&i&&yA(9,t);break;case 1:case 31:case 13:default:tl(e,t,n,r);break;case 3:tl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&ji(e)));break;case 12:if(2048&i){tl(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,o=s.onPostCommit;"function"==typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(A){Sc(t,t.return,A)}}else tl(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,null!==t.memoizedState?2&s._visibility?tl(e,t,n,r):il(e,t):2&s._visibility?tl(e,t,n,r):(s._visibility|=2,rl(e,t,n,r,!!(10256&t.subtreeFlags)||!1)),2048&i&&ZA(a,t);break;case 24:tl(e,t,n,r),2048&i&&el(t.alternate,t)}}function rl(e,t,n,r,i){for(i=i&&(!!(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var s=e,a=t,o=n,A=r,l=a.flags;switch(a.tag){case 0:case 11:case 15:rl(s,a,o,A,i),yA(8,a);break;case 23:break;case 22:var c=a.stateNode;null!==a.memoizedState?2&c._visibility?rl(s,a,o,A,i):il(s,a):(c._visibility|=2,rl(s,a,o,A,i)),i&&2048&l&&ZA(a.alternate,a);break;case 24:rl(s,a,o,A,i),i&&2048&l&&el(a.alternate,a);break;default:rl(s,a,o,A,i)}t=t.sibling}}function il(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:il(n,r),2048&i&&ZA(r.alternate,r);break;case 24:il(n,r),2048&i&&el(r.alternate,r);break;default:il(n,r)}t=t.sibling}}var sl=8192;function al(e,t,n){if(e.subtreeFlags&sl)for(e=e.child;null!==e;)ol(e,t,n),e=e.sibling}function ol(e,t,n){switch(e.tag){case 26:al(e,t,n),e.flags&sl&&null!==e.memoizedState&&function(e,t,n,r){if(!("stylesheet"!==n.type||"string"==typeof r.media&&!1===matchMedia(r.media).matches||4&n.state.loading)){if(null===n.instance){var i=zu(r.href),s=t.querySelector(Yu(i));if(s)return null!==(t=s._p)&&"object"==typeof t&&"function"==typeof t.then&&(e.count++,e=Ad.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,void nt(s);s=t.ownerDocument||t,r=qu(r),(i=Hu.get(i))&&td(r,i),nt(s=s.createElement("link"));var a=s;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),fu(s,"link",r),n.instance=s}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(3&n.state.loading)&&(e.count++,n=Ad.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,GA,e.memoizedState,e.memoizedProps);break;case 5:default:al(e,t,n);break;case 3:case 4:var r=GA;GA=$u(e.stateNode.containerInfo),al(e,t,n),GA=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=sl,sl=16777216,al(e,t,n),sl=r):al(e,t,n))}}function Al(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function ll(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];PA=r,dl(r,e)}Al(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)cl(e),e=e.sibling}function cl(e){switch(e.tag){case 0:case 11:case 15:ll(e),2048&e.flags&&vA(9,e,e.return);break;case 3:case 12:default:ll(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,ul(e)):ll(e)}}function ul(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];PA=r,dl(r,e)}Al(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:vA(8,t,t.return),ul(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,ul(t));break;default:ul(t)}e=e.sibling}}function dl(e,t){for(;null!==PA;){var n=PA;switch(n.tag){case 0:case 11:case 15:vA(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:ji(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,PA=r;else e:for(n=e;null!==PA;){var i=(r=PA).sibling,s=r.return;if(OA(r),r===n){PA=null;break e}if(null!==i){i.return=s,PA=i;break e}PA=s}}}var hl={getCacheForType:function(e){var t=Ui(Mi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ui(Mi).controller.signal}},fl="function"==typeof WeakMap?WeakMap:Map,pl=0,gl=null,ml=null,yl=0,vl=0,wl=null,bl=!1,El=!1,Bl=!1,Cl=0,Sl=0,Tl=0,xl=0,kl=0,Il=0,Fl=0,Ll=null,Dl=null,_l=!1,Ul=0,Pl=0,Rl=1/0,Ol=null,Ql=null,Nl=0,Ml=null,Hl=null,jl=0,$l=0,Kl=null,Vl=null,Gl=0,Wl=null;function zl(){return 2&pl&&0!==yl?yl&-yl:null!==R.T?Kc():Me()}function Yl(){if(0===Il)if(536870912&yl&&!hi)Il=536870912;else{var e=Te;!(3932160&(Te<<=1))&&(Te=262144),Il=e}return null!==(e=Us.current)&&(e.flags|=32),Il}function ql(e,t,n){(e!==gl||2!==vl&&9!==vl)&&null===e.cancelPendingCommit||(rc(e,0),ec(e,yl,Il,!1)),Ue(e,n),2&pl&&e===gl||(e===gl&&(!(2&pl)&&(xl|=n),4===Sl&&ec(e,yl,Il,!1)),Oc(e))}function Xl(e,t,n){if(6&pl)throw Error(r(327));for(var i=!n&&!(127&t)&&0===(t&e.expiredLanes)||Fe(e,t),s=i?function(e,t){var n=pl;pl|=2;var i=ac(),s=oc();gl!==e||yl!==t?(Ol=null,Rl=ce()+500,rc(e,t)):El=Fe(e,t);e:for(;;)try{if(0!==vl&&null!==ml){t=ml;var a=wl;t:switch(vl){case 1:vl=0,wl=null,fc(e,t,a,1);break;case 2:case 9:if(rs(a)){vl=0,wl=null,hc(t);break}t=function(){2!==vl&&9!==vl||gl!==e||(vl=7),Oc(e)},a.then(t,t);break e;case 3:vl=7;break e;case 4:vl=5;break e;case 7:rs(a)?(vl=0,wl=null,hc(t)):(vl=0,wl=null,fc(e,t,a,7));break;case 5:var o=null;switch(ml.tag){case 26:o=ml.memoizedState;case 5:case 27:var A=ml;if(o?ad(o):A.stateNode.complete){vl=0,wl=null;var l=A.sibling;if(null!==l)ml=l;else{var c=A.return;null!==c?(ml=c,pc(c)):ml=null}break t}}vl=0,wl=null,fc(e,t,a,5);break;case 6:vl=0,wl=null,fc(e,t,a,6);break;case 8:nc(),Sl=6;break e;default:throw Error(r(462))}}uc();break}catch(u){ic(e,u)}return Ti=Si=null,R.H=i,R.A=s,pl=n,null!==ml?0:(gl=null,yl=0,Dr(),Sl)}(e,t):lc(e,t,!0),a=i;;){if(0===s){El&&!i&&ec(e,t,0,!1);break}if(n=e.current.alternate,!a||Zl(n)){if(2===s){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var A=e;s=Ll;var l=A.current.memoizedState.isDehydrated;if(l&&(rc(A,o).flags|=256),2!==(o=lc(A,o,!1))){if(Bl&&!l){A.errorRecoveryDisabledLanes|=a,xl|=a,s=4;break e}a=Dl,Dl=s,null!==a&&(null===Dl?Dl=a:Dl.push.apply(Dl,a))}s=o}if(a=!1,2!==s)continue}}if(1===s){rc(e,0),ec(e,t,0,!0);break}e:{switch(i=e,a=s){case 0:case 1:throw Error(r(345));case 4:if((4194048&t)!==t)break;case 6:ec(i,t,Il,!bl);break e;case 2:Dl=null;break;case 3:case 5:break;default:throw Error(r(329))}if((62914560&t)===t&&10<(s=Ul+300-ce())){if(ec(i,t,Il,!bl),0!==Ie(i,0,!0))break e;jl=t,i.timeoutHandle=Bu(Jl.bind(null,i,n,Dl,Ol,_l,t,Il,xl,Fl,bl,a,"Throttled",-0,0),s)}else Jl(i,n,Dl,Ol,_l,t,Il,xl,Fl,bl,a,null,-0,0)}break}s=lc(e,t,!1),a=!1}Oc(e)}function Jl(e,t,n,r,i,s,a,o,A,l,c,u,d,h){if(e.timeoutHandle=-1,8192&(u=t.subtreeFlags)||!(16785408&~u)){ol(t,s,u={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ut});var f=(62914560&s)===s?Ul-ce():(4194048&s)===s?Pl-ce():0;if(f=function(e,t){return e.stylesheets&&0===e.count&&cd(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&cd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===od&&(od=62500*function(){if("function"==typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var i=n[r],s=i.transferSize,a=i.initiatorType,o=i.duration;if(s&&o&&pu(a)){for(a=0,o=i.responseEnd,r+=1;r<n.length;r++){var A=n[r],l=A.startTime;if(l>o)break;var c=A.transferSize,u=A.initiatorType;c&&pu(u)&&(a+=c*((A=A.responseEnd)<o?1:(o-l)/(A-l)))}if(--r,t+=8*(s+a)/(i.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"==typeof(e=navigator.connection.downlink)?e:5}());var i=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&cd(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>od?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}(u,f),null!==f)return jl=s,e.cancelPendingCommit=f(mc.bind(null,e,t,s,n,r,i,a,o,A,c,u,null,d,h)),void ec(e,s,a,!l)}mc(e,t,s,n,r,i,a,o,A)}function Zl(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!er(s(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ec(e,t,n,r){t&=~kl,t&=~xl,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-Ee(i),a=1<<s;r[s]=-1,i&=~a}0!==n&&Pe(e,n,t)}function tc(){return!!(6&pl)||(Qc(0),!1)}function nc(){if(null!==ml){if(0===vl)var e=ml.return;else Ti=Si=null,Aa(e=ml),ls=null,cs=0,e=ml;for(;null!==e;)mA(e.alternate,e),e=e.return;ml=null}}function rc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Cu(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),jl=0,nc(),gl=e,ml=n=jr(e.current,null),yl=t,vl=0,wl=null,bl=!1,El=Fe(e,t),Bl=!1,Fl=Il=kl=xl=Tl=Sl=0,Dl=Ll=null,_l=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-Ee(r),s=1<<i;t|=e[i],r&=~s}return Cl=t,Dr(),n}function ic(e,t){Ks=null,R.H=mo,t===Zi||t===ts?(t=os(),vl=3):t===es?(t=os(),vl=4):vl=t===Uo?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,wl=t,null===ml&&(Sl=1,Io(e,qr(t,e.current)))}function sc(){var e=Us.current;return null===e||((4194048&yl)===yl?null===Ps:!!((62914560&yl)===yl||536870912&yl)&&e===Ps)}function ac(){var e=R.H;return R.H=mo,null===e?mo:e}function oc(){var e=R.A;return R.A=hl,e}function Ac(){Sl=4,bl||(4194048&yl)!==yl&&null!==Us.current||(El=!0),!(134217727&Tl)&&!(134217727&xl)||null===gl||ec(gl,yl,Il,!1)}function lc(e,t,n){var r=pl;pl|=2;var i=ac(),s=oc();gl===e&&yl===t||(Ol=null,rc(e,t)),t=!1;var a=Sl;e:for(;;)try{if(0!==vl&&null!==ml){var o=ml,A=wl;switch(vl){case 8:nc(),a=6;break e;case 3:case 2:case 9:case 6:null===Us.current&&(t=!0);var l=vl;if(vl=0,wl=null,fc(e,o,A,l),n&&El){a=0;break e}break;default:l=vl,vl=0,wl=null,fc(e,o,A,l)}}cc(),a=Sl;break}catch(c){ic(e,c)}return t&&e.shellSuspendCounter++,Ti=Si=null,pl=r,R.H=i,R.A=s,null===ml&&(gl=null,yl=0,Dr()),a}function cc(){for(;null!==ml;)dc(ml)}function uc(){for(;null!==ml&&!Ae();)dc(ml)}function dc(e){var t=AA(e.alternate,e,Cl);e.memoizedProps=e.pendingProps,null===t?pc(e):ml=t}function hc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Wo(n,t,t.pendingProps,t.type,void 0,yl);break;case 11:t=Wo(n,t,t.pendingProps,t.type.render,t.ref,yl);break;case 5:Aa(t);default:mA(n,t),t=AA(n,t=ml=$r(t,Cl),Cl)}e.memoizedProps=e.pendingProps,null===t?pc(e):ml=t}function fc(e,t,n,i){Ti=Si=null,Aa(t),ls=null,cs=0;var s=t.return;try{if(function(e,t,n,i,s){if(n.flags|=32768,null!==i&&"object"==typeof i&&"function"==typeof i.then){if(null!==(t=n.alternate)&&Li(t,n,s,!0),null!==(n=Us.current)){switch(n.tag){case 31:case 13:return null===Ps?Ac():null===n.alternate&&0===Sl&&(Sl=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===ns?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([i]):t.add(i),Tc(e,i,s)),!1;case 22:return n.flags|=65536,i===ns?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([i]):n.add(i),Tc(e,i,s)),!1}throw Error(r(435,n.tag))}return Tc(e,i,s),Ac(),!1}if(hi)return null!==(t=Us.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,i!==gi&&Bi(qr(e=Error(r(422),{cause:i}),n))):(i!==gi&&Bi(qr(t=Error(r(423),{cause:i}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,i=qr(i,n),Bs(e,s=Lo(e.stateNode,i,s)),4!==Sl&&(Sl=2)),!1;var a=Error(r(520),{cause:i});if(a=qr(a,n),null===Ll?Ll=[a]:Ll.push(a),4!==Sl&&(Sl=2),null===t)return!0;i=qr(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,Bs(n,e=Lo(n.stateNode,i,e)),!1;case 1:if(t=n.type,a=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===a||"function"!=typeof a.componentDidCatch||null!==Ql&&Ql.has(a))))return n.flags|=65536,s&=-s,n.lanes|=s,_o(s=Do(s),e,n,i),Bs(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,yl))return Sl=1,Io(e,qr(n,e.current)),void(ml=null)}catch(a){if(null!==s)throw ml=s,a;return Sl=1,Io(e,qr(n,e.current)),void(ml=null)}32768&t.flags?(hi||1===i?e=!0:El||536870912&yl?e=!1:(bl=e=!0,(2===i||9===i||3===i||6===i)&&(null!==(i=Us.current)&&13===i.tag&&(i.flags|=16384))),gc(t,e)):pc(t)}function pc(e){var t=e;do{if(32768&t.flags)return void gc(t,bl);e=t.return;var n=pA(t.alternate,t,Cl);if(null!==n)return void(ml=n);if(null!==(t=t.sibling))return void(ml=t);ml=t=e}while(null!==t);0===Sl&&(Sl=5)}function gc(e,t){do{var n=gA(e.alternate,e);if(null!==n)return n.flags&=32767,void(ml=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ml=e);ml=e=n}while(null!==e);Sl=6,ml=null}function mc(e,t,n,i,s,a,o,A,l){e.cancelPendingCommit=null;do{Ec()}while(0!==Nl);if(6&pl)throw Error(r(327));if(null!==t){if(t===e.current)throw Error(r(177));if(a=t.lanes|t.childLanes,function(e,t,n,r,i,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,A=e.expirationTimes,l=e.hiddenUpdates;for(n=a&~n;0<n;){var c=31-Ee(n),u=1<<c;o[c]=0,A[c]=-1;var d=l[c];if(null!==d)for(l[c]=null,c=0;c<d.length;c++){var h=d[c];null!==h&&(h.lane&=-536870913)}n&=~u}0!==r&&Pe(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(a&~t))}(e,n,a|=Lr,o,A,l),e===gl&&(ml=gl=null,yl=0),Hl=t,Ml=e,jl=n,$l=a,Kl=s,Vl=i,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,ae(fe,function(){return Bc(),null})):(e.callbackNode=null,e.callbackPriority=0),i=!!(13878&t.flags),13878&t.subtreeFlags||i){i=R.T,R.T=null,s=O.p,O.p=2,o=pl,pl|=4;try{!function(e,t){if(e=e.containerInfo,gu=bd,ar(e=sr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(g){n=null;break e}var o=0,A=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var f;d!==n||0!==s&&3!==d.nodeType||(A=o+s),d!==a||0!==i&&3!==d.nodeType||(l=o+i),3===d.nodeType&&(o+=d.nodeValue.length),null!==(f=d.firstChild);)h=d,d=f;for(;;){if(d===e)break t;if(h===n&&++c===s&&(A=o),h===a&&++u===i&&(l=o),null!==(f=d.nextSibling))break;h=(d=h).parentNode}d=f}n=-1===A||-1===l?null:{start:A,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(mu={focusedElem:e,selectionRange:n},bd=!1,PA=t;null!==PA;)if(e=(t=PA).child,1028&t.subtreeFlags&&null!==e)e.return=t,PA=e;else for(;null!==PA;){switch(a=(t=PA).alternate,e=t.flags,t.tag){case 0:if(4&e&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(s=e[n]).ref.impl=s.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==a){e=void 0,n=t,s=a.memoizedProps,a=a.memoizedState,i=n.stateNode;try{var p=So(n.type,s);e=i.getSnapshotBeforeUpdate(p,a),i.__reactInternalSnapshotBeforeUpdate=e}catch(m){Sc(n,n.return,m)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))Lu(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Lu(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(r(163))}if(null!==(e=t.sibling)){e.return=t.return,PA=e;break}PA=t.return}}(e,t)}finally{pl=o,O.p=s,R.T=i}}Nl=1,yc(),vc(),wc()}}function yc(){if(1===Nl){Nl=0;var e=Ml,t=Hl,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=R.T,R.T=null;var r=O.p;O.p=2;var i=pl;pl|=4;try{WA(t,e);var s=mu,a=sr(e.containerInfo),o=s.focusedElem,A=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&ir(o.ownerDocument.documentElement,o)){if(null!==A&&ar(o)){var l=A.start,c=A.end;if(void 0===c&&(c=l),"selectionStart"in o)o.selectionStart=l,o.selectionEnd=Math.min(c,o.value.length);else{var u=o.ownerDocument||document,d=u&&u.defaultView||window;if(d.getSelection){var h=d.getSelection(),f=o.textContent.length,p=Math.min(A.start,f),g=void 0===A.end?p:Math.min(A.end,f);!h.extend&&p>g&&(a=g,g=p,p=a);var m=rr(o,p),y=rr(o,g);if(m&&y&&(1!==h.rangeCount||h.anchorNode!==m.node||h.anchorOffset!==m.offset||h.focusNode!==y.node||h.focusOffset!==y.offset)){var v=u.createRange();v.setStart(m.node,m.offset),h.removeAllRanges(),p>g?(h.addRange(v),h.extend(y.node,y.offset)):(v.setEnd(y.node,y.offset),h.addRange(v))}}}}for(u=[],h=o;h=h.parentNode;)1===h.nodeType&&u.push({element:h,left:h.scrollLeft,top:h.scrollTop});for("function"==typeof o.focus&&o.focus(),o=0;o<u.length;o++){var w=u[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}bd=!!gu,mu=gu=null}finally{pl=i,O.p=r,R.T=n}}e.current=t,Nl=2}}function vc(){if(2===Nl){Nl=0;var e=Ml,t=Hl,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=R.T,R.T=null;var r=O.p;O.p=2;var i=pl;pl|=4;try{RA(e,t.alternate,t)}finally{pl=i,O.p=r,R.T=n}}Nl=3}}function wc(){if(4===Nl||3===Nl){Nl=0,le();var e=Ml,t=Hl,n=jl,r=Vl;10256&t.subtreeFlags||10256&t.flags?Nl=5:(Nl=0,Hl=Ml=null,bc(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Ql=null),Ne(n),t=t.stateNode,we&&"function"==typeof we.onCommitFiberRoot)try{we.onCommitFiberRoot(ve,t,void 0,!(128&~t.current.flags))}catch(A){}if(null!==r){t=R.T,i=O.p,O.p=2,R.T=null;try{for(var s=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];s(o.value,{componentStack:o.stack})}}finally{R.T=t,O.p=i}}3&jl&&Ec(),Oc(e),i=e.pendingLanes,261930&n&&42&i?e===Wl?Gl++:(Gl=0,Wl=e):Gl=0,Qc(0)}}function bc(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,ji(t)))}function Ec(){return yc(),vc(),wc(),Bc()}function Bc(){if(5!==Nl)return!1;var e=Ml,t=$l;$l=0;var n=Ne(jl),i=R.T,s=O.p;try{O.p=32>n?32:n,R.T=null,n=Kl,Kl=null;var a=Ml,o=jl;if(Nl=0,Hl=Ml=null,jl=0,6&pl)throw Error(r(331));var A=pl;if(pl|=4,cl(a.current),nl(a,a.current,o,n),pl=A,Qc(0,!1),we&&"function"==typeof we.onPostCommitFiberRoot)try{we.onPostCommitFiberRoot(ve,a)}catch(l){}return!0}finally{O.p=s,R.T=i,bc(e,t)}}function Cc(e,t,n){t=qr(n,t),null!==(e=bs(e,t=Lo(e.stateNode,t,2),2))&&(Ue(e,2),Oc(e))}function Sc(e,t,n){if(3===e.tag)Cc(e,e,n);else for(;null!==t;){if(3===t.tag){Cc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ql||!Ql.has(r))){e=qr(n,e),null!==(r=bs(t,n=Do(2),2))&&(_o(n,r,t,e),Ue(r,2),Oc(r));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fl;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(Bl=!0,i.add(n),e=xc.bind(null,e,t,n),t.then(e,e))}function xc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,gl===e&&(yl&n)===n&&(4===Sl||3===Sl&&(62914560&yl)===yl&&300>ce()-Ul?!(2&pl)&&rc(e,0):kl|=n,Fl===yl&&(Fl=0)),Oc(e)}function kc(e,t){0===t&&(t=De()),null!==(e=Pr(e,t))&&(Ue(e,t),Oc(e))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function Fc(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==i&&i.delete(t),kc(e,n)}var Lc=null,Dc=null,_c=!1,Uc=!1,Pc=!1,Rc=0;function Oc(e){e!==Dc&&null===e.next&&(null===Dc?Lc=Dc=e:Dc=Dc.next=e),Uc=!0,_c||(_c=!0,Tu(function(){6&pl?ae(de,Nc):Mc()}))}function Qc(e,t){if(!Pc&&Uc){Pc=!0;do{for(var n=!1,r=Lc;null!==r;){if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var a=r.suspendedLanes,o=r.pingedLanes;s=(1<<31-Ee(42|e)+1)-1,s=201326741&(s&=i&~(a&~o))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,$c(r,s))}else s=yl,!(3&(s=Ie(r,r===gl?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Fe(r,s)||(n=!0,$c(r,s));r=r.next}}while(n);Pc=!1}}function Nc(){Mc()}function Mc(){Uc=_c=!1;var e=0;0!==Rc&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==Eu&&(Eu=e,!0);return Eu=null,!1}()&&(e=Rc);for(var t=ce(),n=null,r=Lc;null!==r;){var i=r.next,s=Hc(r,t);0===s?(r.next=null,null===n?Lc=i:n.next=i,null===i&&(Dc=n)):(n=r,(0!==e||3&s)&&(Uc=!0)),r=i}0!==Nl&&5!==Nl||Qc(e),0!==Rc&&(Rc=0)}function Hc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var a=31-Ee(s),o=1<<a,A=i[a];-1===A?0!==(o&n)&&0===(o&r)||(i[a]=Le(o,t)):A<=t&&(e.expiredLanes|=o),s&=~o}if(n=yl,n=Ie(e,e===(t=gl)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===vl||9===vl)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&oe(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||Fe(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&oe(r),Ne(n)){case 2:case 8:n=he;break;case 32:default:n=fe;break;case 268435456:n=ge}return r=jc.bind(null,e),n=ae(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&oe(r),e.callbackPriority=2,e.callbackNode=null,2}function jc(e,t){if(0!==Nl&&5!==Nl)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=yl;return 0===(r=Ie(e,e===gl?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Xl(e,r,t),Hc(e,ce()),null!=e.callbackNode&&e.callbackNode===n?jc.bind(null,e):null)}function $c(e,t){if(Ec())return null;Xl(e,t,!0)}function Kc(){if(0===Rc){var e=Vi;0===e&&(e=Se,!(261888&(Se<<=1))&&(Se=256)),Rc=e}return Rc}function Vc(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:_t(""+e)}function Gc(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Wc=0;Wc<Tr.length;Wc++){var zc=Tr[Wc];xr(zc.toLowerCase(),"on"+(zc[0].toUpperCase()+zc.slice(1)))}xr(yr,"onAnimationEnd"),xr(vr,"onAnimationIteration"),xr(wr,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(br,"onTransitionRun"),xr(Er,"onTransitionStart"),xr(Br,"onTransitionCancel"),xr(Cr,"onTransitionEnd"),at("onMouseEnter",["mouseout","mouseover"]),at("onMouseLeave",["mouseout","mouseover"]),at("onPointerEnter",["pointerout","pointerover"]),at("onPointerLeave",["pointerout","pointerover"]),st("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),st("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),st("onBeforeInput",["compositionend","keypress","textInput","paste"]),st("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),st("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),st("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yc));function Xc(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],A=o.instance,l=o.currentTarget;if(o=o.listener,A!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=l;try{s(i)}catch(c){kr(c)}i.currentTarget=null,s=A}else for(a=0;a<r.length;a++){if(A=(o=r[a]).instance,l=o.currentTarget,o=o.listener,A!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=l;try{s(i)}catch(c){kr(c)}i.currentTarget=null,s=A}}}}function Jc(e,t){var n=t[Ge];void 0===n&&(n=t[Ge]=new Set);var r=e+"__bubble";n.has(r)||(nu(t,e,2,!1),n.add(r))}function Zc(e,t,n){var r=0;t&&(r|=4),nu(n,e,r,t)}var eu="_reactListening"+Math.random().toString(36).slice(2);function tu(e){if(!e[eu]){e[eu]=!0,rt.forEach(function(t){"selectionchange"!==t&&(qc.has(t)||Zc(t,!1,e),Zc(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[eu]||(t[eu]=!0,Zc("selectionchange",!1,t))}}function nu(e,t,n,r){switch(kd(t)){case 2:var i=Ed;break;case 8:i=Bd;break;default:i=Cd}n=i.bind(null,t,n,e),i=void 0,!Kt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ru(e,t,n,r,i){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var A=r.stateNode.containerInfo;if(A===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==A;){if(null===(o=Je(A)))return;if(5===(l=o.tag)||6===l||26===l||27===l){r=a=o;continue e}A=A.parentNode}}r=r.return}Ht(function(){var r=a,i=Rt(n),o=[];e:{var A=Sr.get(e);if(void 0!==A){var l=sn,c=e;switch(e){case"keypress":if(0===qt(n))break e;case"keydown":case"keyup":l=wn;break;case"focusin":c="focus",l=un;break;case"focusout":c="blur",l=un;break;case"beforeblur":case"afterblur":l=un;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=ln;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=cn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case yr:case vr:case wr:l=dn;break;case Cr:l=Bn;break;case"scroll":case"scrollend":l=on;break;case"wheel":l=Cn;break;case"copy":case"cut":case"paste":l=hn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=bn;break;case"toggle":case"beforetoggle":l=Sn}var u=!!(4&t),d=!u&&("scroll"===e||"scrollend"===e),h=u?null!==A?A+"Capture":null:A;u=[];for(var f,p=r;null!==p;){var g=p;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===h||null!=(g=jt(p,h))&&u.push(iu(p,g,f)),d)break;p=p.return}0<u.length&&(A=new l(A,c,null,n,i),o.push({event:A,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(A="mouseover"===e||"pointerover"===e)||n===Pt||!(c=n.relatedTarget||n.fromElement)||!Je(c)&&!c[Ve])&&(l||A)&&(A=i.window===i?i:(A=i.ownerDocument)?A.defaultView||A.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?Je(c):null)&&(d=s(c),u=c.tag,c!==d||5!==u&&27!==u&&6!==u)&&(c=null)):(l=null,c=r),l!==c)){if(u=ln,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=bn,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?A:et(l),f=null==c?A:et(c),(A=new u(g,p+"leave",l,n,i)).target=d,A.relatedTarget=f,g=null,Je(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(u=au,p=c,f=0,g=h=l;g;g=u(g))f++;g=0;for(var m=p;m;m=u(m))g++;for(;0<f-g;)h=u(h),f--;for(;0<g-f;)p=u(p),g--;for(;f--;){if(h===p||null!==p&&h===p.alternate){u=h;break e}h=u(h),p=u(p)}u=null}else u=null;null!==l&&ou(o,A,l,u,!1),null!==c&&null!==d&&ou(o,d,c,u,!0)}if("select"===(l=(A=r?et(r):window).nodeName&&A.nodeName.toLowerCase())||"input"===l&&"file"===A.type)var y=$n;else if(On(A))if(Kn)y=Zn;else{y=Xn;var v=qn}else!(l=A.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==A.type&&"radio"!==A.type?r&&Ft(r.elementType)&&(y=$n):y=Jn;switch(y&&(y=y(e,r))?Qn(o,y,n,i):(v&&v(e,A,r),"focusout"===e&&r&&"number"===A.type&&null!=r.memoizedProps.value&&Et(A,"number",A.value)),v=r?et(r):window,e){case"focusin":(On(v)||"true"===v.contentEditable)&&(Ar=v,lr=r,cr=null);break;case"focusout":cr=lr=Ar=null;break;case"mousedown":ur=!0;break;case"contextmenu":case"mouseup":case"dragend":ur=!1,dr(o,n,i);break;case"selectionchange":if(or)break;case"keydown":case"keyup":dr(o,n,i)}var w;if(xn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Pn?_n(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Pn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Pn&&(w=Yt()):(Wt="value"in(Gt=i)?Gt.value:Gt.textContent,Pn=!0)),0<(v=su(r,b)).length&&(b=new fn(b,e,null,n,i),o.push({event:b,listeners:v}),w?b.data=w:null!==(w=Un(n))&&(b.data=w))),(w=In?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Dn=!0,Ln);case"textInput":return(e=t.data)===Ln&&Dn?null:e;default:return null}}(e,n):function(e,t){if(Pn)return"compositionend"===e||!xn&&_n(e,t)?(e=Yt(),zt=Wt=Gt=null,Pn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(b=su(r,"onBeforeInput")).length&&(v=new fn("onBeforeInput","beforeinput",null,n,i),o.push({event:v,listeners:b}),v.data=w)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Vc((i[Ke]||null).action),a=r.submitter;a&&null!==(t=(t=a[Ke]||null)?Vc(t.formAction):a.getAttribute("formAction"))&&(s=t,a=null);var o=new sn("action","action",null,r,i);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Rc){var e=a?Gc(i,a):new FormData(i);no(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"==typeof s&&(o.preventDefault(),e=a?Gc(i,a):new FormData(i),no(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(o,e,r,n,i)}Xc(o,t)})}function iu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function su(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=jt(e,n))&&r.unshift(iu(e,i,s)),null!=(i=jt(e,t))&&r.push(iu(e,i,s))),3===e.tag)return r;e=e.return}return[]}function au(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ou(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,A=o.alternate,l=o.stateNode;if(o=o.tag,null!==A&&A===r)break;5!==o&&26!==o&&27!==o||null===l||(A=l,i?null!=(l=jt(n,s))&&a.unshift(iu(n,l,A)):i||null!=(l=jt(n,s))&&a.push(iu(n,l,A))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Au=/\r\n?/g,lu=/\u0000|\uFFFD/g;function cu(e){return("string"==typeof e?e:""+e).replace(Au,"\n").replace(lu,"")}function uu(e,t){return t=cu(t),cu(e)===t}function du(e,t,n,i,s,a){switch(n){case"children":"string"==typeof i?"body"===t||"textarea"===t&&""===i||Tt(e,i):("number"==typeof i||"bigint"==typeof i)&&"body"!==t&&Tt(e,""+i);break;case"className":ut(e,"class",i);break;case"tabIndex":ut(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":ut(e,n,i);break;case"style":It(e,i,a);break;case"data":if("object"!==t){ut(e,"data",i);break}case"src":case"href":if(""===i&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==i||"function"==typeof i||"symbol"==typeof i||"boolean"==typeof i){e.removeAttribute(n);break}i=_t(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if("function"==typeof i){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof a&&("formAction"===n?("input"!==t&&du(e,t,"name",s.name,s,null),du(e,t,"formEncType",s.formEncType,s,null),du(e,t,"formMethod",s.formMethod,s,null),du(e,t,"formTarget",s.formTarget,s,null)):(du(e,t,"encType",s.encType,s,null),du(e,t,"method",s.method,s,null),du(e,t,"target",s.target,s,null))),null==i||"symbol"==typeof i||"boolean"==typeof i){e.removeAttribute(n);break}i=_t(""+i),e.setAttribute(n,i);break;case"onClick":null!=i&&(e.onclick=Ut);break;case"onScroll":null!=i&&Jc("scroll",e);break;case"onScrollEnd":null!=i&&Jc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!=typeof i||!("__html"in i))throw Error(r(61));if(null!=(n=i.__html)){if(null!=s.children)throw Error(r(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&"function"!=typeof i&&"symbol"!=typeof i;break;case"muted":e.muted=i&&"function"!=typeof i&&"symbol"!=typeof i;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==i||"function"==typeof i||"boolean"==typeof i||"symbol"==typeof i){e.removeAttribute("xlink:href");break}n=_t(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===i?e.setAttribute(n,""):!1!==i&&null!=i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":null==i||"function"==typeof i||"symbol"==typeof i||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Jc("beforetoggle",e),Jc("toggle",e),ct(e,"popover",i);break;case"xlinkActuate":dt(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":dt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":dt(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":dt(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":dt(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":dt(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":dt(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":dt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":dt(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":ct(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&ct(e,n=Lt.get(n)||n,i)}}function hu(e,t,n,i,s,a){switch(n){case"style":It(e,i,a);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!=typeof i||!("__html"in i))throw Error(r(61));if(null!=(n=i.__html)){if(null!=s.children)throw Error(r(60));e.innerHTML=n}}break;case"children":"string"==typeof i?Tt(e,i):("number"==typeof i||"bigint"==typeof i)&&Tt(e,""+i);break;case"onScroll":null!=i&&Jc("scroll",e);break;case"onScrollEnd":null!=i&&Jc("scrollend",e);break;case"onClick":null!=i&&(e.onclick=Ut);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:it.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"==typeof(a=null!=(a=e[Ke]||null)?a[n]:null)&&e.removeEventListener(t,a,s),"function"!=typeof i)?n in e?e[n]=i:!0===i?e.setAttribute(n,""):ct(e,n,i):("function"!=typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,s)))}}function fu(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Jc("error",e),Jc("load",e);var i,s=!1,a=!1;for(i in n)if(n.hasOwnProperty(i)){var o=n[i];if(null!=o)switch(i){case"src":s=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:du(e,t,i,o,n,null)}}return a&&du(e,t,"srcSet",n.srcSet,n,null),void(s&&du(e,t,"src",n.src,n,null));case"input":Jc("invalid",e);var A=i=o=a=null,l=null,c=null;for(s in n)if(n.hasOwnProperty(s)){var u=n[s];if(null!=u)switch(s){case"name":a=u;break;case"type":o=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":i=u;break;case"defaultValue":A=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(r(137,t));break;default:du(e,t,s,u,n,null)}}return void bt(e,i,A,l,c,o,a,!1);case"select":for(a in Jc("invalid",e),s=o=i=null,n)if(n.hasOwnProperty(a)&&null!=(A=n[a]))switch(a){case"value":i=A;break;case"defaultValue":o=A;break;case"multiple":s=A;default:du(e,t,a,A,n,null)}return t=i,n=o,e.multiple=!!s,void(null!=t?Bt(e,!!s,t,!1):null!=n&&Bt(e,!!s,n,!0));case"textarea":for(o in Jc("invalid",e),i=a=s=null,n)if(n.hasOwnProperty(o)&&null!=(A=n[o]))switch(o){case"value":s=A;break;case"defaultValue":a=A;break;case"children":i=A;break;case"dangerouslySetInnerHTML":if(null!=A)throw Error(r(91));break;default:du(e,t,o,A,n,null)}return void St(e,s,a,i);case"option":for(l in n)if(n.hasOwnProperty(l)&&null!=(s=n[l]))if("selected"===l)e.selected=s&&"function"!=typeof s&&"symbol"!=typeof s;else du(e,t,l,s,n,null);return;case"dialog":Jc("beforetoggle",e),Jc("toggle",e),Jc("cancel",e),Jc("close",e);break;case"iframe":case"object":Jc("load",e);break;case"video":case"audio":for(s=0;s<Yc.length;s++)Jc(Yc[s],e);break;case"image":Jc("error",e),Jc("load",e);break;case"details":Jc("toggle",e);break;case"embed":case"source":case"link":Jc("error",e),Jc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:du(e,t,c,s,n,null)}return;default:if(Ft(t)){for(u in n)n.hasOwnProperty(u)&&(void 0!==(s=n[u])&&hu(e,t,u,s,n,void 0));return}}for(A in n)n.hasOwnProperty(A)&&(null!=(s=n[A])&&du(e,t,A,s,n,null))}function pu(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var gu=null,mu=null;function yu(e){return 9===e.nodeType?e:e.ownerDocument}function vu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wu(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function bu(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Eu=null;var Bu="function"==typeof setTimeout?setTimeout:void 0,Cu="function"==typeof clearTimeout?clearTimeout:void 0,Su="function"==typeof Promise?Promise:void 0,Tu="function"==typeof queueMicrotask?queueMicrotask:void 0!==Su?function(e){return Su.resolve(null).then(e).catch(xu)}:Bu;function xu(e){setTimeout(function(){throw e})}function ku(e){return"head"===e}function Iu(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)||"/&"===n){if(0===r)return e.removeChild(i),void Gd(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Mu(e.ownerDocument.documentElement);else if("head"===n){Mu(n=e.ownerDocument.head);for(var s=n.firstChild;s;){var a=s.nextSibling,o=s.nodeName;s[qe]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=a}}else"body"===n&&Mu(e.ownerDocument.body);n=i}while(n);Gd(t)}function Fu(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Lu(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Lu(n),Xe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Du(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Pu(e.nextSibling)))return null}return e}function _u(e){return"$?"===e.data||"$~"===e.data}function Uu(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Pu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Ru=null;function Ou(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Pu(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Qu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Nu(e,t,n){switch(t=yu(n),e){case"html":if(!(e=t.documentElement))throw Error(r(452));return e;case"head":if(!(e=t.head))throw Error(r(453));return e;case"body":if(!(e=t.body))throw Error(r(454));return e;default:throw Error(r(451))}}function Mu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Xe(e)}var Hu=new Map,ju=new Set;function $u(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Ku=O.d;O.d={f:function(){var e=Ku.f(),t=tc();return e||t},r:function(e){var t=Ze(e);null!==t&&5===t.tag&&"form"===t.type?io(t):Ku.r(e)},D:function(e){Ku.D(e),Gu("dns-prefetch",e,null)},C:function(e,t){Ku.C(e,t),Gu("preconnect",e,t)},L:function(e,t,n){Ku.L(e,t,n);var r=Vu;if(r&&e&&t){var i='link[rel="preload"][as="'+vt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+vt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(i+='[imagesizes="'+vt(n.imageSizes)+'"]')):i+='[href="'+vt(e)+'"]';var s=i;switch(t){case"style":s=zu(e);break;case"script":s=Xu(e)}Hu.has(s)||(e=c({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Hu.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Yu(s))||"script"===t&&r.querySelector(Ju(s))||(fu(t=r.createElement("link"),"link",e),nt(t),r.head.appendChild(t)))}},m:function(e,t){Ku.m(e,t);var n=Vu;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+vt(r)+'"][href="'+vt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Xu(e)}if(!Hu.has(s)&&(e=c({rel:"modulepreload",href:e},t),Hu.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ju(s)))return}fu(r=n.createElement("link"),"link",e),nt(r),n.head.appendChild(r)}}},X:function(e,t){Ku.X(e,t);var n=Vu;if(n&&e){var r=tt(n).hoistableScripts,i=Xu(e),s=r.get(i);s||((s=n.querySelector(Ju(i)))||(e=c({src:e,async:!0},t),(t=Hu.get(i))&&nd(e,t),nt(s=n.createElement("script")),fu(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){Ku.S(e,t,n);var r=Vu;if(r&&e){var i=tt(r).hoistableStyles,s=zu(e);t=t||"default";var a=i.get(s);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Yu(s)))o.loading=5;else{e=c({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Hu.get(s))&&td(e,n);var A=a=r.createElement("link");nt(A),fu(A,"link",e),A._p=new Promise(function(e,t){A.onload=e,A.onerror=t}),A.addEventListener("load",function(){o.loading|=1}),A.addEventListener("error",function(){o.loading|=2}),o.loading|=4,ed(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},i.set(s,a)}}},M:function(e,t){Ku.M(e,t);var n=Vu;if(n&&e){var r=tt(n).hoistableScripts,i=Xu(e),s=r.get(i);s||((s=n.querySelector(Ju(i)))||(e=c({src:e,async:!0,type:"module"},t),(t=Hu.get(i))&&nd(e,t),nt(s=n.createElement("script")),fu(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Vu="undefined"==typeof document?null:document;function Gu(e,t,n){var r=Vu;if(r&&"string"==typeof t&&t){var i=vt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"==typeof n&&(i+='[crossorigin="'+n+'"]'),ju.has(i)||(ju.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(fu(t=r.createElement("link"),"link",e),nt(t),r.head.appendChild(t)))}}function Wu(e,t,n,i){var s,a,o,A,l=(l=z.current)?$u(l):null;if(!l)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=zu(n.href),(i=(n=tt(l).hoistableStyles).get(t))||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=zu(n.href);var c=tt(l).hoistableStyles,u=c.get(e);if(u||(l=l.ownerDocument||l,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,u),(c=l.querySelector(Yu(e)))&&!c._p&&(u.instance=c,u.state.loading=5),Hu.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Hu.set(e,n),c||(s=l,a=e,o=n,A=u.state,s.querySelector('link[rel="preload"][as="style"]['+a+"]")?A.loading=1:(a=s.createElement("link"),A.preload=a,a.addEventListener("load",function(){return A.loading|=1}),a.addEventListener("error",function(){return A.loading|=2}),fu(a,"link",o),nt(a),s.head.appendChild(a))))),t&&null===i)throw Error(r(528,""));return u}if(t&&null!==i)throw Error(r(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Xu(n),(i=(n=tt(l).hoistableScripts).get(t))||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function zu(e){return'href="'+vt(e)+'"'}function Yu(e){return'link[rel="stylesheet"]['+e+"]"}function qu(e){return c({},e,{"data-precedence":e.precedence,precedence:null})}function Xu(e){return'[src="'+vt(e)+'"]'}function Ju(e){return"script[async]"+e}function Zu(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+vt(n.href)+'"]');if(i)return t.instance=i,nt(i),i;var s=c({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return nt(i=(e.ownerDocument||e).createElement("style")),fu(i,"style",s),ed(i,n.precedence,e),t.instance=i;case"stylesheet":s=zu(n.href);var a=e.querySelector(Yu(s));if(a)return t.state.loading|=4,t.instance=a,nt(a),a;i=qu(n),(s=Hu.get(s))&&td(i,s),nt(a=(e.ownerDocument||e).createElement("link"));var o=a;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),fu(a,"link",i),t.state.loading|=4,ed(a,n.precedence,e),t.instance=a;case"script":return a=Xu(n.src),(s=e.querySelector(Ju(a)))?(t.instance=s,nt(s),s):(i=n,(s=Hu.get(a))&&nd(i=c({},n),s),nt(s=(e=e.ownerDocument||e).createElement("script")),fu(s,"link",i),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(r(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(i=t.instance,t.state.loading|=4,ed(i,n.precedence,e));return t.instance}function ed(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)s=o;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function td(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function nd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var rd=null;function id(e,t,n){if(null===rd){var r=new Map,i=rd=new Map;i.set(n,r)}else(r=(i=rd).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[qe]||s[$e]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var a=s.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(s):r.set(a,[s])}}return r}function sd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function ad(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var od=0;function Ad(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)cd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var ld=null;function cd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,ld=new Map,t.forEach(ud,e),ld=null,Ad.call(e))}function ud(e,t){if(!(4&t.state.loading)){var n=ld.get(e);if(n)var r=n.get(null);else{n=new Map,ld.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var a=i[s];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(s=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=Ad.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var dd={$$typeof:w,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function hd(e,t,n,r,i,s,a,o,A){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_e(0),this.hiddenUpdates=_e(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function fd(e,t,n,r,i,s,a,o,A,l,c,u){return e=new hd(e,t,n,a,A,l,c,u,o),t=1,!0===s&&(t|=24),s=Mr(3,null,null,t),e.current=s,s.stateNode=e,(t=Hi()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},ys(s),e}function pd(e){return e?e=Qr:Qr}function gd(e,t,n,r,i,s){i=pd(i),null===r.context?r.context=i:r.pendingContext=i,(r=ws(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=bs(e,r,t))&&(ql(n,0,t),Es(n,e,t))}function md(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function yd(e,t){md(e,t),(e=e.alternate)&&md(e,t)}function vd(e){if(13===e.tag||31===e.tag){var t=Pr(e,67108864);null!==t&&ql(t,0,67108864),yd(e,67108864)}}function wd(e){if(13===e.tag||31===e.tag){var t=zl(),n=Pr(e,t=Qe(t));null!==n&&ql(n,0,t),yd(e,t)}}var bd=!0;function Ed(e,t,n,r){var i=R.T;R.T=null;var s=O.p;try{O.p=2,Cd(e,t,n,r)}finally{O.p=s,R.T=i}}function Bd(e,t,n,r){var i=R.T;R.T=null;var s=O.p;try{O.p=8,Cd(e,t,n,r)}finally{O.p=s,R.T=i}}function Cd(e,t,n,r){if(bd){var i=Sd(r);if(null===i)ru(e,t,r,Td,n),Od(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Fd=Qd(Fd,e,t,n,r,i),!0;case"dragenter":return Ld=Qd(Ld,e,t,n,r,i),!0;case"mouseover":return Dd=Qd(Dd,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return _d.set(s,Qd(_d.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ud.set(s,Qd(Ud.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Od(e,r),4&t&&-1<Rd.indexOf(e)){for(;null!==i;){var s=Ze(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var a=ke(s.pendingLanes);if(0!==a){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var A=1<<31-Ee(a);o.entanglements[1]|=A,a&=~A}Oc(s),!(6&pl)&&(Rl=ce()+500,Qc(0))}}break;case 31:case 13:null!==(o=Pr(s,2))&&ql(o,0,2),tc(),yd(s,2)}if(null===(s=Sd(r))&&ru(e,t,r,Td,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else ru(e,t,r,null,n)}}function Sd(e){return xd(e=Rt(e))}var Td=null;function xd(e){if(Td=null,null!==(e=Je(e))){var t=s(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=a(t)))return e;e=null}else if(31===n){if(null!==(e=o(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Td=e,null}function kd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ue()){case de:return 2;case he:return 8;case fe:case pe:return 32;case ge:return 268435456;default:return 32}default:return 32}}var Id=!1,Fd=null,Ld=null,Dd=null,_d=new Map,Ud=new Map,Pd=[],Rd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Od(e,t){switch(e){case"focusin":case"focusout":Fd=null;break;case"dragenter":case"dragleave":Ld=null;break;case"mouseover":case"mouseout":Dd=null;break;case"pointerover":case"pointerout":_d.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ud.delete(t.pointerId)}}function Qd(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Ze(t))&&vd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Nd(e){var t=Je(e.target);if(null!==t){var n=s(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=a(n)))return e.blockedOn=t,void He(e.priority,function(){wd(n)})}else if(31===t){if(null!==(t=o(n)))return e.blockedOn=t,void He(e.priority,function(){wd(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Md(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sd(e.nativeEvent);if(null!==n)return null!==(t=Ze(n))&&vd(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Pt=r,n.target.dispatchEvent(r),Pt=null,t.shift()}return!0}function Hd(e,t,n){Md(e)&&n.delete(t)}function jd(){Id=!1,null!==Fd&&Md(Fd)&&(Fd=null),null!==Ld&&Md(Ld)&&(Ld=null),null!==Dd&&Md(Dd)&&(Dd=null),_d.forEach(Hd),Ud.forEach(Hd)}function $d(t,n){t.blockedOn===n&&(t.blockedOn=null,Id||(Id=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,jd)))}var Kd=null;function Vd(t){Kd!==t&&(Kd=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Kd===t&&(Kd=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],i=t[e+2];if("function"!=typeof r){if(null===xd(r||n))continue;break}var s=Ze(n);null!==s&&(t.splice(e,3),e-=3,no(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Gd(e){function t(t){return $d(t,e)}null!==Fd&&$d(Fd,e),null!==Ld&&$d(Ld,e),null!==Dd&&$d(Dd,e),_d.forEach(t),Ud.forEach(t);for(var n=0;n<Pd.length;n++){var r=Pd[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Pd.length&&null===(n=Pd[0]).blockedOn;)Nd(n),null===n.blockedOn&&Pd.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],a=i[Ke]||null;if("function"==typeof s)a||Vd(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(i=s,a=s[Ke]||null)o=a.formAction;else if(null!==xd(i))continue}else o=a.action;"function"==typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Vd(n)}}}function Wd(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==i&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"==typeof navigation){var r=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==i&&(i(),i=null)}}}function zd(e){this._internalRoot=e}function Yd(e){this._internalRoot=e}Yd.prototype.render=zd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));gd(t.current,zl(),e,t,null,null)},Yd.prototype.unmount=zd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;gd(e.current,2,null,e,null,null),tc(),t[Ve]=null}},Yd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Me();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pd.length&&0!==t&&t<Pd[n].priority;n++);Pd.splice(n,0,e),0===n&&Nd(e)}};var qd=t.version;if("19.2.0"!==qd)throw Error(r(527,qd,"19.2.0"));O.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=s(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(i=a.return)){n=i;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return A(a),e;if(o===i)return A(a),t;o=o.sibling}throw Error(r(188))}if(n.return!==i.return)n=a,i=o;else{for(var l=!1,c=a.child;c;){if(c===n){l=!0,n=a,i=o;break}if(c===i){l=!0,i=a,n=o;break}c=c.sibling}if(!l){for(c=o.child;c;){if(c===n){l=!0,n=o,i=a;break}if(c===i){l=!0,i=o,n=a;break}c=c.sibling}if(!l)throw Error(r(189))}}if(n.alternate!==i)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?l(e):null)?null:e.stateNode};var Xd={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jd.isDisabled&&Jd.supportsFiber)try{ve=Jd.inject(Xd),we=Jd}catch(eh){}}return y.createRoot=function(e,t){if(!i(e))throw Error(r(299));var n=!1,s="",a=To,o=xo,A=ko;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(A=t.onRecoverableError)),t=fd(e,1,!1,null,0,n,s,null,a,o,A,Wd),e[Ve]=t.current,tu(e),new zd(t)},y.hydrateRoot=function(e,t,n){if(!i(e))throw Error(r(299));var s=!1,a="",o=To,A=xo,l=ko,c=null;return null!=n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(A=n.onCaughtError),void 0!==n.onRecoverableError&&(l=n.onRecoverableError),void 0!==n.formState&&(c=n.formState)),(t=fd(e,1,!0,t,0,s,a,c,o,A,l,Wd)).context=pd(null),n=t.current,(a=ws(s=Qe(s=zl()))).callback=null,bs(n,a,s),n=s,t.current.lanes=n,Ue(t,n),Oc(t),e[Ve]=t.current,tu(e),new Yd(t)},y.version="19.2.0",y}const L=e((S||(S=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),m.exports=F()),m.exports));
/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var D="popstate";function _(e={}){return function(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o="POP",A=null,l=c();null==l&&(l=0,a.replaceState({...a.state,idx:l},""));function c(){return(a.state||{idx:null}).idx}function u(){o="POP";let e=c(),t=null==e?null:e-l;l=e,A&&A({action:o,location:p.location,delta:t})}function d(e,t){o="PUSH";let r=O(p.location,e,t);n&&n(r,e),l=c()+1;let u=R(r,l),d=p.createHref(r);try{a.pushState(u,"",d)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;i.location.assign(d)}s&&A&&A({action:o,location:p.location,delta:1})}function h(e,t){o="REPLACE";let r=O(p.location,e,t);n&&n(r,e),l=c();let i=R(r,l),u=p.createHref(r);a.replaceState(i,"",u),s&&A&&A({action:o,location:p.location,delta:0})}function f(e){return function(e,t=!1){let n="http://localhost";"undefined"!=typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href);U(n,"No window.location.(origin|href) available to create URL");let r="string"==typeof e?e:Q(e);r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r);return new URL(r,n)}(e)}let p={get action(){return o},get location(){return e(i,a)},listen(e){if(A)throw new Error("A history only accepts one active listener");return i.addEventListener(D,u),A=e,()=>{i.removeEventListener(D,u),A=null}},createHref:e=>t(i,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:d,replace:h,go:e=>a.go(e)};return p}(function(e,t){let{pathname:n="/",search:r="",hash:i=""}=N(e.location.hash.substring(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),O("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"==typeof t?t:Q(t))},function(e,t){P("/"===e.pathname.charAt(0),`relative pathnames are not supported in hash history.push(${JSON.stringify(t)})`)},e)}function U(e,t){if(!1===e||null==e)throw new Error(t)}function P(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function R(e,t){return{usr:e.state,key:e.key,idx:t}}function O(e,t,n=null,r){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?N(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function Q({pathname:e="/",search:t="",hash:n=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),n&&"#"!==n&&(e+="#"===n.charAt(0)?n:"#"+n),e}function N(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function M(e,t,n="/"){return function(e,t,n,r){let i="string"==typeof t?N(t):t,s=ee(i.pathname||"/",n);if(null==s)return null;let a=H(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let o=null;for(let A=0;null==o&&A<a.length;++A){let e=Z(s);o=X(a[A],e,r)}return o}(e,t,n,!1)}function H(e,t=[],n=[],r="",i=!1){let s=(e,s,a=i,o)=>{let A={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(A.relativePath.startsWith("/")){if(!A.relativePath.startsWith(r)&&a)return;U(A.relativePath.startsWith(r),`Absolute route path "${A.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),A.relativePath=A.relativePath.slice(r.length)}let l=ie([r,A.relativePath]),c=n.concat(A);e.children&&e.children.length>0&&(U(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),H(e.children,t,c,l,a)),(null!=e.path||e.index)&&t.push({path:l,score:q(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let n of j(e.path))s(e,t,!0,n);else s(e,t)}),t}function j(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=j(r.join("/")),o=[];return o.push(...a.map(e=>""===e?s:[s,e].join("/"))),i&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var $=/^:[\w-]+$/,K=3,V=2,G=1,W=10,z=-2,Y=e=>"*"===e;function q(e,t){let n=e.split("/"),r=n.length;return n.some(Y)&&(r+=z),t&&(r+=V),n.filter(e=>!Y(e)).reduce((e,t)=>e+($.test(t)?K:""===t?G:W),r)}function X(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],A=o===r.length-1,l="/"===s?t:t.slice(s.length)||"/",c=J({path:e.relativePath,caseSensitive:e.caseSensitive,end:A},l),u=e.route;if(!c&&A&&n&&!r[r.length-1].route.index&&(c=J({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},l)),!c)return null;Object.assign(i,c.params),a.push({params:i,pathname:ie([s,c.pathname]),pathnameBase:se(ie([s,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(s=ie([s,c.pathnameBase]))}return a}function J(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t=!1,n=!0){P("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((e,{paramName:t,isOptional:n},r)=>{if("*"===t){let e=o[r]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const i=o[r];return e[t]=n&&!i?void 0:(i||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:a,pattern:e}}function Z(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return P(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ee(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function te(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ne(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function re(e,t,n,r=!1){let i;"string"==typeof e?i=N(e):(i={...e},U(!i.pathname||!i.pathname.includes("?"),te("?","pathname","search",i)),U(!i.pathname||!i.pathname.includes("#"),te("#","pathname","hash",i)),U(!i.search||!i.search.includes("#"),te("#","search","hash",i)));let s,a=""===e||""===i.pathname,o=a?"/":i.pathname;if(null==o)s=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let A=function(e,t="/"){let{pathname:n,search:r="",hash:i=""}="string"==typeof e?N(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:ae(r),hash:oe(i)}}(i,s),l=o&&"/"!==o&&o.endsWith("/"),c=(a||"."===o)&&n.endsWith("/");return A.pathname.endsWith("/")||!l&&!c||(A.pathname+="/"),A}var ie=e=>e.join("/").replace(/\/\/+/g,"/"),se=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ae=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",oe=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ae=["POST","PUT","PATCH","DELETE"];new Set(Ae);var le=["GET",...Ae];new Set(le);var ce=h.createContext(null);ce.displayName="DataRouter";var ue=h.createContext(null);ue.displayName="DataRouterState",h.createContext(!1);var de=h.createContext({isTransitioning:!1});de.displayName="ViewTransition",h.createContext(new Map).displayName="Fetchers",h.createContext(null).displayName="Await";var he=h.createContext(null);he.displayName="Navigation";var fe=h.createContext(null);fe.displayName="Location";var pe=h.createContext({outlet:null,matches:[],isDataRoute:!1});pe.displayName="Route";var ge=h.createContext(null);function me(){return null!=h.useContext(fe)}function ye(){return U(me(),"useLocation() may be used only in the context of a <Router> component."),h.useContext(fe).location}ge.displayName="RouteError";var ve="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function we(e){h.useContext(he).static||h.useLayoutEffect(e)}function be(){let{isDataRoute:e}=h.useContext(pe);return e?function(){let{router:e}=function(e){let t=h.useContext(ce);return U(t,ke(e)),t}("useNavigate"),t=Ie("useNavigate"),n=h.useRef(!1);return we(()=>{n.current=!0}),h.useCallback(async(r,i={})=>{P(n.current,ve),n.current&&("number"==typeof r?e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}():function(){U(me(),"useNavigate() may be used only in the context of a <Router> component.");let e=h.useContext(ce),{basename:t,navigator:n}=h.useContext(he),{matches:r}=h.useContext(pe),{pathname:i}=ye(),s=JSON.stringify(ne(r)),a=h.useRef(!1);return we(()=>{a.current=!0}),h.useCallback((r,o={})=>{if(P(a.current,ve),!a.current)return;if("number"==typeof r)return void n.go(r);let A=re(r,JSON.parse(s),i,"path"===o.relative);null==e&&"/"!==t&&(A.pathname="/"===A.pathname?t:ie([t,A.pathname])),(o.replace?n.replace:n.push)(A,o.state,o)},[t,n,s,i,e])}()}function Ee(e,{relative:t}={}){let{matches:n}=h.useContext(pe),{pathname:r}=ye(),i=JSON.stringify(ne(n));return h.useMemo(()=>re(e,JSON.parse(i),r,"path"===t),[e,i,r,t])}function Be(e,t,n,r,i){U(me(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=h.useContext(he),{matches:a}=h.useContext(pe),o=a[a.length-1],A=o?o.params:{},l=o?o.pathname:"/",c=o?o.pathnameBase:"/",u=o&&o.route;{let e=u&&u.path||"";Le(l,!u||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let d,f=ye();if(t){let e="string"==typeof t?N(t):t;U("/"===c||e.pathname?.startsWith(c),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${e.pathname}" was given in the \`location\` prop.`),d=e}else d=f;let p=d.pathname||"/",g=p;if("/"!==c){let e=c.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(e.length).join("/")}let m=M(e,{pathname:g});P(u||null!=m,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),P(null==m||void 0!==m[m.length-1].route.element||void 0!==m[m.length-1].route.Component||void 0!==m[m.length-1].route.lazy,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=function(e,t=[],n=null,r=null){if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let i=e,s=n?.errors;if(null!=s){let e=i.findIndex(e=>e.route.id&&void 0!==s?.[e.route.id]);U(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,e+1))}let a=!1,o=-1;if(n)for(let A=0;A<i.length;A++){let e=i[A];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=A),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){a=!0,i=o>=0?i.slice(0,o+1):[i[0]];break}}}return i.reduceRight((e,A,l)=>{let c,u=!1,d=null,f=null;n&&(c=s&&A.route.id?s[A.route.id]:void 0,d=A.route.errorElement||Se,a&&(o<0&&0===l?(Le("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,f=null):o===l&&(u=!0,f=A.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,l+1)),g=()=>{let t;return t=c?d:u?f:A.route.Component?h.createElement(A.route.Component,null):A.route.element?A.route.element:e,h.createElement(xe,{match:A,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(A.route.ErrorBoundary||A.route.errorElement||0===l)?h.createElement(Te,{location:n.location,revalidation:n.revalidation,component:d,error:c,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0},unstable_onError:r}):g()},null)}(m&&m.map(e=>Object.assign({},e,{params:Object.assign({},A,e.params),pathname:ie([c,s.encodeLocation?s.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:ie([c,s.encodeLocation?s.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),a,n,r,i);return t&&y?h.createElement(fe.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},y):y}function Ce(){let e=function(){let e=h.useContext(ge),t=function(e){let t=h.useContext(ue);return U(t,ke(e)),t}("useRouteError"),n=Ie("useRouteError");if(void 0!==e)return e;return t.errors?.[n]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=h.createElement(h.Fragment,null,h.createElement("p",null," Hey developer "),h.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",h.createElement("code",{style:s},"ErrorBoundary")," or"," ",h.createElement("code",{style:s},"errorElement")," prop on your route.")),h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),n?h.createElement("pre",{style:i},n):null,a)}h.createContext(null);var Se=h.createElement(Ce,null),Te=class extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?h.createElement(pe.Provider,{value:this.props.routeContext},h.createElement(ge.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xe({routeContext:e,match:t,children:n}){let r=h.useContext(ce);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),h.createElement(pe.Provider,{value:e},n)}function ke(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ie(e){let t=function(e){let t=h.useContext(pe);return U(t,ke(e)),t}(e),n=t.matches[t.matches.length-1];return U(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}var Fe={};function Le(e,t,n){t||Fe[e]||(Fe[e]=!0,P(!1,n))}function De(e){U(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _e({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){U(!me(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),o=h.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);"string"==typeof n&&(n=N(n));let{pathname:A="/",search:l="",hash:c="",state:u=null,key:d="default"}=n,f=h.useMemo(()=>{let e=ee(A,a);return null==e?null:{location:{pathname:e,search:l,hash:c,state:u,key:d},navigationType:r}},[a,A,l,c,u,d,r]);return P(null!=f,`<Router basename="${a}"> is not able to match the URL "${A}${l}${c}" because it does not start with the basename, so the <Router> won't render anything.`),null==f?null:h.createElement(he.Provider,{value:o},h.createElement(fe.Provider,{children:t,value:f}))}function Ue({children:e,location:t}){return Be(Pe(e),t)}function Pe(e,t=[]){let n=[];return h.Children.forEach(e,(e,r)=>{if(!h.isValidElement(e))return;let i=[...t,r];if(e.type===h.Fragment)return void n.push.apply(n,Pe(e.props.children,i));U(e.type===De,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),U(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=Pe(e.props.children,i)),n.push(s)}),n}h.memo(function({routes:e,future:t,state:n,unstable_onError:r}){return Be(e,void 0,n,r,t)});var Re="get",Oe="application/x-www-form-urlencoded";function Qe(e){return null!=e&&"string"==typeof e.tagName}var Ne=null;var Me=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function He(e){return null==e||Me.has(e)?e:(P(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Oe}"`),null)}function je(e,t){let n,r,i,s,a;if(Qe(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?ee(a,t):null,n=e.getAttribute("method")||Re,i=He(e.getAttribute("enctype"))||Oe,s=new FormData(e)}else if(function(e){return Qe(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Qe(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(r=o?ee(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Re,i=He(e.getAttribute("formenctype"))||He(a.getAttribute("enctype"))||Oe,s=new FormData(a,e),!function(){if(null===Ne)try{new FormData(document.createElement("form"),0),Ne=!1}catch(e){Ne=!0}return Ne}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";s.append(`${e}x`,"0"),s.append(`${e}y`,"0")}else t&&s.append(t,r)}}else{if(Qe(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Re,r=null,i=Oe,a=e}var o;return s&&"text/plain"===i&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}function $e(e,t){if(!1===e||null==e)throw new Error(t)}function Ke(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}async function Ve(e,t,n){return function(e,t){let n=new Set;return new Set(t),e.reduce((e,t)=>{let r=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(t));return n.has(r)||(n.add(r),e.push({key:r,link:t})),e},[])}((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Ke).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}function Ge(e,t,n,r,i,s){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith("*")&&n[t].params["*"]!==e.params["*"];return"assets"===s?t.filter((e,t)=>a(e,t)||o(e,t)):"data"===s?t.filter((t,s)=>{let A=r.routes[t.route.id];if(!A||!A.hasLoader)return!1;if(a(t,s)||o(t,s))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof r)return r}return!0}):[]}function We(e,t,{includeHydrateFallback:n}={}){return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function ze(){let e=h.useContext(ce);return $e(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ye=h.createContext(void 0);function qe(){let e=h.useContext(Ye);return $e(e,"You must render this element inside a <HydratedRouter> element"),e}function Xe(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Je({page:e,...t}){let{router:n}=ze(),r=h.useMemo(()=>M(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?h.createElement(Ze,{page:e,matches:r,...t}):null}function Ze({page:e,matches:t,...n}){let r=ye(),{manifest:i,routeModules:s}=qe(),{basename:a}=ze(),{loaderData:o,matches:A}=function(){let e=h.useContext(ue);return $e(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),l=h.useMemo(()=>Ge(e,t,A,i,r,"data"),[e,t,A,i,r]),c=h.useMemo(()=>Ge(e,t,A,i,r,"assets"),[e,t,A,i,r]),u=h.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let n=new Set,A=!1;if(t.forEach(e=>{let t=i.routes[e.route.id];t&&t.hasLoader&&(!l.some(t=>t.route.id===e.route.id)&&e.route.id in o&&s[e.route.id]?.shouldRevalidate||t.hasClientLoader?A=!0:n.add(e.route.id))}),0===n.size)return[];let c=function(e,t,n){let r="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname=`_root.${n}`:t&&"/"===ee(r.pathname,t)?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}(e,a,"data");return A&&n.size>0&&c.searchParams.set("_routes",t.filter(e=>n.has(e.route.id)).map(e=>e.route.id).join(",")),[c.pathname+c.search]},[a,o,r,i,l,t,e,s]),d=h.useMemo(()=>We(c,i),[c,i]),f=function(e){let{manifest:t,routeModules:n}=qe(),[r,i]=h.useState([]);return h.useEffect(()=>{let r=!1;return Ve(e,t,n).then(e=>{r||i(e)}),()=>{r=!0}},[e,t,n]),r}(c);return h.createElement(h.Fragment,null,u.map(e=>h.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...n})),d.map(e=>h.createElement("link",{key:e,rel:"modulepreload",href:e,...n})),f.map(({key:e,link:t})=>h.createElement("link",{key:e,nonce:n.nonce,...t})))}function et(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}Ye.displayName="FrameworkContext";var tt="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{tt&&(window.__reactRouterVersion="7.9.5")}catch(c$){}function nt({basename:e,children:t,window:n}){let r=h.useRef();null==r.current&&(r.current=_({window:n,v5Compat:!0}));let i=r.current,[s,a]=h.useState({action:i.action,location:i.location}),o=h.useCallback(e=>{h.startTransition(()=>a(e))},[a]);return h.useLayoutEffect(()=>i.listen(o),[i,o]),h.createElement(_e,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var rt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,it=h.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:i,replace:s,state:a,target:o,to:A,preventScrollReset:l,viewTransition:c,...u},d){let f,{basename:p}=h.useContext(he),g="string"==typeof A&&rt.test(A),m=!1;if("string"==typeof A&&g&&(f=A,tt))try{let e=new URL(window.location.href),t=A.startsWith("//")?new URL(e.protocol+A):new URL(A),n=ee(t.pathname,p);t.origin===e.origin&&null!=n?A=n+t.search+t.hash:m=!0}catch(c$){P(!1,`<Link to="${A}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=function(e,{relative:t}={}){U(me(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=h.useContext(he),{hash:i,pathname:s,search:a}=Ee(e,{relative:t}),o=s;return"/"!==n&&(o="/"===s?n:ie([n,s])),r.createHref({pathname:o,search:a,hash:i})}(A,{relative:r}),[v,w,b]=function(e,t){let n=h.useContext(Ye),[r,i]=h.useState(!1),[s,a]=h.useState(!1),{onFocus:o,onBlur:A,onMouseEnter:l,onMouseLeave:c,onTouchStart:u}=t,d=h.useRef(null);h.useEffect(()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{a(e.isIntersecting)})},{threshold:.5});return d.current&&e.observe(d.current),()=>{e.disconnect()}}},[e]),h.useEffect(()=>{if(r){let e=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(e)}}},[r]);let f=()=>{i(!0)},p=()=>{i(!1),a(!1)};return n?"intent"!==e?[s,d,{}]:[s,d,{onFocus:Xe(o,f),onBlur:Xe(A,p),onMouseEnter:Xe(l,f),onMouseLeave:Xe(c,p),onTouchStart:Xe(u,f)}]:[!1,d,{}]}(n,u),E=function(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let o=be(),A=ye(),l=Ee(e,{relative:s});return h.useCallback(c=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(c,t)){c.preventDefault();let t=void 0!==n?n:Q(A)===Q(l);o(e,{replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[A,o,l,n,r,t,e,i,s,a])}(A,{replace:s,state:a,target:o,preventScrollReset:l,relative:r,viewTransition:c});let B=h.createElement("a",{...u,...b,href:f||y,onClick:m||i?e:function(t){e&&e(t),t.defaultPrevented||E(t)},ref:et(d,w),target:o,"data-discover":g||"render"!==t?void 0:"true"});return v&&!g?h.createElement(h.Fragment,null,B,h.createElement(Je,{page:y})):B});it.displayName="Link";var st=h.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:i,to:s,viewTransition:a,children:o,...A},l){let c=Ee(s,{relative:A.relative}),u=ye(),d=h.useContext(ue),{navigator:f,basename:p}=h.useContext(he),g=null!=d&&function(e,{relative:t}={}){let n=h.useContext(de);U(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=at("useViewTransitionState"),i=Ee(e,{relative:t});if(!n.isTransitioning)return!1;let s=ee(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=ee(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=J(i.pathname,a)||null!=J(i.pathname,s)}(c)&&!0===a,m=f.encodeLocation?f.encodeLocation(c).pathname:c.pathname,y=u.pathname,v=d&&d.navigation&&d.navigation.location?d.navigation.location.pathname:null;t||(y=y.toLowerCase(),v=v?v.toLowerCase():null,m=m.toLowerCase()),v&&p&&(v=ee(v,p)||v);const w="/"!==m&&m.endsWith("/")?m.length-1:m.length;let b,E=y===m||!r&&y.startsWith(m)&&"/"===y.charAt(w),B=null!=v&&(v===m||!r&&v.startsWith(m)&&"/"===v.charAt(m.length)),C={isActive:E,isPending:B,isTransitioning:g},S=E?e:void 0;b="function"==typeof n?n(C):[n,E?"active":null,B?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let T="function"==typeof i?i(C):i;return h.createElement(it,{...A,"aria-current":S,className:b,ref:l,style:T,to:s,viewTransition:a},"function"==typeof o?o(C):o)});function at(e){let t=h.useContext(ce);return U(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}st.displayName="NavLink",h.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:a=Re,action:o,onSubmit:A,relative:l,preventScrollReset:c,viewTransition:u,...d},f)=>{let p=function(){let{router:e}=at("useSubmit"),{basename:t}=h.useContext(he),n=Ie("useRouteId");return h.useCallback(async(r,i={})=>{let{action:s,method:a,encType:o,formData:A,body:l}=je(r,t);if(!1===i.navigate){let t=i.fetcherKey||At();await e.fetch(t,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:A,body:l,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:A,body:l,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}(),g=function(e,{relative:t}={}){let{basename:n}=h.useContext(he),r=h.useContext(pe);U(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Ee(e||".",{relative:t})},a=ye();if(null==e){s.search=a.search;let e=new URLSearchParams(s.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();s.search=n?`?${n}`:""}}e&&"."!==e||!i.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(s.pathname="/"===s.pathname?n:ie([n,s.pathname]));return Q(s)}(o,{relative:l}),m="get"===a.toLowerCase()?"get":"post",y="string"==typeof o&&rt.test(o);return h.createElement("form",{ref:f,method:m,action:g,onSubmit:r?A:e=>{if(A&&A(e),e.defaultPrevented)return;e.preventDefault();let r=e.nativeEvent.submitter,o=r?.getAttribute("formmethod")||a;p(r||e.currentTarget,{fetcherKey:t,method:o,navigate:n,replace:i,state:s,relative:l,preventScrollReset:c,viewTransition:u})},...d,"data-discover":y||"render"!==e?void 0:"true"})}).displayName="Form";var ot=0,At=()=>`__${String(++ot)}__`;const lt=e(I());function ct(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=ct(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ut(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=ct(e))&&(r&&(r+=" "),r+=t);return r}!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var dt=e=>"number"==typeof e&&!isNaN(e),ht=e=>"string"==typeof e,ft=e=>"function"==typeof e,pt=e=>ht(e)||ft(e)?e:null,gt=(e,t)=>!1===e||dt(e)&&e>0?e:t,mt=e=>h.isValidElement(e)||ht(e)||ft(e)||dt(e);function yt(e,t){return{content:vt(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function vt(e,t,n=!1){return h.isValidElement(e)&&!ht(e.type)?h.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):ft(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function wt({delay:e,isRunning:t,closeToast:n,type:r="default",hide:i,className:s,controlledProgress:a,progress:o,rtl:A,isIn:l,theme:c}){let u=i||a&&0===o,d={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};a&&(d.transform=`scaleX(${o})`);let h=ut("Toastify__progress-bar",a?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${c}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":A}),p=ft(s)?s({rtl:A,type:r,defaultClassName:h}):ut(h,s),g={[a&&o>=1?"onTransitionEnd":"onAnimationEnd"]:a&&o<1?null:()=>{l&&n()}};return f.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":u},f.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${c} Toastify__progress-bar--${r}`}),f.createElement("div",{role:"progressbar","aria-hidden":u?"true":"false","aria-label":"notification timer",className:p,style:d,...g}))}var bt=1,Et=()=>""+bt++;function Bt(e,t,n){let r=1,i=0,s=[],a=[],o=t,A=new Map,l=new Set,c=()=>{a=Array.from(A.values()),l.forEach(e=>e())},u=e=>{var t,n;null==(n=null==(t=e.props)?void 0:t.onClose)||n.call(t,e.removalReason),e.isActive=!1},d=e=>{if(null==e)A.forEach(u);else{let t=A.get(e);t&&u(t)}c()},h=e=>{var t,r;let{toastId:i,updateId:s}=e.props,a=null==s;e.staleId&&A.delete(e.staleId),e.isActive=!0,A.set(i,e),c(),n(yt(e,a?"added":"updated")),a&&(null==(r=(t=e.props).onOpen)||r.call(t))};return{id:e,props:o,observe:e=>(l.add(e),()=>l.delete(e)),toggle:(e,t)=>{A.forEach(n=>{var r;(null==t||t===n.props.toastId)&&(null==(r=n.toggle)||r.call(n,e))})},removeToast:d,toasts:A,clearQueue:()=>{i-=s.length,s=[]},buildToast:(t,a)=>{if((({containerId:t,toastId:n,updateId:r})=>{let i=t?t!==e:1!==e,s=A.has(n)&&null==r;return i||s})(a))return;let{toastId:l,updateId:u,data:f,staleId:p,delay:g}=a,m=null==u;m&&i++;let y={...o,style:o.toastStyle,key:r++,...Object.fromEntries(Object.entries(a).filter(([e,t])=>null!=t)),toastId:l,updateId:u,data:f,isIn:!1,className:pt(a.className||o.toastClassName),progressClassName:pt(a.progressClassName||o.progressClassName),autoClose:!a.isLoading&&gt(a.autoClose,o.autoClose),closeToast(e){A.get(l).removalReason=e,d(l)},deleteToast(){let e=A.get(l);if(null!=e){if(n(yt(e,"removed")),A.delete(l),i--,i<0&&(i=0),s.length>0)return void h(s.shift());c()}}};y.closeButton=o.closeButton,!1===a.closeButton||mt(a.closeButton)?y.closeButton=a.closeButton:!0===a.closeButton&&(y.closeButton=!mt(o.closeButton)||o.closeButton);let v={content:t,props:y,staleId:p};o.limit&&o.limit>0&&i>o.limit&&m?s.push(v):dt(g)?setTimeout(()=>{h(v)},g):h(v)},setProps(e){o=e},setToggle:(e,t)=>{let n=A.get(e);n&&(n.toggle=t)},isToastActive:e=>{var t;return null==(t=A.get(e))?void 0:t.isActive},getSnapshot:()=>a}}var Ct=new Map,St=[],Tt=new Set,xt=e=>Tt.forEach(t=>t(e)),kt=()=>Ct.size>0;function It(e,t){var n;if(t)return!(null==(n=Ct.get(t))||!n.isToastActive(e));let r=!1;return Ct.forEach(t=>{t.isToastActive(e)&&(r=!0)}),r}function Ft(e){if(kt()){if(null==e||(e=>ht(e)||dt(e))(e))Ct.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=Ct.get(e.containerId);t?t.removeToast(e.id):Ct.forEach(t=>{t.removeToast(e.id)})}}else St=St.filter(t=>null!=e&&t.options.toastId!==e)}function Lt(e,t){mt(e)&&(kt()||St.push({content:e,options:t}),Ct.forEach(n=>{n.buildToast(e,t)}))}function Dt(e,t){Ct.forEach(n=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===n.id)&&n.toggle(e,null==t?void 0:t.id)})}function _t(e){let t=e.containerId||1;return{subscribe(n){let r=Bt(t,e,xt);Ct.set(t,r);let i=r.observe(n);return St.forEach(e=>Lt(e.content,e.options)),St=[],()=>{i(),Ct.delete(t)}},setProps(e){var n;null==(n=Ct.get(t))||n.setProps(e)},getSnapshot(){var e;return null==(e=Ct.get(t))?void 0:e.getSnapshot()}}}function Ut(e){return e&&(ht(e.toastId)||dt(e.toastId))?e.toastId:Et()}function Pt(e,t){return Lt(e,t),t.toastId}function Rt(e,t){return{...t,type:t&&t.type||e,toastId:Ut(t)}}function Ot(e){return(t,n)=>Pt(t,Rt(e,n))}function Qt(e,t){return Pt(e,Rt("default",t))}function Nt(e){let[t,n]=h.useState(!1),[r,i]=h.useState(!1),s=h.useRef(null),a=h.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:o,pauseOnHover:A,closeToast:l,onClick:c,closeOnClick:u}=e;function d(){n(!0)}function f(){n(!1)}function p(n){let r=s.current;if(a.canDrag&&r){a.didMove=!0,t&&f(),"x"===e.draggableDirection?a.delta=n.clientX-a.start:a.delta=n.clientY-a.start,a.start!==n.clientX&&(a.canCloseOnClick=!1);let i="x"===e.draggableDirection?`${a.delta}px, var(--y)`:`0, calc(${a.delta}px + var(--y))`;r.style.transform=`translate3d(${i},0)`,r.style.opacity=""+(1-Math.abs(a.delta/a.removalDistance))}}function g(){document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",g);let t=s.current;if(a.canDrag&&a.didMove&&t){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance)return i(!0),e.closeToast(!0),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}(function(e){var t;null==(t=Ct.get(e.containerId||1))||t.setToggle(e.id,e.fn)})({id:e.toastId,containerId:e.containerId,fn:n}),h.useEffect(()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||f(),window.addEventListener("focus",d),window.addEventListener("blur",f),()=>{window.removeEventListener("focus",d),window.removeEventListener("blur",f)}},[e.pauseOnFocusLoss]);let m={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){a.didMove=!1,document.addEventListener("pointermove",p),document.addEventListener("pointerup",g);let n=s.current;a.canCloseOnClick=!0,a.canDrag=!0,n.style.transition="none","x"===e.draggableDirection?(a.start=t.clientX,a.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(a.start=t.clientY,a.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){let{top:n,bottom:r,left:i,right:a}=s.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=i&&t.clientX<=a&&t.clientY>=n&&t.clientY<=r?f():d()}};return o&&A&&(m.onMouseEnter=f,e.stacked||(m.onMouseLeave=d)),u&&(m.onClick=e=>{c&&c(e),a.canCloseOnClick&&l(!0)}),{playToast:d,pauseToast:f,isRunning:t,preventExitTransition:r,toastRef:s,eventHandlers:m}}Qt.loading=(e,t)=>Pt(e,Rt("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),Qt.promise=function(e,{pending:t,error:n,success:r},i){let s;t&&(s=ht(t)?Qt.loading(t,i):Qt.loading(t.render,{...i,...t}));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},o=(e,t,n)=>{if(null==t)return void Qt.dismiss(s);let r={type:e,...a,...i,data:n},o=ht(t)?{render:t}:t;return s?Qt.update(s,{...r,...o}):Qt(o.render,{...r,...o}),n},A=ft(e)?e():e;return A.then(e=>o("success",r,e)).catch(e=>o("error",n,e)),A},Qt.success=Ot("success"),Qt.info=Ot("info"),Qt.error=Ot("error"),Qt.warning=Ot("warning"),Qt.warn=Qt.warning,Qt.dark=(e,t)=>Pt(e,Rt("default",{theme:"dark",...t})),Qt.dismiss=function(e){Ft(e)},Qt.clearWaitingQueue=(e={})=>{Ct.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})},Qt.isActive=It,Qt.update=(e,t={})=>{let n=((e,{containerId:t})=>{var n;return null==(n=Ct.get(t||1))?void 0:n.toasts.get(e)})(e,t);if(n){let{props:r,content:i}=n,s={delay:100,...r,...t,toastId:t.toastId||e,updateId:Et()};s.toastId!==e&&(s.staleId=e);let a=s.render||i;delete s.render,Pt(a,s)}},Qt.done=e=>{Qt.update(e,{progress:1})},Qt.onChange=function(e){return Tt.add(e),()=>{Tt.delete(e)}},Qt.play=e=>Dt(!0,e),Qt.pause=e=>Dt(!1,e);var Mt="undefined"!=typeof window?h.useLayoutEffect:h.useEffect,Ht=({theme:e,type:t,isLoading:n,...r})=>f.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===e?"currentColor":`var(--toastify-icon-color-${t})`,...r});var jt={info:function(e){return f.createElement(Ht,{...e},f.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return f.createElement(Ht,{...e},f.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return f.createElement(Ht,{...e},f.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return f.createElement(Ht,{...e},f.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return f.createElement("div",{className:"Toastify__spinner"})}};function $t({theme:e,type:t,isLoading:n,icon:r}){let i=null,s={theme:e,type:t};return!1===r||(ft(r)?i=r({...s,isLoading:n}):h.isValidElement(r)?i=h.cloneElement(r,s):n?i=jt.spinner():(e=>e in jt)(t)&&(i=jt[t](s))),i}var Kt=e=>{let{isRunning:t,preventExitTransition:n,toastRef:r,eventHandlers:i,playToast:s}=Nt(e),{closeButton:a,children:o,autoClose:A,onClick:l,type:c,hideProgressBar:u,closeToast:d,transition:p,position:g,className:m,style:y,progressClassName:v,updateId:w,role:b,progress:E,rtl:B,toastId:C,deleteToast:S,isIn:T,isLoading:x,closeOnClick:k,theme:I,ariaLabel:F}=e,L=ut("Toastify__toast",`Toastify__toast-theme--${I}`,`Toastify__toast--${c}`,{"Toastify__toast--rtl":B},{"Toastify__toast--close-on-click":k}),D=ft(m)?m({rtl:B,position:g,type:c,defaultClassName:L}):ut(L,m),_=$t(e),U=!!E||!A,P={closeToast:d,type:c,theme:I},R=null;return!1===a||(R=ft(a)?a(P):h.isValidElement(a)?h.cloneElement(a,P):function({closeToast:e,theme:t,ariaLabel:n="close"}){return f.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:t=>{t.stopPropagation(),e(!0)},"aria-label":n},f.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},f.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(P)),f.createElement(p,{isIn:T,done:S,position:g,preventExitTransition:n,nodeRef:r,playToast:s},f.createElement("div",{id:C,tabIndex:0,onClick:l,"data-in":T,className:D,...i,style:y,ref:r,...T&&{role:b,"aria-label":F}},null!=_&&f.createElement("div",{className:ut("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!x})},_),vt(o,e,!t),R,!e.customProgressBar&&f.createElement(wt,{...w&&!U?{key:`p-${w}`}:{},rtl:B,theme:I,delay:A,isRunning:t,isIn:T,closeToast:d,hide:u,type:c,className:v,controlledProgress:U,progress:E||0})))},Vt={position:"top-right",transition:function({enter:e,exit:t,appendPosition:n=!1,collapse:r=!0,collapseDuration:i=300}){return function({children:s,position:a,preventExitTransition:o,done:A,nodeRef:l,isIn:c,playToast:u}){let d=n?`${e}--${a}`:e,p=n?`${t}--${a}`:t,g=h.useRef(0);return h.useLayoutEffect(()=>{let e=l.current,t=d.split(" "),n=r=>{r.target===l.current&&(u(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===g.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)},[]),h.useEffect(()=>{let e=l.current,t=()=>{e.removeEventListener("animationend",t),r?function(e,t,n=300){let{scrollHeight:r,style:i}=e;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)})})}(e,A,i):A()};c||(o?t():(g.current=1,e.className+=` ${p}`,e.addEventListener("animationend",t)))},[c]),f.createElement(f.Fragment,null,s)}}(((e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}))("bounce",!0)),autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code};function Gt(e){let t={...Vt,...e},n=e.stacked,[r,i]=h.useState(!0),s=h.useRef(null),{getToastToRender:a,isToastActive:o,count:A}=function(e){var t;let{subscribe:n,getSnapshot:r,setProps:i}=h.useRef(_t(e)).current;i(e);let s=null==(t=h.useSyncExternalStore(n,r,r))?void 0:t.slice();return{getToastToRender:function(t){if(!s)return[];let n=new Map;return e.newestOnTop&&s.reverse(),s.forEach(e=>{let{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)}),Array.from(n,e=>t(e[0],e[1]))},isToastActive:It,count:null==s?void 0:s.length}}(t),{className:l,style:c,rtl:u,containerId:d,hotKeys:p}=t;function g(e){let t=ut("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":u});return ft(l)?l({position:e,rtl:u,defaultClassName:t}):ut(t,pt(l))}function m(){n&&(i(!0),Qt.play())}return Mt(()=>{var e;if(n){let n=s.current.querySelectorAll('[data-in="true"]'),i=12,a=null==(e=t.position)?void 0:e.includes("top"),o=0,A=0;Array.from(n).reverse().forEach((e,t)=>{let n=e;n.classList.add("Toastify__toast--stacked"),t>0&&(n.dataset.collapsed=`${r}`),n.dataset.pos||(n.dataset.pos=a?"top":"bot");let s=o*(r?.2:1)+(r?0:i*t);n.style.setProperty("--y",`${a?s:-1*s}px`),n.style.setProperty("--g",`${i}`),n.style.setProperty("--s",""+(1-(r?A:0))),o+=n.offsetHeight,A+=.025})}},[r,A,n]),h.useEffect(()=>{function e(e){var t;let n=s.current;p(e)&&(null==(t=n.querySelector('[tabIndex="0"]'))||t.focus(),i(!1),Qt.pause()),"Escape"===e.key&&(document.activeElement===n||null!=n&&n.contains(document.activeElement))&&(i(!0),Qt.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[p]),f.createElement("section",{ref:s,className:"Toastify",id:d,onMouseEnter:()=>{n&&(i(!1),Qt.pause())},onMouseLeave:m,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},a((e,t)=>{let r=t.length?{...c}:{...c,pointerEvents:"none"};return f.createElement("div",{tabIndex:-1,className:g(e),"data-stacked":n,style:r,key:`c-${e}`},t.map(({content:e,props:t})=>f.createElement(Kt,{...t,stacked:n,collapseAll:m,isIn:o(t.toastId,t.containerId),key:`t-${t.key}`},e)))}))}const Wt=({type:e="text",InputClass:t,placeholder:n,onKeyDown:r,defaultValue:i})=>{const[s,a]=h.useState(null),o=h.useRef(null);return A.jsx("input",{tabIndex:-1,defaultValue:i,type:e,ref:o,className:"input "+t,placeholder:n,onKeyDown:function(e){if(!r)return;if(s&&clearTimeout(s),"Enter"==e.code)return void r(e.currentTarget.value);const t=setTimeout(()=>{o.current&&r(o.current.value)},300);a(t)}})},zt=({icon:e,ButtonClass:t,onClick:n,content:r,iconClassName:i,titleButton:s})=>A.jsxs("button",{tabIndex:-1,className:"button "+t,onClick:n,title:s||"",children:[e&&A.jsx("span",{className:"material-symbols-outlined "+i,children:e})," ",r]}),Yt=""+new URL("icon-D74Nm_me.png",import.meta.url).href,qt=h.createContext({});const Xt="undefined"!=typeof window,Jt=Xt?h.useLayoutEffect:h.useEffect,Zt=h.createContext(null);function en(e,t){-1===e.indexOf(t)&&e.push(t)}function tn(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const nn=(e,t,n)=>n>t?t:n<e?e:n;const rn={},sn=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function an(e){return"object"==typeof e&&null!==e}const on=e=>/^0[^.\s]+$/u.test(e);function An(e){let t;return()=>(void 0===t&&(t=e()),t)}const ln=e=>e,cn=(e,t)=>n=>t(e(n)),un=(...e)=>e.reduce(cn),dn=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};class hn{constructor(){this.subscriptions=[]}add(e){return en(this.subscriptions,e),()=>tn(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const fn=e=>1e3*e,pn=e=>e/1e3;function gn(e,t){return t?e*(1e3/t):0}const mn=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function yn(e,t,n,r){if(e===t&&n===r)return ln;const i=t=>function(e,t,n,r,i){let s,a,o=0;do{a=t+(n-t)/2,s=mn(a,r,i)-e,s>0?n=a:t=a}while(Math.abs(s)>1e-7&&++o<12);return a}(t,0,1,e,n);return e=>0===e||1===e?e:mn(i(e),t,r)}const vn=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,wn=e=>t=>1-e(1-t),bn=yn(.33,1.53,.69,.99),En=wn(bn),Bn=vn(En),Cn=e=>(e*=2)<1?.5*En(e):.5*(2-Math.pow(2,-10*(e-1))),Sn=e=>1-Math.sin(Math.acos(e)),Tn=wn(Sn),xn=vn(Sn),kn=yn(.42,0,1,1),In=yn(0,0,.58,1),Fn=yn(.42,0,.58,1),Ln=e=>Array.isArray(e)&&"number"==typeof e[0],Dn={linear:ln,easeIn:kn,easeInOut:Fn,easeOut:In,circIn:Sn,circInOut:xn,circOut:Tn,backIn:En,backInOut:Bn,backOut:bn,anticipate:Cn},_n=e=>{if(Ln(e)){e.length;const[t,n,r,i]=e;return yn(t,n,r,i)}return"string"==typeof e?Dn[e]:e},Un=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Pn(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=Un.reduce((e,t)=>(e[t]=function(e){let t=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(t){s.has(t)&&(A.schedule(t),e()),t(a)}const A={schedule:(e,i=!1,a=!1)=>{const o=a&&r?t:n;return i&&s.add(e),o.has(e)||o.add(e),e},cancel:e=>{n.delete(e),s.delete(e)},process:e=>{a=e,r?i=!0:(r=!0,[t,n]=[n,t],t.forEach(o),t.clear(),r=!1,i&&(i=!1,A.process(e)))}};return A}(s),e),{}),{setup:o,read:A,resolveKeyframes:l,preUpdate:c,update:u,preRender:d,render:h,postRender:f}=a,p=()=>{const s=rn.useManualTiming?i.timestamp:performance.now();n=!1,rn.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(s-i.timestamp,40),1)),i.timestamp=s,i.isProcessing=!0,o.process(i),A.process(i),l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),f.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(p))};return{schedule:Un.reduce((t,s)=>{const o=a[s];return t[s]=(t,s=!1,a=!1)=>(n||(n=!0,r=!0,i.isProcessing||e(p)),o.schedule(t,s,a)),t},{}),cancel:e=>{for(let t=0;t<Un.length;t++)a[Un[t]].cancel(e)},state:i,steps:a}}const{schedule:Rn,cancel:On,state:Qn,steps:Nn}=Pn("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:ln,!0);let Mn;function Hn(){Mn=void 0}const jn={now:()=>(void 0===Mn&&jn.set(Qn.isProcessing||rn.useManualTiming?Qn.timestamp:performance.now()),Mn),set:e=>{Mn=e,queueMicrotask(Hn)}},$n=e=>t=>"string"==typeof t&&t.startsWith(e),Kn=$n("--"),Vn=$n("var(--"),Gn=e=>!!Vn(e)&&Wn.test(e.split("/*")[0].trim()),Wn=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,zn={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},Yn={...zn,transform:e=>nn(0,1,e)},qn={...zn,default:1},Xn=e=>Math.round(1e5*e)/1e5,Jn=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const Zn=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,er=(e,t)=>n=>Boolean("string"==typeof n&&Zn.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),tr=(e,t,n)=>r=>{if("string"!=typeof r)return r;const[i,s,a,o]=r.match(Jn);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},nr={...zn,transform:e=>Math.round((e=>nn(0,255,e))(e))},rr={test:er("rgb","red"),parse:tr("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+nr.transform(e)+", "+nr.transform(t)+", "+nr.transform(n)+", "+Xn(Yn.transform(r))+")"};const ir={test:er("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:rr.transform},sr=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),ar=sr("deg"),or=sr("%"),Ar=sr("px"),lr=sr("vh"),cr=sr("vw"),ur=(()=>({...or,parse:e=>or.parse(e)/100,transform:e=>or.transform(100*e)}))(),dr={test:er("hsl","hue"),parse:tr("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+or.transform(Xn(t))+", "+or.transform(Xn(n))+", "+Xn(Yn.transform(r))+")"},hr={test:e=>rr.test(e)||ir.test(e)||dr.test(e),parse:e=>rr.test(e)?rr.parse(e):dr.test(e)?dr.parse(e):ir.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?rr.transform(e):dr.transform(e),getAnimatableNone:e=>{const t=hr.parse(e);return t.alpha=0,hr.transform(t)}},fr=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const pr="number",gr="color",mr=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function yr(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=t.replace(mr,e=>(hr.test(e)?(r.color.push(s),i.push(gr),n.push(hr.parse(e))):e.startsWith("var(")?(r.var.push(s),i.push("var"),n.push(e)):(r.number.push(s),i.push(pr),n.push(parseFloat(e))),++s,"${}")).split("${}");return{values:n,split:a,indexes:r,types:i}}function vr(e){return yr(e).values}function wr(e){const{split:t,types:n}=yr(e),r=t.length;return e=>{let i="";for(let s=0;s<r;s++)if(i+=t[s],void 0!==e[s]){const t=n[s];i+=t===pr?Xn(e[s]):t===gr?hr.transform(e[s]):e[s]}return i}}const br=e=>"number"==typeof e?0:hr.test(e)?hr.getAnimatableNone(e):e;const Er={test:function(e){return isNaN(e)&&"string"==typeof e&&(e.match(Jn)?.length||0)+(e.match(fr)?.length||0)>0},parse:vr,createTransformer:wr,getAnimatableNone:function(e){const t=vr(e);return wr(e)(t.map(br))}};function Br(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Cr(e,t){return n=>n>0?t:e}const Sr=(e,t,n)=>e+(t-e)*n,Tr=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},xr=[ir,rr,dr];function kr(e){const t=(n=e,xr.find(e=>e.test(n)));var n;if(!Boolean(t))return!1;let r=t.parse(e);return t===dr&&(r=function({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,n/=100;let i=0,s=0,a=0;if(t/=100){const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r;i=Br(o,r,e+1/3),s=Br(o,r,e),a=Br(o,r,e-1/3)}else i=s=a=n;return{red:Math.round(255*i),green:Math.round(255*s),blue:Math.round(255*a),alpha:r}}(r)),r}const Ir=(e,t)=>{const n=kr(e),r=kr(t);if(!n||!r)return Cr(e,t);const i={...n};return e=>(i.red=Tr(n.red,r.red,e),i.green=Tr(n.green,r.green,e),i.blue=Tr(n.blue,r.blue,e),i.alpha=Sr(n.alpha,r.alpha,e),rr.transform(i))},Fr=new Set(["none","hidden"]);function Lr(e,t){return n=>Sr(e,t,n)}function Dr(e){return"number"==typeof e?Lr:"string"==typeof e?Gn(e)?Cr:hr.test(e)?Ir:Pr:Array.isArray(e)?_r:"object"==typeof e?hr.test(e)?Ir:Ur:Cr}function _r(e,t){const n=[...e],r=n.length,i=e.map((e,n)=>Dr(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}}function Ur(e,t){const n={...e,...t},r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=Dr(e[i])(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const Pr=(e,t)=>{const n=Er.createTransformer(t),r=yr(e),i=yr(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Fr.has(e)&&!i.values.length||Fr.has(t)&&!r.values.length?function(e,t){return Fr.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):un(_r(function(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],a=e.indexes[s][r[s]],o=e.values[a]??0;n[i]=o,r[s]++}return n}(r,i),i.values),n):Cr(e,t)};function Rr(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return Sr(e,t,n);return Dr(e)(e,t)}const Or=e=>{const t=({timestamp:t})=>e(t);return{start:(e=!0)=>Rn.update(t,e),stop:()=>On(t),now:()=>Qn.isProcessing?Qn.timestamp:jn.now()}},Qr=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=Math.round(1e4*e(s/(i-1)))/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Nr=2e4;function Mr(e){let t=0;let n=e.next(t);for(;!n.done&&t<Nr;)t+=50,n=e.next(t);return t>=Nr?1/0:t}function Hr(e,t,n){const r=Math.max(t-5,0);return gn(n-e(r),t-r)}const jr=100,$r=10,Kr=1,Vr=0,Gr=800,Wr=.3,zr=.3,Yr={granular:.01,default:2},qr={granular:.005,default:.5},Xr=.01,Jr=10,Zr=.05,ei=1,ti=.001;function ni({duration:e=Gr,bounce:t=Wr,velocity:n=Vr,mass:r=Kr}){let i,s,a=1-t;a=nn(Zr,ei,a),e=nn(Xr,Jr,pn(e)),a<1?(i=t=>{const r=t*a,i=r*e,s=r-n,o=ii(t,a),A=Math.exp(-i);return ti-s/o*A},s=t=>{const r=t*a*e,s=r*n+n,o=Math.pow(a,2)*Math.pow(t,2)*e,A=Math.exp(-r),l=ii(Math.pow(t,2),a);return(-i(t)+ti>0?-1:1)*((s-o)*A)/l}):(i=t=>Math.exp(-t*e)*((t-n)*e+1)-.001,s=t=>Math.exp(-t*e)*(e*e*(n-t)));const o=function(e,t,n){let r=n;for(let i=1;i<ri;i++)r-=e(r)/t(r);return r}(i,s,5/e);if(e=fn(e),isNaN(o))return{stiffness:jr,damping:$r,duration:e};{const t=Math.pow(o,2)*r;return{stiffness:t,damping:2*a*Math.sqrt(r*t),duration:e}}}const ri=12;function ii(e,t){return e*Math.sqrt(1-t*t)}const si=["duration","bounce"],ai=["stiffness","damping","mass"];function oi(e,t){return t.some(t=>void 0!==e[t])}function Ai(e=zr,t=Wr){const n="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:A,damping:l,mass:c,duration:u,velocity:d,isResolvedFromDuration:h}=function(e){let t={velocity:Vr,stiffness:jr,damping:$r,mass:Kr,isResolvedFromDuration:!1,...e};if(!oi(e,ai)&&oi(e,si))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),i=r*r,s=2*nn(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Kr,stiffness:i,damping:s}}else{const n=ni(e);t={...t,...n,mass:Kr},t.isResolvedFromDuration=!0}return t}({...n,velocity:-pn(n.velocity||0)}),f=d||0,p=l/(2*Math.sqrt(A*c)),g=a-s,m=pn(Math.sqrt(A/c)),y=Math.abs(g)<5;let v;if(r||(r=y?Yr.granular:Yr.default),i||(i=y?qr.granular:qr.default),p<1){const e=ii(m,p);v=t=>{const n=Math.exp(-p*m*t);return a-n*((f+p*m*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===p)v=e=>a-Math.exp(-m*e)*(g+(f+m*g)*e);else{const e=m*Math.sqrt(p*p-1);v=t=>{const n=Math.exp(-p*m*t),r=Math.min(e*t,300);return a-n*((f+p*m*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}const w={calculatedDuration:h&&u||null,next:e=>{const t=v(e);if(h)o.done=e>=u;else{let n=0===e?f:0;p<1&&(n=0===e?fn(f):Hr(v,e,t));const s=Math.abs(n)<=r,A=Math.abs(a-t)<=i;o.done=s&&A}return o.value=o.done?a:t,o},toString:()=>{const e=Math.min(Mr(w),Nr),t=Qr(t=>w.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return w}function li({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:A,restDelta:l=.5,restSpeed:c}){const u=e[0],d={done:!1,value:u},h=e=>void 0===o?A:void 0===A||Math.abs(o-e)<Math.abs(A-e)?o:A;let f=n*t;const p=u+f,g=void 0===a?p:a(p);g!==p&&(f=g-u);const m=e=>-f*Math.exp(-e/r),y=e=>g+m(e),v=e=>{const t=m(e),n=y(e);d.done=Math.abs(t)<=l,d.value=d.done?g:n};let w,b;const E=e=>{var t;(t=d.value,void 0!==o&&t<o||void 0!==A&&t>A)&&(w=e,b=Ai({keyframes:[d.value,h(d.value)],velocity:Hr(y,e,d.value),damping:i,stiffness:s,restDelta:l,restSpeed:c}))};return E(0),{calculatedDuration:null,next:e=>{let t=!1;return b||void 0!==w||(t=!0,v(e),E(e)),void 0!==w&&e>=w?b.next(e-w):(!t&&v(e),d)}}}function ci(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(t.length,1===s)return()=>t[0];if(2===s&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,n){const r=[],i=n||rn.mix||Rr,s=e.length-1;for(let a=0;a<s;a++){let n=i(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]||ln:t;n=un(e,n)}r.push(n)}return r}(t,r,i),A=o.length,l=n=>{if(a&&n<e[0])return t[0];let r=0;if(A>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const i=dn(e[r],e[r+1],n);return o[r](i)};return n?t=>l(nn(e[0],e[s-1],t)):l}function ui(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=dn(0,t,r);e.push(Sr(n,1,i))}}(t,e.length-1),t}function di({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=(e=>Array.isArray(e)&&"number"!=typeof e[0])(r)?r.map(_n):_n(r),s={done:!1,value:t[0]},a=function(e,t){return e.map(e=>e*t)}(n&&n.length===t.length?n:ui(t),e),o=ci(a,t,{ease:Array.isArray(i)?i:(A=t,l=i,A.map(()=>l||Fn).splice(0,A.length-1))});var A,l;return{calculatedDuration:e,next:t=>(s.value=o(t),s.done=t>=e,s)}}Ai.applyToOptions=e=>{const t=function(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(Mr(r),Nr);return{type:"keyframes",ease:e=>r.next(i*e).value/t,duration:pn(i)}}(e,100,Ai);return e.ease=t.ease,e.duration=fn(t.duration),e.type="keyframes",e};const hi=e=>null!==e;function fi(e,{repeat:t,repeatType:n="loop"},r,i=1){const s=e.filter(hi),a=i<0||t&&"loop"!==n&&t%2==1?0:s.length-1;return a&&void 0!==r?r:s[a]}const pi={decay:li,inertia:li,tween:di,keyframes:di,spring:Ai};function gi(e){"string"==typeof e.type&&(e.type=pi[e.type])}class mi{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const yi=e=>e/100;class vi extends mi{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==jn.now()&&this.tick(jn.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;gi(e);const{type:t=di,repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:s=0}=e;let{keyframes:a}=e;const o=t||di;o!==di&&"number"!=typeof a[0]&&(this.mixKeyframes=un(yi,Rr(a[0],a[1])),a=[0,100]);const A=o({...e,keyframes:a});"mirror"===i&&(this.mirroredGenerator=o({...e,keyframes:[...a].reverse(),velocity:-s})),null===A.calculatedDuration&&(A.calculatedDuration=Mr(A));const{calculatedDuration:l}=A;this.calculatedDuration=l,this.resolvedDuration=l+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=A}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:r,mixKeyframes:i,mirroredGenerator:s,resolvedDuration:a,calculatedDuration:o}=this;if(null===this.startTime)return n.next(0);const{delay:A=0,keyframes:l,repeat:c,repeatType:u,repeatDelay:d,type:h,onUpdate:f,finalKeyframe:p}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-A*(this.playbackSpeed>=0?1:-1),m=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let y=this.currentTime,v=n;if(c){const e=Math.min(this.currentTime,r)/a;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,c+1);Boolean(t%2)&&("reverse"===u?(n=1-n,d&&(n-=d/a)):"mirror"===u&&(v=s)),y=nn(0,1,n)*a}const w=m?{done:!1,value:l[0]}:v.next(y);i&&(w.value=i(w.value));let{done:b}=w;m||null===o||(b=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const E=null===this.holdTime&&("finished"===this.state||"running"===this.state&&b);return E&&h!==li&&(w.value=fi(l,this.options,p,this.speed)),f&&f(w.value),E&&this.finish(),w}then(e,t){return this.finished.then(e,t)}get duration(){return pn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+pn(e)}get time(){return pn(this.currentTime)}set time(e){e=fn(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(jn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=pn(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Or,startTime:t}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),this.options.onPlay?.();const n=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=n):null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(jn.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}const wi=e=>180*e/Math.PI,bi=e=>{const t=wi(Math.atan2(e[1],e[0]));return Bi(t)},Ei={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:bi,rotateZ:bi,skewX:e=>wi(Math.atan(e[1])),skewY:e=>wi(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Bi=e=>((e%=360)<0&&(e+=360),e),Ci=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Si=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Ti={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Ci,scaleY:Si,scale:e=>(Ci(e)+Si(e))/2,rotateX:e=>Bi(wi(Math.atan2(e[6],e[5]))),rotateY:e=>Bi(wi(Math.atan2(-e[2],e[0]))),rotateZ:bi,rotate:bi,skewX:e=>wi(Math.atan(e[4])),skewY:e=>wi(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function xi(e){return e.includes("scale")?1:0}function ki(e,t){if(!e||"none"===e)return xi(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Ti,i=n;else{const t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Ei,i=t}if(!i)return xi(t);const s=r[t],a=i[1].split(",").map(Ii);return"function"==typeof s?s(a):a[s]}function Ii(e){return parseFloat(e.trim())}const Fi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Li=(()=>new Set(Fi))(),Di=e=>e===zn||e===Ar,_i=new Set(["x","y","z"]),Ui=Fi.filter(e=>!_i.has(e));const Pi={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>ki(t,"x"),y:(e,{transform:t})=>ki(t,"y")};Pi.translateX=Pi.x,Pi.translateY=Pi.y;const Ri=new Set;let Oi=!1,Qi=!1,Ni=!1;function Mi(){if(Qi){const e=Array.from(Ri).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return Ui.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(([t,n])=>{e.getValue(t)?.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}Qi=!1,Oi=!1,Ri.forEach(e=>e.complete(Ni)),Ri.clear()}function Hi(){Ri.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Qi=!0)})}class ji{constructor(e,t,n,r,i,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=i,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Ri.add(this),Oi||(Oi=!0,Rn.read(Hi),Rn.resolveKeyframes(Mi))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const i=r?.get(),s=e[e.length-1];if(void 0!==i)e[0]=i;else if(n&&t){const r=n.readValue(t,s);null!=r&&(e[0]=r)}void 0===e[0]&&(e[0]=s),r&&void 0===i&&r.set(e[0])}!function(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ri.delete(this)}cancel(){"scheduled"===this.state&&(Ri.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const $i=An(()=>void 0!==window.ScrollTimeline),Ki={};function Vi(e,t){const n=An(e);return()=>Ki[t]??n()}const Gi=Vi(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(c$){return!1}return!0},"linearEasing"),Wi=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,zi={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wi([0,.65,.55,1]),circOut:Wi([.55,0,1,.45]),backIn:Wi([.31,.01,.66,-.59]),backOut:Wi([.33,1.53,.69,.99])};function Yi(e,t){return e?"function"==typeof e?Gi()?Qr(e,t):"ease-out":Ln(e)?Wi(e):Array.isArray(e)?e.map(e=>Yi(e,t)||zi.easeOut):zi[e]:void 0}function qi(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:A}={},l=void 0){const c={[t]:n};A&&(c.offset=A);const u=Yi(o,i);Array.isArray(u)&&(c.easing=u);const d={delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:"reverse"===a?"alternate":"normal"};l&&(d.pseudoElement=l);return e.animate(c,d)}function Xi(e){return"function"==typeof e&&"applyToOptions"in e}class Ji extends mi{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:i,allowFlatten:s=!1,finalKeyframe:a,onComplete:o}=e;this.isPseudoElement=Boolean(i),this.allowFlatten=s,this.options=e,e.type;const A=function({type:e,...t}){return Xi(e)&&Gi()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=qi(t,n,r,A,i),!1===A.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const e=fi(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}o?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(c$){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return pn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+pn(e)}get time(){return pn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=fn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&$i()?(this.animation.timeline=e,ln):t(this)}}const Zi={anticipate:Cn,backInOut:Bn,circInOut:xn};function es(e){"string"==typeof e.ease&&e.ease in Zi&&(e.ease=Zi[e.ease])}class ts extends Ji{constructor(e){es(e),gi(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:r,element:i,...s}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);const a=new vi({...s,autoplay:!1}),o=fn(this.finishedTime??this.time);t.setWithVelocity(a.sample(o-10).value,a.sample(o).value,10),a.stop()}}const ns=(e,t)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!Er.test(e)&&"0"!==e||e.startsWith("url(")));function rs(e){e.duration=0,e.type="keyframes"}const is=new Set(["opacity","clipPath","filter","transform"]),ss=An(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class as extends mi{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s="loop",keyframes:a,name:o,motionValue:A,element:l,...c}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=jn.now();const u={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:i,repeatType:s,name:o,motionValue:A,element:l,...c},d=l?.KeyframeResolver||ji;this.keyframeResolver=new d(a,(e,t,n)=>this.onKeyframesResolved(e,t,u,!n),o,A,l),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:i,type:s,velocity:a,delay:o,isHandoff:A,onUpdate:l}=n;this.resolvedAt=jn.now(),function(e,t,n,r){const i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;const s=e[e.length-1],a=ns(i,t),o=ns(s,t);return!(!a||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||Xi(n))&&r)}(e,i,s,a)||(!rn.instantAnimations&&o||l?.(fi(e,n,t)),e[0]=e[e.length-1],rs(n),n.repeat=0);const c={startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},u=!A&&function(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:s,type:a}=e,o=t?.owner?.current;if(!(o instanceof HTMLElement))return!1;const{onUpdate:A,transformTemplate:l}=t.owner.getProps();return ss()&&n&&is.has(n)&&("transform"!==n||!l)&&!A&&!r&&"mirror"!==i&&0!==s&&"inertia"!==a}(c)?new ts({...c,element:c.motionValue.owner.current}):new vi(c);u.finished.then(()=>this.notifyFinished()).catch(ln),this.pendingTimeline&&(this.stopTimeline=u.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=u}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Ni=!0,Hi(),Mi(),Ni=!1),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const os=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function As(e,t,n=1){const[r,i]=function(e){const t=os.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const e=s.trim();return sn(e)?parseFloat(e):e}return Gn(i)?As(i,t,n+1):i}function ls(e,t){return e?.[t]??e?.default??e}const cs=new Set(["width","height","top","left","right","bottom",...Fi]),us=e=>t=>t.test(e),ds=[zn,Ar,or,ar,cr,lr,{test:e=>"auto"===e,parse:e=>e}],hs=e=>ds.find(us(e));function fs(e){return"number"==typeof e?0===e:null===e||("none"===e||"0"===e||on(e))}const ps=new Set(["brightness","contrast","saturate","opacity"]);function gs(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(Jn)||[];if(!r)return e;const i=n.replace(r,"");let s=ps.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const ms=/\b([a-z-]*)\(.*?\)/gu,ys={...Er,getAnimatableNone:e=>{const t=e.match(ms);return t?t.map(gs).join(" "):e}},vs={...zn,transform:Math.round},ws={borderWidth:Ar,borderTopWidth:Ar,borderRightWidth:Ar,borderBottomWidth:Ar,borderLeftWidth:Ar,borderRadius:Ar,radius:Ar,borderTopLeftRadius:Ar,borderTopRightRadius:Ar,borderBottomRightRadius:Ar,borderBottomLeftRadius:Ar,width:Ar,maxWidth:Ar,height:Ar,maxHeight:Ar,top:Ar,right:Ar,bottom:Ar,left:Ar,padding:Ar,paddingTop:Ar,paddingRight:Ar,paddingBottom:Ar,paddingLeft:Ar,margin:Ar,marginTop:Ar,marginRight:Ar,marginBottom:Ar,marginLeft:Ar,backgroundPositionX:Ar,backgroundPositionY:Ar,...{rotate:ar,rotateX:ar,rotateY:ar,rotateZ:ar,scale:qn,scaleX:qn,scaleY:qn,scaleZ:qn,skew:ar,skewX:ar,skewY:ar,distance:Ar,translateX:Ar,translateY:Ar,translateZ:Ar,x:Ar,y:Ar,z:Ar,perspective:Ar,transformPerspective:Ar,opacity:Yn,originX:ur,originY:ur,originZ:Ar},zIndex:vs,fillOpacity:Yn,strokeOpacity:Yn,numOctaves:vs},bs={...ws,color:hr,backgroundColor:hr,outlineColor:hr,fill:hr,stroke:hr,borderColor:hr,borderTopColor:hr,borderRightColor:hr,borderBottomColor:hr,borderLeftColor:hr,filter:ys,WebkitFilter:ys},Es=e=>bs[e];function Bs(e,t){let n=Es(e);return n!==ys&&(n=Er),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Cs=new Set(["auto","none","0"]);class Ss extends ji{constructor(e,t,n,r,i){super(e,t,n,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let n=e[o];if("string"==typeof n&&(n=n.trim(),Gn(n))){const r=As(n,t.current);void 0!==r&&(e[o]=r),o===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!cs.has(n)||2!==e.length)return;const[r,i]=e,s=hs(r),a=hs(i);if(s!==a)if(Di(s)&&Di(a))for(let o=0;o<e.length;o++){const t=e[o];"string"==typeof t&&(e[o]=parseFloat(t))}else Pi[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)(null===e[r]||fs(e[r]))&&n.push(r);n.length&&function(e,t,n){let r,i=0;for(;i<e.length&&!r;){const t=e[i];"string"==typeof t&&!Cs.has(t)&&yr(t).values.length&&(r=e[i]),i++}if(r&&n)for(const s of t)e[s]=Bs(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Pi[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const i=n.length-1,s=n[i];n[i]=Pi[t](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==s&&void 0===this.finalKeyframe&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([t,n])=>{e.getValue(t).set(n)}),this.resolveNoneKeyframes()}}const Ts=(e,t)=>t&&"number"==typeof e?t.transform(e):e;class xs{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{const t=jn.now();if(this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const n of this.dependents)n.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=jn.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new hn);const n=this.events[e].add(t);return"change"===e?()=>{n(),Rn.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=jn.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return gn(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ks(e,t){return new xs(e,t)}const{schedule:Is}=Pn(queueMicrotask,!1),Fs={x:!1,y:!1};function Ls(){return Fs.x||Fs.y}function Ds(e,t){const n=function(e,t,n){if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document;const r=n?.[e]??t.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e)}(e),r=new AbortController;return[n,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function _s(e){return!("touch"===e.pointerType||Ls())}const Us=(e,t)=>!!t&&(e===t||Us(e,t.parentElement)),Ps=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,Rs=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const Os=new WeakSet;function Qs(e){return t=>{"Enter"===t.key&&e(t)}}function Ns(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function Ms(e){return Ps(e)&&!Ls()}function Hs(e,t,n={}){const[r,i,s]=Ds(e,n),a=e=>{const r=e.currentTarget;if(!Ms(e))return;Os.add(r);const s=t(r,e),a=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",A),Os.has(r)&&Os.delete(r),Ms(e)&&"function"==typeof s&&s(e,{success:t})},o=e=>{a(e,r===window||r===document||n.useGlobalTarget||Us(r,e.target))},A=e=>{a(e,!1)};window.addEventListener("pointerup",o,i),window.addEventListener("pointercancel",A,i)};return r.forEach(e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",a,i),an(t=e)&&"offsetHeight"in t&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=Qs(()=>{if(Os.has(n))return;Ns(n,"down");const e=Qs(()=>{Ns(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>Ns(n,"cancel"),t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)})(e,i)),function(e){return Rs.has(e.tagName)||-1!==e.tabIndex}(e)||e.hasAttribute("tabindex")||(e.tabIndex=0))}),s}function js(e){return an(e)&&"ownerSVGElement"in e}const $s=e=>Boolean(e&&e.getVelocity),Ks=[...ds,hr,Er],Vs=h.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});const Gs=h.createContext({strict:!1}),Ws={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},zs={};for(const d$ in Ws)zs[d$]={isEnabled:e=>Ws[d$].some(t=>!!e[t])};const Ys=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qs(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Ys.has(e)}let Xs=e=>!qs(e);try{"function"==typeof(Js=require("@emotion/is-prop-valid").default)&&(Xs=e=>e.startsWith("on")?!qs(e):Js(e))}catch{}var Js;const Zs=h.createContext({});function ea(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function ta(e){return"string"==typeof e||Array.isArray(e)}const na=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ra=["initial",...na];function ia(e){return ea(e.animate)||ra.some(t=>ta(e[t]))}function sa(e){return Boolean(ia(e)||e.variants)}function aa(e){const{initial:t,animate:n}=function(e,t){if(ia(e)){const{initial:t,animate:n}=e;return{initial:!1===t||ta(t)?t:void 0,animate:ta(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,h.useContext(Zs));return h.useMemo(()=>({initial:t,animate:n}),[oa(t),oa(n)])}function oa(e){return Array.isArray(e)?e.join(" "):e}const Aa={};function la(e,{layout:t,layoutId:n}){return Li.has(e)||e.startsWith("origin")||(t||void 0!==n)&&(!!Aa[e]||"opacity"===e)}const ca={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ua=Fi.length;function da(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let a=!1,o=!1;for(const A in t){const e=t[A];if(Li.has(A))a=!0;else if(Kn(A))i[A]=e;else{const t=Ts(e,ws[A]);A.startsWith("origin")?(o=!0,s[A]=t):r[A]=t}}if(t.transform||(a||n?r.transform=function(e,t,n){let r="",i=!0;for(let s=0;s<ua;s++){const a=Fi[s],o=e[a];if(void 0===o)continue;let A=!0;if(A="number"==typeof o?o===(a.startsWith("scale")?1:0):0===parseFloat(o),!A||n){const e=Ts(o,ws[a]);A||(i=!1,r+=`${ca[a]||a}(${e}) `),n&&(t[a]=e)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:n=0}=s;r.transformOrigin=`${e} ${t} ${n}`}}const ha=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function fa(e,t,n){for(const r in t)$s(t[r])||la(r,n)||(e[r]=t[r])}function pa(e,t){const n={};return fa(n,e.style||{},e),Object.assign(n,function({transformTemplate:e},t){return h.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{}};return da(n,t,e),Object.assign({},n.vars,n.style)},[t])}(e,t)),n}function ga(e,t){const n={},r=pa(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const ma={offset:"stroke-dashoffset",array:"stroke-dasharray"},ya={offset:"strokeDashoffset",array:"strokeDasharray"};function va(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...o},A,l,c){if(da(e,o,l),A)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:u,style:d}=e;u.transform&&(d.transform=u.transform,delete u.transform),(d.transform||u.transformOrigin)&&(d.transformOrigin=u.transformOrigin??"50% 50%",delete u.transformOrigin),d.transform&&(d.transformBox=c?.transformBox??"fill-box",delete u.transformBox),void 0!==t&&(u.x=t),void 0!==n&&(u.y=n),void 0!==r&&(u.scale=r),void 0!==i&&function(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?ma:ya;e[s.offset]=Ar.transform(-r);const a=Ar.transform(t),o=Ar.transform(n);e[s.array]=`${a} ${o}`}(u,i,s,a,!1)}const wa=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),ba=e=>"string"==typeof e&&"svg"===e.toLowerCase();function Ea(e,t,n,r){const i=h.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return va(n,t,ba(r),e.transformTemplate,e.style),{...n.attrs,style:{...n.style}}},[t]);if(e.style){const t={};fa(t,e.style,e),i.style={...t,...i.style}}return i}const Ba=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ca(e){return"string"==typeof e&&!e.includes("-")&&!!(Ba.indexOf(e)>-1||/[A-Z]/u.test(e))}function Sa(e,t,n,{latestValues:r},i,s=!1){const a=(Ca(e)?Ea:ga)(t,r,i,e),o=function(e,t,n){const r={};for(const i in e)"values"===i&&"object"==typeof e.values||(Xs(i)||!0===n&&qs(i)||!t&&!qs(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(t,"string"==typeof e,s),A=e!==h.Fragment?{...o,...a,ref:n}:{},{children:l}=t,c=h.useMemo(()=>$s(l)?l.get():l,[l]);return h.createElement(e,{...A,children:c})}function Ta(e){const t=[{},{}];return e?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function xa(e,t,n,r){if("function"==typeof t){const[i,s]=Ta(r);t=t(void 0!==n?n:e.custom,i,s)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[i,s]=Ta(r);t=t(void 0!==n?n:e.custom,i,s)}return t}function ka(e){return $s(e)?e.get():e}function Ia(e,t,n,r){const i={},s=r(e,{});for(const d in s)i[d]=ka(s[d]);let{initial:a,animate:o}=e;const A=ia(e),l=sa(e);t&&l&&!A&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let c=!!n&&!1===n.initial;c=c||!1===a;const u=c?o:a;if(u&&"boolean"!=typeof u&&!ea(u)){const t=Array.isArray(u)?u:[u];for(let n=0;n<t.length;n++){const r=xa(e,t[n]);if(r){const{transitionEnd:e,transition:t,...n}=r;for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[c?e.length-1:0]}null!==e&&(i[r]=e)}for(const r in e)i[r]=e[r]}}}return i}const Fa=e=>(t,n)=>{const r=h.useContext(Zs),i=h.useContext(Zt),s=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:Ia(n,r,i,e),renderState:t()}}(e,t,r,i);return n?s():function(e){const t=h.useRef(null);return null===t.current&&(t.current=e()),t.current}(s)};function La(e,t,n){const{style:r}=e,i={};for(const s in r)($s(r[s])||t.style&&$s(t.style[s])||la(s,e)||void 0!==n?.getValue(s)?.liveStyle)&&(i[s]=r[s]);return i}const Da=Fa({scrapeMotionValuesFromProps:La,createRenderState:ha});function _a(e,t,n){const r=La(e,t,n);for(const i in e)if($s(e[i])||$s(t[i])){r[-1!==Fi.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]}return r}const Ua=Fa({scrapeMotionValuesFromProps:_a,createRenderState:wa}),Pa=Symbol.for("motionComponentSymbol");function Ra(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Oa(e,t,n){return h.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"==typeof n?n(r):Ra(n)&&(n.current=r))},[t])}const Qa=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Na="data-"+Qa("framerAppearId"),Ma=h.createContext({});function Ha(e,t,n,r,i){const{visualElement:s}=h.useContext(Zs),a=h.useContext(Gs),o=h.useContext(Zt),A=h.useContext(Vs).reducedMotion,l=h.useRef(null);r=r||a.renderer,!l.current&&r&&(l.current=r(e,{visualState:t,parent:s,props:n,presenceContext:o,blockInitialAnimation:!!o&&!1===o.initial,reducedMotionConfig:A}));const c=l.current,u=h.useContext(Ma);!c||c.projection||!i||"html"!==c.type&&"svg"!==c.type||function(e,t,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:A,layoutRoot:l,layoutCrossfade:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:ja(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:Boolean(a)||o&&Ra(o),visualElement:e,animationType:"string"==typeof s?s:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:A,layoutRoot:l})}(l.current,n,i,u);const d=h.useRef(!1);h.useInsertionEffect(()=>{c&&d.current&&c.update(n,o)});const f=n[Na],p=h.useRef(Boolean(f)&&!window.MotionHandoffIsComplete?.(f)&&window.MotionHasOptimisedAnimation?.(f));return Jt(()=>{c&&(d.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),p.current&&c.animationState&&c.animationState.animateChanges())}),h.useEffect(()=>{c&&(!p.current&&c.animationState&&c.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(f)}),p.current=!1),c.enteringChildren=void 0)}),c}function ja(e){if(e)return!1!==e.options.allowProjection?e.projection:ja(e.parent)}function $a(e,{forwardMotionProps:t=!1}={},n,r){n&&function(e){for(const t in e)zs[t]={...zs[t],...e[t]}}(n);const i=Ca(e)?Ua:Da;function s(n,s){let a;const o={...h.useContext(Vs),...n,layoutId:Ka(n)},{isStatic:l}=o,c=aa(n),u=i(n,l);if(!l&&Xt){h.useContext(Gs).strict;const t=function(e){const{drag:t,layout:n}=zs;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(o);a=t.MeasureLayout,c.visualElement=Ha(e,u,o,r,t.ProjectionNode)}return A.jsxs(Zs.Provider,{value:c,children:[a&&c.visualElement?A.jsx(a,{visualElement:c.visualElement,...o}):null,Sa(e,n,Oa(u,c.visualElement,s),u,l,t)]})}s.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;const a=h.forwardRef(s);return a[Pa]=e,a}function Ka({layoutId:e}){const t=h.useContext(qt).id;return t&&void 0!==e?t+"-"+e:e}function Va(e,t){if("undefined"==typeof Proxy)return $a;const n=new Map,r=(n,r)=>$a(n,r,e,t);return new Proxy((e,t)=>r(e,t),{get:(i,s)=>"create"===s?r:(n.has(s)||n.set(s,$a(s,void 0,e,t)),n.get(s))})}function Ga({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Wa(e){return void 0===e||1===e}function za({scale:e,scaleX:t,scaleY:n}){return!Wa(e)||!Wa(t)||!Wa(n)}function Ya(e){return za(e)||qa(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function qa(e){return Xa(e.x)||Xa(e.y)}function Xa(e){return e&&"0%"!==e}function Ja(e,t,n){return n+t*(e-n)}function Za(e,t,n,r,i){return void 0!==i&&(e=Ja(e,i,r)),Ja(e,n,r)+t}function eo(e,t=0,n=1,r,i){e.min=Za(e.min,t,n,r,i),e.max=Za(e.max,t,n,r,i)}function to(e,{x:t,y:n}){eo(e.x,t.translate,t.scale,t.originPoint),eo(e.y,n.translate,n.scale,n.originPoint)}const no=.999999999999,ro=1.0000000000001;function io(e,t){e.min=e.min+t,e.max=e.max+t}function so(e,t,n,r,i=.5){eo(e,t,n,Sr(e.min,e.max,i),r)}function ao(e,t){so(e.x,t.x,t.scaleX,t.scale,t.originX),so(e.y,t.y,t.scaleY,t.scale,t.originY)}function oo(e,t){return Ga(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const Ao=()=>({x:{min:0,max:0},y:{min:0,max:0}}),lo={current:null},co={current:!1};const uo=new WeakMap;const ho=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class fo{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:i,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ji,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=jn.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,Rn.render(this.render,!1,!0))};const{latestValues:o,renderState:A}=s;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=A,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=Boolean(i),this.isControllingVariants=ia(t),this.isVariantNode=sa(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:l,...c}=this.scrapeMotionValuesFromProps(t,{},this);for(const u in c){const e=c[u];void 0!==o[u]&&$s(e)&&e.set(o[u])}}mount(e){this.current=e,uo.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),co.current||function(){if(co.current=!0,Xt)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>lo.current=e.matches;e.addEventListener("change",t),t()}else lo.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||lo.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),On(this.notifyUpdate),On(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Li.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&Rn.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),i&&i(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in zs){const t=zs[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<ho.length;n++){const t=ho[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const i=t[r],s=n[r];if($s(i))e.addValue(r,i);else if($s(s))e.addValue(r,ks(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{const t=e.getStaticValue(r);e.addValue(r,ks(void 0!==t?t:i,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=ks(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var r;return null!=n&&("string"==typeof n&&(sn(n)||on(n))?n=parseFloat(n):(r=n,!Ks.find(us(r))&&Er.test(t)&&(n=Bs(e,t))),this.setBaseTarget(e,$s(n)?n.get():n)),$s(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if("string"==typeof t||"object"==typeof t){const r=xa(this.props,t,this.presenceContext?.custom);r&&(n=r[e])}if(t&&void 0!==n)return n;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||$s(r)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new hn),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Is.render(this.render)}}class po extends fo{constructor(){super(...arguments),this.KeyframeResolver=Ss}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;$s(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function go(e,{style:t,vars:n},r,i){const s=e.style;let a;for(a in t)s[a]=t[a];for(a in i?.applyProjectionStyles(s,r),n)s.setProperty(a,n[a])}class mo extends po{constructor(){super(...arguments),this.type="html",this.renderInstance=go}readValueFromInstance(e,t){if(Li.has(t))return this.projection?.isProjecting?xi(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return ki(n,t)})(e,t);{const r=(n=e,window.getComputedStyle(n)),i=(Kn(t)?r.getPropertyValue(t):r[t])||0;return"string"==typeof i?i.trim():i}var n}measureInstanceViewportBox(e,{transformPagePoint:t}){return oo(e,t)}build(e,t,n){da(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return La(e,t,n)}}const yo=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class vo extends po{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ao}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Li.has(t)){const e=Es(t);return e&&e.default||0}return t=yo.has(t)?t:Qa(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return _a(e,t,n)}build(e,t,n){va(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){go(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(yo.has(i)?i:Qa(i),t.attrs[i])}(e,t,0,r)}mount(e){this.isSVGTag=ba(e.tagName),super.mount(e)}}const wo=(e,t)=>Ca(e)?new vo(t):new mo(t,{allowProjection:e!==h.Fragment});function bo(e,t,n){const r=e.getProps();return xa(r,t,void 0!==n?n:r.custom,e)}const Eo=e=>Array.isArray(e);function Bo(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ks(n))}function Co(e){return Eo(e)?e[e.length-1]||0:e}function So(e,t){const n=e.getValue("willChange");if(r=n,Boolean($s(r)&&r.add))return n.add(t);if(!n&&rn.WillChange){const n=new rn.WillChange("auto");e.addValue("willChange",n),n.add(t)}var r}function To(e){return e.props[Na]}const xo=e=>null!==e;const ko={type:"spring",stiffness:500,damping:25,restSpeed:10},Io={type:"keyframes",duration:.8},Fo={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Lo=(e,{keyframes:t})=>t.length>2?Io:Li.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:ko:Fo;const Do=(e,t,n,r={},i,s)=>a=>{const o=ls(r,e)||{},A=o.delay||r.delay||0;let{elapsed:l=0}=r;l-=fn(A);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-l,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:i};(function({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:A,elapsed:l,...c}){return!!Object.keys(c).length})(o)||Object.assign(c,Lo(e,c)),c.duration&&(c.duration=fn(c.duration)),c.repeatDelay&&(c.repeatDelay=fn(c.repeatDelay)),void 0!==c.from&&(c.keyframes[0]=c.from);let u=!1;if((!1===c.type||0===c.duration&&!c.repeatDelay)&&(rs(c),0===c.delay&&(u=!0)),(rn.instantAnimations||rn.skipAnimations)&&(u=!0,rs(c),c.delay=0),c.allowFlatten=!o.type&&!o.ease,u&&!s&&void 0!==t.get()){const e=function(e,{repeat:t,repeatType:n="loop"}){const r=e.filter(xo);return r[t&&"loop"!==n&&t%2==1?0:r.length-1]}(c.keyframes,o);if(void 0!==e)return void Rn.update(()=>{c.onUpdate(e),c.onComplete()})}return o.isSync?new vi(c):new as(c)};function _o({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&!0!==t[n];return t[n]=!1,r}function Uo(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:a,...o}=t;r&&(s=r);const A=[],l=i&&e.animationState&&e.animationState.getState()[i];for(const c in o){const t=e.getValue(c,e.latestValues[c]??null),r=o[c];if(void 0===r||l&&_o(l,c))continue;const i={delay:n,...ls(s||{},c)},a=t.get();if(void 0!==a&&!t.isAnimating&&!Array.isArray(r)&&r===a&&!i.velocity)continue;let u=!1;if(window.MotionHandoffAnimation){const t=To(e);if(t){const e=window.MotionHandoffAnimation(t,c,Rn);null!==e&&(i.startTime=e,u=!0)}}So(e,c),t.start(Do(c,t,r,e.shouldReduceMotion&&cs.has(c)?{type:!1}:i,e,u));const d=t.animation;d&&A.push(d)}return a&&Promise.all(A).then(()=>{Rn.update(()=>{a&&function(e,t){const n=bo(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s)Bo(e,a,Co(s[a]))}(e,a)})}),A}function Po(e,t,n,r=0,i=1){const s=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),a=e.size,o=(a-1)*r;return"function"==typeof n?n(s,a):1===i?s*r:o-s*r}function Ro(e,t,n={}){const r=bo(e,t,"exit"===n.type?e.presenceContext?.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(Uo(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(r=0)=>{const{delayChildren:s=0,staggerChildren:a,staggerDirection:o}=i;return function(e,t,n=0,r=0,i=0,s=1,a){const o=[];for(const A of e.variantChildren)A.notify("AnimationStart",t),o.push(Ro(A,t,{...a,delay:n+("function"==typeof r?0:r)+Po(e.variantChildren,A,r,i,s)}).then(()=>A.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,r,s,a,o,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[e,t]="beforeChildren"===o?[s,a]:[a,s];return e().then(()=>t())}return Promise.all([s(),a(n.delay)])}function Oo(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const Qo=ra.length;function No(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&No(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<Qo;n++){const r=ra[n],i=e.props[r];(ta(i)||!1===i)&&(t[r]=i)}return t}const Mo=[...na].reverse(),Ho=na.length;function jo(e){return t=>Promise.all(t.map(({animation:t,options:n})=>function(e,t,n={}){let r;if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map(t=>Ro(e,t,n));r=Promise.all(i)}else if("string"==typeof t)r=Ro(e,t,n);else{const i="function"==typeof t?bo(e,t,n.custom):t;r=Promise.all(Uo(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}(e,t,n)))}function $o(e){let t=jo(e),n=Go(),r=!0;const i=t=>(n,r)=>{const i=bo(e,r,"exit"===t?e.presenceContext?.custom:void 0);if(i){const{transition:e,transitionEnd:t,...r}=i;n={...n,...r,...t}}return n};function s(s){const{props:a}=e,o=No(e.parent)||{},A=[],l=new Set;let c={},u=1/0;for(let t=0;t<Ho;t++){const d=Mo[t],h=n[d],f=void 0!==a[d]?a[d]:o[d],p=ta(f),g=d===s?h.isActive:null;!1===g&&(u=t);let m=f===o[d]&&f!==a[d]&&p;if(m&&r&&e.manuallyAnimateOnMount&&(m=!1),h.protectedKeys={...c},!h.isActive&&null===g||!f&&!h.prevProp||ea(f)||"boolean"==typeof f)continue;const y=Ko(h.prevProp,f);let v=y||d===s&&h.isActive&&!m&&p||t>u&&p,w=!1;const b=Array.isArray(f)?f:[f];let E=b.reduce(i(d),{});!1===g&&(E={});const{prevResolvedValues:B={}}=h,C={...B,...E},S=t=>{v=!0,l.has(t)&&(w=!0,l.delete(t)),h.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in C){const t=E[e],n=B[e];if(c.hasOwnProperty(e))continue;let r=!1;r=Eo(t)&&Eo(n)?!Oo(t,n):t!==n,r?null!=t?S(e):l.add(e):void 0!==t&&l.has(e)?S(e):h.protectedKeys[e]=!0}h.prevProp=f,h.prevResolvedValues=E,h.isActive&&(c={...c,...E}),r&&e.blockInitialAnimation&&(v=!1);const T=m&&y;v&&(!T||w)&&A.push(...b.map(t=>{const n={type:d};if("string"==typeof t&&r&&!T&&e.manuallyAnimateOnMount&&e.parent){const{parent:r}=e,i=bo(r,t);if(r.enteringChildren&&i){const{delayChildren:t}=i.transition||{};n.delay=Po(r.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(l.size){const t={};if("boolean"!=typeof a.initial){const n=bo(e,Array.isArray(a.initial)?a.initial[0]:a.initial);n&&n.transition&&(t.transition=n.transition)}l.forEach(n=>{const r=e.getBaseTarget(n),i=e.getValue(n);i&&(i.liveStyle=!0),t[n]=r??null}),A.push({animation:t})}let d=Boolean(A.length);return!r||!1!==a.initial&&a.initial!==a.animate||e.manuallyAnimateOnMount||(d=!1),r=!1,d?t(A):Promise.resolve()}return{animateChanges:s,setActive:function(t,r){if(n[t].isActive===r)return Promise.resolve();e.variantChildren?.forEach(e=>e.animationState?.setActive(t,r)),n[t].isActive=r;const i=s(t);for(const e in n)n[e].protectedKeys={};return i},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=Go()}}}function Ko(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!Oo(t,e)}function Vo(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Go(){return{animate:Vo(!0),whileInView:Vo(),whileHover:Vo(),whileTap:Vo(),whileDrag:Vo(),whileFocus:Vo(),exit:Vo()}}class Wo{constructor(e){this.isMounted=!1,this.node=e}update(){}}let zo=0;const Yo={animation:{Feature:class extends Wo{constructor(e){super(e),e.animationState||(e.animationState=$o(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ea(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends Wo{constructor(){super(...arguments),this.id=zo++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function qo(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Xo(e){return{point:{x:e.pageX,y:e.pageY}}}function Jo(e,t,n,r){return qo(e,t,(e=>t=>Ps(t)&&e(t,Xo(t)))(n),r)}function Zo(e){return e.max-e.min}function eA(e,t,n,r=.5){e.origin=r,e.originPoint=Sr(t.min,t.max,e.origin),e.scale=Zo(n)/Zo(t),e.translate=Sr(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function tA(e,t,n,r){eA(e.x,t.x,n.x,r?r.originX:void 0),eA(e.y,t.y,n.y,r?r.originY:void 0)}function nA(e,t,n){e.min=n.min+t.min,e.max=e.min+Zo(t)}function rA(e,t,n){e.min=t.min-n.min,e.max=e.min+Zo(t)}function iA(e,t,n){rA(e.x,t.x,n.x),rA(e.y,t.y,n.y)}function sA(e){return[e("x"),e("y")]}const aA=({current:e})=>e?e.ownerDocument.defaultView:null,oA=(e,t)=>Math.abs(e-t);class AA{constructor(e,t,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:i=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=uA(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=oA(e.x,t.x),r=oA(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:r}=e,{timestamp:i}=Qn;this.history.push({...r,timestamp:i});const{onStart:s,onMove:a}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=lA(t,this.transformPagePoint),Rn.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const s=uA("pointercancel"===e.type?this.lastMoveEventInfo:lA(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,s),r&&r(e,s)},!Ps(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=s,this.contextWindow=r||window;const a=lA(Xo(e),this.transformPagePoint),{point:o}=a,{timestamp:A}=Qn;this.history=[{...o,timestamp:A}];const{onSessionStart:l}=t;l&&l(e,uA(a,this.history)),this.removeListeners=un(Jo(this.contextWindow,"pointermove",this.handlePointerMove),Jo(this.contextWindow,"pointerup",this.handlePointerUp),Jo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),On(this.updatePoint)}}function lA(e,t){return t?{point:t(e.point)}:e}function cA(e,t){return{x:e.x-t.x,y:e.y-t.y}}function uA({point:e},t){return{point:e,delta:cA(e,hA(t)),offset:cA(e,dA(t)),velocity:fA(t,.1)}}function dA(e){return e[0]}function hA(e){return e[e.length-1]}function fA(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=hA(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>fn(t)));)n--;if(!r)return{x:0,y:0};const s=pn(i.timestamp-r.timestamp);if(0===s)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function pA(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function gA(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const mA=.35;function yA(e,t,n){return{min:vA(e,t),max:vA(e,n)}}function vA(e,t){return"number"==typeof e?e:e[t]||0}const wA=new WeakMap;class bA{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:i}=this.getProps();this.panSession=new AA(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Xo(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(s=n)||"y"===s?Fs[s]?null:(Fs[s]=!0,()=>{Fs[s]=!1}):Fs.x||Fs.y?null:(Fs.x=Fs.y=!0,()=>{Fs.x=Fs.y=!1}),!this.openDragLock))return;var s;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sA(e=>{let t=this.getAxisMotionValue(e).get()||0;if(or.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=Zo(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),i&&Rn.postRender(()=>i(e,t)),So(this.visualElement,"transform");const{animationState:a}=this.visualElement;a&&a.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:s}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:a}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(a),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),s&&s(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>sA(e=>"paused"===this.getAnimationState(e)&&this.getAxisMotionValue(e).animation?.play())},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:i,distanceThreshold:n,contextWindow:aA(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,r=t||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!r||!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&Rn.postRender(()=>a(n,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!EA(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=function(e,{min:t,max:n},r){return void 0!==t&&e<t?e=r?Sr(t,e,r.min):Math.max(e,t):void 0!==n&&e>n&&(e=r?Sr(n,e,r.max):Math.min(e,n)),e}(s,this.constraints[e],this.elastic[e])),i.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&Ra(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!e||!n)&&function(e,{top:t,left:n,bottom:r,right:i}){return{x:pA(e.x,n,i),y:pA(e.y,t,r)}}(n.layoutBox,e),this.elastic=function(e=mA){return!1===e?e=0:!0===e&&(e=mA),{x:yA(e,"left","right"),y:yA(e,"top","bottom")}}(t),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&sA(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(n.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ra(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(e,t,n){const r=oo(e,n),{scroll:i}=t;return i&&(io(r.x,i.offset.x),io(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let s=function(e,t){return{x:gA(e.x,t.x),y:gA(e.y,t.y)}}(r.layout.layoutBox,i);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(s));this.hasMutatedConstraints=!!e,e&&(s=Ga(e))}return s}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{},A=sA(a=>{if(!EA(a,t,this.currentDirection))return;let A=o&&o[a]||{};s&&(A={min:0,max:0});const l=r?200:1e6,c=r?40:1e7,u={type:"inertia",velocity:n?e[a]:0,bounceStiffness:l,bounceDamping:c,timeConstant:750,restDelta:1,restSpeed:10,...i,...A};return this.startAxisValueAnimation(a,u)});return Promise.all(A).then(a)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return So(this.visualElement,e),n.start(Do(e,n,0,t,this.visualElement,!1))}stopAnimation(){sA(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){sA(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){sA(t=>{const{drag:n}=this.getProps();if(!EA(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:s}=r.layout.layoutBox[t];i.set(e[t]-Sr(n,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Ra(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};sA(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=Zo(e),i=Zo(t);return i>r?n=dn(t.min,t.max-r,e.min):r>i&&(n=dn(e.min,e.max-i,t.min)),nn(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),sA(t=>{if(!EA(t,e,null))return;const n=this.getAxisMotionValue(t),{min:i,max:s}=this.constraints[t];n.set(Sr(i,s,r[t]))})}addListeners(){if(!this.visualElement.current)return;wA.set(this.visualElement,this);const e=Jo(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();Ra(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),Rn.read(t);const i=qo(window,"resize",()=>this.scalePositionWithinConstraints()),s=n.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(sA(t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))}),this.visualElement.render())});return()=>{i(),e(),r(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:s=mA,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:s,dragMomentum:a}}}function EA(e,t,n){return!(!0!==t&&t!==e||null!==n&&n!==e)}const BA=e=>(t,n)=>{e&&Rn.postRender(()=>e(t,n))};const CA={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function SA(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const TA={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!Ar.test(e))return e;e=parseFloat(e)}return`${SA(e,t.target.x)}% ${SA(e,t.target.y)}%`}},xA={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=Er.parse(e);if(i.length>5)return r;const s=Er.createTransformer(e),a="number"!=typeof i[0]?1:0,o=n.x.scale*t.x,A=n.y.scale*t.y;i[0+a]/=o,i[1+a]/=A;const l=Sr(o,A,.5);return"number"==typeof i[2+a]&&(i[2+a]/=l),"number"==typeof i[3+a]&&(i[3+a]/=l),s(i)}};let kA=!1;class IA extends h.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;!function(e){for(const t in e)Aa[t]=e[t],Kn(t)&&(Aa[t].isCSSVariable=!0)}(LA),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),kA&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),CA.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,{projection:s}=n;return s?(s.isPresent=i,kA=!0,r||e.layoutDependency!==t||void 0===t||e.isPresent!==i?s.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?s.promote():s.relegate()||Rn.postRender(()=>{const e=s.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Is.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;kA=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function FA(e){const[t,n]=function(e=!0){const t=h.useContext(Zt);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=h.useId();h.useEffect(()=>{if(e)return i(s)},[e]);const a=h.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,a]:[!0]}(),r=h.useContext(qt);return A.jsx(IA,{...e,layoutGroup:r,switchLayoutGroup:h.useContext(Ma),isPresent:t,safeToRemove:n})}const LA={borderRadius:{...TA,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:TA,borderTopRightRadius:TA,borderBottomLeftRadius:TA,borderBottomRightRadius:TA,boxShadow:xA};const DA=(e,t)=>e.depth-t.depth;class _A{constructor(){this.children=[],this.isDirty=!1}add(e){en(this.children,e),this.isDirty=!0}remove(e){tn(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(DA),this.isDirty=!1,this.children.forEach(e)}}const UA=["TopLeft","TopRight","BottomLeft","BottomRight"],PA=UA.length,RA=e=>"string"==typeof e?parseFloat(e):e,OA=e=>"number"==typeof e||Ar.test(e);function QA(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const NA=HA(0,.5,Tn),MA=HA(.5,.95,ln);function HA(e,t,n){return r=>r<e?0:r>t?1:n(dn(e,t,r))}function jA(e,t){e.min=t.min,e.max=t.max}function $A(e,t){jA(e.x,t.x),jA(e.y,t.y)}function KA(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function VA(e,t,n,r,i){return e=Ja(e-=t,1/n,r),void 0!==i&&(e=Ja(e,1/i,r)),e}function GA(e,t,[n,r,i],s,a){!function(e,t=0,n=1,r=.5,i,s=e,a=e){or.test(t)&&(t=parseFloat(t),t=Sr(a.min,a.max,t/100)-a.min);if("number"!=typeof t)return;let o=Sr(s.min,s.max,r);e===s&&(o-=t),e.min=VA(e.min,t,n,o,i),e.max=VA(e.max,t,n,o,i)}(e,t[n],t[r],t[i],t.scale,s,a)}const WA=["x","scaleX","originX"],zA=["y","scaleY","originY"];function YA(e,t,n,r){GA(e.x,t,WA,n?n.x:void 0,r?r.x:void 0),GA(e.y,t,zA,n?n.y:void 0,r?r.y:void 0)}function qA(e){return 0===e.translate&&1===e.scale}function XA(e){return qA(e.x)&&qA(e.y)}function JA(e,t){return e.min===t.min&&e.max===t.max}function ZA(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function el(e,t){return ZA(e.x,t.x)&&ZA(e.y,t.y)}function tl(e){return Zo(e.x)/Zo(e.y)}function nl(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class rl{constructor(){this.members=[]}add(e){en(this.members,e),e.scheduleRender()}remove(e){if(tn(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const il=["","X","Y","Z"];let sl=0;function al(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function ol(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=To(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Rn,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&ol(r)}function Al({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(e={},n=t?.()){this.id=sl++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ul),this.nodes.forEach(yl),this.nodes.forEach(vl),this.nodes.forEach(dl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new _A)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new hn),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;var n;this.isSVG=js(t)&&!(js(n=t)&&"svg"===n.tagName),this.instance=t;const{layoutId:r,layout:i,visualElement:s}=this.options;if(s&&!s.current&&s.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(i||r)&&(this.isLayoutDirty=!0),e){let n,r=0;const i=()=>this.root.updateBlockedByResize=!1;Rn.read(()=>{r=window.innerWidth}),e(t,()=>{const e=window.innerWidth;e!==r&&(r=e,this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=jn.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(On(r),e(s-t))};return Rn.setup(r,!0),()=>On(r)}(i,250),CA.hasAnimatedSinceResize&&(CA.hasAnimatedSinceResize=!1,this.nodes.forEach(ml)))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&s&&(r||i)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||s.getDefaultTransition()||Sl,{onLayoutAnimationStart:a,onLayoutAnimationComplete:o}=s.getProps(),A=!this.targetLayout||!el(this.targetLayout,r),l=!t&&n;if(this.options.layoutRoot||this.resumeFrom||l||t&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const t={...ls(i,"layout"),onPlay:a,onComplete:o};(s.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,l)}else t||ml(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),On(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(wl),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ol(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(fl);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(pl);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(gl),this.nodes.forEach(ll),this.nodes.forEach(cl)):this.nodes.forEach(pl),this.clearAllSnapshots();const e=jn.now();Qn.delta=nn(0,1e3/60,e-Qn.timestamp),Qn.timestamp=e,Qn.isProcessing=!0,Nn.update.process(Qn),Nn.preRender.process(Qn),Nn.render.process(Qn),Qn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Is.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(hl),this.sharedNodes.forEach(bl)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Rn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Rn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||Zo(this.snapshot.measuredBox.x)||Zo(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!i)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!XA(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,s=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||Ya(this.latestValues)||s)&&(i(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),kl((r=n).x),kl(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Fl))){const{scroll:e}=this.root;e&&(io(t.x,e.offset.x),io(t.y,e.offset.y))}return t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};if($A(t,e),this.scroll?.wasRoot)return t;for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:i,options:s}=r;r!==this.root&&i&&s.layoutScroll&&(i.wasRoot&&$A(t,e),io(t.x,i.offset.x),io(t.y,i.offset.y))}return t}applyTransform(e,t=!1){const n={x:{min:0,max:0},y:{min:0,max:0}};$A(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&ao(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Ya(e.latestValues)&&ao(n,e.latestValues)}return Ya(this.latestValues)&&ao(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};$A(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Ya(e.latestValues))continue;za(e.latestValues)&&e.updateSnapshot();const r=Ao();$A(r,e.measurePageBox()),YA(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return Ya(this.latestValues)&&YA(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Qn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){const t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==t;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:r,layoutId:i}=this.options;if(this.layout&&(r||i)){if(this.resolvedRelativeTargetAt=Qn.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},iA(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),$A(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}var s,a,o;if(this.relativeTarget||this.targetDelta)if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),s=this.target,a=this.relativeTarget,o=this.relativeParent.target,nA(s.x,a.x,o.x),nA(s.y,a.y,o.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):$A(this.target,this.layout.layoutBox),to(this.target,this.targetDelta)):$A(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},iA(this.relativeTargetOrigin,this.target,e.target),$A(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(this.parent&&!za(this.parent.latestValues)&&!qa(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const e=this.getLead(),t=Boolean(this.resumingFrom)||this!==e;let n=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(n=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===Qn.timestamp&&(n=!1),n)return;const{layout:r,layoutId:i}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!i)return;$A(this.layoutCorrected,this.layout.layoutBox);const s=this.treeScale.x,a=this.treeScale.y;!function(e,t,n,r=!1){const i=n.length;if(!i)return;let s,a;t.x=t.y=1;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const{visualElement:i}=s.options;i&&i.props.style&&"contents"===i.props.style.display||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ao(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,to(e,a)),r&&Ya(s.latestValues)&&ao(e,s.latestValues))}t.x<ro&&t.x>no&&(t.x=1),t.y<ro&&t.y>no&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,t),!e.layout||e.target||1===this.treeScale.x&&1===this.treeScale.y||(e.target=e.layout.layoutBox,e.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:o}=e;o?(this.projectionDelta&&this.prevProjectionDelta?(KA(this.prevProjectionDelta.x,this.projectionDelta.x),KA(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),tA(this.projectionDelta,this.layoutCorrected,o,this.latestValues),this.treeScale.x===s&&this.treeScale.y===a&&nl(this.projectionDelta.x,this.prevProjectionDelta.x)&&nl(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",o))):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.visualElement?.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e,t=!1){const n=this.snapshot,r=n?n.latestValues:{},i={...this.latestValues},s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const a={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),A=this.getStack(),l=!A||A.members.length<=1,c=Boolean(o&&!l&&!0===this.options.crossfade&&!this.path.some(Cl));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var A,d,h,f,p,g;El(s.x,e.x,n),El(s.y,e.y,n),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(iA(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),h=this.relativeTarget,f=this.relativeTargetOrigin,p=a,g=n,Bl(h.x,f.x,p.x,g),Bl(h.y,f.y,p.y,g),u&&(A=this.relativeTarget,d=u,JA(A.x,d.x)&&JA(A.y,d.y))&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),$A(u,this.relativeTarget)),o&&(this.animationValues=i,function(e,t,n,r,i,s){i?(e.opacity=Sr(0,n.opacity??1,NA(r)),e.opacityExit=Sr(t.opacity??1,0,MA(r))):s&&(e.opacity=Sr(t.opacity??1,n.opacity??1,r));for(let a=0;a<PA;a++){const i=`border${UA[a]}Radius`;let s=QA(t,i),o=QA(n,i);void 0===s&&void 0===o||(s||(s=0),o||(o=0),0===s||0===o||OA(s)===OA(o)?(e[i]=Math.max(Sr(RA(s),RA(o),r),0),(or.test(o)||or.test(s))&&(e[i]+="%")):e[i]=o)}(t.rotate||n.rotate)&&(e.rotate=Sr(t.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,c,l)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(On(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Rn.update(()=>{CA.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ks(0)),this.currentAnimation=function(e,t,n){const r=$s(e)?e:ks(e);return r.start(Do("",r,t,n)),r.animation}(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&Il(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=Zo(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=Zo(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}$A(t,n),ao(t,i),tA(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new rl);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){const{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){const{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&al("z",e,r,this.animationValues);for(let i=0;i<il.length;i++)al(`rotate${il[i]}`,e,r,this.animationValues),al(`skew${il[i]}`,e,r,this.animationValues);e.render();for(const i in r)e.setStaticValue(i,r[i]),this.animationValues&&(this.animationValues[i]=r[i]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=ka(t?.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=ka(t?.pointerEvents)||""),void(this.hasProjected&&!Ya(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const i=r.animationValues||r.latestValues;this.applyTransformsToTarget();let s=function(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,a=n?.z||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:i,rotateY:s,skewX:a,skewY:o}=n;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),i&&(r+=`rotateX(${i}deg) `),s&&(r+=`rotateY(${s}deg) `),a&&(r+=`skewX(${a}deg) `),o&&(r+=`skewY(${o}deg) `)}const o=e.x.scale*t.x,A=e.y.scale*t.y;return 1===o&&1===A||(r+=`scale(${o}, ${A})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,i);n&&(s=n(i,s)),e.transform=s;const{x:a,y:o}=this.projectionDelta;e.transformOrigin=`${100*a.origin}% ${100*o.origin}% 0`,r.animationValues?e.opacity=r===this?i.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:e.opacity=r===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0;for(const A in Aa){if(void 0===i[A])continue;const{correct:t,applyTo:n,isCSSVariable:a}=Aa[A],o="none"===s?i[A]:t(i[A],r);if(n){const t=n.length;for(let r=0;r<t;r++)e[n[r]]=o}else a?this.options.visualElement.renderState.vars[A]=o:e[A]=o}this.options.layoutId&&(e.pointerEvents=r===this?ka(t?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>e.currentAnimation?.stop()),this.root.nodes.forEach(fl),this.root.sharedNodes.clear()}}}function ll(e){e.updateLayout()}function cl(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:i}=e.options,s=t.source!==e.layout.source;"size"===i?sA(e=>{const r=s?t.measuredBox[e]:t.layoutBox[e],i=Zo(r);r.min=n[e].min,r.max=r.min+i}):Il(i,t.layoutBox,n)&&sA(r=>{const i=s?t.measuredBox[r]:t.layoutBox[r],a=Zo(n[r]);i.max=i.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+a)});const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};tA(a,n,t.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};s?tA(o,e.applyTransform(r,!0),t.measuredBox):tA(o,n,t.layoutBox);const A=!XA(a);let l=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:s}=r;if(i&&s){const a={x:{min:0,max:0},y:{min:0,max:0}};iA(a,t.layoutBox,i.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};iA(o,n,s.layoutBox),el(a,o)||(l=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:o,layoutDelta:a,hasLayoutChanged:A,hasRelativeLayoutChanged:l})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function ul(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function dl(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function hl(e){e.clearSnapshot()}function fl(e){e.clearMeasurements()}function pl(e){e.isLayoutDirty=!1}function gl(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function ml(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function yl(e){e.resolveTargetDelta()}function vl(e){e.calcProjection()}function wl(e){e.resetSkewAndRotation()}function bl(e){e.removeLeadSnapshot()}function El(e,t,n){e.translate=Sr(t.translate,0,n),e.scale=Sr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Bl(e,t,n,r){e.min=Sr(t.min,n.min,r),e.max=Sr(t.max,n.max,r)}function Cl(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Sl={duration:.45,ease:[.4,0,.1,1]},Tl=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),xl=Tl("applewebkit/")&&!Tl("chrome/")?Math.round:ln;function kl(e){e.min=xl(e.min),e.max=xl(e.max)}function Il(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=tl(t),i=tl(n),s=.2,!(Math.abs(r-i)<=s));var r,i,s}function Fl(e){return e!==e.root&&e.scroll?.wasRoot}const Ll=Al({attachResizeListener:(e,t)=>qo(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Dl={current:void 0},_l=Al({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Dl.current){const e=new Ll({});e.mount(window),e.setOptions({layoutScroll:!0}),Dl.current=e}return Dl.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Ul={pan:{Feature:class extends Wo{constructor(){super(...arguments),this.removePointerDownListener=ln}onPointerDown(e){this.session=new AA(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:aA(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:BA(e),onStart:BA(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&Rn.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=Jo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Wo{constructor(e){super(e),this.removeGroupControls=ln,this.removeListeners=ln,this.controls=new bA(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ln}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:_l,MeasureLayout:FA}};function Pl(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const i=r["onHover"+n];i&&Rn.postRender(()=>i(t,Xo(t)))}function Rl(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const i=r["onTap"+("End"===n?"":n)];i&&Rn.postRender(()=>i(t,Xo(t)))}const Ol=new WeakMap,Ql=new WeakMap,Nl=e=>{const t=Ol.get(e.target);t&&t(e)},Ml=e=>{e.forEach(Nl)};function Hl(e,t,n){const r=function({root:e,...t}){const n=e||document;Ql.has(n)||Ql.set(n,{});const r=Ql.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(Ml,{root:e,...t})),r[i]}(t);return Ol.set(e,n),r.observe(e),()=>{Ol.delete(e),r.unobserve(e)}}const jl={some:0,all:1};const $l=Va({...Yo,...{inView:{Feature:class extends Wo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,s={root:t?t.current:void 0,rootMargin:n,threshold:"number"==typeof r?r:jl[r]};return Hl(this.node.current,s,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),s=t?n:r;s&&s(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Wo{mount(){const{current:e}=this.node;e&&(this.unmount=Hs(e,(e,t)=>(Rl(this.node,t,"Start"),(e,{success:t})=>Rl(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends Wo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(c$){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=un(qo(this.node.current,"focus",()=>this.onFocus()),qo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Wo{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t,n={}){const[r,i,s]=Ds(e,n),a=e=>{if(!_s(e))return;const{target:n}=e,r=t(n,e);if("function"!=typeof r||!n)return;const s=e=>{_s(e)&&(r(e),n.removeEventListener("pointerleave",s))};n.addEventListener("pointerleave",s,i)};return r.forEach(e=>{e.addEventListener("pointerenter",a,i)}),s}(e,(e,t)=>(Pl(this.node,t,"Start"),e=>Pl(this.node,e,"End"))))}unmount(){}}}},...Ul,...{layout:{ProjectionNode:_l,MeasureLayout:FA}}},wo),Kl=["shift","alt","meta","mod","ctrl","control"],Vl={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function Gl(e){return(Vl[e.trim()]||e.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function Wl(e){return Kl.includes(e)}function zl(e,t=","){return e.toLowerCase().split(t)}function Yl(e,t="+",n=">",r=!1,i){let s=[],a=!1;(e=e.trim()).includes(n)?(a=!0,s=e.toLocaleLowerCase().split(n).map(e=>Gl(e))):s=e.toLocaleLowerCase().split(t).map(e=>Gl(e));return{...{alt:s.includes("alt"),ctrl:s.includes("ctrl")||s.includes("control"),shift:s.includes("shift"),meta:s.includes("meta"),mod:s.includes("mod"),useKey:r},keys:s.filter(e=>!Kl.includes(e)),description:i,isSequence:a,hotkey:e}}typeof document<"u"&&(document.addEventListener("keydown",e=>{void 0!==e.code&&Jl([Gl(e.code)])}),document.addEventListener("keyup",e=>{void 0!==e.code&&Zl([Gl(e.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{ql.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{ql.clear()},0)}));const ql=new Set;function Xl(e){return Array.isArray(e)}function Jl(e){const t=Array.isArray(e)?e:[e];ql.has("meta")&&ql.forEach(e=>!Wl(e)&&ql.delete(e.toLowerCase())),t.forEach(e=>ql.add(e.toLowerCase()))}function Zl(e){const t=Array.isArray(e)?e:[e];"meta"===e?ql.clear():t.forEach(e=>ql.delete(e.toLowerCase()))}const ec=["input","textarea","select","searchbox","slider","spinbutton","menuitem","menuitemcheckbox","menuitemradio","option","radio","textbox"];function tc(e,t=!1){const{target:n,composed:r}=e;let i,s;return function(e){return!!e.tagName&&!e.tagName.startsWith("-")&&e.tagName.includes("-")}(n)&&r?(i=e.composedPath()[0]&&e.composedPath()[0].tagName,s=e.composedPath()[0]&&e.composedPath()[0].role):(i=n&&n.tagName,s=n&&n.role),Xl(t)?!!(i&&t&&t.some(e=>e.toLowerCase()===i.toLowerCase()||e===s)):!!(i&&t&&t)}const nc=(e,t,n=!1)=>{const{alt:r,meta:i,mod:s,shift:a,ctrl:o,keys:A,useKey:l}=t,{code:c,key:u,ctrlKey:d,metaKey:h,shiftKey:f,altKey:p}=e,g=Gl(c);if(l&&1===A?.length&&A.includes(u))return!0;if(!A?.includes(g)&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(g))return!1;if(!n){if(r!==p&&"alt"!==g||a!==f&&"shift"!==g)return!1;if(s){if(!h&&!d)return!1}else if(i!==h&&"meta"!==g&&"os"!==g||o!==d&&"ctrl"!==g&&"control"!==g)return!1}return!(!A||1!==A.length||!A.includes(g))||(A?function(e,t=","){return(Xl(e)?e:e.split(t)).every(e=>ql.has(e.trim().toLowerCase()))}(A):!A)},rc=h.createContext(void 0);const ic=h.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}});const sc=e=>{e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},ac=typeof window<"u"?h.useLayoutEffect:h.useEffect;function oc(e,t,n,r){const i=h.useRef(null),s=h.useRef(!1),a=Array.isArray(n)?Array.isArray(r)?void 0:r:n,o=Xl(e)?e.join(a?.delimiter):e,A=h.useCallback(t,[]),l=h.useRef(A);l.current=t;const c=function(e){const t=h.useRef(void 0);return function(e,t){return e===t}(t.current,e)||(t.current=e),t.current}(a),{activeScopes:u}=h.useContext(ic),d=h.useContext(rc);return ac(()=>{if(!1===c?.enabled||!function(e,t){return 0===e.length&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):!t||e.some(e=>t.includes(e))||e.includes("*")}(u,c?.scopes))return;let e,t=[];const n=(n,r=!1)=>{if(!function(e){return tc(e,ec)}(n)||tc(n,c?.enableOnFormTags)){if(null!==i.current){const e=i.current.getRootNode();if((e instanceof Document||e instanceof ShadowRoot)&&e.activeElement!==i.current&&!i.current.contains(e.activeElement))return void sc(n)}n.target?.isContentEditable&&!c?.enableOnContentEditable||zl(o,c?.delimiter).forEach(i=>{if(i.includes(c?.splitKey??"+")&&i.includes(c?.sequenceSplitKey??">"))return void console.warn(`Hotkey ${i} contains both ${c?.splitKey??"+"} and ${c?.sequenceSplitKey??">"} which is not supported.`);const a=Yl(i,c?.splitKey,c?.sequenceSplitKey,c?.useKey,c?.description);if(a.isSequence){e=setTimeout(()=>{t=[]},c?.sequenceTimeoutMs??1e3);const r=a.useKey?n.key:Gl(n.code);if(Wl(r.toLowerCase()))return;t.push(r);const i=a.keys?.[t.length-1];if(r!==i)return t=[],void(e&&clearTimeout(e));t.length===a.keys?.length&&(l.current(n,a),e&&clearTimeout(e),t=[])}else if(nc(n,a,c?.ignoreModifiers)||a.keys?.includes("*")){if(c?.ignoreEventWhen?.(n)||r&&s.current)return;if(function(e,t,n){("function"==typeof n&&n(e,t)||!0===n)&&e.preventDefault()}(n,a,c?.preventDefault),!function(e,t,n){return"function"==typeof n?n(e,t):!0===n||void 0===n}(n,a,c?.enabled))return void sc(n);l.current(n,a),r||(s.current=!0)}})}},r=e=>{void 0!==e.code&&(Jl(Gl(e.code)),(void 0===c?.keydown&&!0!==c?.keyup||c?.keydown)&&n(e))},A=e=>{void 0!==e.code&&(Zl(Gl(e.code)),s.current=!1,c?.keyup&&n(e,!0))},h=i.current||a?.document||document;return h.addEventListener("keyup",A,a?.eventListenerOptions),h.addEventListener("keydown",r,a?.eventListenerOptions),d&&zl(o,c?.delimiter).forEach(e=>d.addHotkey(Yl(e,c?.splitKey,c?.sequenceSplitKey,c?.useKey,c?.description))),()=>{h.removeEventListener("keyup",A,a?.eventListenerOptions),h.removeEventListener("keydown",r,a?.eventListenerOptions),d&&zl(o,c?.delimiter).forEach(e=>d.removeHotkey(Yl(e,c?.splitKey,c?.sequenceSplitKey,c?.useKey,c?.description))),t=[],e&&clearTimeout(e)}},[o,c,u]),i}function Ac(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var lc=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),cc=()=>Math.random().toString(36).substring(7).split("").join("."),uc={INIT:`@@redux/INIT${cc()}`,REPLACE:`@@redux/REPLACE${cc()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${cc()}`};function dc(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function hc(e,t,n){if("function"!=typeof e)throw new Error(Ac(2));if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(Ac(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(Ac(1));return n(hc)(e,t)}let r=e,i=t,s=new Map,a=s,o=0,A=!1;function l(){a===s&&(a=new Map,s.forEach((e,t)=>{a.set(t,e)}))}function c(){if(A)throw new Error(Ac(3));return i}function u(e){if("function"!=typeof e)throw new Error(Ac(4));if(A)throw new Error(Ac(5));let t=!0;l();const n=o++;return a.set(n,e),function(){if(t){if(A)throw new Error(Ac(6));t=!1,l(),a.delete(n),s=null}}}function d(e){if(!dc(e))throw new Error(Ac(7));if(void 0===e.type)throw new Error(Ac(8));if("string"!=typeof e.type)throw new Error(Ac(17));if(A)throw new Error(Ac(9));try{A=!0,i=r(i,e)}finally{A=!1}return(s=a).forEach(e=>{e()}),e}d({type:uc.INIT});return{dispatch:d,subscribe:u,getState:c,replaceReducer:function(e){if("function"!=typeof e)throw new Error(Ac(10));r=e,d({type:uc.REPLACE})},[lc]:function(){const e=u;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(Ac(11));function n(){const e=t;e.next&&e.next(c())}n();return{unsubscribe:e(n)}},[lc](){return this}}}}}function fc(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const r=t[s];"function"==typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach(t=>{const n=e[t];if(void 0===n(void 0,{type:uc.INIT}))throw new Error(Ac(12));if(void 0===n(void 0,{type:uc.PROBE_UNKNOWN_ACTION()}))throw new Error(Ac(13))})}(n)}catch(c$){i=c$}return function(e={},t){if(i)throw i;let s=!1;const a={};for(let i=0;i<r.length;i++){const o=r[i],A=n[o],l=e[o],c=A(l,t);if(void 0===c)throw t&&t.type,new Error(Ac(14));a[o]=c,s=s||c!==l}return s=s||r.length!==Object.keys(e).length,s?a:e}}function pc(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...n)=>e(t(...n)))}function gc(e){return({dispatch:t,getState:n})=>r=>i=>"function"==typeof i?i(t,n,e):r(i)}var mc=gc(),yc=gc,vc="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?pc:pc.apply(null,arguments)},wc=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};var bc=e=>t=>{setTimeout(t,e)},Ec=e=>function(t){const{autoBatch:n=!0}=t??{};let r=new wc(e);return n&&r.push(((e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,a=!1;const o=new Set,A="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:bc(10):"callback"===e.type?e.queueNotification:bc(e.timeout),l=()=>{a=!1,s&&(s=!1,o.forEach(e=>e()))};return Object.assign({},r,{subscribe(e){const t=r.subscribe(()=>i&&e());return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){try{return i=!e?.meta?.RTK_autoBatch,s=!i,s&&(a||(a=!0,A(l))),r.dispatch(e)}finally{i=!0}}})})("object"==typeof n?n:void 0)),r};const Bc=e=>"string"==typeof e,Cc=()=>{let e,t;const n=new Promise((n,r)=>{e=n,t=r});return n.resolve=e,n.reject=t,n},Sc=e=>null==e?"":""+e,Tc=/###/g,xc=e=>e&&e.indexOf("###")>-1?e.replace(Tc,"."):e,kc=e=>!e||Bc(e),Ic=(e,t,n)=>{const r=Bc(t)?t.split("."):t;let i=0;for(;i<r.length-1;){if(kc(e))return{};const t=xc(r[i]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++i}return kc(e)?{}:{obj:e,k:xc(r[i])}},Fc=(e,t,n)=>{const{obj:r,k:i}=Ic(e,t,Object);if(void 0!==r||1===t.length)return void(r[i]=n);let s=t[t.length-1],a=t.slice(0,t.length-1),o=Ic(e,a,Object);for(;void 0===o.obj&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),o=Ic(e,a,Object),o?.obj&&void 0!==o.obj[`${o.k}.${s}`]&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=n},Lc=(e,t)=>{const{obj:n,k:r}=Ic(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},Dc=(e,t,n)=>{for(const r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?Bc(e[r])||e[r]instanceof String||Bc(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):Dc(e[r],t[r],n):e[r]=t[r]);return e},_c=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Uc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Pc=e=>Bc(e)?e.replace(/[&<>"'\/]/g,e=>Uc[e]):e;const Rc=[" ",",","?","!",";"],Oc=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),Qc=(e,t,n=".")=>{if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const r=t.split(n);let i=e;for(let s=0;s<r.length;){if(!i||"object"!=typeof i)return;let e,t="";for(let a=s;a<r.length;++a)if(a!==s&&(t+=n),t+=r[a],e=i[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&a<r.length-1)continue;s+=a-s+1;break}i=e}return i},Nc=e=>e?.replace("_","-"),Mc={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};var Hc=new class e{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Mc,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,r){return r&&!this.debug?null:(Bc(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(t){return new e(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return(t=t||this.options).prefix=t.prefix||this.prefix,new e(this.logger,t)}};let jc=class{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e,...t){if(this.observers[e]){Array.from(this.observers[e].entries()).forEach(([e,n])=>{for(let r=0;r<n;r++)e(...t)})}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach(([n,r])=>{for(let i=0;i<r;i++)n.apply(n,[e,...t])})}}};class $c extends jc{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n,r={}){const i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,s=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],n&&(Array.isArray(n)?a.push(...n):Bc(n)&&i?a.push(...n.split(i)):a.push(n)));const o=Lc(this.data,a);return!o&&!t&&!n&&e.indexOf(".")>-1&&(e=a[0],t=a[1],n=a.slice(2).join(".")),!o&&s&&Bc(n)?Qc(this.data?.[e]?.[t],n,i):o}addResource(e,t,n,r,i={silent:!1}){const s=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator;let a=[e,t];n&&(a=a.concat(s?n.split(s):n)),e.indexOf(".")>-1&&(a=e.split("."),r=t,t=a[1]),this.addNamespaces(t),Fc(this.data,a,r),i.silent||this.emit("added",e,t,n,r)}addResources(e,t,n,r={silent:!1}){for(const i in n)(Bc(n[i])||Array.isArray(n[i]))&&this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,r,i,s={silent:!1,skipCopy:!1}){let a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),r=n,n=t,t=a[1]),this.addNamespaces(t);let o=Lc(this.data,a)||{};s.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?Dc(o,n,i):o={...o,...n},Fc(this.data,a,o),s.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var Kc={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach(e=>{t=this.processors[e]?.process(t,n,r,i)??t}),t}};const Vc=Symbol("i18next/PATH_KEY");function Gc(e,t){const{[Vc]:n}=e(function(){const e=[],t=Object.create(null);let n;return t.get=(r,i)=>(n?.revoke?.(),i===Vc?e:(e.push(i),n=Proxy.revocable(r,t),n.proxy)),Proxy.revocable(Object.create(null),t).proxy}());return n.join(t?.keySeparator??".")}const Wc={},zc=e=>!Bc(e)&&"boolean"!=typeof e&&"number"!=typeof e;class Yc extends jc{constructor(e,t={}){var n,r;super(),n=e,r=this,["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach(e=>{n[e]&&(r[e]=n[e])}),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=Hc.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const n={...t};if(null==e)return!1;const r=this.resolve(e,n);if(void 0===r?.res)return!1;const i=zc(r.res);return!1!==n.returnObjects||!i}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const s=n&&e.indexOf(n)>-1,a=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,n)=>{t=t||"",n=n||"";const r=Rc.filter(e=>t.indexOf(e)<0&&n.indexOf(e)<0);if(0===r.length)return!0;const i=Oc.getRegExp(`(${r.map(e=>"?"===e?"\\?":e).join("|")})`);let s=!i.test(e);if(!s){const t=e.indexOf(n);t>0&&!i.test(e.substring(0,t))&&(s=!0)}return s})(e,n,r));if(s&&!a){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:Bc(i)?[i]:i};const s=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(s[0])>-1)&&(i=s.shift()),e=s.join(r)}return{key:e,namespaces:Bc(i)?[i]:i}}translate(e,t,n){let r="object"==typeof t?{...t}:t;if("object"!=typeof r&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof r&&(r={...r}),r||(r={}),null==e)return"";"function"==typeof e&&(e=Gc(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);const i=void 0!==r.returnDetails?r.returnDetails:this.options.returnDetails,s=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],r),A=o[o.length-1];let l=void 0!==r.nsSeparator?r.nsSeparator:this.options.nsSeparator;void 0===l&&(l=":");const c=r.lng||this.language,u=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===c?.toLowerCase())return u?i?{res:`${A}${l}${a}`,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:A,usedParams:this.getUsedParamsDetails(r)}:`${A}${l}${a}`:i?{res:a,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:A,usedParams:this.getUsedParamsDetails(r)}:a;const d=this.resolve(e,r);let h=d?.res;const f=d?.usedKey||a,p=d?.exactUsedKey||a,g=void 0!==r.joinArrays?r.joinArrays:this.options.joinArrays,m=!this.i18nFormat||this.i18nFormat.handleAsObject,y=void 0!==r.count&&!Bc(r.count),v=Yc.hasDefaultValue(r),w=y?this.pluralResolver.getSuffix(c,r.count,r):"",b=r.ordinal&&y?this.pluralResolver.getSuffix(c,r.count,{ordinal:!1}):"",E=y&&!r.ordinal&&0===r.count,B=E&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${w}`]||r[`defaultValue${b}`]||r.defaultValue;let C=h;m&&!h&&v&&(C=B);const S=zc(C),T=Object.prototype.toString.apply(C);if(!(m&&C&&S&&["[object Number]","[object Function]","[object RegExp]"].indexOf(T)<0)||Bc(g)&&Array.isArray(C))if(m&&Bc(g)&&Array.isArray(h))h=h.join(g),h&&(h=this.extendTranslation(h,e,r,n));else{let t=!1,i=!1;!this.isValidLookup(h)&&v&&(t=!0,h=B),this.isValidLookup(h)||(i=!0,h=a);const o=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&i?void 0:h,u=v&&B!==h&&this.options.updateMissing;if(i||t||u){if(this.logger.log(u?"updateKey":"missingKey",c,A,a,u?B:h),s){const e=this.resolve(a,{...r,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let r=0;r<t.length;r++)e.push(t[r]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(r.lng||this.language):e.push(r.lng||this.language);const n=(e,t,n)=>{const i=v&&n!==h?n:o;this.options.missingKeyHandler?this.options.missingKeyHandler(e,A,t,i,u,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(e,A,t,i,u,r),this.emit("missingKey",e,A,t,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&y?e.forEach(e=>{const t=this.pluralResolver.getSuffixes(e,r);E&&r[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach(t=>{n([e],a+t,r[`defaultValue${t}`]||B)})}):n(e,a,B))}h=this.extendTranslation(h,e,r,d,n),i&&h===a&&this.options.appendNamespaceToMissingKey&&(h=`${A}${l}${a}`),(i||t)&&this.options.parseMissingKeyHandler&&(h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${A}${l}${a}`:a,t?h:void 0,r))}else{if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,C,{...r,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(d.res=e,d.usedParams=this.getUsedParamsDetails(r),d):e}if(s){const e=Array.isArray(C),t=e?[]:{},n=e?p:f;for(const i in C)if(Object.prototype.hasOwnProperty.call(C,i)){const e=`${n}${s}${i}`;t[i]=v&&!h?this.translate(e,{...r,defaultValue:zc(B)?B[i]:void 0,joinArrays:!1,ns:o}):this.translate(e,{...r,joinArrays:!1,ns:o}),t[i]===e&&(t[i]=C[i])}h=t}}return i?(d.res=h,d.usedParams=this.getUsedParamsDetails(r),d):h}extendTranslation(e,t,n,r,i){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const s=Bc(e)&&(void 0!==n?.interpolation?.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(s){const t=e.match(this.interpolator.nestingRegexp);a=t&&t.length}let o=n.replace&&!Bc(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),e=this.interpolator.interpolate(e,o,n.lng||this.language||r.usedLng,n),s){const t=e.match(this.interpolator.nestingRegexp);a<(t&&t.length)&&(n.nest=!1)}!n.lng&&r&&r.res&&(n.lng=this.language||r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(...e)=>i?.[0]!==e[0]||n.context?this.translate(...e,t):(this.logger.warn(`It seems you are nesting recursively key: ${e[0]} in key: ${t[0]}`),null),n)),n.interpolation&&this.interpolator.reset()}const s=n.postProcess||this.options.postProcess,a=Bc(s)?[s]:s;return null!=e&&a?.length&&!1!==n.applyPostProcessor&&(e=Kc.handle(a,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,t={}){let n,r,i,s,a;return Bc(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(n))return;const o=this.extractFromKey(e,t),A=o.key;r=A;let l=o.namespaces;this.options.fallbackNS&&(l=l.concat(this.options.fallbackNS));const c=void 0!==t.count&&!Bc(t.count),u=c&&!t.ordinal&&0===t.count,d=void 0!==t.context&&(Bc(t.context)||"number"==typeof t.context)&&""!==t.context,h=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);l.forEach(e=>{this.isValidLookup(n)||(a=e,Wc[`${h[0]}-${e}`]||!this.utils?.hasLoadedNamespace||this.utils?.hasLoadedNamespace(a)||(Wc[`${h[0]}-${e}`]=!0,this.logger.warn(`key "${r}" for languages "${h.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach(r=>{if(this.isValidLookup(n))return;s=r;const a=[A];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(a,A,r,e,t);else{let e;c&&(e=this.pluralResolver.getSuffix(r,t.count,t));const n=`${this.options.pluralSeparator}zero`,i=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(c&&(t.ordinal&&0===e.indexOf(i)&&a.push(A+e.replace(i,this.options.pluralSeparator)),a.push(A+e),u&&a.push(A+n)),d){const r=`${A}${this.options.contextSeparator||"_"}${t.context}`;a.push(r),c&&(t.ordinal&&0===e.indexOf(i)&&a.push(r+e.replace(i,this.options.pluralSeparator)),a.push(r+e),u&&a.push(r+n))}}let o;for(;o=a.pop();)this.isValidLookup(n)||(i=o,n=this.getResource(r,e,o,t))}))})}),{res:n,usedKey:r,exactUsedKey:i,usedLng:s,usedNS:a}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,n,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Bc(e.replace);let r=n?e.replace:e;if(n&&void 0!==e.count&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!n){r={...r};for(const e of t)delete r[e]}return r}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}class qc{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Hc.create("languageUtils")}getScriptPartFromCode(e){if(!(e=Nc(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=Nc(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Bc(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch(c$){}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const n=this.getScriptPartFromCode(e);if(this.isSupportedCode(n))return t=n;const r=this.getLanguagePartFromCode(e);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find(e=>e===r?e:e.indexOf("-")<0&&r.indexOf("-")<0?void 0:e.indexOf("-")>0&&r.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===r||0===e.indexOf(r)&&r.length>1?e:void 0)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),Bc(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),r=[],i=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return Bc(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):Bc(e)&&i(this.formatLanguageCode(e)),n.forEach(e=>{r.indexOf(e)<0&&i(this.formatLanguageCode(e))}),r}}const Xc={zero:0,one:1,two:2,few:3,many:4,other:5},Jc={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Zc{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Hc.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const n=Nc("dev"===e?"en":e),r=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:r});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let s;try{s=new Intl.PluralRules(n,{type:r})}catch(a){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Jc;if(!e.match(/-|_/))return Jc;const n=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(n,t)}return this.pluralRulesCache[i]=s,s}needsPlural(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,n={}){return this.getSuffixes(e,n).map(e=>`${t}${e}`)}getSuffixes(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((e,t)=>Xc[e]-Xc[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):[]}getSuffix(e,t,n={}){const r=this.getRule(e,n);return r?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const eu=(e,t,n,r=".",i=!0)=>{let s=((e,t,n)=>{const r=Lc(e,n);return void 0!==r?r:Lc(t,n)})(e,t,n);return!s&&i&&Bc(n)&&(s=Qc(e,n,r),void 0===s&&(s=Qc(t,n,r))),s},tu=e=>e.replace(/\$/g,"$$$$");class nu{constructor(e={}){this.logger=Hc.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(e=>e),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:i,prefixEscaped:s,suffix:a,suffixEscaped:o,formatSeparator:A,unescapeSuffix:l,unescapePrefix:c,nestingPrefix:u,nestingPrefixEscaped:d,nestingSuffix:h,nestingSuffixEscaped:f,nestingOptionsSeparator:p,maxReplaces:g,alwaysFormat:m}=e.interpolation;this.escape=void 0!==t?t:Pc,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==r&&r,this.prefix=i?_c(i):s||"{{",this.suffix=a?_c(a):o||"}}",this.formatSeparator=A||",",this.unescapePrefix=l?"":c||"-",this.unescapeSuffix=this.unescapePrefix?"":l||"",this.nestingPrefix=u?_c(u):d||_c("$t("),this.nestingSuffix=h?_c(h):f||_c(")"),this.nestingOptionsSeparator=p||",",this.maxReplaces=g||1e3,this.alwaysFormat=void 0!==m&&m,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e?.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,n,r){let i,s,a;const o=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},A=e=>{if(e.indexOf(this.formatSeparator)<0){const i=eu(t,o,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(i,void 0,n,{...r,...t,interpolationkey:e}):i}const i=e.split(this.formatSeparator),s=i.shift().trim(),a=i.join(this.formatSeparator).trim();return this.format(eu(t,o,s,this.options.keySeparator,this.options.ignoreJSONStructure),a,n,{...r,...t,interpolationkey:s})};this.resetRegExp();const l=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,c=void 0!==r?.interpolation?.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>tu(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?tu(this.escape(e)):tu(e)}].forEach(t=>{for(a=0;i=t.regex.exec(e);){const n=i[1].trim();if(s=A(n),void 0===s)if("function"==typeof l){const t=l(e,i,r);s=Bc(t)?t:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))s="";else{if(c){s=i[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),s=""}else Bc(s)||this.useRawValueToEscape||(s=Sc(s));const o=t.safeValue(s);if(e=e.replace(i[0],o),c?(t.regex.lastIndex+=s.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t,n={}){let r,i,s;const a=(e,t)=>{const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const r=e.split(new RegExp(`${n}[ ]*{`));let i=`{${r[1]}`;e=r[0],i=this.interpolate(i,s);const a=i.match(/'/g),o=i.match(/"/g);((a?.length??0)%2==0&&!o||o.length%2!=0)&&(i=i.replace(/'/g,'"'));try{s=JSON.parse(i),t&&(s={...t,...s})}catch(c$){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,c$),`${e}${n}${i}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,e};for(;r=this.nestingRegexp.exec(e);){let o=[];s={...n},s=s.replace&&!Bc(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;const A=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(-1!==A&&(o=r[1].slice(A).split(this.formatSeparator).map(e=>e.trim()).filter(Boolean),r[1]=r[1].slice(0,A)),i=t(a.call(this,r[1].trim(),s),s),i&&r[0]===e&&!Bc(i))return i;Bc(i)||(i=Sc(i)),i||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),i=""),o.length&&(i=o.reduce((e,t)=>this.format(e,t,n.lng,{...n,interpolationkey:r[1].trim()}),i.trim())),e=e.replace(r[0],i),this.regexp.lastIndex=0}return e}}const ru=e=>{const t={};return(n,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const a=r+JSON.stringify(s);let o=t[a];return o||(o=e(Nc(r),i),t[a]=o),o(n)}},iu=e=>(t,n,r)=>e(Nc(n),r)(t);class su{constructor(e={}){this.logger=Hc.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?ru:iu;this.formats={number:n((e,t)=>{const n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)}),currency:n((e,t)=>{const n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)}),datetime:n((e,t)=>{const n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)}),relativetime:n((e,t)=>{const n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")}),list:n((e,t)=>{const n=new Intl.ListFormat(e,{...t});return e=>n.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=ru(t)}format(e,t,n,r={}){const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(e=>e.indexOf(")")>-1)){const e=i.findIndex(e=>e.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,e)].join(this.formatSeparator)}return i.reduce((e,t)=>{const{formatName:i,formatOptions:s}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);"currency"===t&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):"relativetime"===t&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(e=>{if(e){const[t,...r]=e.split(":"),i=r.join(":").trim().replace(/^'+|'+$/g,""),s=t.trim();n[s]||(n[s]=i),"false"===i&&(n[s]=!1),"true"===i&&(n[s]=!0),isNaN(i)||(n[s]=parseInt(i,10))}})}return{formatName:t,formatOptions:n}})(t);if(this.formats[i]){let t=e;try{const a=r?.formatParams?.[r.interpolationkey]||{},o=a.locale||a.lng||r.locale||r.lng||n;t=this.formats[i](e,o,{...s,...r,...a})}catch(a){this.logger.warn(a)}return t}return this.logger.warn(`there was no format function for ${i}`),e},e)}}class au extends jc{constructor(e,t,n,r={}){super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=Hc.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,r.backend,r)}queueLoad(e,t,n,r){const i={},s={},a={},o={};return e.forEach(e=>{let r=!0;t.forEach(t=>{const a=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[a]=2:this.state[a]<0||(1===this.state[a]?void 0===s[a]&&(s[a]=!0):(this.state[a]=1,r=!1,void 0===s[a]&&(s[a]=!0),void 0===i[a]&&(i[a]=!0),void 0===o[t]&&(o[t]=!0)))}),r||(a[e]=!0)}),(Object.keys(i).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(o)}}loaded(e,t,n){const r=e.split("|"),i=r[0],s=r[1];t&&this.emit("failedLoading",i,s,t),!t&&n&&this.store.addResourceBundle(i,s,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const a={};this.queue.forEach(n=>{((e,t,n)=>{const{obj:r,k:i}=Ic(e,t,Object);r[i]=r[i]||[],r[i].push(n)})(n.loaded,[i],s),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach(e=>{a[e]||(a[e]={});const t=n.loaded[e];t.length&&t.forEach(t=>{void 0===a[e][t]&&(a[e][t]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(e=>!e.done)}read(e,t,n,r=0,i=this.retryTimeout,s){if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:i,callback:s});this.readingCalls++;const a=(a,o)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}a&&o&&r<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,n,r+1,2*i,s)},i):s(a,o)},o=this.backend[n].bind(this.backend);if(2!==o.length)return o(e,t,a);try{const n=o(e,t);n&&"function"==typeof n.then?n.then(e=>a(null,e)).catch(a):a(null,n)}catch(A){a(A)}}prepareLoading(e,t,n={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Bc(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Bc(t)&&(t=[t]);const i=this.queueLoad(e,t,n,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e,t=""){const n=e.split("|"),r=n[0],i=n[1];this.read(r,i,"read",void 0,void 0,(n,s)=>{n&&this.logger.warn(`${t}loading namespace ${i} for language ${r} failed`,n),!n&&s&&this.logger.log(`${t}loaded namespace ${i} for language ${r}`,s),this.loaded(e,n,s)})}saveMissing(e,t,n,r,i,s={},a=()=>{}){if(!this.services?.utils?.hasLoadedNamespace||this.services?.utils?.hasLoadedNamespace(t)){if(null!=n&&""!==n){if(this.backend?.create){const A={...s,isUpdate:i},l=this.backend.create.bind(this.backend);if(l.length<6)try{let i;i=5===l.length?l(e,t,n,r,A):l(e,t,n,r),i&&"function"==typeof i.then?i.then(e=>a(null,e)).catch(a):a(null,i)}catch(o){a(o)}else l(e,t,n,r,a,A)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}else this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const ou=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),Bc(e[1])&&(t.defaultValue=e[1]),Bc(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach(e=>{t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Au=e=>(Bc(e.ns)&&(e.ns=[e.ns]),Bc(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Bc(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"==typeof e.initImmediate&&(e.initAsync=e.initImmediate),e),lu=()=>{};class cu extends jc{constructor(e={},t){var n;if(super(),this.options=Au(e),this.services={},this.logger=Hc,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(e=>{"function"==typeof n[e]&&(n[e]=n[e].bind(n))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,"function"==typeof e&&(t=e,e={}),null==e.defaultNS&&e.ns&&(Bc(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=ou();this.options={...n,...this.options,...Au(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let e;this.modules.logger?Hc.init(r(this.modules.logger),this.options):Hc.init(null,this.options),e=this.modules.formatter?this.modules.formatter:su;const t=new qc(this.options);this.store=new $c(this.options.resources,this.options);const i=this.services;i.logger=Hc,i.resourceStore=this.store,i.languageUtils=t,i.pluralResolver=new Zc(t,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix});this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),!e||this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format||(i.formatter=r(e),i.formatter.init&&i.formatter.init(i,this.options),this.options.interpolation.format=i.formatter.format.bind(i.formatter)),i.interpolator=new nu(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new au(r(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.languageDetector&&(i.languageDetector=r(this.modules.languageDetector),i.languageDetector.init&&i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=r(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new Yc(this.services,this.options),this.translator.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,t||(t=lu),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(e=>{this[e]=(...t)=>this.store[e](...t)});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(e=>{this[e]=(...t)=>(this.store[e](...t),this)});const i=Cc(),s=()=>{const e=(e,n)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),i.resolve(n),t(e,n)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?s():setTimeout(s,0),i}loadResources(e,t=lu){let n=t;const r=Bc(e)?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===r?.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return n();const e=[],t=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};if(r)t(r);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>t(e))}this.options.preload?.forEach?.(e=>t(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),n(e)})}else n(null)}reloadResources(e,t,n){const r=Cc();return"function"==typeof e&&(n=e,e=void 0),"function"==typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=lu),this.services.backendConnector.reload(e,t,e=>{r.resolve(),n(e)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Kc.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const n=Cc();this.emit("languageChanging",e);const r=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},i=(i,s)=>{s?this.isLanguageChangingTo===e&&(r(s),this.translator.changeLanguage(s),this.isLanguageChangingTo=void 0,this.emit("languageChanged",s),this.logger.log("languageChanged",s)):this.isLanguageChangingTo=void 0,n.resolve((...e)=>this.t(...e)),t&&t(i,(...e)=>this.t(...e))},s=t=>{e||t||!this.services.languageDetector||(t=[]);const n=Bc(t)?t:t&&t[0],s=this.store.hasLanguageSomeTranslations(n)?n:this.services.languageUtils.getBestMatchFromCodes(Bc(t)?[t]:t);s&&(this.language||r(s),this.translator.language||this.translator.changeLanguage(s),this.services.languageDetector?.cacheUserLanguage?.(s)),this.loadResources(s,e=>{i(e,s)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e):s(this.services.languageDetector.detect()),n}getFixedT(e,t,n){const r=(e,t,...i)=>{let s;s="object"!=typeof t?this.options.overloadTranslationOptionHandler([e,t].concat(i)):{...t},s.lng=s.lng||r.lng,s.lngs=s.lngs||r.lngs,s.ns=s.ns||r.ns,""!==s.keyPrefix&&(s.keyPrefix=s.keyPrefix||n||r.keyPrefix);const a=this.options.keySeparator||".";let o;return s.keyPrefix&&Array.isArray(e)?o=e.map(e=>("function"==typeof e&&(e=Gc(e,{...this.options,...t})),`${s.keyPrefix}${a}${e}`)):("function"==typeof e&&(e=Gc(e,{...this.options,...t})),o=s.keyPrefix?`${s.keyPrefix}${a}${e}`:e),this.t(o,s)};return Bc(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=n,r}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const s=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,s);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!s(n,e)||r&&!s(i,e)))}loadNamespaces(e,t){const n=Cc();return this.options.ns?(Bc(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=Cc();Bc(e)&&(e=[e]);const r=this.options.preload||[],i=e.filter(e=>r.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return i.length?(this.options.preload=r.concat(i),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const t=new Intl.Locale(e);if(t&&t.getTextInfo){const e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch(c$){}const t=this.services?.languageUtils||new qc(ou());return e.toLowerCase().indexOf("-latn")>1?"ltr":["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new cu(e,t)}cloneInstance(e={},t=lu){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},i=new cu(r);void 0===e.debug&&void 0===e.prefix||(i.logger=i.logger.clone(e));if(["store","services","language"].forEach(e=>{i[e]=this[e]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n){const e=Object.keys(this.store.data).reduce((e,t)=>(e[t]={...this.store.data[t]},e[t]=Object.keys(e[t]).reduce((n,r)=>(n[r]={...e[t][r]},n),e[t]),e),{});i.store=new $c(e,r),i.services.resourceStore=i.store}return i.translator=new Yc(i.services,r),i.translator.on("*",(e,...t)=>{i.emit(e,...t)}),i.init(r,t),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const uu=cu.createInstance();uu.createInstance=cu.createInstance,uu.createInstance,uu.dir,uu.init,uu.loadResources,uu.reloadResources,uu.use,uu.changeLanguage,uu.getFixedT;const du=uu.t;uu.exists,uu.setDefaultNamespace,uu.hasLoadedNamespace,uu.loadNamespaces,uu.loadLanguages;const hu={closeOnClick:!0,autoClose:3e3,pauseOnHover:!0,hideProgressBar:!0},fu={},pu=(e,t,n,r)=>{vu(n)&&fu[n]||(vu(n)&&(fu[n]=new Date),((e,t,n,r)=>{const i=[n,{code:t,...r||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(i,"warn","react-i18next::",!0);vu(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...i):console?.warn&&console.warn(...i)})(e,t,n,r))},gu=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},mu=(e,t,n)=>{e.loadNamespaces(t,gu(e,n))},yu=(e,t,n,r)=>{if(vu(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return mu(e,n,r);n.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,gu(e,r))},vu=e=>"string"==typeof e,wu=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,bu={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Eu=e=>bu[e];let Bu={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(wu,Eu)};let Cu;const Su={type:"3rdParty",init(e){((e={})=>{Bu={...Bu,...e}})(e.options.react),(e=>{Cu=e})(e)}},Tu=h.createContext();class xu{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var ku,Iu,Fu={exports:{}},Lu={};var Du=(Iu||(Iu=1,Fu.exports=function(){if(ku)return Lu;ku=1;var e=d(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useState,r=e.useEffect,i=e.useLayoutEffect,s=e.useDebugValue;function a(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!t(e,r)}catch(i){return!0}}var o="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var o=t(),A=n({inst:{value:o,getSnapshot:t}}),l=A[0].inst,c=A[1];return i(function(){l.value=o,l.getSnapshot=t,a(l)&&c({inst:l})},[e,o,t]),r(function(){return a(l)&&c({inst:l}),e(function(){a(l)&&c({inst:l})})},[e]),s(o),o};return Lu.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:o,Lu}()),Fu.exports);const _u={t:(e,t)=>{return vu(t)?t:"object"==typeof(n=t)&&null!==n&&vu(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var n},ready:!1},Uu=()=>()=>{},Pu=(e,t={})=>{const{i18n:n}=t,{i18n:r,defaultNS:i}=h.useContext(Tu)||{},s=n||r||Cu;s&&!s.reportNamespaces&&(s.reportNamespaces=new xu),s||pu(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const a=h.useMemo(()=>({...Bu,...s?.options?.react,...t}),[s,t]),{useSuspense:o,keyPrefix:A}=a,l=h.useMemo(()=>{const e=i||s?.options?.defaultNS;return vu(e)?[e]:e||["translation"]},[e,i,s]);s?.reportNamespaces?.addUsedNamespaces?.(l);const c=h.useRef(0),u=h.useCallback(e=>{if(!s)return Uu;const{bindI18n:t,bindI18nStore:n}=a,r=()=>{c.current+=1,e()};return t&&s.on(t,r),n&&s.store.on(n,r),()=>{t&&t.split(" ").forEach(e=>s.off(e,r)),n&&n.split(" ").forEach(e=>s.store.off(e,r))}},[s,a]),d=h.useRef(),f=h.useCallback(()=>{if(!s)return _u;const e=!(!s.isInitialized&&!s.initializedStoreOnce)&&l.every(e=>((e,t,n={})=>t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(t,r)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!r(t.isLanguageChangingTo,e))return!1}}):(pu(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0))(e,s,a)),n=t.lng||s.language,r=c.current,i=d.current;if(i&&i.ready===e&&i.lng===n&&i.keyPrefix===A&&i.revision===r)return i;const o={t:s.getFixedT(n,"fallback"===a.nsMode?l:l[0],A),ready:e,lng:n,keyPrefix:A,revision:r};return d.current=o,o},[s,l,A,a,t.lng]),[p,g]=h.useState(0),{t:m,ready:y}=Du.useSyncExternalStore(u,f,f);h.useEffect(()=>{if(s&&!y&&!o){const e=()=>g(e=>e+1);t.lng?yu(s,t.lng,l,e):mu(s,l,e)}},[s,t.lng,l,y,o,p]);const v=s||{},w=h.useMemo(()=>{const e=[m,v,y];return e.t=m,e.i18n=v,e.ready=y,e},[m,v,y]);if(s&&o&&!y)throw new Promise(e=>{const n=()=>e();t.lng?yu(s,t.lng,l,n):mu(s,l,n)});return w},Ru={global:{home:"Home",history:"History",settings:"Settings",about:"About",general:"General",cfglocation:"Config Location",player:"Player",continuewatch:"Continue Watching",dev:"Developer",minutes:"Minutes",exitAnimu:"Do you really want exit animu?",enable:"Enable",extensions:"Extensions",notFound:"Not Found"},dialog:{yes:"Yes",no:"No",retry:"Retry",exit:"Exit",reset:"Reset",reload:"Reload",open:"Open"},home:{search:"Search...",nothingfound:"Nothing Found Here",error:"Error Occured",trending_now:"Trending Now",popular_in_this_season:"Popular In This Season",all_time_popular:"All Time Popular"},contextMenu:{devtools:"Open DevTools",nerdstats:"Show NerdStats",copytitle:"Copy Title",copycover:"Copy Cover",delete:"Delete"},anime_seasons:{winter:"Winter",spring:"Spring",summer:"Summer",fall:"Fall"},anime_statuses:{releasing:"Releasing",finished:"Finished",not_yet_released:"Not Yet Released",cancelled:"Cancelled"},anime_genres:{action:"Action",adventure:"Adventure",comedy:"Comedy",drama:"Drama",ecchi:"Ecchi",fantasy:"Fantasy",hentai:"Hentai",horror:"Horror",mahoushoujo:"Mahou Shoujo",mecha:"Mecha",music:"Music",mystery:"Mystery",psychological:"Psychological",romance:"romance","sci-Fi":"Sci-Fi",sliceoflife:"Slice of Life",sports:"Sports",supernatural:"Supernatural",thriller:"Thriller"},anime_formats:{tv:"TV Show",movie:"Movie",tv_short:"TV Short",special:"Special",ova:"OVA",ona:"ONA"},anime_source:{lightnovel:"Light novel",manga:"Manga",original:"Original",webnovel:"Web Novel",novel:"Novel",anime:"Anime",videogame:"Video Game",visualnovel:"Visual Novel",doujinshi:"Doujinshi",comic:"Comic",liveaction:"Live Action",game:"Game",multimediaproject:"Multimedia Project",picturebook:"Picture Book",other:"Other"},card_information:{ep_airing:"Ep {{ep}} airing in {{text}}",ep_airing_day:"{{day}} Days",ep_airing_hours:"{{hours}} Hours",ep_airing_minutes:"{{min}} Minutes",ep_airing_today:"Today",episodes:"{{ep}} Episodes",minutes:"{{min}}Min Duration"},information:{airing:"Airing Episode",format:"Format",episodes:"Episodes",duration:"Episode Duration",status:"Status",startdate:"Start Date",endate:"End Date",season:"Season",source:"Source",descriptionnotfound:"Description Not Found",errors:"This Anime doesn't have any episodes",wrongtext:"Is this the wrong Anime?",listEpisodes:"{{number}} Episodes",bar:{anilist:"Anilist Page",trailer:"Anime Trailer"},containerwrong:{search:"Search: {{name}}"},types:{sub:"Subtitles",dub:"Dubbing",raw:"Raw"},notification:{coverdone:"Cover succesfully copied to clipboard",coverfailed:"Failed to copy clipboard"},actors:"Actors",actor_as:"As {{actor}}",characters:"Characters",role:{main:"Main",supporting:"Supporting",background:"Background"}},settings:{turnDeveloper:"Turn On Developer Mode",general:{language:"Language",theme:"Theme",updates:"Update Notifications",checkupdates:"Check for Updates",checkupdate:"Check Update",window:"Window",maximize:"Auto Maximize",fullscreen:"Auto Fullscreen",zoom:"Zoom",meow:":3",credits:"Credits",specialthanks:"Special Thanks to",onstart:"On Start",everyday:"Every day",everyweek:"Every Week",hideSidebar:"Hide Sidebar",hoverSidebar:"Hover Sidebar",discordrpc:"Discord RPC",links:"Usefull Links"},player:{play:"Auto Play",skip:"Automatically Play the Next Episode",volume:"Default Volume",longskip:"Long Skip Forward",longskipb:"Long Skip Backward",shortskip:"Short Skip Forward",shortskipb:"Short Skip Backward",preload:"Player Preload Type",screenshot:"Screenshots",screenask:"Always ask Where to Save Screenshots",uptonextep:"Up To Next Episode Notification",notif_interval:"Notification Interval",epshorter:"Don't show if episode is shorter than",external:"External Player",stretching:"Video Streching",enable_external:"Enable External Player",select_player:"Select Player",movianip:"Movian IP Address",mpvpath:"MPV Path",vlcpath:"VLC Path",type:"Save Type",path:"Screenshot Save Path",file:"File",clipboard:"Clipboard",both:"Both",changelocaton:"Change Location",keybind:"Keybinds",playerexitbechaviour:"Player Exit behavior",playerbeexit:{information:"To Information",home:"To Home"},skipOpening:"Auto Skip Openings",skipEnding:"Auto Skip Endings",showBrokenBuffer:"Show Broken Buffer",keybinds:{pause:"Pause",fullscreen:"Fullscreen",exitplayer:"Exit Player",lskipforward:"Long Skip Forward",lskipbackward:"Long Skip Backward",skipforward:"Short Skip Forward",skipbackward:"Short Skip Backward",fskipforward:"Frame Skip Forward",fskipbackward:"Frame Skip Backward",nextepisode:"Next Episode",prevepisode:"Previus Episode",volumeup:"Volume Up",volumedown:"Volume Down",volumemute:"Mute the audio",screenshot:"Take a Screenshot",skipOpeningEnding:"Skip Opening/Ending",toggleSubtitles:"Toggle Subtitles",pip:"Picture In Picture"}},playerUI:{dloadinganimation:"Disable Loading Animation",dskipanimation:"Disable Skip Animation",dspaceanimation:"Disable Space Animation",dvolumeanimation:"Disable Volume Animation"},externalPlayer:{running:"Running {{player}}",episodes:"Episodes",chromeCast:{disconnected:"disconnected",search:"Searching..."},failed:{movian:"Failed to run Movian",chromecast:"ChromeCast Doesn't support m3u8 format",player:"Players Not Found",resolution:"Resolution not found"}},history:{limited:"Limited Save History",limit:"Limit For History",startsave:"When to Start Saving History",stopsave:"When to Stop saving History",check_history:"Check History",check_start:"Start Checking History",history_good:"History is good, nothing to change",continue_good:"Continue watch is good, nothing to change",check:"Check"},saving:{done:"Config has been succesfully saved",error:"Config saving error occured",notification:"Do you wanna save changes?"},tips:{automaximize:"Maximize window on application start",autofullscreen:"Open application in fullscreen mode",autofullscreenplayer:"Set fullscreen mode when player starts",longskip:"Change how many seconds long skips skip (usefull for skipping openings)",shotskip:"Change how many seconds short skips skip",continuewatchsavehistory:"After how many seconds episode will be saved to Continue watching / After how many seconds before the end remove episode from continue watching",brokenBuffer:"It shows buffering when playing mp4 files, which is known to display incorrect data"},devmode:{developermode:"Developer Mode",tornondevtools:"Turn on Devtools",devtoolsonstart:"Devtools on Start",playerdebug:"Player Debug Stats",information:"Information",electronver:"Electron Version",chromiumver:"Chromium Version",nodever:"Electron Version"},extensions:{name:"Name",author:"Plugin Author",version:"Version",type:"Type",information:"Information",player:"Player"},upNext:{var1:"Variant 1",var2:"Variant 2",old:"Variant Old",upNextStyle:"Up To Next Style Variants"}},player:{error:{notfound:"Player didn't find any urls"},TitleEpisode:"Episode {{ep}} of {{name}}",TitleMovie:"Movie: {{name}}",Volume:"Volume",next:"Next {{ep}} episode",previous:"Previous {{ep}} episode",Pause:"Pause",play:"Play",fullscreen:"Fullscreen",changeEpisode:"Change Episode",chapter:"Chapter: {{name}}",episodeEndsOn:"Episode Ends on {{time}}",mute:"Mute",unmute:"Unmute",errors:{extractionError:"Failed Extracting Player Urls: {{error}}",MEDIA_ERR_ABORTED:"The playback was aborted.",MEDIA_ERR_NETWORK:"A network error occurred while fetching the video.",MEDIA_ERR_DECODE:"An error occurred while decoding the video.",MEDIA_ERR_SRC_NOT_SUPPORTED:"The video format or source is not supported.",default:"An unknown error occurred.",missingResoltions:"Player Didn't Find any video Resolutions"},upNext:{title:"Next Episode Playing in {{sec}} seconds",titleAnime:"Next Episode {{ep}} of {{title}}",nextEp:"Next Episode",hide:"Hide",nextEpisode:"Ep. {{episode}}",nextPlaying:"Playing next episode in {{time}}s..."},other:{unknown:"Unknown",off:"Off",default:"Default"},settings:{source:"Source",resolution:"Resolution",audio:"Audio",subtitles:"Subtitles",speed:"Speed"},toastscreenshot:{failed:"Failed To save Screenshot",doneclip:"Image Saved To the Clipboard Succesfully",donefile:"Image Saved To File Succesfully"}},history:{continue:"Continue Episode {{ep}}",history:"Watched Episode {{ep}}",historysaved:"Succesfully Removed Anime from History",historyfailed:"Failed Removing Anime from History",continuesaved:"Succesfully Removed Anime from Continue Watch",continuefailed:"Failed Removing Anime from Continue Watch"},oldBackup:{backupcontinue:"Backing up old Continue Watch file: Done",convertcontinue:"Converting Continue Watch: Success {{success}}, Failed {{failed}}",convertcontinuedone:"Converting Continue Watch Done: Succes {{success}}, Failed {{failed}}",convertcontinuefailed:"Failed to convert old continue watch to new",backuphistory:"Backing Up old History file: Done",converthistory:"Convert History: Success {{success}}, Failed {{failed}}",converthistorydone:"Converting Continue Watch Done: Succes {{success}}, Failed {{failed}}",converthistoryfailed:"Failed to convert old Watch History to new",failedconvert:"Failed to Covert {{title}}"},update:{available:"Update {{ver}} is available now, click to update",progress:"Download Progress {{procent}}%",done:"Update Downloaded, please restart the application",same:"You have The newest version of Animu"},discordrpc:{home:"In home",settings:"In Settings",player:"{{title}} Episode {{ep}}"},globalError:"Critical Error has occured, do you want to go home?",filter:{genres:"Genres:",year:"Year:",season:"Season:",format:"Format:",airing:"Airing Status:",placeholderGenres:"Genres",placeholderYears:"Years",placeholderSeason:"Season",placeholderFormat:"Format",placeholderAiring:"Airing"},errorboundary:{gotohome:"Go Back Home",leaveanimu:"Leave Animu",errormessage:"Error Message: {{error}}"},credits:{owca525:"Animu Creator",kartq:"Helper",dawoleq:"Programmer Helper",ary:"Designer",rain_kyle:"Chinese Translation",akashiro:"Russian Translation",talon:"For making a discord server",zomi:"For making a new icon"},lang:{en:"English",pl:"Polski",de:"Deutsch",fr:"Franais",es:"Espaol",it:"Italiano",pt:"Portugus",ru:"",uk:"",cs:"etina",sk:"Slovenina",sl:"Slovenina",hr:"Hrvatski",sr:"",bg:"",ro:"Romn",nl:"Nederlands",sv:"Svenska",no:"Norsk",da:"Dansk",fi:"Suomi",hu:"Magyar",el:"",tr:"Trke",ar:"",he:"",fa:"",hi:"",bn:"",ur:"",zh:"",ja:"",ko:"",id:"Bahasa Indonesia",ms:"Bahasa Melayu",th:"",vi:"Ting Vit",cn:""}};let Ou;async function Qu(e){try{await Hu(e);const t=window.api?await window.api.os.read(await Ou+`/${e}.json`):localStorage.getItem(e),n=JSON.parse(t);return n.length<=0?[]:ju(n).map(t=>({...t,deletionCard:()=>Nu({...t,deletionCard:()=>""},e)})).reverse()}catch(t){return console.error(`${t} in ReadFile`),[]}}async function Nu(e,t){try{if(vh.getState().global.incognito)return;if(!e.saveData)return;await Hu(t);let n="";n=window.api?await window.api.os.read(await Ou+`/${t}.json`):localStorage.getItem(t);const r=JSON.parse(n);let i=-1;return i=""==e.AnimeData.id?r.findIndex(t=>t.saveData?.episode===e.saveData?.episode&&t.AnimeData.title.romaji===e.AnimeData.title.romaji):r.findIndex(t=>t.saveData?.episode===e.saveData?.episode&&t.AnimeData.id===e.AnimeData.id),-1!=i&&r.splice(i,1),window.api?window.api.os.write(await Ou+`/${t}.json`,JSON.stringify(r)):localStorage.setItem(t,JSON.stringify(r)),Ed(),e.deletionCard&&("continueWatch"===t?Qt.success(uu.t("history.continuesaved"),hu):"history"===t&&Qt.success(uu.t("history.historysaved"),hu)),!0}catch(n){return console.error(`${n} in DeleteFromFile`),e.deletionCard&&("continueWatch"===t?Qt.error(uu.t("history.continuefailed"),hu):"history"===t&&Qt.error(uu.t("history.historyfailed"),hu)),!1}}async function Mu(e,t){try{if(vh.getState().global.incognito)return!0;await Hu(t);let n="";n=window.api?await window.api.os.read(await Ou+`/${t}.json`):localStorage.getItem(t);const r=JSON.parse(n);let i=-1;return i=""==e.AnimeData.id?r.findIndex(t=>t.AnimeData.player_ID===e.AnimeData.player_ID):r.findIndex(t=>t.AnimeData.id===e.AnimeData.id),-1!=i&&r.splice(i,1),r.push(e),window.api?window.api.os.write(await Ou+`/${t}.json`,JSON.stringify(ju(r))):localStorage.setItem(t,JSON.stringify(ju(r))),!0}catch(n){return console.error(`${n} in SaveToFile`),!1}}async function Hu(e){try{return window.api?(window.api.os.exists(await Ou+`/${e}.json`),0==await window.api.os.exists(await Ou+`/${e}.json`)&&(window.api.os.write(await Ou+`/${e}.json`,JSON.stringify([])),!0)):void(localStorage.getItem(e)||localStorage.setItem(e,JSON.stringify([])))}catch(t){return console.error(`${t} in CheckFile`),!0}}function ju(e){const t=new Map;for(const n of e){const e=n.AnimeData.title.romaji,r=t.get(e);(!r||n.saveData&&r.saveData&&parseInt(n.saveData.episode.toString())>parseInt(r.saveData.episode.toString()))&&t.set(e,n)}return Array.from(t.values())}uu.use(Su).init({lng:"en",fallbackLng:"en",debug:!0,resources:await async function(){if(!window.api)return{en:{translation:Ru}};let e=await window.api.getListLang(),t={};for(let r=0;r<e.length;r++){const i=e[r];try{t[i.lang]={translation:JSON.parse(i.data)}}catch(n){console.error(n,"getAllLangFiles")}}return console.log(t),t}(),interpolation:{escapeValue:!1}}),window.api&&(Ou=window.api.os.getPath("userData"));const $u=15,Ku="\nquery(\n  $page: Int = 1,\n  $id: Int,\n  $type: MediaType,\n  $isAdult: Boolean = false,\n  $search: String,\n  $format: [MediaFormat],\n  $status: MediaStatus,\n  $countryOfOrigin: CountryCode,\n  $source: MediaSource,\n  $season: MediaSeason,\n  $seasonYear: Int,\n  $year: String,\n  $onList: Boolean,\n  $yearLesser: FuzzyDateInt,\n  $yearGreater: FuzzyDateInt,\n  $episodeLesser: Int,\n  $episodeGreater: Int,\n  $durationLesser: Int,\n  $durationGreater: Int,\n  $chapterLesser: Int,\n  $chapterGreater: Int,\n  $volumeLesser: Int,\n  $volumeGreater: Int,\n  $licensedBy: [Int],\n  $isLicensed: Boolean,\n  $genres: [String],\n  $excludedGenres: [String],\n  $tags: [String],\n  $excludedTags: [String],\n  $minimumTagRank: Int,\n  $sort: [MediaSort] = [POPULARITY_DESC, SCORE_DESC]\n) {\n  Page(page: $page, perPage: 15) {\n    pageInfo {\n      total\n      perPage\n      currentPage\n      lastPage\n      hasNextPage\n    }\n    media(\n      id: $id,\n      type: $type,\n      season: $season,\n      format_in: $format,\n      status: $status,\n      countryOfOrigin: $countryOfOrigin,\n      source: $source,\n      search: $search,\n      onList: $onList,\n      seasonYear: $seasonYear,\n      startDate_like: $year,\n      startDate_lesser: $yearLesser,\n      startDate_greater: $yearGreater,\n      episodes_lesser: $episodeLesser,\n      episodes_greater: $episodeGreater,\n      duration_lesser: $durationLesser,\n      duration_greater: $durationGreater,\n      chapters_lesser: $chapterLesser,\n      chapters_greater: $chapterGreater,\n      volumes_lesser: $volumeLesser,\n      volumes_greater: $volumeGreater,\n      licensedById_in: $licensedBy,\n      isLicensed: $isLicensed,\n      genre_in: $genres,\n      genre_not_in: $excludedGenres,\n      tag_in: $tags,\n      tag_not_in: $excludedTags,\n      minimumTagRank: $minimumTagRank,\n      sort: $sort,\n      isAdult: $isAdult\n    ) {\n      id\n      title {\n        english\n        romaji\n        native\n      }\n      coverImage {\n        extraLarge\n        large\n      }\n      startDate {\n        year\n        month\n        day\n      }\n      endDate {\n        year\n        month\n        day\n      }\n      bannerImage\n      season\n      seasonYear\n      description\n      type\n      format\n      status(version: 2)\n      episodes\n      duration\n      genres\n      source\n      averageScore\n      trailer {\n        id\n        site\n      }\n      nextAiringEpisode {\n        airingAt\n        timeUntilAiring\n        episode\n      }\n      characters(perPage: 10) {\n        edges {\n          role\n          node {\n            id\n            name {\n              full\n            }\n            image {\n              large\n            }\n          }\n          voiceActors(language: JAPANESE) {\n            id\n            name {\n              full\n            }\n            language\n            image {\n              large\n            }\n          }\n        }\n      }\n      studios(isMain: true) {\n        edges {\n          isMain\n          node {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n}\n",Vu={"Content-Type":"application/json",Accept:"application/json"},Gu={page:1,sort:["TRENDING_DESC","POPULARITY_DESC"],type:"ANIME"},Wu={page:1,sort:"POPULARITY_DESC",type:"ANIME"};function zu(e){let t=[];try{for(let n=0;n<e.characters.edges.length;n++){const r=e.characters.edges[n];0===r.voiceActors.length?t.push({role:r.role,character:{id:r.node.id,image:r.node.image.large,name:r.node.name.full}}):t.push({role:r.role,character:{id:r.node.id,image:r.node.image.large,name:r.node.name.full},voiceActor:{id:r.voiceActors[0].id,image:r.voiceActors[0].image.large,name:r.voiceActors[0].name.full}})}}catch(n){console.error(n)}return{AnimeData:{...e,coverImage:e.coverImage.extraLarge?e.coverImage.extraLarge:e.coverImage.large,studios:e.studios.edges.map(e=>e.node.name),characters:t}}}async function Yu(e,t){try{const n=await fetch("https://graphql.anilist.co",{method:"POST",headers:Vu,body:JSON.stringify({query:t,variables:e})});if(n.ok){return{success:!0,data:await n.json()}}return console.log(JSON.stringify({query:t,variables:e})),console.log(n),console.log(await n.text()),{success:!1,status:n.status,statusText:n.statusText}}catch(n){return{success:!1,status:400}}}async function qu(e,t){let n=await Yu(e,t);return n.success?n.data.data.Page.media.map(e=>zu(e)):[]}async function Xu(e,t){let n=await qu(e,Ku);wh(async()=>[{title:t,data:n,onScrollDownFunction:n=>Ju(n,e,t)}])}async function Ju(e,t,n){let r={title:n,data:await qu({...t,page:e},Ku),onScrollDownFunction:e=>Ju(e,t,n)};bh(async()=>({data:r,maxPage:$u}))}async function Zu(){let e=function(){const e=new Date,t=e.getMonth()+1;let n;return n=t>=1&&t<=3?"WINTER":t>=4&&t<=6?"SPRING":t>=7&&t<=9?"SUMMER":"FALL",{season:n,seasonYear:e.getFullYear()}}(),t=await Yu({season:e.season,seasonYear:e.seasonYear},"\n  query (\n    $season: MediaSeason,\n    $seasonYear: Int,\n  ) {\n    trending: Page(page: 1, perPage: 15) {\n      media(sort: TRENDING_DESC, type: ANIME, isAdult: false) {\n        ...media\n      }\n    }\n    season: Page(page: 1, perPage: 15) {\n      media(season: $season, seasonYear: $seasonYear, sort: POPULARITY_DESC, type: ANIME, isAdult: false) {\n        ...media\n      }\n    }\n    popular: Page(page: 1, perPage: 15) {\n      media(sort: POPULARITY_DESC, type: ANIME, isAdult: false) {\n        ...media\n      }\n    }\n  }\n\n  fragment media on Media {\n    id\n    title { english romaji native }\n    coverImage { extraLarge large }\n    startDate { year month day }\n    endDate { year month day }\n    bannerImage\n    season\n    seasonYear\n    description\n    type\n    format\n    source\n    status(version: 2)\n    episodes\n    duration\n    genres\n    averageScore\n    popularity\n    trailer {\n      id\n      site\n    }\n    nextAiringEpisode {\n      airingAt\n      timeUntilAiring\n      episode\n    }\n    characters(perPage: 10) {\n      edges {\n        role\n        node {\n          id\n          name {\n            full\n          }\n          image {\n            large\n          }\n        }\n        voiceActors(language: JAPANESE) {\n          id\n          name {\n            full\n          }\n          language\n          image {\n            large\n          }\n        }\n      }\n    }\n    studios(isMain: true) {\n      edges {\n        isMain\n        node { id name }\n      }\n    }\n  }\n");return t.success?[{title:du("home.trending_now"),data:t.data.data.trending.media.map(e=>zu(e)),horizontal:!0,onTitleClick:()=>Xu(Gu,du("home.trending_now"))},{title:du("home.popular_in_this_season"),data:t.data.data.season.media.map(e=>zu(e)),horizontal:!0,onTitleClick:()=>Xu({page:1,season:e.season,seasonYear:e.seasonYear,type:"ANIME"},du("home.popular_in_this_season"))},{title:du("home.all_time_popular"),data:t.data.data.popular.media.map(e=>zu(e)),horizontal:!0,onTitleClick:()=>Xu(Wu,du("home.all_time_popular"))}]:[]}async function ed(e){let t={page:1,search:e.title.native,sort:"SEARCH_MATCH",type:"ANIME"};for(;;){let n=await Yu(t,Ku);if(n.success||await Sd(2e4),n.success){let t=n.data.data.Page.media;for(let n=0;n<t.length;n++){const r=t[n];if(r.bannerImage==e.bannerImage)return zu(r).AnimeData;if(r.coverImage.large==e.coverImage)return zu(r).AnimeData;if(r.coverImage.extraLarge==e.coverImage)return zu(r).AnimeData;if(r.title.english==e.title.english)return zu(r).AnimeData;if(r.title.romaji==e.title.romaji)return zu(r).AnimeData;if(r.title.native==e.title.native)return zu(r).AnimeData}break}}}const td={version:"1.0",name:"AnilistApi",author:"Owca525",icon:"https://anilist.co/img/icons/icon.svg",information:{pageSize:$u,home:()=>wh(Zu),search:async function e(t,n,r){let i,s={page:n,sort:"SEARCH_MATCH",type:"ANIME"};""!=t.replaceAll(" ","")&&(s={...s,search:t},i=`Searching: ${t}`),r&&r.genres&&(s={...s,genres:r.genres}),r&&r.years&&(s={...s,seasonYear:parseInt(r.years)}),r&&r.seasons&&(s={...s,season:r.seasons.toUpperCase()}),r&&r.format&&(s={...s,format:r.format.map(e=>e.toUpperCase().replace(" ","_"))}),r&&r.airing&&(s={...s,status:r.airing.toUpperCase().replace(" ","_")});let a={title:i,data:await qu(s,Ku),onScrollDownFunction:n=>e(t,n,r)};n>1?bh(async()=>({data:a,maxPage:$u})):wh(async()=>[a])},anime:async function(e){let t=await Yu({id:e},"\nquery(\n  $id: Int!\n) {\n  Media(id: $id, type: ANIME) {\n    id\n    title { english romaji native }\n    coverImage { extraLarge large }\n    startDate { year month day }\n    endDate { year month day }\n    bannerImage\n    season\n    seasonYear\n    description\n    type\n    format\n    source\n    status(version: 2)\n    episodes\n    duration\n    genres\n    averageScore\n    popularity\n    trailer {\n      id\n      site\n    }\n    nextAiringEpisode {\n      airingAt\n      timeUntilAiring\n      episode\n    }\n    characters(perPage: 10) {\n      edges {\n        role\n        node {\n          id\n          name {\n            full\n          }\n          image {\n            large\n          }\n        }\n        voiceActors(language: JAPANESE) {\n          id\n          name {\n            full\n          }\n          language\n          image {\n            large\n          }\n        }\n      }\n    }\n    studios(isMain: true) {\n      edges {\n        isMain\n        node { id name }\n      }\n    }\n  }\n}\n");if(t.success)return zu(t.data.data.Media).AnimeData}},preferedLang:["en"],searchOption:{genres:await async function(){let e=await fetch("https://graphql.anilist.co",{method:"POST",body:JSON.stringify({query:"\nquery {\n  GenreCollection\n}\n",variables:""})});if(e.ok){return(await e.json()).data.data.GenreCollection}return[]}(),seasons:["Winter","Spring","Summer","Fall"],years:function(e){let t=[];const n=(new Date).getFullYear();t.push((n+1).toString());for(let r=n+1;r>e-1;r--)t.push(r.toString());return t}(1940),format:["TV","Movie","TV Short","special","OVA","ONA"],statuses:["Releasing","Finished","Not Yet Released","Cancelled"]}},nd=window.api?window.api.os.getPath("userData"):"",rd={data:[]};async function id(){if(!window.api)return;let e;try{let n=await window.api.os.read(await nd+"/continueWatch.json");if(n=JSON.parse(n),Array.isArray(n))return!0;if("player"in n.continue[0]){let r=new Date;window.api.os.write(await nd+`/continueWatch.json.backup-${r.toISOString().replace(/[:.]/g,"-")}`,JSON.stringify(n)),window.api.os.write(await nd+"/continueWatch.json",JSON.stringify(rd)),Qt.info(du("oldBackup.backupcontinue"),hu);let i=[],s=0,a=0;e=Qt.loading(du("oldBackup.convertcontinue",{success:s,failed:a}),hu);for(let o=0;o<n.continue.length;o++)try{const t=n.continue[o];let r=await Gd(t.id);if(r){let e,n=await ed(r.AnimeData);e=n||r.AnimeData,i.push({...r,AnimeData:{...e,player_ID:t.id,episodesList:void 0,nextAiringEpisode:void 0},saveData:{pluginName:"",last_Time:t.player.time,episode:t.player.episode.ep,type:t.player.episode.type}}),s+=1}else a+=1;Qt.update(e,{render:du("oldBackup.convertcontinue",{success:s,failed:a})})}catch(t){if(t instanceof Error&&"Unexpected end of JSON input"==t.message)return Qt.dismiss(e),!0;console.error(t),a+=1,Qt.update(e,{render:du("oldBackup.convertcontinue",{success:s,failed:a})})}Qt.dismiss(e),Qt.success(du("oldBackup.convertcontinuedone",{success:s,failed:a}),hu),window.api.os.write(await nd+"/continueWatch.json",JSON.stringify(i))}return!0}catch(n){return console.info(n),Qt.dismiss(e),Qt.info(du("oldBackup.convertcontinuefailed"),hu),!1}}async function sd(e){let t=await Qu("continueWatch");return e?t.slice(0,e):t}const ad=window.api?window.api.os.getPath("userData"):"",od={data:[]};async function Ad(){let e;try{if(!window.api)return;let n=await window.api.os.read(await ad+"/history.json");if(n=JSON.parse(n),"{}"==n)return!0;if("AnimeData"in n[0])return!0;if("id"in n[0]){let r=new Date;window.api.os.write(await ad+`/history.json.backup-${r.toISOString().replace(/[:.]/g,"-")}`,JSON.stringify(n)),window.api.os.write(await ad+"/history.json",JSON.stringify(od)),Qt.info(du("oldBackup.backuphistory"),hu);let i=[],s=0,a=0;e=Qt.loading(du("oldBackup.converthistory",{success:s,failed:a}),hu);for(let o=0;o<n.length;o++)try{const t=n[o];let r=await Gd(t.id);if(r){let e,n=await ed(r.AnimeData);e=n||r.AnimeData,i.push({...r,AnimeData:{...e,player_ID:t.id,episodesList:void 0,nextAiringEpisode:void 0},saveData:{pluginName:"",last_Time:0,episode:t.text.split(" ")[3],type:""}}),s+=1}else a+=1;Qt.update(e,{render:du("oldBackup.converthistory",{success:s,failed:a})})}catch(t){console.error(t),a+=1,Qt.update(e,{render:du("oldBackup.converthistory",{success:s,failed:a})})}Qt.dismiss(e),Qt.success(du("oldBackup.converthistorydone",{success:s,failed:a}),hu),window.api.os.write(await ad+"/history.json",JSON.stringify(i))}return!0}catch(n){return n instanceof Error&&"Unexpected end of JSON input"==n.message?(Qt.dismiss(e),!0):(console.error(n),Qt.dismiss(e),Qt.info(du("oldBackup.converthistoryfailed"),hu),!1)}}async function ld(e){let t=await Qu("history");return e?t.slice(0,e):t}let cd=()=>{},ud=()=>{};const dd=({children:e})=>{const[t,n]=h.useState(!1),[r,i]=h.useState();return cd=e=>{i(e),n(!0)},ud=()=>{n(!1),i(null)},A.jsxs(A.Fragment,{children:[e,t&&r&&A.jsx("main",{className:"dialog-main-background",children:A.jsxs($l.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.1},className:"dialog-container",children:[A.jsxs("div",{className:"dialog-title",children:[r.title,"none"!=r.type&&"refresh"!=r.type&&A.jsx("span",{className:"dialog-icon material-symbols-outlined",children:r.type})]}),A.jsx("div",{className:"dialog-description",children:r.description}),A.jsxs("div",{className:"dialog-buttons",children:["refresh"==r.type&&A.jsxs(A.Fragment,{children:[A.jsx(zt,{content:du("dialog.exit"),onClick:()=>{r.buttons.secondbutton(),ud()}}),A.jsx(zt,{content:du("dialog.retry"),onClick:()=>{r.buttons.firstbutton(),ud()}})]}),"refresh"!=r.type&&A.jsxs(A.Fragment,{children:[A.jsx(zt,{content:du("dialog.yes"),onClick:()=>{r.buttons.firstbutton(),ud()}}),A.jsx(zt,{content:du("dialog.no"),onClick:()=>{r.buttons.secondbutton(),ud()}})]})]})]})})]})};function hd(e,t,n,r,i){return null==e&&(e=0),null==t&&(t=0),null==n&&(n=0),null==r&&(r=0),null==i&&(i=0),new Intl.DateTimeFormat(uu.language,{year:"numeric",month:"long",day:"numeric"}).format(new Date(e,t,i,n,r))}function fd(e){return e?0===e.length?"":e.length<=3?e.toUpperCase().replace("_"," "):(e=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).replace("_"," "):""}function pd(e){if(!e)return;const t=Math.floor(e/86400);e%=86400;const n=Math.floor(e/3600);e%=3600;return{days:t,hours:n,minutes:Math.floor(e/60),seconds:e%60}}function gd(e,t){const n=new Date(e),r=(new Date).getTime()-n.getTime();switch(t){case"week":return r>=6048e5;case"day":return r>=864e5}}function md(e){return isNaN(e)||e<50||e>200?0:Math.log(e/100)/Math.log(1.2)}function yd(e){if(!e)return"0:00";const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%60),i=t>0?`${t}:`:"";return`${i}${""!=i&&n<10?"0":""}${n}:${r<10?"0":""}${r}`}async function vd(e){if(!window.api)return;let t=document.getElementById("theme-stylesheet");t&&t.remove(),document.title="";const n=await window.api.getlistThemes();let r=n[0];n.forEach(t=>{t.name===e&&(r=t)});const i=document.createElement("link");i.id="theme-stylesheet",i.rel="stylesheet",i.href=r.pathcss,document.head.appendChild(i),r.animuTitle&&(document.title=r.animuTitle)}function wd(e){const t={control:"ctrl",shift:"shift",alt:"alt",escape:"esc",tab:"tab",delete:"del",end:"end"," ":"space"};for(const n in t)t.hasOwnProperty(n)&&(e=e.toUpperCase().replace(n.toUpperCase(),t[n].toUpperCase()));return e}function bd(e,t){if(!e)return 0;if(!t)return 0;const n=e.length,r=t.length,i=Array.from({length:n+1},()=>Array(r+1).fill(0));for(let o=0;o<=n;o++)i[o][0]=o;for(let o=0;o<=r;o++)i[0][o]=o;for(let o=1;o<=n;o++)for(let n=1;n<=r;n++)e[o-1]===t[n-1]?i[o][n]=i[o-1][n-1]:i[o][n]=1+Math.min(i[o-1][n],i[o][n-1],i[o-1][n-1]);const s=Math.max(n,r),a=(s-i[n][r])/s*100;return Math.round(100*a)/100}async function Ed(){let e=vh.getState().home;e.data.length>2||e.data.length<=0||(1!=e.data.length||e.data[0].title!=du("global.continuewatch")?1!=e.data.length||e.data[0].title!=du("global.history")?e.data[0].title!=du("global.continuewatch")||e.data[1].title!=du("global.history")||await wh(async()=>[{title:du("global.continuewatch"),data:await sd(20),horizontal:!0,onTitleClick:()=>wh(async()=>[{title:du("global.continuewatch"),data:await sd(),horizontal:!1}])},{title:du("global.history"),data:await ld(20),horizontal:!0,onTitleClick:()=>wh(async()=>[{title:du("global.history"),data:await ld(),horizontal:!1}])}]):await wh(async()=>[{title:du("global.history"),data:await ld(),horizontal:!1}]):await wh(async()=>[{title:du("global.continuewatch"),data:await sd(),horizontal:!1}]))}function Bd(e,t,n){let r=[];if(e)for(let i=0;i<e.length;i++){const t=e[i];r.push(t)}if(r.push({option:uu.t("dialog.reload"),onClick:()=>location.reload()}),t){r.push({option:"",line:!0});for(let e=0;e<t.length;e++){const n=t[e];r.push(n)}}return r.push({option:"",line:!0}),vh.getState().config.Developer.DeveloperMode&&window.api&&r.push({option:uu.t("contextMenu.devtools"),onClick:window.BrowserWindow.openDevTools}),r.push({option:uu.t("dialog.exit"),onClick:()=>cd({type:"info",title:uu.t("global.exitAnimu"),buttons:{firstbutton:()=>window.api?window.BrowserWindow.exit():"",secondbutton:()=>""}})}),r}function Cd(e){if(!e)return"";const t=Math.max(0,Math.min(100,e));return`rgb(${t<50?255:Math.floor(255-5.1*(t-50))}, ${t>50?128:Math.floor(2.56*t)}, 0)`}function Sd(e){return new Promise(t=>setTimeout(t,e))}function Td(e){try{return e.format?.toLowerCase().includes("movie")?du("player.TitleMovie",{name:e.title.romaji}):du("player.TitleEpisode",{ep:e.ep,name:e.title.romaji})}catch(t){return console.error(t),du("player.TitleEpisode",{ep:e.ep,name:e.title.romaji})}}async function xd(e){if(window.api)return"win32"==(await window.api.getOSDetails()).platform?e.replace("/","\\"):e}function kd(e){const[t,n,r]=e.split(":");return 3600*parseFloat(t)+60*parseFloat(n)+parseFloat(r)}function Id(e){return""!==e.trim()&&!isNaN(Number(e))}function Fd(e){const[t]=e.split("."),n=t.split(":").map(Number),[r,i,s]=n;return 3600*r+60*i+s}function Ld(e){let t=function(){try{return vh.getState().plugin.loadedPlugins}catch(e){return console.error(e),[]}}(),n=[];for(let r=0;r<t.length;r++){const i=t[r];i.player&&n.push({label:i.name,onClick:()=>e(i.name)})}return n}const Dd="06327bc10dd682e1ee7e07b6db9c16e9ad2fd56c1b769e47513128cd5c9fc77a",_d="9d7439c90f203e534ca778c4901f9aa2d3ad42c06243ab2c5e6b79612af32028",Ud="c8f3ac51f598e630a1d09d7f7fb6924cff23277f354a23e473b962a367880f7d",Pd="https://api.allanime.day",Rd=["Yt-mp4","Sak","S-mp4","Luf-mp4","Kir","Default","Uv-mp4"],Od={79:"A","7a":"B","7b":"C","7c":"D","7d":"E","7e":"F","7f":"G",70:"H",71:"I",72:"J",73:"K",74:"L",75:"M",76:"N",77:"O",68:"P",69:"Q","6a":"R","6b":"S","6c":"T","6d":"U","6e":"V","6f":"W",60:"X",61:"Y",62:"Z",59:"a","5a":"b","5b":"c","5c":"d","5d":"e","5e":"f","5f":"g",50:"h",51:"i",52:"j",53:"k",54:"l",55:"m",56:"n",57:"o",48:"p",49:"q","4a":"r","4b":"s","4c":"t","4d":"u","4e":"v","4f":"w",40:"x",41:"y",42:"z","08":"0","09":"1","0a":"2","0b":"3","0c":"4","0d":"5","0e":"6","0f":"7","00":"8","01":"9",15:"-",16:".",67:"_",46:"~","02":":",17:"/","07":"?","1b":"#",63:"[",65:"]",78:"@",19:"!","1c":"$","1e":"&",10:"(",11:")",12:"*",13:"+",14:",","03":";","05":"=","1d":"%"};function Qd(e){const t=e.trim(),n=[];for(let r=0;r<t.length;r+=2)n.push(t.slice(r,r+2));return n.map(e=>Od[e]??"").join("")}async function Nd(e,t,n){let r=`${Pd}/api?variables=${e}&extensions={"persistedQuery":{"version":1,"sha256Hash": "${t}"}}`,i=await fetch(r);console.log(i);let s=await i.json();if(i.ok)return s.data}async function Md(e,t=1){let n=`{"search":{"query":"${e}"},"limit":26,"page":${t},"translationType":"sub","countryOrigin":"ALL"}`;const r=await Nd(n,Dd);return r?r.data:null}async function Hd(e){if(!e)return;let t=[];try{if(e.characters)for(let n=0;n<e.characters.length;n++){const r=e.characters[n];if(t.push({role:r.role,character:{id:r.aniListId,name:r.name.full,image:r.image.large}}),10==n)break}}catch(r){console.error(r)}return console.log(e),{AnimeData:{averageScore:e.averageScore,bannerImage:e.banner,coverImage:e.thumbnail,description:e.description,duration:e.episodeDuration?(n=parseInt(e.episodeDuration),Math.floor(n/6e4)):void 0,endDate:e.airedEnd?{year:e.airedEnd.year,day:e.airedEnd.date,month:e.airedEnd.month}:void 0,startDate:e.airedStart?{year:e.airedStart.year,day:e.airedStart.date,month:e.airedStart.month}:void 0,episodes:e.episodeCount?parseInt(e.episodeCount):void 0,genres:e.genres,nextAiringEpisode:void 0,popularity:0,season:e.season?e.season.quarter:void 0,seasonYear:e.season?e.season.year:void 0,status:e.status,studios:e.studios,title:{romaji:e.name,native:e.nativeName,english:e.englishName},type:e.type,id:"",format:e.type,player_ID:e._id,characters:t,source:void 0,trailer:void 0}};var n}async function jd(e=1){let t=`{"search":{"sortBy":"Recent"},"limit":26,"page":${e},"translationType":"sub","countryOrigin":"JP"}`,n=await Nd(t,Dd),r=[];for(let i=0;i<n.data.shows.edges.length;i++){const e=n.data.shows.edges[i];let t=await Hd(e);t&&r.push(t)}e&&e>1?await bh(async()=>({data:{title:"Recent Anime",data:r,onScrollDownFunction:e=>jd(e)},maxPage:26})):null!=n?await wh(async()=>[{title:"Recent Anime",data:r,onScrollDownFunction:e=>jd(e)}]):await wh(async()=>[{title:"Recent Anime",data:[]}])}async function $d(e){try{let t=await Md(e.title.romaji);if(!t)return[];if(t.length<=0)return[];let n=[];for(let e=0;e<t.shows.edges.length;e++){const r=t.shows.edges[e];let i=await Hd(r);i&&n.push(i)}return n}catch(t){return console.log(`Error in getAnimeList: ${t}`),[]}}async function Kd(e,t){let n=`{"_id":"${t}"}`;const r=await Nd(n,_d);if(console.log(r),!r||!r.data.show)return[];let i=r.data.show,s=await async function(e,t){try{let n=`{"showId":"${e}","episodeNumStart":${t.start},"episodeNumEnd":${t.end}}`;const r=await Nd(n,Ud);return console.log(n),r?await async function(e){try{if(!e)return[];let t=[];for(let n=0;n<e.length;n++){const r=e[n],i=r.thumbnails.filter(e=>e.startsWith("https"));t.push({ep:r.episodeIdNum,img:i.length>0?i[0]:void 0,title:r.notes?r.notes.replace("<note-split>"," "):void 0})}return t}catch(t){return console.error("formatEpisodeData",t,e),[]}}(r.data.episodeInfos):[]}catch(n){return console.error(n),[]}}(t,{start:parseInt(i.availableEpisodesDetail.sub.at(-1)),end:parseInt(i.availableEpisodesDetail.sub[0])});return s.length<=0?[]:"episodes"==e?s:(s=s.sort((e,t)=>Number(e.ep)-Number(t.ep)),[{episodes:s.length!==i.availableEpisodes.sub?s.slice(0,0!=i.availableEpisodes.sub?i.availableEpisodes.sub-1:0):s,type:"sub"},{episodes:s.length!==i.availableEpisodes.dub?s.slice(0,0!=i.availableEpisodes.dub?i.availableEpisodes.dub-1:0):s,type:"dub"},{episodes:s.length!==i.availableEpisodes.raw?s.slice(0,0!=i.availableEpisodes.raw?i.availableEpisodes.raw-1:0):s,type:"raw"}])}async function Vd(e){if(e.startsWith("https"))return;const t=await async function(e){let t=await fetch(e);console.log(t);let n=await t.json();if(t.ok)return n.data}(`http://allanime.day${e.replace("clock","clock.json")}`);if(console.log(e,t),!t)return;let n;return t.links.forEach(e=>{if(!e.src)return;const t=new URL(e.src);n=e.mp4?{resolution:[{url:e.src,res:"1080"}],hostname:t.hostname,hls:!1}:{resolution:[{url:e.src,res:""}],hostname:t.hostname,hls:!0}}),n}async function Gd(e){try{let t=`{"_id":"${e}"}`;const n=await Nd(t,_d);return n?await Hd(n.data.show):void 0}catch(t){return void console.error(t)}}const Wd={version:"1.2",name:"Allmanga",author:"Owca525",icon:"https://allmanga.to/android-icon-192x192.png",player:{animeDataList:async function(e,t){if(console.log(e),e){let n,r=await $d(e),i=[],s=[],a=[];for(let t=0;t<r.length;t++){const o=r[t];if("1P"===o.AnimeData.title.romaji){n=o.AnimeData.player_ID;break}o.AnimeData.title.native&&i.push({name:o.AnimeData.title.native,prec:bd(e.title.native,o.AnimeData.title.native),data:o.AnimeData}),o.AnimeData.title.romaji&&s.push({name:o.AnimeData.title.romaji,prec:bd(e.title.romaji.toLowerCase(),o.AnimeData.title.romaji.toLowerCase()),data:o.AnimeData}),o.AnimeData.title.english&&a.push({name:o.AnimeData.title.english.toLowerCase(),prec:bd(e.title.english?.toLowerCase(),o.AnimeData.title.english?.toLowerCase()),data:o.AnimeData})}console.log(a,i,s);let o=s.filter(e=>e.prec===Math.max(...s.map(e=>e.prec))),A=a.filter(e=>e.prec===Math.max(...a.map(e=>e.prec))),l=i.filter(e=>e.prec===Math.max(...i.map(e=>e.prec))),c=[...o.map(e=>e.data.player_ID),...A.map(e=>e.data.player_ID),...l.map(e=>e.data.player_ID)];const u={};for(const e of c)e&&!["unknown","undefined",""].includes(e)&&(u[e]=(u[e]||0)+1);console.log(u,o,A,l);let d="",h=0;for(const[e,t]of Object.entries(u))t>h&&(d=e,h=t);t=n||d}if(!t||""==t)return{player_id:"",episodesData:[]};let n=await Kd("all",t);return console.log(n),{player_id:t,episodesData:n}},getUrls:async function(e,t,n){let r=`{"showId":"${n}","translationType":"${e}","episodeString":"${t}"}`;const i=await Nd(r,"5f1a64b73793cc2234a389cf3a8f93ad82de7043017dd551f38f65b89daa65e0"),s=i.data.episode.sourceUrls.map(e=>function(e,t){for(let n=0;n<Rd.length;n++)if(Rd[n].toLowerCase()==t.toLowerCase())return Qd(e)}(e.sourceUrl,e.sourceName)).filter(e=>void 0!==e);let a=[];for(let o=0;o<s.length;o++){const e=s[o];let t=await Vd(e);t&&a.push(t)}return console.log(i.data.episode.episodeInfo.vidInforssub),"dub"==e&&i.data.episode.episodeInfo.vidInforsdub&&a.push({hostname:"wp.youtube-anime.com",hls:!1,resolution:[{res:i.data.episode.episodeInfo.vidInforsdub.vidResolution.toString(),url:`https://wp.youtube-anime.com/aln.youtube-anime.com${i.data.episode.episodeInfo.vidInforsdub.vidPath}`}]}),"raw"==e&&i.data.episode.episodeInfo.vidInforsraw&&a.push({hostname:"wp.youtube-anime.com",hls:!1,resolution:[{res:i.data.episode.episodeInfo.vidInforsraw.vidResolution.toString(),url:`https://wp.youtube-anime.com/aln.youtube-anime.com${i.data.episode.episodeInfo.vidInforsraw.vidPath}`}]}),"sub"==e&&i.data.episode.episodeInfo.vidInforssub&&a.push({hostname:"wp.youtube-anime.com",hls:!1,resolution:[{res:i.data.episode.episodeInfo.vidInforssub.vidResolution.toString(),url:`https://wp.youtube-anime.com/aln.youtube-anime.com${i.data.episode.episodeInfo.vidInforssub.vidPath}`}]}),a},episodeList:async(e,t)=>await Kd("episodes",t),animeList:$d,search:async function(e,t,n){let r=await Md(e,t);if(!r||r.length<=0)return[];let i=[];for(let s=0;s<r.shows.edges.length;s++){const e=r.shows.edges[s];let t=await Hd(e);t&&i.push(t)}return i}},sidebarAddon:[{icon:"today",text:"Recent Anime",onClick:async()=>await jd()}],preferedLang:["en"]},zd="https://anizone.to",Yd=/<div[^>]*class=["']grid grid-cols-1 2xl:grid-cols-2 gap-4["'][^>]*>(.*?)<\/div>/gs;async function qd(e,t){console.log(e,t);let n=t;if(!n&&e){let t=await Xd(e);if(console.log(t),t.length<=0)return;n=t[0].AnimeData.player_ID}if(!n)return;let r=`${zd}/anime/${n}`;const i=await fetch(r);if(!i.ok)return;let s,a=await i.text(),o=[...[...a.matchAll(/<ul.*?>(.*?)<\/ul>/gs)][0][0].matchAll(/href=["'](https:\/\/anizone\.to\/anime\/[^\s"']+)["']/g)],A=[...[...a.matchAll(/<div[^>]*class="(?=[^"]*text-slate-100)(?=[^"]*text-xs)(?=[^"]*lg:text-base)(?=[^"]*flex)(?=[^"]*flex-wrap)(?=[^"]*justify-center)(?=[^"]*gap-2)(?=[^"]*sm:gap-6)[^"]*"[^>]*>[\s\S]*?<\/div>/g)][0][0].matchAll(/<[^>]*class="[^"]*\binline-block\b[^"]*"[^>]*>([\s\S]*?)<\/[^>]+>/g)];for(let d=0;d<A.length;d++){const e=A[d];e[1].includes("Episodes")&&(s=parseInt(e[1].split(" ")[0]))}let l=o.filter(e=>!e[0].substring(e[0].lastIndexOf("/")).includes("s")).length;if(!s)return;let c=[],u=s;l<s&&36!=l&&(u=l);for(let d=1;d<u+1;d++)c.push({ep:d.toString()});return{player_id:n,episodesData:[{episodes:c,type:"sub",name:"Subtitles"}]}}async function Xd(e){try{let n=`${zd}/anime?search=${t=e.title.romaji,encodeURI(t.replace("[","").replace("]","")).replace("+","%2B").replace("%20","+")}`;const r=await fetch(n);if(!r.ok)return[];let i=[...(await r.text()).matchAll(Yd)];if(i.length<=0)return[];let s=[];for(let e=0;e<i.length;e++){const t=i[e];let n=[...t[0].matchAll(/wire:key=["']([^"']+)["']/g)],r=[...t[0].matchAll(/src=["'](https:\/\/anizone\.to\/images\/anime\/[^"']+)["']/g)],a=[...t[0].matchAll(/alt=["']([^"']+)["']/g)];console.log(n,r,a),s.push({AnimeData:{characters:[],studios:[],coverImage:r[0][1],title:{english:void 0,native:decodeURI(a[0][1]),romaji:decodeURI(a[0][1])},id:"",player_ID:n[0][1].slice(2),genres:void 0}})}return s}catch(n){return console.error(n),[]}var t}const Jd={version:"1.1",name:"AniZone",author:"Owca525",player:{getUrls:async function(e,t,n){let r=`${zd}/anime/${n}/${t}`;const i=await fetch(r);if(!i.ok)return[];let s=await i.text(),a=[...s.matchAll(/https:\/\/seiryuu\.vid-cdn\.xyz\/[a-z0-9-]+\/storyboard\.vtt/gi)],o=[...s.matchAll(/https:\/\/seiryuu\.vid-cdn\.xyz\/[a-z0-9-]+\/chapters\.vtt/gi)],A=[...s.matchAll(/https:\/\/seiryuu\.vid-cdn\.xyz\/[a-z0-9-]+\/master\.m3u8/gi)];if(A.length<=0)return[];let l=[...s.matchAll(/<track[^>]*\s+src=["']?(?<src>[^"'\s>]+)["']?[^>]*\s+data-type=["']?(?<dataType>[^"'\s>]+)["']?[^>]*\s+kind=["']?(?<kind>[^"'\s>]+)["']?[^>]*\s+label=["']?(?<label>[^"']+)["']?[^>]*\s+srclang=["']?(?<srclang>[^"'\s>]+)["']?[^>]*>/gi)];if(l.length<=0)return[];let c=[];for(let d=0;d<l.length;d++){const e=l[d];"subtitles"==e[3]&&c.push({url:e[1],lang:e[5],label:e[4],format:e[2]})}let u=[];if(o.length>0){let e=await async function(e){let t=await fetch(e),n=await t.text();if(!t.ok)return[];let r=n.split("\n"),i=[];for(let s=0;s<r.length;s++)if(r[s].includes("--\x3e")){const[e,t]=r[s].split(" --\x3e "),n=r[s+1];if(""==n)continue;i.push({start:Fd(e),end:Fd(t),type:"other",name:n})}return i}(o[0][0]);for(let t=0;t<e.length;t++){const n=e[t];"Intro"!=n.name?"Credits"!=n.name&&"Ending"!=n.name?"Opening"!=n.name?u.push(n):u.push({...n,type:"opening"}):u.push({...n,type:"ending"}):u.push({...n,type:"opening"})}}return[{hostname:"Anizone.to",hls:!0,subtitles:c,listChapters:u,chaptersUrl:o.length>0?o[0][0]:void 0,storyboardVTT:a.length>0?a[0][0]:void 0,resolution:[{res:"",url:A[0][0],defaultSubtitles:!0}]}]},animeDataList:qd,episodeList:async function(e,t){let n=await qd(void 0,t);return console.log(n),n?n.episodesData[0].episodes:[]},animeList:Xd,search:async function(e,t,n){return await Xd({characters:[],studios:[],title:{english:void 0,native:e,romaji:e},id:"",genres:void 0})}},preferedLang:["en"]},Zd="https://www.lycoris.cafe";function eh(e){switch(e){case"SD":return"480";case"HD":return"720";case"FHD":return"1080";case"SourceMKV":return"Source"}return"Unknown"}async function th(e){let t=await function(){try{return vh.getState().plugin.playerPluginCache}catch(e){console.error(e)}}();if(t&&t.anime_id==e)return t;{let t=`${Zd}/api/anime/${e}`,n=await fetch(t);if(!n.ok)return;let r=await n.json();return await function(e){try{vh.dispatch({type:"setPlayerPluginCache",payload:e})}catch(t){console.error(t)}}({anime_id:e,data:r}),{data:r}}}async function nh(e){let t=`https://www.lycoris.cafe/api/search?page=1&pageSize=12&search=${n=e.title.romaji,encodeURI(n.replace("[","").replace("]","")).replace("+","%2B").replace("%20","+")}&genres=&status=&format=&year=&season=&source=&sortField=popularity&sortDirection=desc&preferRomaji=true`;var n;const r=await fetch(t);if(!r.ok)return[];let i=[];return(await r.json()).data.forEach(e=>{let t=function(e){try{return{AnimeData:{characters:[],title:{english:e.englishTitle,native:"",romaji:e.title},id:"",player_ID:e.id,genres:e.genres,averageScore:10*e.rating,season:e.season,source:e.source,status:e.status,studios:[e.studio],description:e.synopsis,format:e.format,coverImage:e.poster,bannerImage:e.background,seasonYear:e.seasonYear,popularity:e.popularity,episodes:e.totalEpisodes}}}catch(t){return void console.error(t)}}(e);t&&i.push(t)}),i}function rh(e){console.log(e);try{return{characters:[],studios:[e.studio],genres:e.genres,title:{english:e.englishTitle,native:"",romaji:e.title},id:e.id,format:e.format,season:e.season,seasonYear:e.seasonYear,source:e.source,status:e.status,averageScore:e.rating?10*e.rating:void 0,coverImage:e.poster,nextAiringEpisode:e.nextAiringEpisode,bannerImage:e.background}}catch(t){return}}const ih={version:"1.0",name:"Lycoris.cafe",author:"Owca525",icon:"https://www.lycoris.cafe/favicon.ico",player:{getUrls:async function(e,t,n){let r=await th(n);if(!r)return[];let i=[],s=[],a=[],o=r.data.anime.episodes.find(e=>parseInt(e.number)==parseInt(t));if(!o)return[];let A=await fetch(`${Zd}/api/watch/getVideoLink?id=${o.id}`);if(!A.ok)return[];let l=(await A.text()).slice(0,-2);l=l.split("").reverse().map(e=>String.fromCharCode(e.charCodeAt(0)-7)).join("");try{let e=JSON.parse(atob(l));for(const t in e){let n=eh(t);e[t].length<=0||"Unknown"!=n&&i.push({res:n,url:e[t],defaultSubtitles:"Source"==n})}}catch(u){console.error(u,atob(l),l,A)}o.subtitles.EN&&s.push({url:o.subtitles.EN,lang:"en",label:"English",format:"ass"}),o.subtitles.PL&&s.push({url:o.subtitles.PL,lang:"pl",label:"Polish",format:"ass"});let c=JSON.parse(o.markerPeriods);return c[0]&&Fd(c[0].endTime)>=0&&a.push({start:Fd(c[0].startTime),end:Fd(c[0].endTime),type:"opening",name:"Opening"}),c[1]&&Fd(c[1].endTime)>=0&&a.push({start:Fd(c[1].startTime),end:Fd(c[1].endTime),type:"ending",name:"Ending"}),[{hostname:"lycoris.cafe",hls:!1,resolution:i.sort((e,t)=>Number(e.res)-Number(t.res)).reverse(),listChapters:a,subtitles:s}]},animeDataList:async function(e,t){console.log(e,t);let n=t;if(!n&&e){let t=await nh(e);if(console.log(t),t.length<=0)return;n=t[0].AnimeData.player_ID}if(!n)return;let r=await th(n);return r?(console.log(r),{player_id:n,episodesData:[{episodes:r.data.anime.episodes.map(e=>({ep:e.number,img:e.thumbnail,title:e.title})),type:"sub",name:"Subtitles"}]}):void 0},episodeList:async function(e,t){let n=await th(t);return n?n.data.anime.episodes.map(e=>({ep:e.number,img:e.thumbnail,title:e.title})):[]},animeList:nh,search:async function(e,t,n){let r=`https://www.lycoris.cafe/api/search?page=${t}&pageSize=12&search=${e}&genres=&status=&format=&year=&season=&source=&sortField=popularity&sortDirection=desc&preferRomaji=true`;const i=await fetch(r);if(!i.ok)return[];let s=(await i.json()).data.data.map(e=>({AnimeData:rh(e)}));return s||[]}},preferedLang:["pl","en"]},sh={loadedPlugins:[td,Wd,Jd,ih],informationPlugin:td,playerPlugin:void 0,playerPluginCache:void 0},ah={isLoading:!1,isError:!1,data:[],search:"",page:1,stopScrolling:!1,containerLoading:!1,localSearch:!1,filterTags:void 0};var oh,Ah;var lh=function(){if(Ah)return oh;Ah=1;const{hasOwnProperty:e}=Object.prototype,t=(e,r={})=>{"string"==typeof r&&(r={section:r}),r.align=!0===r.align,r.newline=!0===r.newline,r.sort=!0===r.sort,r.whitespace=!0===r.whitespace||!0===r.align,r.platform=r.platform||"undefined"!=typeof process&&process.platform,r.bracketedArray=!1!==r.bracketedArray;const i="win32"===r.platform?"\r\n":"\n",a=r.whitespace?" = ":"=",o=[],A=r.sort?Object.keys(e).sort():Object.keys(e);let l=0;r.align&&(l=s(A.filter(t=>null===e[t]||Array.isArray(e[t])||"object"!=typeof e[t]).map(t=>Array.isArray(e[t])?`${t}[]`:t).concat([""]).reduce((e,t)=>s(e).length>=s(t).length?e:t)).length);let c="";const u=r.bracketedArray?"[]":"";for(const t of A){const n=e[t];if(n&&Array.isArray(n))for(const e of n)c+=s(`${t}${u}`).padEnd(l," ")+a+s(e)+i;else n&&"object"==typeof n?o.push(t):c+=s(t).padEnd(l," ")+a+s(n)+i}r.section&&c.length&&(c="["+s(r.section)+"]"+(r.newline?i+i:i)+c);for(const s of o){const a=n(s,".").join("\\."),o=(r.section?r.section+".":"")+a,A=t(e[s],{...r,section:o});c.length&&A.length&&(c+=i),c+=A}return c};function n(e,t){var n=0,r=0,i=0,s=[];do{if(-1!==(i=e.indexOf(t,n))){if(n=i+t.length,i>0&&"\\"===e[i-1])continue;s.push(e.slice(r,i)),r=i+t.length}}while(-1!==i);return s.push(e.slice(r)),s}const r=(t,r={})=>{r.bracketedArray=!1!==r.bracketedArray;const i=Object.create(null);let s=i,o=null;const A=/^\[([^\]]*)\]\s*$|^([^=]+)(=(.*))?$/i,l=t.split(/[\r\n]+/g),c={};for(const n of l){if(!n||n.match(/^\s*[;#]/)||n.match(/^\s*$/))continue;const t=n.match(A);if(!t)continue;if(void 0!==t[1]){if(o=a(t[1]),"__proto__"===o){s=Object.create(null);continue}s=i[o]=i[o]||Object.create(null);continue}const l=a(t[2]);let u;r.bracketedArray?u=l.length>2&&"[]"===l.slice(-2):(c[l]=(c?.[l]||0)+1,u=c[l]>1);const d=u&&l.endsWith("[]")?l.slice(0,-2):l;if("__proto__"===d)continue;const h=!t[3]||a(t[4]),f="true"===h||"false"===h||"null"===h?JSON.parse(h):h;u&&(e.call(s,d)?Array.isArray(s[d])||(s[d]=[s[d]]):s[d]=[]),Array.isArray(s[d])?s[d].push(f):s[d]=f}const u=[];for(const a of Object.keys(i)){if(!e.call(i,a)||"object"!=typeof i[a]||Array.isArray(i[a]))continue;const t=n(a,".");s=i;const r=t.pop(),o=r.replace(/\\\./g,".");for(const n of t)"__proto__"!==n&&(e.call(s,n)&&"object"==typeof s[n]||(s[n]=Object.create(null)),s=s[n]);s===i&&o===r||(s[o]=i[a],u.push(a))}for(const e of u)delete i[e];return i},i=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"),s=e=>"string"!=typeof e||e.match(/[=\r\n]/)||e.match(/^\[/)||e.length>1&&i(e)||e!==e.trim()?JSON.stringify(e):e.split(";").join("\\;").split("#").join("\\#"),a=e=>{if(e=(e||"").trim(),!i(e)){let t=!1,n="";for(let r=0,i=e.length;r<i;r++){const i=e.charAt(r);if(t)-1!=="\\;#".indexOf(i)?n+=i:n+="\\"+i,t=!1;else{if(-1!==";#".indexOf(i))break;"\\"===i?t=!0:n+=i}}return t&&(n+="\\"),n.trim()}"'"===e.charAt(0)&&(e=e.slice(1,-1));try{e=JSON.parse(e)}catch{}return e};return oh={parse:r,decode:r,stringify:t,encode:t,safe:s,unsafe:a}}();const ch=e(lh),uh={firstStart:!0,General:{HoverSidebar:!0,HideSidebar:!1,language:"en",theme:"DarkAnimu",Window:{AutoMaximize:!1,AutoFullscreen:!1,Zoom:100},discordRPC:!0},Player:{general:{Autoplay:!0,AutoFullscreen:!1,AutoSkipEpisode:!0,Volume:25,LongTimeSkipForward:90,LongTimeSkipBack:90,TimeSkipLeft:5,TimeSkipRight:5,VideoStreching:!1,PlayerBehavior:"information",autoSkipOpenings:!1,autoSkipEndings:!1,showBrokenBuffer:!1},screenShot:{alwaysAsk:!0,saveType:"File",path:await hh()},external:{enable:!1,type:"Mpv",movianIP:"localhost:42000",mpvPath:window.api?await window.api.os.getPathProgram("mpv"):"",vlcPath:window.api?await window.api.os.getPathProgram("vlc"):""},upToNextEpisode:{enable:!0,interval:15,durationShow:5,variants:"var1"},keybinds:{Pause:" ",LongTimeSkipForward:"ArrowUp",LongTimeSkipBack:"ArrowDown",TimeSkipLeft:"ArrowLeft",TimeSkipRight:"ArrowRight",Fullscreen:"F",ExitPlayer:"Escape",NextEpisode:"PageUp",PrevEpisode:"PageDown",FrameSkipBack:",",FrameSkipForward:".",VolumeDown:"9",VolumeUp:"0",VolumeMute:"m",ScreenShot:"f10",PictureInPicture:"P",toggleSubtitles:"C",skipOpeningEnding:"S"},ui:{DisableVolumeAnimation:!1,DisableSpaceAnimation:!1,DisableSkipAnimation:!1,DisableLoadingAnimation:!1}},History:{history:{LimitedHistory:!1,maxSave:50,AlwaysAsk:!0},continue:{MinimalTimeSave:20,MaximizeTimeSave:100}},Developer:{DeveloperMode:!1,DevTools:!1,DevToolsOnStart:!1,playerDebug:!1},update:{lastTime:"0",type:"On Start",enable:!0},plugins:{player:"Allmanga"}};let dh=Promise;async function hh(){if(!window.api)return"";const e=await window.api.os.getPath("pictures"),t=await xd(`${e}/animu`);return await window.api.os.exists(t)||window.api.os.mkdir(t),t}function fh(e,t){for(const n in t)t[n]&&"object"==typeof t[n]?(e[n]||(e[n]={}),fh(e[n],t[n])):e[n]=t[n];return e}async function ph(){try{if(0==await mh())return uh;let e="";if(!window.api)return void(e=localStorage.getItem("config"));e=await window.api.os.read(await dh+"/config.ini");const t=ch.parse(e);return fh(uh,t)}catch(e){return console.log(e),uh}}async function gh(e){try{const t=ch.stringify(e);return window.api?(window.api.os.write(await dh+"/config.ini",t),!0):void localStorage.setItem("config",t)}catch(t){return console.error("Error in saveConfig"),!1}}async function mh(){try{return window.api?(await window.api.os.exists(await dh)||(await window.api.os.mkdir(await dh),0==await window.api.os.exists(await dh+"/config.ini")&&await async function(){try{const e=ch.stringify(uh);await window.api.os.write(await dh+"/config.ini",e)}catch(e){console.error(`${e} in createConfig`)}}()),!0):void(localStorage.getItem("config")||localStorage.setItem("config",ch.stringify(uh)))}catch(e){return console.error(`${e} in checkConfig`),!1}}window.api&&(dh=window.api.os.getPath("userData"));const yh={incognito:!1},vh=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=e??{};let s=new wc;return t&&("boolean"==typeof t?s.push(mc):s.push(yc(t.extraArgument))),s},{reducer:n,middleware:r,devTools:i=!0,preloadedState:s,enhancers:a}=e||{};let o;if("function"==typeof n)o=n;else{if(!dc(n))throw new Error(`Minified Redux Toolkit error #${A=1}; visit https://redux-toolkit.js.org/Errors?code=${A} for the full message or use the non-minified dev environment for full errors. `);o=fc(n)}var A;let l;l="function"==typeof r?r(t):t();let c=pc;i&&(c=vc({trace:!1,..."object"==typeof i&&i}));const u=function(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Ac(15))};const a={getState:i.getState,dispatch:(e,...t)=>s(e,...t)},o=e.map(e=>e(a));return s=pc(...o)(i.dispatch),{...i,dispatch:s}}}(...l),d=Ec(u);return hc(o,s,c(..."function"==typeof a?a(d):d()))}({reducer:fc({plugin:(e=sh,t)=>{switch(t.type){case"setPluginPlayer":return{...e,playerPlugin:t.payload,playerPluginCache:void 0};case"setInformationPlugin":return{...e,informationPlugin:t.payload};case"setLoadedPlugins":return{...e,loadedPlugins:t.payload};case"setPlayerPluginCache":return{...e,playerPluginCache:t.payload};case"ResetLoadedPlugins":return{informationPlugin:void 0,playerPlugin:void 0,loadedPlugins:[],playerPluginCache:void 0};default:return e}},home:(e=ah,t)=>{switch(t.type){case"setAllHomeData":return{...e,...t.payload};case"setLoadingHome":return{...e,isLoading:t.payload};case"setErrorHome":return{...e,isError:t.payload};case"setSearch":return{...e,search:t.payload};case"setPage":return{...e,page:t.payload};case"setStopScrolling":return{...e,stopScrolling:t.payload};case"setcontainerLoading":return{...e,containerLoading:t.payload};case"setLocalSearch":return{...e,localSearch:t.payload};case"setTags":return{...e,filterTags:t.payload};case"resetHomeData":return{...ah};default:return e}},config:(e=uh,t)=>{switch(t.type){case"setConfig":return{...t.payload};case"resetConfig":return{...uh};default:return e}},global:(e=yh,t)=>{switch(t.type){case"setIcognitoMode":return{...e,incognito:t.payload};case"ClearGlobal":return{incognito:!1};default:return e}}})});async function wh(e){try{if(Eh(!1),vh.getState().home.isLoading)return;vh.dispatch({type:"setLoadingHome",payload:{isLoading:!0}});let t=await e();vh.dispatch({type:"setAllHomeData",payload:{isLoading:!1,isError:!1,data:t}})}catch(t){vh.dispatch({type:"setAllHomeData",payload:{isLoading:!1,isError:!0}})}}async function bh(e){try{if(Eh(!1),vh.getState().home.isLoading)return;vh.dispatch({type:"setcontainerLoading",payload:!0});let t=await e(),n=vh.getState().home.data[0];t.data.data.length<t.maxPage&&Eh(!0),vh.dispatch({type:"setAllHomeData",payload:{isLoading:!1,isError:!1,data:[{...t.data,data:[...n.data,...t.data.data]}]}}),vh.dispatch({type:"setcontainerLoading",payload:!1})}catch(t){vh.dispatch({type:"setcontainerLoading",payload:!1}),console.error(t)}}function Eh(e){try{vh.dispatch({type:"setStopScrolling",payload:e})}catch(t){console.error(t)}}function Bh(e){try{vh.dispatch({type:"setLocalSearch",payload:e})}catch(t){console.error(t)}}function Ch(){try{const e=vh.getState().config,t=vh.getState().plugin.loadedPlugins;for(let n=0;n<t.length;n++){const r=t[n];if(r.name==e.plugins.player)return void vh.dispatch({type:"setPluginPlayer",payload:r})}t.forEach(e=>{"Allmanga"!=e.name||vh.dispatch({type:"setPluginPlayer",payload:e})})}catch(e){console.error(e)}}function Sh(e){try{const t=vh.getState().plugin.loadedPlugins;for(let n=0;n<t.length;n++){const r=t[n];if(r.name==e)return void vh.dispatch({type:"setPluginPlayer",payload:r});if(""==e&&"Allmanga"==r.name)return void vh.dispatch({type:"setPluginPlayer",payload:r})}}catch(t){console.error(t)}}var Th,xh,kh={exports:{}},Ih={};var Fh=(xh||(xh=1,kh.exports=function(){if(Th)return Ih;Th=1;var e=d(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useSyncExternalStore,r=e.useRef,i=e.useEffect,s=e.useMemo,a=e.useDebugValue;return Ih.useSyncExternalStoreWithSelector=function(e,o,A,l,c){var u=r(null);if(null===u.current){var d={hasValue:!1,value:null};u.current=d}else d=u.current;u=s(function(){function e(e){if(!i){if(i=!0,n=e,e=l(e),void 0!==c&&d.hasValue){var s=d.value;if(c(s,e))return r=s}return r=e}if(s=r,t(n,e))return s;var a=l(e);return void 0!==c&&c(s,a)?(n=e,s):(n=e,r=a)}var n,r,i=!1,s=void 0===A?null:A;return[function(){return e(o())},null===s?void 0:function(){return e(s())}]},[o,A,l,c]);var h=n(e,u[0],u[1]);return i(function(){d.hasValue=!0,d.value=h},[h]),a(h),h},Ih}()),kh.exports);var Lh={notify(){},get:()=>[]};var Dh=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),_h=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),Uh=(()=>Dh||_h?h.useLayoutEffect:h.useEffect)(),Ph=Symbol.for("react-redux-context"),Rh="undefined"!=typeof globalThis?globalThis:{};function Oh(){if(!h.createContext)return{};const e=Rh[Ph]??=new Map;let t=e.get(h.createContext);return t||(t=h.createContext(null),e.set(h.createContext,t)),t}var Qh=Oh();var Nh=function(e){const{children:t,context:n,serverState:r,store:i}=e,s=h.useMemo(()=>{const e=function(e){let t,n=Lh,r=0,i=!1;function s(){A.onStateChange&&A.onStateChange()}function a(){r++,t||(t=e.subscribe(s),n=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){(()=>{let t=e;for(;t;)t.callback(),t=t.next})()},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function o(){r--,t&&0===r&&(t(),t=void 0,n.clear(),n=Lh)}const A={addNestedSub:function(e){a();const t=n.subscribe(e);let r=!1;return()=>{r||(r=!0,t(),o())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:s,isSubscribed:function(){return i},trySubscribe:function(){i||(i=!0,a())},tryUnsubscribe:function(){i&&(i=!1,o())},getListeners:()=>n};return A}(i);return{store:i,subscription:e,getServerState:r?()=>r:void 0}},[i,r]),a=h.useMemo(()=>i.getState(),[i]);Uh(()=>{const{subscription:e}=s;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),a!==i.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[s,a]);const o=n||Qh;return h.createElement(o.Provider,{value:s},t)};function Mh(e=Qh){return function(){return h.useContext(e)}}var Hh=Mh(),jh=(e,t)=>e===t;function $h(e=Qh){const t=e===Qh?Hh:Mh(e),n=(e,n={})=>{const{equalityFn:r=jh}="function"==typeof n?{equalityFn:n}:n,i=t(),{store:s,subscription:a,getServerState:o}=i;h.useRef(!0);const A=h.useCallback({[e.name]:t=>e(t)}[e.name],[e]),l=Fh.useSyncExternalStoreWithSelector(a.addNestedSub,s.getState,o||s.getState,A,r);return h.useDebugValue(l),l};return Object.assign(n,{withTypes:()=>n}),n}var Kh=$h();const Vh=({showLogo:e,sidebarClass:t,data:n,hideButton:r=!1})=>{const[i,s]=h.useState(!1),a=h.useRef(null),[o,l]=h.useState(""),c=Kh(e=>e.config),u=e=>{let t=e.target;t.classList.contains("sidebar-button")||t.classList.contains("sidebar-hide-button")||s(()=>!1)};function d(e,t){t&&(t(e),s(e=>!e))}h.useEffect(()=>((async()=>{l(window.api?await window.backend.version():"0.6.7")})(),document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}),[]),oc("Tab",()=>{s(e=>!e)});function f(t){return e||i||c.General.HideSidebar&&r?t:void 0}function p(){return e||i||c.General.HideSidebar?"sidebar-button":"sidebar-button-min"}function g(){return e||i||c.General.HideSidebar?"sidebar-max-button-container":"sidebar-min-button-container"}return A.jsxs("div",{tabIndex:-1,className:"sidebar-main-container "+t?.container,children:[!r&&A.jsx("div",{className:"sidebar-hide-container",children:A.jsx(zt,{icon:"menu",ButtonClass:"sidebar-hide-button",onClick:()=>s(e=>!e),iconClassName:"sidebar-hide-button"})}),e&&A.jsxs("div",{className:"sidebar-logo-icon-container",children:[A.jsx("img",{src:Yt,alt:o,className:"sidebar-image"}),A.jsx("div",{className:"sidebar-version",children:`v${o}`})]}),A.jsxs($l.div,{className:e||i||c.General.HideSidebar?"sidebar-container-max":"sidebar-container-min",ref:a,initial:e||!c.General.HideSidebar?"visible":"hidden",animate:c.General.HideSidebar&&0==r?i?"visible":"hidden":"visible",variants:{hidden:{opacity:1,x:-200},visible:{opacity:1,x:0}},transition:{duration:.2},onMouseEnter:()=>c.General.HoverSidebar&&s(()=>!0),onMouseLeave:()=>!c.General.HideSidebar&&s(()=>!1),children:[A.jsxs("div",{className:`sidebar-top ${g()}`,children:[e&&A.jsx("div",{className:"sidebar-black-line"}),n.top.map(e=>A.jsx(zt,{icon:e.icon,content:f(e.text),onClick:t=>{Bh(!1),d(t,e.onClick),s(e=>!e)},ButtonClass:p(),iconClassName:"sidebar-button"}))]}),A.jsxs("div",{className:`sidebar-bottom ${g()}`,children:[A.jsx("div",{className:"sidebar-black-line"}),n.bottom.map(e=>A.jsx(zt,{icon:e.icon,content:f(e.text),onClick:t=>{Bh(!1),d(t,e.onClick),s(e=>!e)},ButtonClass:p(),iconClassName:"sidebar-button"}))]})]})]})};let Gh=()=>{},Wh=()=>{};const zh=({children:e})=>{const[t,n]=h.useState(!1),[r,i]=h.useState(null),[s,a]=h.useState(null);Gh=(e,t)=>{t.stopPropagation(),i(e),a(t),n(!0)},Wh=()=>{n(!1),i(null)};const o=e=>{let t=e.target;t.classList.contains("contextmenu-container")||t.classList.contains("contextmenu-option")||t.classList.contains("contextmenu-option-line")||0==e.button&&n(()=>!1)};return h.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),A.jsxs(A.Fragment,{children:[e,t&&r&&0!=r.length&&s&&A.jsx("div",{onMouseLeave:()=>Wh(),className:"contextmenu-container",style:{position:"absolute",top:s.pageY,left:s.pageX,zIndex:9999},children:r.map(e=>e.line?A.jsx("div",{className:"contextmenu-option-line"}):A.jsx("div",{className:"contextmenu-option "+(e.deletion?"contextmenu-option-deletion":""),onClick:()=>{Wh(),e.onClick&&e.onClick()},children:e.option}))})]})},Yh=({card:e,disableinformation:t=!1})=>{const n=be(),[r,i]=h.useState(!0),[s,a]=h.useState(!1),[o,l]=h.useState(!1),c=Kh(e=>e.config),u=h.useRef(null);async function d(){if(e.onClick)e.onClick(e.AnimeData);else{if(e.saveData&&0!=e.saveData.last_Time&&e.saveData.pluginName==c.plugins.player&&await Sh(e.saveData.pluginName),e.saveData&&""!=e.saveData.episode&&0!=e.saveData.last_Time){c.plugins.player!=e.saveData.pluginName&&await Sh(e.saveData.pluginName);let t=await vh.getState().plugin.playerPlugin.player.episodeList(e.saveData.type,e.AnimeData.player_ID);return void n("/player",{state:{data:{AnimeData:e.AnimeData,saveData:{...e.saveData,pluginName:""==e.saveData.pluginName?"Allmanga":""}},episodelist:t,continueWatch:!0}})}""!==e.AnimeData.id&&n("/info",{state:{anime:e.AnimeData,saveData:e.saveData}})}}let f=[];function p(){const t=pd(e.AnimeData.nextAiringEpisode?.timeUntilAiring);return 0!=t?.days?du("card_information.ep_airing_day",{day:t?.days}):0!=t.hours?du("card_information.ep_airing_hours",{hours:t?.hours}):0!=t.minutes?du("card_information.ep_airing_minutes",{min:t?.minutes}):du("card_information.ep_airing_today")}function g(){if(t)return;if(!(e.AnimeData.studios||e.AnimeData.status||e.AnimeData.genres||e.AnimeData.description))return;let n=[];e.AnimeData.averageScore&&(n=[...n,A.jsxs("div",{className:"card-information-score",style:{border:`3px solid ${Cd(e.AnimeData.averageScore)}`},children:[e.AnimeData.averageScore,"%"]})]),e.AnimeData.nextAiringEpisode&&!e.saveData&&(n=[...n,A.jsx("div",{className:"card-information-text card-information-top",children:du("card_information.ep_airing",{ep:e.AnimeData.nextAiringEpisode.episode,text:p()})})]),(!e.AnimeData.nextAiringEpisode||e.saveData)&&e.AnimeData.season&&e.AnimeData.seasonYear?n=[...n,A.jsxs("div",{className:"card-information-text card-information-top",children:[du(`anime_seasons.${e.AnimeData.season.toLowerCase()}`)," ",e.AnimeData.seasonYear]})]:e.AnimeData.season&&e.AnimeData.seasonYear||e.AnimeData.nextAiringEpisode||(n=[...n,A.jsx("div",{className:"card-information-text card-information-top",children:"TBA"})]),e.AnimeData.studios.length>0&&(n=[...n,A.jsx("div",{className:"card-information-text",children:e.AnimeData.studios[0]})]),e.AnimeData.studios.length<=0&&e.AnimeData.status&&(n=[...n,A.jsx("div",{className:"card-information-text",children:du(`anime_statuses.${e.AnimeData.status.toLowerCase()}`)})]);let r=[];return e.AnimeData.format&&(r=[...r,A.jsx(A.Fragment,{children:fd(e.AnimeData.format)})]),!e.AnimeData.format&&e.AnimeData.type&&(r=[...r,A.jsx(A.Fragment,{children:fd(e.AnimeData.type)})]),e.AnimeData.episodes&&"MOVIE"!=e.AnimeData.format?.toUpperCase()?r=[...r,A.jsxs(A.Fragment,{children:[0!==r.length&&A.jsx("span",{className:"card-dot",children:""}),du("card_information.episodes",{ep:e.AnimeData.episodes})]})]:e.AnimeData.duration&&(r=[...r,A.jsxs(A.Fragment,{children:[0!==r.length&&A.jsx("span",{className:"card-dot",children:""}),du("card_information.minutes",{min:e.AnimeData.duration})]})]),n=[...n,A.jsx("div",{className:"card-information-text",children:r})],A.jsx(A.Fragment,{children:n})}return window.api&&(f=[{option:du("contextMenu.copytitle"),onClick:()=>window.api.saveToClipboard("text",e.AnimeData.title.romaji)},{option:du("contextMenu.copycover"),onClick:()=>e.AnimeData.coverImage?window.api.saveToClipboard("image",e.AnimeData.coverImage):""}]),e.deletionCard&&f.push({option:du("contextMenu.delete"),deletion:!0,onClick:e.deletionCard}),A.jsxs("div",{tabIndex:-1,ref:u,className:"card-container",onClick:d,onMouseOver:function(){if(!u.current)return;const e=u.current.getBoundingClientRect(),t=window.innerWidth,n=e.left;l(t-n<500?()=>!0:()=>!1)},title:e.AnimeData.title.romaji,onContextMenu:e=>Gh(Bd([{option:du("dialog.open"),onClick:d}],f),e),children:[g()&&A.jsx("div",{className:"card-information "+(o?"card-information-left":"card-information-right"),children:g()}),e.AnimeData.coverImage&&A.jsx("img",{src:e.AnimeData.coverImage,className:"card-image",onLoad:()=>i(()=>!1),onError:()=>a(()=>!0),style:r||s?{display:"none"}:{animation:"fadeIn 0.3s forwards"}}),r&&0==s&&A.jsx("div",{className:"card-image-placeholder",children:A.jsx("span",{className:"material-symbols-outlined home-loading-animation",children:"progress_activity"})}),s&&A.jsx("div",{className:"card-image-placeholder",children:A.jsx("span",{className:"material-symbols-outlined",children:"error"})}),A.jsx("div",{className:"card-title",children:e.AnimeData.title.romaji}),e.saveData&&e.saveData.episode&&A.jsx("div",{className:"card-continue-watch-text",children:0!=e.saveData.last_Time&&""!=e.saveData.type?du("history.continue",{ep:e.saveData.episode}):du("history.history",{ep:e.saveData.episode})})]})},qh=({title:e,data:t,horizontal:n=!1,onTitleClick:r,tags:i})=>{const s=h.useRef(null);function a(e){if(!s.current)return;let t=s.current.scrollWidth-s.current.clientWidth+120,n=s.current.scrollLeft+e;s.current.scrollLeft+=e,n<=0&&(s.current.scrollLeft=t),n>=t&&(s.current.scrollLeft=0)}return A.jsxs("div",{tabIndex:-1,className:"main-container",children:[A.jsxs("div",{tabIndex:-1,className:"container-title-container",children:[e&&A.jsx("div",{className:r?"container-title-click":"container-title",onClick:r,children:e}),i&&i.map(e=>A.jsxs("div",{onClick:e.remover,className:"container-tag",children:[e.name," ",A.jsx("span",{className:"container-tag-icon material-symbols-outlined",children:"close"})]}))]}),A.jsxs("div",{tabIndex:-1,className:`container-button-container ${t.length<=0&&" container-error"}`,children:[n&&t.length>0?A.jsx(zt,{icon:"chevron_left",ButtonClass:"container-left-skip-button",onClick:()=>a(-120)}):"",t.length>0&&A.jsx("div",{tabIndex:-1,className:n?"container-data-horizontal":"container-data",ref:s,children:t.length>0&&t.map(e=>A.jsx(Yh,{card:e}))}),t.length<=0&&A.jsxs("div",{className:"home-empty-container container-error-text",children:[A.jsx("span",{className:"material-symbols-outlined home-empty-icon",children:"search_off"}),du("home.nothingfound")]}),n&&t.length>0?A.jsx(zt,{icon:"chevron_right",ButtonClass:"container-right-skip-button",onClick:()=>a(120)}):""]})]})},Xh=({options:e=[],placeholder:t="",placeholderChange:n,buttonText:r="",onClickX:i,disableX:s=!1,dropClassName:a})=>{const[o,l]=h.useState(!1),[c,u]=h.useState(r);return h.useEffect(()=>{u(()=>r)},[r]),A.jsxs("div",{tabIndex:-1,className:`dropdown-container ${a}`,children:[A.jsxs("div",{tabIndex:-1,className:"dropdown-button",onClick:()=>l(e=>!e),children:[A.jsxs("div",{tabIndex:-1,className:`dropdown-button-text ${""==c&&"dropdown-button-shadow-text"} ${e.length<=1&&"dropdown-button-shadow-text"}`,children:[""!=c&&c," ",""!=t&&""==c&&t]}),""==c&&!s&&A.jsx("div",{className:"material-symbols-outlined dropdown-button-icon",children:o?"keyboard_arrow_left":"keyboard_arrow_down"}),""!=c&&!s&&A.jsx("div",{className:"material-symbols-outlined dropdown-button-icon",onClick:function(e){e.stopPropagation(),i&&i(c||""),u(()=>"")},children:"close"})]}),o&&e.length>1&&A.jsx("ul",{className:"dropdown-menu",onMouseLeave:()=>l(!1),children:e.map(e=>A.jsx("li",{className:"dropdown-item",onClick:()=>(e=>{l(!1),e.onClick&&e.onClick(e.label),u(()=>e.label),n&&console.log(n()),n&&u(()=>n())})(e),title:e.label,children:e.label},e.label))})]})},Jh=({onChange:e,filter:t})=>{const[n,r]=h.useState(!1),i=Kh(e=>e.home),s=h.useRef(null),a=e=>{e.target.classList.contains("home-filter-button")||s.current&&!s.current.contains(e.target)&&r(!1)};return h.useEffect(()=>(document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}),[]),A.jsxs(A.Fragment,{children:[A.jsx(zt,{ButtonClass:"home-filter-button",iconClassName:"home-filter-button",icon:"tune",onClick:()=>r(e=>!e)}),n&&A.jsxs("div",{tabIndex:-1,className:"home-filter-container home-filter-container-horizontal-new",ref:s,children:[A.jsxs("div",{className:"home-filter-space",children:[A.jsx("div",{className:"home-filter-title",children:du("filter.genres")}),A.jsx(Xh,{onClickX:()=>e(void 0,"genres"),buttonText:i.filterTags?.genres?du(`anime_genres.${i.filterTags.genres[0].toLowerCase().replaceAll(" ","")}`):"",options:t.genres.map(t=>({label:du(`anime_genres.${t.toLowerCase().replaceAll(" ","")}`),onClick:()=>e({genres:[t]})})),placeholder:du("filter.placeholderGenres")})]}),A.jsxs("div",{className:"home-filter-space",children:[A.jsx("div",{className:"home-filter-title",children:du("filter.year")}),A.jsx(Xh,{onClickX:()=>e(void 0,"years"),buttonText:i.filterTags?.years?i.filterTags.years:"",options:t.years.map(t=>({label:t,onClick:()=>e({years:t})})),placeholder:du("filter.placeholderYears")})]}),A.jsxs("div",{className:"home-filter-space",children:[A.jsx("div",{className:"home-filter-title",children:du("filter.season")}),A.jsx(Xh,{onClickX:()=>e(void 0,"seasons"),buttonText:i.filterTags?.seasons?du(`anime_seasons.${i.filterTags.seasons.toLowerCase().replaceAll(" ","")}`):"",options:t.seasons.map(t=>({label:du(`anime_seasons.${t.toLowerCase().replaceAll(" ","")}`),onClick:()=>e({seasons:t})})),placeholder:du("filter.placeholderSeason")})]}),A.jsxs("div",{className:"home-filter-space",children:[A.jsx("div",{className:"home-filter-title",children:du("filter.format")}),A.jsx(Xh,{onClickX:()=>e(void 0,"format"),buttonText:i.filterTags?.format?du(`anime_formats.${i.filterTags.format[0].toLowerCase().replaceAll(" ","_")}`):"",options:t.format.map(t=>({label:du(`anime_formats.${t.toLowerCase().replaceAll(" ","_")}`),onClick:()=>e({format:[t]})})),placeholder:du("filter.placeholderFormat")})]}),A.jsxs("div",{className:"home-filter-space",children:[A.jsx("div",{className:"home-filter-title",children:du("filter.airing")}),A.jsx(Xh,{onClickX:()=>e(void 0,"airing"),buttonText:i.filterTags?.airing?du(`anime_statuses.${i.filterTags.airing.toLowerCase().replaceAll(" ","_")}`):"",options:t.statuses.map(t=>({label:du(`anime_statuses.${t.toLowerCase().replaceAll(" ","_")}`),onClick:()=>e({airing:t})})),placeholder:du("filter.placeholderAiring")})]})]})]})},Zh=()=>{const e=be(),t=Kh(e=>e.plugin.informationPlugin),n=Kh(e=>e.home),r=vh.getState().plugin.playerPlugin,i=Kh(e=>e.config),s=h.useRef(null);let a={top:[{icon:"home",text:du("global.home"),onClick:t.information.home},{icon:"history",text:du("global.history"),onClick:()=>wh(o)}],bottom:[{icon:"settings",text:du("global.settings"),onClick:()=>e("/settings")}]};async function o(){return Bh(!0),[{title:du("global.continuewatch"),data:await sd(20),horizontal:!0,onTitleClick:()=>wh(async()=>[{title:du("global.continuewatch"),data:await sd(),horizontal:!1}])},{title:du("global.history"),data:await ld(20),horizontal:!0,onTitleClick:()=>wh(async()=>[{title:du("global.history"),data:await ld(),horizontal:!1}])}]}r.sidebarAddon&&(a={bottom:[...a.bottom],top:[...a.top,...r.sidebarAddon]}),h.useEffect(()=>{0==n.data.length&&t.information.home(),i.General.discordRPC&&window.api&&window.api.rpc.setActivity(void 0,du("discordrpc.home"))},[]),h.useEffect(()=>{if(!s.current)return;if(0==n.data.length)return;if(n.data.length>1)return;const{scrollHeight:e,clientHeight:t}=s.current;e>t==0&&l()},[n.data]);const l=()=>{if(n.data.length>1)return;if(!s.current)return;const e=-s.current.scrollTop+s.current.scrollHeight,r=s.current.offsetHeight,i=parseInt(e.toFixed(0))<=r+30;i&&0==n.stopScrolling&&1===n.data.length?n.data[0].onScrollDownFunction&&(vh.dispatch({type:"setPage",payload:n.page+1}),n.data[0].onScrollDownFunction(n.page+1)):i&&!n.stopScrolling&&(vh.dispatch({type:"setPage",payload:n.page+1}),t.information.search(n.search,n.page+1,n.filterTags))};async function c(e){if(!n.localSearch)return vh.dispatch({type:"setSearch",payload:e}),vh.dispatch({type:"setPage",payload:1}),Eh(!1),void t.information.search(e,1,vh.getState().home.filterTags);if(""==e||" "==e)return void(await wh(o));let r=n.data;2!=n.data.length&&0!=n.data.length||(r=await o()),1==n.data.length&&n.data[0].title==du("global.history")&&(r=[{...n.data[0],data:await ld()}]),1==n.data.length&&n.data[0].title==du("global.continuewatch")&&(r=[{...n.data[0],data:await sd()}]);let i=r.map(t=>{let n=t.data.filter(t=>t.AnimeData.title.romaji.toLowerCase().includes(e.toLowerCase()));if(0!=n.length)return{...t,data:n}});wh(async()=>i.filter(e=>null!=e))}function u(e,t){if(t){const e={...n.filterTags};return void 0!==e[t]&&delete e[t],vh.dispatch({type:"setTags",payload:e}),void c(n.search)}n.filterTags?vh.dispatch({type:"setTags",payload:{...n.filterTags,...e}}):vh.dispatch({type:"setTags",payload:e}),c(n.search)}function d(){if(!n.filterTags)return;let e=[];for(const[t,r]of Object.entries(n.filterTags))e.push({remover:()=>u(void 0,t),name:r});return e}return A.jsxs("main",{className:"home",onContextMenu:e=>Gh(Bd(),e),children:[A.jsxs("div",{className:"home-header",children:[A.jsxs("div",{className:"home-header-left",children:[A.jsx("div",{className:"button home-header-sidebar-placeholder",children:A.jsx("span",{className:"material-symbols-outlined",children:"menu"})}),A.jsx(Wt,{placeholder:du("home.search"),InputClass:"home-header-search",onKeyDown:c}),A.jsx("div",{className:"home-filter-void",children:A.jsx(Jh,{onChange:u,filter:t.searchOption})})]}),A.jsx("div",{}),A.jsx("div",{className:"home-header-right"})]}),!i.General.HideSidebar&&A.jsx("div",{className:"shadow-sidebar"}),A.jsxs("div",{ref:s,className:`home-container ${n.isLoading&&"home-loading-container"} ${n.isError&&"home-loading-container"} ${n.data.length<=0&&"home-loading-container"}`,onScroll:l,children:[n.isLoading&&0==n.isError&&A.jsx("div",{className:"material-symbols-outlined home-loading-animation",children:"progress_activity"}),n.isError&&0==n.isLoading&&A.jsxs("div",{className:"home-error-container",children:[A.jsx("span",{className:"material-symbols-outlined home-error-icon",children:"error"}),du("home.error")]}),0==n.isLoading&&0==n.isError&&n.data.length>0&&n.data.map(e=>A.jsx(qh,{tags:n.filterTags&&1==n.data.length?d():void 0,title:e.title,data:e.data,horizontal:e.horizontal,onScrollDownFunction:e.onScrollDownFunction,onTitleClick:e.onTitleClick})),0==n.isError&&0==n.isLoading&&n.data.length<=0&&A.jsxs("div",{className:"home-empty-container",children:[A.jsx("span",{className:"material-symbols-outlined home-empty-icon",children:"search_off"}),du("home.nothingfound")]})]}),A.jsx(Vh,{data:a})]})},ef=({content:e,LeftHeader:t,RightHeader:n})=>{const[r,i]=h.useState(!1);return A.jsxs("div",{className:"drop-container",children:[A.jsxs("div",{className:"drop-button "+(r?"active-drop":""),onClick:()=>i(e=>!e),children:[A.jsx("div",{className:"drop-header",children:t}),A.jsxs("div",{className:"drop-header",children:[n," ",A.jsx("div",{className:"episodes-arrow material-symbols-outlined",children:r?"arrow_drop_up":"arrow_drop_down"})]})]}),A.jsx($l.div,{variants:{hidden:{opacity:0,height:0},visible:{opacity:1,height:"max-content"}},initial:"hidden",animate:r?"visible":"hidden",transition:{duration:.2},className:"drop-content "+(r?"drop-content-show":""),children:e})]})};function tf(e,t){return(tf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nf(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,tf(e,t)}var rf=function(){function e(){this.listeners=[]}var t=e.prototype;return t.subscribe=function(e){var t=this,n=e||function(){};return this.listeners.push(n),this.onSubscribe(),function(){t.listeners=t.listeners.filter(function(e){return e!==n}),t.onUnsubscribe()}},t.hasListeners=function(){return this.listeners.length>0},t.onSubscribe=function(){},t.onUnsubscribe=function(){},e}();function sf(){return sf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sf.apply(null,arguments)}var af="undefined"==typeof window;function of(){}function Af(e){return"number"==typeof e&&e>=0&&e!==1/0}function lf(e){return Array.isArray(e)?e:[e]}function cf(e,t){return Math.max(e+(t||0)-Date.now(),0)}function uf(e,t,n){return Ef(e)?"function"==typeof t?sf({},n,{queryKey:e,queryFn:t}):sf({},t,{queryKey:e}):e}function df(e,t,n){return Ef(e)?[sf({},t,{queryKey:e}),n]:[e||{},t]}function hf(e,t){var n=e.active,r=e.exact,i=e.fetching,s=e.inactive,a=e.predicate,o=e.queryKey,A=e.stale;if(Ef(o))if(r){if(t.queryHash!==pf(o,t.options))return!1}else if(!mf(t.queryKey,o))return!1;var l=function(e,t){return!0===e&&!0===t||null==e&&null==t?"all":!1===e&&!1===t?"none":(null!=e?e:!t)?"active":"inactive"}(n,s);if("none"===l)return!1;if("all"!==l){var c=t.isActive();if("active"===l&&!c)return!1;if("inactive"===l&&c)return!1}return("boolean"!=typeof A||t.isStale()===A)&&(("boolean"!=typeof i||t.isFetching()===i)&&!(a&&!a(t)))}function ff(e,t){var n=e.exact,r=e.fetching,i=e.predicate,s=e.mutationKey;if(Ef(s)){if(!t.options.mutationKey)return!1;if(n){if(gf(t.options.mutationKey)!==gf(s))return!1}else if(!mf(t.options.mutationKey,s))return!1}return("boolean"!=typeof r||"loading"===t.state.status===r)&&!(i&&!i(t))}function pf(e,t){return((null==t?void 0:t.queryKeyHashFn)||gf)(e)}function gf(e){var t,n=lf(e);return t=n,JSON.stringify(t,function(e,t){return wf(t)?Object.keys(t).sort().reduce(function(e,n){return e[n]=t[n],e},{}):t})}function mf(e,t){return yf(lf(e),lf(t))}function yf(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&!Object.keys(t).some(function(n){return!yf(e[n],t[n])}))}function vf(e,t){if(e===t)return e;var n=Array.isArray(e)&&Array.isArray(t);if(n||wf(e)&&wf(t)){for(var r=n?e.length:Object.keys(e).length,i=n?t:Object.keys(t),s=i.length,a=n?[]:{},o=0,A=0;A<s;A++){var l=n?A:i[A];a[l]=vf(e[l],t[l]),a[l]===e[l]&&o++}return r===s&&o===r?e:a}return t}function wf(e){if(!bf(e))return!1;var t=e.constructor;if(void 0===t)return!0;var n=t.prototype;return!!bf(n)&&!!n.hasOwnProperty("isPrototypeOf")}function bf(e){return"[object Object]"===Object.prototype.toString.call(e)}function Ef(e){return"string"==typeof e||Array.isArray(e)}function Bf(e){Promise.resolve().then(e).catch(function(e){return setTimeout(function(){throw e})})}function Cf(){if("function"==typeof AbortController)return new AbortController}var Sf=new(function(e){function t(){var t;return(t=e.call(this)||this).setup=function(e){var t;if(!af&&(null==(t=window)?void 0:t.addEventListener)){var n=function(){return e()};return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),function(){window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}},t}nf(t,e);var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},n.setEventListener=function(e){var t,n=this;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(function(e){"boolean"==typeof e?n.setFocused(e):n.onFocus()})},n.setFocused=function(e){this.focused=e,e&&this.onFocus()},n.onFocus=function(){this.listeners.forEach(function(e){e()})},n.isFocused=function(){return"boolean"==typeof this.focused?this.focused:"undefined"==typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)},t}(rf)),Tf=new(function(e){function t(){var t;return(t=e.call(this)||this).setup=function(e){var t;if(!af&&(null==(t=window)?void 0:t.addEventListener)){var n=function(){return e()};return window.addEventListener("online",n,!1),window.addEventListener("offline",n,!1),function(){window.removeEventListener("online",n),window.removeEventListener("offline",n)}}},t}nf(t,e);var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},n.setEventListener=function(e){var t,n=this;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(function(e){"boolean"==typeof e?n.setOnline(e):n.onOnline()})},n.setOnline=function(e){this.online=e,e&&this.onOnline()},n.onOnline=function(){this.listeners.forEach(function(e){e()})},n.isOnline=function(){return"boolean"==typeof this.online?this.online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine},t}(rf));function xf(e){return Math.min(1e3*Math.pow(2,e),3e4)}function kf(e){return"function"==typeof(null==e?void 0:e.cancel)}var If=function(e){this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent};function Ff(e){return e instanceof If}var Lf=function(e){var t,n,r,i,s=this,a=!1;this.abort=e.abort,this.cancel=function(e){return null==t?void 0:t(e)},this.cancelRetry=function(){a=!0},this.continueRetry=function(){a=!1},this.continue=function(){return null==n?void 0:n()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(e,t){r=e,i=t});var o=function(t){s.isResolved||(s.isResolved=!0,null==e.onSuccess||e.onSuccess(t),null==n||n(),r(t))},A=function(t){s.isResolved||(s.isResolved=!0,null==e.onError||e.onError(t),null==n||n(),i(t))};!function r(){if(!s.isResolved){var i;try{i=e.fn()}catch(l){i=Promise.reject(l)}t=function(e){if(!s.isResolved&&(A(new If(e)),null==s.abort||s.abort(),kf(i)))try{i.cancel()}catch(t){}},s.isTransportCancelable=kf(i),Promise.resolve(i).then(o).catch(function(t){var i,o;if(!s.isResolved){var l,c=null!=(i=e.retry)?i:3,u=null!=(o=e.retryDelay)?o:xf,d="function"==typeof u?u(s.failureCount,t):u,h=!0===c||"number"==typeof c&&s.failureCount<c||"function"==typeof c&&c(s.failureCount,t);if(!a&&h)s.failureCount++,null==e.onFail||e.onFail(s.failureCount,t),(l=d,new Promise(function(e){setTimeout(e,l)})).then(function(){if(!Sf.isFocused()||!Tf.isOnline())return new Promise(function(t){n=t,s.isPaused=!0,null==e.onPause||e.onPause()}).then(function(){n=void 0,s.isPaused=!1,null==e.onContinue||e.onContinue()})}).then(function(){a?A(t):r()});else A(t)}})}}()},Df=new(function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(e){e()},this.batchNotifyFn=function(e){e()}}var t=e.prototype;return t.batch=function(e){var t;this.transactions++;try{t=e()}finally{this.transactions--,this.transactions||this.flush()}return t},t.schedule=function(e){var t=this;this.transactions?this.queue.push(e):Bf(function(){t.notifyFn(e)})},t.batchCalls=function(e){var t=this;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.schedule(function(){e.apply(void 0,r)})}},t.flush=function(){var e=this,t=this.queue;this.queue=[],t.length&&Bf(function(){e.batchNotifyFn(function(){t.forEach(function(t){e.notifyFn(t)})})})},t.setNotifyFunction=function(e){this.notifyFn=e},t.setBatchNotifyFunction=function(e){this.batchNotifyFn=e},e}()),_f=console;function Uf(){return _f}var Pf=function(){function e(e){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=e.meta,this.scheduleGc()}var t=e.prototype;return t.setOptions=function(e){var t;this.options=sf({},this.defaultOptions,e),this.meta=null==e?void 0:e.meta,this.cacheTime=Math.max(this.cacheTime||0,null!=(t=this.options.cacheTime)?t:3e5)},t.setDefaultOptions=function(e){this.defaultOptions=e},t.scheduleGc=function(){var e=this;this.clearGcTimeout(),Af(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){e.optionalRemove()},this.cacheTime))},t.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},t.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},t.setData=function(e,t){var n,r,i=this.state.data,s=function(e,t){return"function"==typeof e?e(t):e}(e,i);return(null==(n=(r=this.options).isDataEqual)?void 0:n.call(r,i,s))?s=i:!1!==this.options.structuralSharing&&(s=vf(i,s)),this.dispatch({data:s,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt}),s},t.setState=function(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})},t.cancel=function(e){var t,n=this.promise;return null==(t=this.retryer)||t.cancel(e),n?n.then(of).catch(of):Promise.resolve()},t.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},t.reset=function(){this.destroy(),this.setState(this.initialState)},t.isActive=function(){return this.observers.some(function(e){return!1!==e.options.enabled})},t.isFetching=function(){return this.state.isFetching},t.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(e){return e.getCurrentResult().isStale})},t.isStaleByTime=function(e){return void 0===e&&(e=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!cf(this.state.dataUpdatedAt,e)},t.onFocus=function(){var e,t=this.observers.find(function(e){return e.shouldFetchOnWindowFocus()});t&&t.refetch(),null==(e=this.retryer)||e.continue()},t.onOnline=function(){var e,t=this.observers.find(function(e){return e.shouldFetchOnReconnect()});t&&t.refetch(),null==(e=this.retryer)||e.continue()},t.addObserver=function(e){-1===this.observers.indexOf(e)&&(this.observers.push(e),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))},t.removeObserver=function(e){-1!==this.observers.indexOf(e)&&(this.observers=this.observers.filter(function(t){return t!==e}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:e}))},t.getObserversCount=function(){return this.observers.length},t.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},t.fetch=function(e,t){var n,r,i,s=this;if(this.state.isFetching)if(this.state.dataUpdatedAt&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var a;return null==(a=this.retryer)||a.continueRetry(),this.promise}if(e&&this.setOptions(e),!this.options.queryFn){var o=this.observers.find(function(e){return e.options.queryFn});o&&this.setOptions(o.options)}var A=lf(this.queryKey),l=Cf(),c={queryKey:A,pageParam:void 0,meta:this.meta};Object.defineProperty(c,"signal",{enumerable:!0,get:function(){if(l)return s.abortSignalConsumed=!0,l.signal}});var u,d,h={fetchOptions:t,options:this.options,queryKey:A,state:this.state,fetchFn:function(){return s.options.queryFn?(s.abortSignalConsumed=!1,s.options.queryFn(c)):Promise.reject("Missing queryFn")},meta:this.meta};(null==(n=this.options.behavior)?void 0:n.onFetch)&&(null==(u=this.options.behavior)||u.onFetch(h));(this.revertState=this.state,this.state.isFetching&&this.state.fetchMeta===(null==(r=h.fetchOptions)?void 0:r.meta))||this.dispatch({type:"fetch",meta:null==(d=h.fetchOptions)?void 0:d.meta});return this.retryer=new Lf({fn:h.fetchFn,abort:null==l||null==(i=l.abort)?void 0:i.bind(l),onSuccess:function(e){s.setData(e),null==s.cache.config.onSuccess||s.cache.config.onSuccess(e,s),0===s.cacheTime&&s.optionalRemove()},onError:function(e){Ff(e)&&e.silent||s.dispatch({type:"error",error:e}),Ff(e)||(null==s.cache.config.onError||s.cache.config.onError(e,s),Uf().error(e)),0===s.cacheTime&&s.optionalRemove()},onFail:function(){s.dispatch({type:"failed"})},onPause:function(){s.dispatch({type:"pause"})},onContinue:function(){s.dispatch({type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay}),this.promise=this.retryer.promise,this.promise},t.dispatch=function(e){var t=this;this.state=this.reducer(this.state,e),Df.batch(function(){t.observers.forEach(function(t){t.onQueryUpdate(e)}),t.cache.notify({query:t,type:"queryUpdated",action:e})})},t.getDefaultState=function(e){var t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==e.initialData?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0,r=void 0!==t;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?null!=n?n:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:r?"success":"idle"}},t.reducer=function(e,t){var n,r;switch(t.type){case"failed":return sf({},e,{fetchFailureCount:e.fetchFailureCount+1});case"pause":return sf({},e,{isPaused:!0});case"continue":return sf({},e,{isPaused:!1});case"fetch":return sf({},e,{fetchFailureCount:0,fetchMeta:null!=(n=t.meta)?n:null,isFetching:!0,isPaused:!1},!e.dataUpdatedAt&&{error:null,status:"loading"});case"success":return sf({},e,{data:t.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:null!=(r=t.dataUpdatedAt)?r:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var i=t.error;return Ff(i)&&i.revert&&this.revertState?sf({},this.revertState):sf({},e,{error:i,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return sf({},e,{isInvalidated:!0});case"setState":return sf({},e,t.state);default:return e}},e}(),Rf=function(e){function t(t){var n;return(n=e.call(this)||this).config=t||{},n.queries=[],n.queriesMap={},n}nf(t,e);var n=t.prototype;return n.build=function(e,t,n){var r,i=t.queryKey,s=null!=(r=t.queryHash)?r:pf(i,t),a=this.get(s);return a||(a=new Pf({cache:this,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(i),meta:t.meta}),this.add(a)),a},n.add=function(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"queryAdded",query:e}))},n.remove=function(e){var t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter(function(t){return t!==e}),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"queryRemoved",query:e}))},n.clear=function(){var e=this;Df.batch(function(){e.queries.forEach(function(t){e.remove(t)})})},n.get=function(e){return this.queriesMap[e]},n.getAll=function(){return this.queries},n.find=function(e,t){var n=df(e,t)[0];return void 0===n.exact&&(n.exact=!0),this.queries.find(function(e){return hf(n,e)})},n.findAll=function(e,t){var n=df(e,t)[0];return Object.keys(n).length>0?this.queries.filter(function(e){return hf(n,e)}):this.queries},n.notify=function(e){var t=this;Df.batch(function(){t.listeners.forEach(function(t){t(e)})})},n.onFocus=function(){var e=this;Df.batch(function(){e.queries.forEach(function(e){e.onFocus()})})},n.onOnline=function(){var e=this;Df.batch(function(){e.queries.forEach(function(e){e.onOnline()})})},t}(rf),Of=function(){function e(e){this.options=sf({},e.defaultOptions,e.options),this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.observers=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0},this.meta=e.meta}var t=e.prototype;return t.setState=function(e){this.dispatch({type:"setState",state:e})},t.addObserver=function(e){-1===this.observers.indexOf(e)&&this.observers.push(e)},t.removeObserver=function(e){this.observers=this.observers.filter(function(t){return t!==e})},t.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(of).catch(of)):Promise.resolve()},t.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},t.execute=function(){var e,t=this,n="loading"===this.state.status,r=Promise.resolve();return n||(this.dispatch({type:"loading",variables:this.options.variables}),r=r.then(function(){null==t.mutationCache.config.onMutate||t.mutationCache.config.onMutate(t.state.variables,t)}).then(function(){return null==t.options.onMutate?void 0:t.options.onMutate(t.state.variables)}).then(function(e){e!==t.state.context&&t.dispatch({type:"loading",context:e,variables:t.state.variables})})),r.then(function(){return t.executeMutation()}).then(function(n){e=n,null==t.mutationCache.config.onSuccess||t.mutationCache.config.onSuccess(e,t.state.variables,t.state.context,t)}).then(function(){return null==t.options.onSuccess?void 0:t.options.onSuccess(e,t.state.variables,t.state.context)}).then(function(){return null==t.options.onSettled?void 0:t.options.onSettled(e,null,t.state.variables,t.state.context)}).then(function(){return t.dispatch({type:"success",data:e}),e}).catch(function(e){return null==t.mutationCache.config.onError||t.mutationCache.config.onError(e,t.state.variables,t.state.context,t),Uf().error(e),Promise.resolve().then(function(){return null==t.options.onError?void 0:t.options.onError(e,t.state.variables,t.state.context)}).then(function(){return null==t.options.onSettled?void 0:t.options.onSettled(void 0,e,t.state.variables,t.state.context)}).then(function(){throw t.dispatch({type:"error",error:e}),e})})},t.executeMutation=function(){var e,t=this;return this.retryer=new Lf({fn:function(){return t.options.mutationFn?t.options.mutationFn(t.state.variables):Promise.reject("No mutationFn found")},onFail:function(){t.dispatch({type:"failed"})},onPause:function(){t.dispatch({type:"pause"})},onContinue:function(){t.dispatch({type:"continue"})},retry:null!=(e=this.options.retry)?e:0,retryDelay:this.options.retryDelay}),this.retryer.promise},t.dispatch=function(e){var t=this;this.state=function(e,t){switch(t.type){case"failed":return sf({},e,{failureCount:e.failureCount+1});case"pause":return sf({},e,{isPaused:!0});case"continue":return sf({},e,{isPaused:!1});case"loading":return sf({},e,{context:t.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:t.variables});case"success":return sf({},e,{data:t.data,error:null,status:"success",isPaused:!1});case"error":return sf({},e,{data:void 0,error:t.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return sf({},e,t.state);default:return e}}(this.state,e),Df.batch(function(){t.observers.forEach(function(t){t.onMutationUpdate(e)}),t.mutationCache.notify(t)})},e}();var Qf=function(e){function t(t){var n;return(n=e.call(this)||this).config=t||{},n.mutations=[],n.mutationId=0,n}nf(t,e);var n=t.prototype;return n.build=function(e,t,n){var r=new Of({mutationCache:this,mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:n,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0,meta:t.meta});return this.add(r),r},n.add=function(e){this.mutations.push(e),this.notify(e)},n.remove=function(e){this.mutations=this.mutations.filter(function(t){return t!==e}),e.cancel(),this.notify(e)},n.clear=function(){var e=this;Df.batch(function(){e.mutations.forEach(function(t){e.remove(t)})})},n.getAll=function(){return this.mutations},n.find=function(e){return void 0===e.exact&&(e.exact=!0),this.mutations.find(function(t){return ff(e,t)})},n.findAll=function(e){return this.mutations.filter(function(t){return ff(e,t)})},n.notify=function(e){var t=this;Df.batch(function(){t.listeners.forEach(function(t){t(e)})})},n.onFocus=function(){this.resumePausedMutations()},n.onOnline=function(){this.resumePausedMutations()},n.resumePausedMutations=function(){var e=this.mutations.filter(function(e){return e.state.isPaused});return Df.batch(function(){return e.reduce(function(e,t){return e.then(function(){return t.continue().catch(of)})},Promise.resolve())})},t}(rf);function Nf(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}var Mf=function(){function e(e){void 0===e&&(e={}),this.queryCache=e.queryCache||new Rf,this.mutationCache=e.mutationCache||new Qf,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var t=e.prototype;return t.mount=function(){var e=this;this.unsubscribeFocus=Sf.subscribe(function(){Sf.isFocused()&&Tf.isOnline()&&(e.mutationCache.onFocus(),e.queryCache.onFocus())}),this.unsubscribeOnline=Tf.subscribe(function(){Sf.isFocused()&&Tf.isOnline()&&(e.mutationCache.onOnline(),e.queryCache.onOnline())})},t.unmount=function(){var e,t;null==(e=this.unsubscribeFocus)||e.call(this),null==(t=this.unsubscribeOnline)||t.call(this)},t.isFetching=function(e,t){var n=df(e,t)[0];return n.fetching=!0,this.queryCache.findAll(n).length},t.isMutating=function(e){return this.mutationCache.findAll(sf({},e,{fetching:!0})).length},t.getQueryData=function(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state.data},t.getQueriesData=function(e){return this.getQueryCache().findAll(e).map(function(e){return[e.queryKey,e.state.data]})},t.setQueryData=function(e,t,n){var r=uf(e),i=this.defaultQueryOptions(r);return this.queryCache.build(this,i).setData(t,n)},t.setQueriesData=function(e,t,n){var r=this;return Df.batch(function(){return r.getQueryCache().findAll(e).map(function(e){var i=e.queryKey;return[i,r.setQueryData(i,t,n)]})})},t.getQueryState=function(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state},t.removeQueries=function(e,t){var n=df(e,t)[0],r=this.queryCache;Df.batch(function(){r.findAll(n).forEach(function(e){r.remove(e)})})},t.resetQueries=function(e,t,n){var r=this,i=df(e,t,n),s=i[0],a=i[1],o=this.queryCache,A=sf({},s,{active:!0});return Df.batch(function(){return o.findAll(s).forEach(function(e){e.reset()}),r.refetchQueries(A,a)})},t.cancelQueries=function(e,t,n){var r=this,i=df(e,t,n),s=i[0],a=i[1],o=void 0===a?{}:a;void 0===o.revert&&(o.revert=!0);var A=Df.batch(function(){return r.queryCache.findAll(s).map(function(e){return e.cancel(o)})});return Promise.all(A).then(of).catch(of)},t.invalidateQueries=function(e,t,n){var r,i,s,a=this,o=df(e,t,n),A=o[0],l=o[1],c=sf({},A,{active:null==(r=null!=(i=A.refetchActive)?i:A.active)||r,inactive:null!=(s=A.refetchInactive)&&s});return Df.batch(function(){return a.queryCache.findAll(A).forEach(function(e){e.invalidate()}),a.refetchQueries(c,l)})},t.refetchQueries=function(e,t,n){var r=this,i=df(e,t,n),s=i[0],a=i[1],o=Df.batch(function(){return r.queryCache.findAll(s).map(function(e){return e.fetch(void 0,sf({},a,{meta:{refetchPage:null==s?void 0:s.refetchPage}}))})}),A=Promise.all(o).then(of);return(null==a?void 0:a.throwOnError)||(A=A.catch(of)),A},t.fetchQuery=function(e,t,n){var r=uf(e,t,n),i=this.defaultQueryOptions(r);void 0===i.retry&&(i.retry=!1);var s=this.queryCache.build(this,i);return s.isStaleByTime(i.staleTime)?s.fetch(i):Promise.resolve(s.state.data)},t.prefetchQuery=function(e,t,n){return this.fetchQuery(e,t,n).then(of).catch(of)},t.fetchInfiniteQuery=function(e,t,n){var r=uf(e,t,n);return r.behavior={onFetch:function(e){e.fetchFn=function(){var t,n,r,i,s,a,o,A,l,c=null==(t=e.fetchOptions)||null==(n=t.meta)?void 0:n.refetchPage,u=null==(r=e.fetchOptions)||null==(i=r.meta)?void 0:i.fetchMore,d=null==u?void 0:u.pageParam,h="forward"===(null==u?void 0:u.direction),f="backward"===(null==u?void 0:u.direction),p=(null==(s=e.state.data)?void 0:s.pages)||[],g=(null==(a=e.state.data)?void 0:a.pageParams)||[],m=Cf(),y=null==m?void 0:m.signal,v=g,w=!1,b=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},E=function(e,t,n,r){return v=r?[t].concat(v):[].concat(v,[t]),r?[n].concat(e):[].concat(e,[n])},B=function(t,n,r,i){if(w)return Promise.reject("Cancelled");if(void 0===r&&!n&&t.length)return Promise.resolve(t);var s={queryKey:e.queryKey,signal:y,pageParam:r,meta:e.meta},a=b(s),o=Promise.resolve(a).then(function(e){return E(t,r,e,i)});return kf(a)&&(o.cancel=a.cancel),o};if(p.length)if(h){var C=void 0!==d,S=C?d:Nf(e.options,p);o=B(p,C,S)}else if(f){var T=void 0!==d,x=T?d:(A=e.options,l=p,null==A.getPreviousPageParam?void 0:A.getPreviousPageParam(l[0],l));o=B(p,T,x,!0)}else!function(){v=[];var t=void 0===e.options.getNextPageParam,n=!c||!p[0]||c(p[0],0,p);o=n?B([],t,g[0]):Promise.resolve(E([],g[0],p[0]));for(var r=function(n){o=o.then(function(r){if(!c||!p[n]||c(p[n],n,p)){var i=t?g[n]:Nf(e.options,r);return B(r,t,i)}return Promise.resolve(E(r,g[n],p[n]))})},i=1;i<p.length;i++)r(i)}();else o=B([]);var k=o.then(function(e){return{pages:e,pageParams:v}});return k.cancel=function(){w=!0,null==m||m.abort(),kf(o)&&o.cancel()},k}}},this.fetchQuery(r)},t.prefetchInfiniteQuery=function(e,t,n){return this.fetchInfiniteQuery(e,t,n).then(of).catch(of)},t.cancelMutations=function(){var e=this,t=Df.batch(function(){return e.mutationCache.getAll().map(function(e){return e.cancel()})});return Promise.all(t).then(of).catch(of)},t.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},t.executeMutation=function(e){return this.mutationCache.build(this,e).execute()},t.getQueryCache=function(){return this.queryCache},t.getMutationCache=function(){return this.mutationCache},t.getDefaultOptions=function(){return this.defaultOptions},t.setDefaultOptions=function(e){this.defaultOptions=e},t.setQueryDefaults=function(e,t){var n=this.queryDefaults.find(function(t){return gf(e)===gf(t.queryKey)});n?n.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})},t.getQueryDefaults=function(e){var t;return e?null==(t=this.queryDefaults.find(function(t){return mf(e,t.queryKey)}))?void 0:t.defaultOptions:void 0},t.setMutationDefaults=function(e,t){var n=this.mutationDefaults.find(function(t){return gf(e)===gf(t.mutationKey)});n?n.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})},t.getMutationDefaults=function(e){var t;return e?null==(t=this.mutationDefaults.find(function(t){return mf(e,t.mutationKey)}))?void 0:t.defaultOptions:void 0},t.defaultQueryOptions=function(e){if(null==e?void 0:e._defaulted)return e;var t=sf({},this.defaultOptions.queries,this.getQueryDefaults(null==e?void 0:e.queryKey),e,{_defaulted:!0});return!t.queryHash&&t.queryKey&&(t.queryHash=pf(t.queryKey,t)),t},t.defaultQueryObserverOptions=function(e){return this.defaultQueryOptions(e)},t.defaultMutationOptions=function(e){return(null==e?void 0:e._defaulted)?e:sf({},this.defaultOptions.mutations,this.getMutationDefaults(null==e?void 0:e.mutationKey),e,{_defaulted:!0})},t.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},e}(),Hf=function(e){function t(t,n){var r;return(r=e.call(this)||this).client=t,r.options=n,r.trackedProps=[],r.selectError=null,r.bindMethods(),r.setOptions(n),r}nf(t,e);var n=t.prototype;return n.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},n.onSubscribe=function(){1===this.listeners.length&&(this.currentQuery.addObserver(this),jf(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},n.onUnsubscribe=function(){this.listeners.length||this.destroy()},n.shouldFetchOnReconnect=function(){return $f(this.currentQuery,this.options,this.options.refetchOnReconnect)},n.shouldFetchOnWindowFocus=function(){return $f(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},n.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},n.setOptions=function(e,t){var n=this.options,r=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();var i=this.hasListeners();i&&Kf(this.currentQuery,r,this.options,n)&&this.executeFetch(),this.updateResult(t),!i||this.currentQuery===r&&this.options.enabled===n.enabled&&this.options.staleTime===n.staleTime||this.updateStaleTimeout();var s=this.computeRefetchInterval();!i||this.currentQuery===r&&this.options.enabled===n.enabled&&s===this.currentRefetchInterval||this.updateRefetchInterval(s)},n.getOptimisticResult=function(e){var t=this.client.defaultQueryObserverOptions(e),n=this.client.getQueryCache().build(this.client,t);return this.createResult(n,t)},n.getCurrentResult=function(){return this.currentResult},n.trackResult=function(e,t){var n=this,r={},i=function(e){n.trackedProps.includes(e)||n.trackedProps.push(e)};return Object.keys(e).forEach(function(t){Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:function(){return i(t),e[t]}})}),(t.useErrorBoundary||t.suspense)&&i("error"),r},n.getNextResult=function(e){var t=this;return new Promise(function(n,r){var i=t.subscribe(function(t){t.isFetching||(i(),t.isError&&(null==e?void 0:e.throwOnError)?r(t.error):n(t))})})},n.getCurrentQuery=function(){return this.currentQuery},n.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},n.refetch=function(e){return this.fetch(sf({},e,{meta:{refetchPage:null==e?void 0:e.refetchPage}}))},n.fetchOptimistic=function(e){var t=this,n=this.client.defaultQueryObserverOptions(e),r=this.client.getQueryCache().build(this.client,n);return r.fetch().then(function(){return t.createResult(r,n)})},n.fetch=function(e){var t=this;return this.executeFetch(e).then(function(){return t.updateResult(),t.currentResult})},n.executeFetch=function(e){this.updateQuery();var t=this.currentQuery.fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(of)),t},n.updateStaleTimeout=function(){var e=this;if(this.clearStaleTimeout(),!af&&!this.currentResult.isStale&&Af(this.options.staleTime)){var t=cf(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(function(){e.currentResult.isStale||e.updateResult()},t)}},n.computeRefetchInterval=function(){var e;return"function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e},n.updateRefetchInterval=function(e){var t=this;this.clearRefetchInterval(),this.currentRefetchInterval=e,!af&&!1!==this.options.enabled&&Af(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval(function(){(t.options.refetchIntervalInBackground||Sf.isFocused())&&t.executeFetch()},this.currentRefetchInterval))},n.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},n.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},n.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},n.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},n.createResult=function(e,t){var n,r=this.currentQuery,i=this.options,s=this.currentResult,a=this.currentResultState,o=this.currentResultOptions,A=e!==r,l=A?e.state:this.currentQueryInitialState,c=A?this.currentResult:this.previousQueryResult,u=e.state,d=u.dataUpdatedAt,h=u.error,f=u.errorUpdatedAt,p=u.isFetching,g=u.status,m=!1,y=!1;if(t.optimisticResults){var v=this.hasListeners(),w=!v&&jf(e,t),b=v&&Kf(e,r,t,i);(w||b)&&(p=!0,d||(g="loading"))}if(t.keepPreviousData&&!u.dataUpdateCount&&(null==c?void 0:c.isSuccess)&&"error"!==g)n=c.data,d=c.dataUpdatedAt,g=c.status,m=!0;else if(t.select&&void 0!==u.data)if(s&&u.data===(null==a?void 0:a.data)&&t.select===this.selectFn)n=this.selectResult;else try{this.selectFn=t.select,n=t.select(u.data),!1!==t.structuralSharing&&(n=vf(null==s?void 0:s.data,n)),this.selectResult=n,this.selectError=null}catch(B){Uf().error(B),this.selectError=B}else n=u.data;if(void 0!==t.placeholderData&&void 0===n&&("loading"===g||"idle"===g)){var E;if((null==s?void 0:s.isPlaceholderData)&&t.placeholderData===(null==o?void 0:o.placeholderData))E=s.data;else if(E="function"==typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&void 0!==E)try{E=t.select(E),!1!==t.structuralSharing&&(E=vf(null==s?void 0:s.data,E)),this.selectError=null}catch(B){Uf().error(B),this.selectError=B}void 0!==E&&(g="success",n=E,y=!0)}return this.selectError&&(h=this.selectError,n=this.selectResult,f=Date.now(),g="error"),{status:g,isLoading:"loading"===g,isSuccess:"success"===g,isError:"error"===g,isIdle:"idle"===g,data:n,dataUpdatedAt:d,error:h,errorUpdatedAt:f,failureCount:u.fetchFailureCount,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>l.dataUpdateCount||u.errorUpdateCount>l.errorUpdateCount,isFetching:p,isRefetching:p&&"loading"!==g,isLoadingError:"error"===g&&0===u.dataUpdatedAt,isPlaceholderData:y,isPreviousData:m,isRefetchError:"error"===g&&0!==u.dataUpdatedAt,isStale:Vf(e,t),refetch:this.refetch,remove:this.remove}},n.shouldNotifyListeners=function(e,t){if(!t)return!0;var n=this.options,r=n.notifyOnChangeProps,i=n.notifyOnChangePropsExclusions;if(!r&&!i)return!0;if("tracked"===r&&!this.trackedProps.length)return!0;var s="tracked"===r?this.trackedProps:r;return Object.keys(e).some(function(n){var r=n,a=e[r]!==t[r],o=null==s?void 0:s.some(function(e){return e===n}),A=null==i?void 0:i.some(function(e){return e===n});return a&&!A&&(!s||o)})},n.updateResult=function(e){var t=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!function(e,t){if(e&&!t||t&&!e)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}(this.currentResult,t)){var n={cache:!0};!1!==(null==e?void 0:e.listeners)&&this.shouldNotifyListeners(this.currentResult,t)&&(n.listeners=!0),this.notify(sf({},n,e))}},n.updateQuery=function(){var e=this.client.getQueryCache().build(this.client,this.options);if(e!==this.currentQuery){var t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}},n.onQueryUpdate=function(e){var t={};"success"===e.type?t.onSuccess=!0:"error"!==e.type||Ff(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()},n.notify=function(e){var t=this;Df.batch(function(){e.onSuccess?(null==t.options.onSuccess||t.options.onSuccess(t.currentResult.data),null==t.options.onSettled||t.options.onSettled(t.currentResult.data,null)):e.onError&&(null==t.options.onError||t.options.onError(t.currentResult.error),null==t.options.onSettled||t.options.onSettled(void 0,t.currentResult.error)),e.listeners&&t.listeners.forEach(function(e){e(t.currentResult)}),e.cache&&t.client.getQueryCache().notify({query:t.currentQuery,type:"observerResultsUpdated"})})},t}(rf);function jf(e,t){return function(e,t){return!(!1===t.enabled||e.state.dataUpdatedAt||"error"===e.state.status&&!1===t.retryOnMount)}(e,t)||e.state.dataUpdatedAt>0&&$f(e,t,t.refetchOnMount)}function $f(e,t,n){if(!1!==t.enabled){var r="function"==typeof n?n(e):n;return"always"===r||!1!==r&&Vf(e,t)}return!1}function Kf(e,t,n,r){return!1!==n.enabled&&(e!==t||!1===r.enabled)&&(!n.suspense||"error"!==e.state.status)&&Vf(e,n)}function Vf(e,t){return e.isStaleByTime(t.staleTime)}var Gf=lt.unstable_batchedUpdates;Df.setBatchNotifyFunction(Gf);var Wf=console;_f=Wf;var zf=f.createContext(void 0),Yf=f.createContext(!1);function qf(e){return e&&"undefined"!=typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=zf),window.ReactQueryClientContext):zf}var Xf=function(e){var t=e.client,n=e.contextSharing,r=void 0!==n&&n,i=e.children;f.useEffect(function(){return t.mount(),function(){t.unmount()}},[t]);var s=qf(r);return f.createElement(Yf.Provider,{value:r},f.createElement(s.Provider,{value:t},i))};var Jf,Zf=f.createContext((Jf=!1,{clearReset:function(){Jf=!1},reset:function(){Jf=!0},isReset:function(){return Jf}}));function ep(e,t){var n=f.useRef(!1),r=f.useState(0)[1],i=function(){var e=f.useContext(qf(f.useContext(Yf)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e}(),s=f.useContext(Zf),a=i.defaultQueryObserverOptions(e);a.optimisticResults=!0,a.onError&&(a.onError=Df.batchCalls(a.onError)),a.onSuccess&&(a.onSuccess=Df.batchCalls(a.onSuccess)),a.onSettled&&(a.onSettled=Df.batchCalls(a.onSettled)),a.suspense&&("number"!=typeof a.staleTime&&(a.staleTime=1e3),0===a.cacheTime&&(a.cacheTime=1)),(a.suspense||a.useErrorBoundary)&&(s.isReset()||(a.retryOnMount=!1));var o,A,l,c=f.useState(function(){return new t(i,a)})[0],u=c.getOptimisticResult(a);if(f.useEffect(function(){n.current=!0,s.clearReset();var e=c.subscribe(Df.batchCalls(function(){n.current&&r(function(e){return e+1})}));return c.updateResult(),function(){n.current=!1,e()}},[s,c]),f.useEffect(function(){c.setOptions(a,{listeners:!1})},[a,c]),a.suspense&&u.isLoading)throw c.fetchOptimistic(a).then(function(e){var t=e.data;null==a.onSuccess||a.onSuccess(t),null==a.onSettled||a.onSettled(t,null)}).catch(function(e){s.clearReset(),null==a.onError||a.onError(e),null==a.onSettled||a.onSettled(void 0,e)});if(u.isError&&!s.isReset()&&!u.isFetching&&(o=a.suspense,A=a.useErrorBoundary,l=[u.error,c.getCurrentQuery()],"function"==typeof A?A.apply(void 0,l):"boolean"==typeof A?A:o))throw u.error;return"tracked"===a.notifyOnChangeProps&&(u=c.trackResult(u,a)),u}function tp(e,t,n){return ep(uf(e,t,n),Hf)}const np=({name:e,exitfunc:t,refetchfunc:n})=>{const[r,i]=h.useState(e),{data:s,isError:a,isLoading:o,refetch:l}=tp({queryKey:[r],queryFn:async({queryKey:e})=>{const[t]=e;return vh.getState().plugin.playerPlugin.player?await vh.getState().plugin.playerPlugin.player.search(t,1):[]},refetchOnWindowFocus:!1,staleTime:72e5,cacheTime:72e5});return A.jsx("div",{className:"information-containerwrong-void",children:A.jsxs($l.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.2},className:"information-containerwrong",children:[A.jsxs("div",{className:"information-containerwrong-top",children:[A.jsx(Wt,{placeholder:du("home.search"),defaultValue:e,onKeyDown:e=>i(()=>e)}),A.jsx(Xh,{options:Ld(e=>{Sh(e),l()}),disableX:!0,buttonText:vh.getState().plugin.playerPlugin.name})]}),A.jsx("div",{className:"information-containerwrong-center",children:A.jsx("div",{className:"information-containerwrong-text-space",children:du("information.containerwrong.search",{name:r})})}),A.jsxs("div",{className:"information-containerwrong-down",children:[a||!o&&s&&s.length<=0&&A.jsxs("div",{className:"information-containerwrong-error-container",children:[A.jsx("span",{className:"material-symbols-outlined information-containerwrong-error-icon",children:"search_off"}),A.jsx("span",{className:"information-containerwrong-error-text",children:du("home.nothingfound")})]}),o&&!a&&!s&&A.jsx("div",{className:"information-containerwrong-error-container",children:A.jsx("span",{className:"material-symbols-outlined information-containerwrong-loading-icon",children:"progress_activity"})}),!o&&!a&&s&&s.length>0&&A.jsx("div",{className:"information-containerwrong-cards",children:s.map(e=>A.jsx(Yh,{card:{AnimeData:e.AnimeData,onClick:()=>n(e.AnimeData.player_ID)},disableinformation:!0}))})]}),A.jsx(zt,{icon:"arrow_back",ButtonClass:"information-containerwrong-exit-button",onClick:t})]})})};function rp(){const e=be(),t=ye().state,[n,r]=h.useState(!1),[i,s]=h.useState(t.anime.nextAiringEpisode?.timeUntilAiring),[a,o]=h.useState(t.anime.player_ID),{data:l,isError:c,isFetching:u,refetch:d}=tp({queryKey:[{data:t.anime,player_id:a}],queryFn:async({queryKey:e})=>{let n=vh.getState().plugin.playerPlugin;if(!n||!n.player)return;const[r]=e;return""==r.data.id?(Sh("Allmanga"),n.player.animeDataList(r.data,void 0)):t.saveData&&t.saveData.pluginName==n.name?n.player.animeDataList(r.player_id?void 0:r.data,r.player_id):(Sh(n.name),n.player.animeDataList(r.data,void 0))},refetchOnWindowFocus:!1,staleTime:72e5,cacheTime:72e5}),[f,p]=h.useState(!0),[g,m]=h.useState(!1),[y,v]=h.useState(!0),[w,b]=h.useState(!1);h.useEffect(()=>{if(i&&i<=0)return;const e=setInterval(()=>{s(t=>{if(t)return t<=1?(clearInterval(e),0):t-1})},1e3);return()=>clearInterval(e)},[i]);const E=pd(i);function B(n,r){return A.jsx("div",{className:"information-buttons-episode-container",children:n.map(i=>A.jsx("div",{className:`information-episode-button ${t.saveData&&parseInt(i.ep)<parseInt(t.saveData.episode)?"watched":""} ${t.saveData&&parseInt(i.ep)==parseInt(t.saveData.episode)&&0!=t.saveData.last_Time?"watching":t.saveData&&parseInt(i.ep)==parseInt(t.saveData.episode)?"watched":""}`,onClick:()=>function(n,r,i){e("/player",{state:{data:{AnimeData:{...t.anime,player_ID:l?.player_id},saveData:{last_Time:t.saveData&&t.saveData.episode.toString()===i?t.saveData.last_Time:0,type:r,player_ID:t.anime.player_ID,episode:i}},episodelist:n}})}(n,r,i.ep),children:i.ep}))})}async function C(e){Sh(e),d()}return h.useEffect(()=>{document.querySelectorAll("*").forEach(e=>{e.tabIndex=-1})},[]),oc("tab",()=>{console.log(t.anime,t.saveData)}),oc("esc",()=>{n?r(()=>!1):e("/")}),console.log(l,c,u),A.jsxs(A.Fragment,{children:[A.jsxs("main",{className:"information",onContextMenu:e=>Gh(Bd(),e),children:[A.jsxs("div",{className:"information-banner",children:[A.jsx("img",{className:t.anime.bannerImage?"information-banner-image":"information-banner-image-blur",onError:()=>m(()=>!0),onLoad:()=>p(()=>!1),src:t.anime.bannerImage?t.anime.bannerImage:t.anime.coverImage?t.anime.coverImage:"",style:f||g?{display:"none"}:{animation:"fadeIn 0.3s forwards"}}),f&&0==g&&A.jsx("div",{className:"information-banner-image-placeholder",children:A.jsx("span",{className:"material-symbols-outlined home-loading-animation",children:"progress_activity"})}),g&&0==f&&A.jsx("div",{className:"information-banner-image-placeholder",children:A.jsx("span",{className:"material-symbols-outlined",children:"error"})}),A.jsx("div",{className:"information-fade"})]}),A.jsxs("div",{className:"information-container",children:[A.jsxs("div",{className:"information-top",children:[A.jsxs("div",{className:"information-image-container",children:[t.anime.averageScore&&A.jsxs("div",{className:"information-score",style:{border:`3px solid ${Cd(t.anime.averageScore)}`},children:[t.anime.averageScore,"%"]}),A.jsx("img",{className:"information-cover",onClick:()=>t.anime.coverImage&&async function(e){e&&window.api&&(await window.api.saveToClipboard("image",e)?Qt.success(du("information.notification.coverdone"),hu):Qt.error(du("information.notification.coverfailed"),hu))}(t.anime.coverImage),onError:()=>b(()=>!0),onLoad:()=>v(()=>!1),src:t.anime.coverImage?t.anime.coverImage:"",style:y||w?{display:"none"}:{animation:"fadeIn 0.3s forwards"}}),y&&0==w&&A.jsx("div",{className:"information-cover-placeholder",children:A.jsx("span",{className:"material-symbols-outlined home-loading-animation",children:"progress_activity"})}),w&&0==y&&A.jsx("div",{className:"information-cover-placeholder",children:A.jsx("span",{className:"material-symbols-outlined",children:"error"})}),A.jsxs("div",{className:"information-title-small-container",children:[A.jsx("div",{className:"information-title-small",children:t.anime.title.romaji}),A.jsx("div",{className:"information-title-small2",children:t.anime.title.english?t.anime.title.english:t.anime.title.native})]})]}),A.jsxs("div",{className:"information-description",children:[A.jsx("div",{className:"information-title",children:t.anime.title.romaji}),A.jsx("div",{className:"information-title2",children:t.anime.title.english?t.anime.title.english:t.anime.title.native}),(S=t.anime.description?t.anime.description:du("information.descriptionnotfound"),(new DOMParser).parseFromString(S,"text/html").documentElement.textContent)]}),A.jsxs("div",{className:"information-bar",children:[A.jsx(zt,{titleButton:du("information.bar.anilist"),icon:"open_in_new",ButtonClass:"information-bar-icon",onClick:()=>window.api?window.api.open(`https://anilist.co/anime/${t.anime.id}`):location.href=`https://anilist.co/anime/${t.anime.id}`}),t.anime.trailer&&"youtube"==t.anime.trailer.site&&A.jsx(zt,{titleButton:du("information.bar.trailer"),icon:"theaters",ButtonClass:"information-bar-icon",onClick:()=>window.api?window.api.open(`https://www.youtube.com/watch?v=${t.anime.trailer?.id}`):location.href=`https://www.youtube.com/watch?v=${t.anime.trailer?.id}`})]})]}),A.jsxs("div",{className:"information-bottom",children:[A.jsxs("div",{className:"information-info",children:[t.anime.nextAiringEpisode&&null==t.anime.player_ID&&A.jsxs("div",{className:"information-info-content",children:[A.jsxs("div",{className:"information-content-title",children:[du("information.airing"),": ",t.anime.nextAiringEpisode.episode]}),`${E?.days}d ${E?.hours}h ${E?.minutes}m ${E?.seconds}s`]}),t.anime.format&&A.jsxs("div",{className:"information-info-content",children:[A.jsx("div",{className:"information-content-title",children:du("information.format")}),du(`anime_formats.${t.anime.format.toLowerCase()}`)]}),t.anime.episodes&&A.jsxs("div",{className:"information-info-content",children:[A.jsx("div",{className:"information-content-title",children:du("information.episodes")}),t.anime.episodes]}),t.anime.duration&&A.jsxs("div",{className:"information-info-content",children:[A.jsx("div",{className:"information-content-title",children:du("information.duration")}),t.anime.duration," ",du("global.minutes")]}),t.anime.status&&A.jsxs("div",{className:"information-info-content",children:[A.jsx("div",{className:"information-content-title",children:du("information.status")}),du(`anime_statuses.${t.anime.status.toLowerCase()}`)]}),t.anime.startDate&&null!=t.anime.startDate.year&&null!=t.anime.startDate.day&&null!=t.anime.startDate.month&&A.jsxs("div",{className:"information-info-content",children:[A.jsx("div",{className:"information-content-title",children:du("information.startdate")}),hd(t.anime.startDate.year,t.anime.startDate.month,t.anime.startDate.day,void 0,void 0)]}),t.anime.endDate&&null!=t.anime.endDate.year&&null!=t.anime.endDate.day&&null!=t.anime.endDate.month&&A.jsxs("div",{className:"information-info-content",children:[A.jsx("div",{className:"information-content-title",children:du("information.endate")}),hd(t.anime.endDate.year,t.anime.endDate.month,t.anime.endDate.day,void 0,void 0)]}),t.anime.season&&t.anime.seasonYear&&A.jsxs("div",{className:"information-info-content",children:[A.jsx("div",{className:"information-content-title",children:du("information.season")}),du(`anime_seasons.${t.anime.season.toLowerCase()}`)," ",t.anime.seasonYear]}),t.anime.source&&A.jsxs("div",{className:"information-info-content",children:[A.jsx("div",{className:"information-content-title",children:du("information.source")}),du(`anime_source.${t.anime.source.toLowerCase().replaceAll("_","")}`)]})]}),A.jsxs("div",{className:"information-bottom-content",children:[A.jsxs("div",{className:"information-episodes",children:[A.jsxs("div",{className:"information-episodes-top-content",children:[A.jsx(zt,{ButtonClass:"information-episodes-button",icon:"search",onClick:()=>r(()=>!0)}),A.jsxs("div",{className:"information-episodes-space",children:[A.jsx(Xh,{options:Ld(C),disableX:!0,buttonText:vh.getState().plugin.playerPlugin.name}),A.jsx(zt,{ButtonClass:"information-episodes-button",icon:"refresh",onClick:()=>C(vh.getState().plugin.playerPlugin.name)})]})]}),0==n&&A.jsxs(A.Fragment,{children:[0==u&&0==c&&l&&l.episodesData&&l.episodesData.length>0&&"NOT_YET_RELEASED"!=t.anime.status?.toUpperCase().replaceAll(" ","_")&&A.jsx(A.Fragment,{children:l.episodesData.map(e=>e.episodes.length>0?A.jsx(ef,{LeftHeader:du(`information.types.${e.type}`),RightHeader:du("information.listEpisodes",{number:e.episodes.length}),content:B(e.episodes,e.type)}):"")}),u&&"NOT_YET_RELEASED"!=t.anime.status?.toUpperCase().replaceAll(" ","_")&&A.jsx("div",{className:"information-loading-container",children:A.jsx("span",{className:"information-loading material-symbols-outlined",children:"progress_activity"})}),c&&0==u&&A.jsxs("div",{className:"information-loading-container",children:[A.jsx("span",{className:"information-error material-symbols-outlined",children:"error"}),du("information.errors")]}),("NOT_YET_RELEASED"==t.anime.status||!(l||u||c)||!!(l&&l.episodesData&&l.episodesData.length<=0))&&A.jsxs("div",{className:"information-loading-container",children:[A.jsx("span",{className:"information-error material-symbols-outlined",children:"error"}),du("information.errors")]})]})]}),t.anime.characters&&t.anime.characters.length>0&&A.jsxs("div",{className:"information-characters",children:[A.jsx("div",{className:"information-characters-title",children:du("information.characters")}),A.jsx("div",{className:"information-characters-container",children:t.anime.characters.map(e=>A.jsxs("div",{className:"information-characters-card",onClick:()=>window.api?window.api.open(`https://anilist.co/character/${e.character.id}`):location.href=`https://anilist.co/character/${e.character.id}`,children:[A.jsx("img",{className:"information-characters-card-cover",src:e.character.image}),A.jsxs("div",{className:"information-characters-card-description",children:[A.jsx("span",{className:"information-character-name",children:e.character.name}),A.jsx("span",{className:"information-character-role",children:du(`information.role.${e.role.toLowerCase()}`)})]})]}))})]}),t.anime.characters&&t.anime.characters.map(e=>e.voiceActor).filter(e=>null!=e).length>0&&A.jsxs("div",{className:"information-characters",children:[A.jsx("div",{className:"information-characters-title",children:du("information.actors")}),A.jsx("div",{className:"information-characters-container",children:t.anime.characters.map(e=>null!=e.voiceActor&&A.jsxs("div",{className:"information-characters-card",onClick:()=>window.api?window.api.open(`https://anilist.co/staff/${e.voiceActor?e.voiceActor.id:""}`):location.href=`https://anilist.co/staff/${e.voiceActor?e.voiceActor.id:""}`,children:[A.jsx("img",{className:"information-characters-card-cover",src:e.voiceActor.image}),A.jsxs("div",{className:"information-characters-card-description",children:[A.jsx("span",{className:"information-character-name",children:e.voiceActor.name}),A.jsx("span",{className:"information-character-role",children:du("information.actor_as",{actor:e.character.name})})]})]}))})]})]})]})]}),A.jsx(zt,{icon:"arrow_back",ButtonClass:"information-exit-button",onClick:()=>e("/")})]}),n&&A.jsx(np,{name:t.anime.title.romaji,refetchfunc:e=>{r(()=>!1),o(()=>e),d()},exitfunc:()=>r(()=>!1)})]});var S}const ip=({onChecked:e=()=>{},checked:t})=>A.jsx("input",{tabIndex:-1,className:"checkbox",type:"checkbox",checked:t,onChange:t=>e(t.target.checked)}),sp=({type:e="text",iconChar:t="",onKeyDown:n,startValue:r})=>A.jsxs("div",{tabIndex:-1,className:"settings-input-container",children:[A.jsx("input",{className:""==t?"settings-input-field-hide-type":"settings-input-field",type:e,value:r,onChange:function(e){n&&n(e.target.value)}}),""!=t&&A.jsx("div",{className:"settings-input-type",children:t})]}),ap=({content:e,keyBind:t})=>{const[n,r]=h.useState([]),[i,s]=h.useState([]),[a,o]=h.useState(!1),l=e=>{e.preventDefault(),r(t=>(t.includes(wd(e.key))||t.push(wd(e.key)),t)),s(t=>(t.includes(wd(e.key))||t.push(wd(e.key)),t))},c=e=>{e.preventDefault(),s(t=>{const n=t.findIndex(t=>t===e.key);return t.splice(n,1),t}),i.length<=0&&d(),i.length>=3&&d()},u=()=>{d(),t&&t(e)};function d(){t&&t(n.join("+")),o(()=>!1),r([]),window.removeEventListener("keydown",l),window.removeEventListener("keyup",c),window.removeEventListener("blur",u)}return h.useEffect(()=>{a&&(window.addEventListener("keydown",l,{passive:!0}),window.addEventListener("keyup",c,{passive:!0}),window.addEventListener("blur",u))},[a]),A.jsxs("div",{onClick:()=>o(e=>!e),tabIndex:-1,className:a?"settings-keybind-check-active":"settings-keybind-check",children:[n.length<=0&&e.split("+").map((e,t,n)=>A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"settings-input-content",children:e}),t!=n.length-1&&A.jsx(A.Fragment,{children:"+"})]})),n.length>0&&n.map((e,t,n)=>A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"settings-input-content",children:e}),t!=n.length-1&&A.jsx(A.Fragment,{children:"+"})]}))]})},op=({maxValue:e,minValue:t=0,currentValue:n,onSeek:r,type:i="value",classes:s,screen:a=!1,secondBarValues:o,thumbnail:l,chapterList:c})=>{const[u,d]=h.useState(n),[f,p]=h.useState(!1),[g,m]=h.useState(!1),y=h.useRef(null),v=h.useRef(null),w=h.useRef(null),b=h.useRef(null),E=h.useRef(null),B=h.useRef(null);function C(n){if(!v.current||!w.current||!b.current)return;if(void 0===n||void 0===e)return;const r=(Math.max(t,Math.min(n,e))-t)/(e-t)*100;v.current.style.width=`${r}%`,w.current.style.left=`${r}%`}function S(n){if(!e||!y.current)return;const i=y.current.getBoundingClientRect(),s=(n.clientX-i.left)/i.width*(e-t)+t;s>=t&&s<=e&&(d(s),r(s),C(s))}function T(n){if(!e||!y.current||!b.current)return void m(!1);const r=y.current.getBoundingClientRect(),s=(n.clientX-r.left)/r.width*(e-t)+t;if(s<t||s>e)return;const o=(s-t)/(e-t)*100;b.current.style.left=`${o}%`,x(`${o}%`,o),a&&(o>98&&(b.current.style.left="98%",x("98%",o)),o<1.5&&(b.current.style.left="1.5%",x("1.5%",o))),l&&function(t){if(!l)return;if(!e)return;l.metadata.forEach(n=>{let r=n.start/e*100,i=n.end/e*100;if(t>=r&&t<=i&&E.current){const e=E.current,r=e.parentElement;if(!r)return;e.style.backgroundPosition=`-${n.imgX}px -${n.imgY}px`;const i=r.clientWidth,s=e.offsetWidth;let a=t/100*i;const o=s/2;a<o&&(a=o),a>i-o&&(a=i-o),a>0&&(e.style.left=`${a}px`,x(`${a}px`,t))}})}(o),"value"===i&&(b.current.innerHTML=s.toFixed(0)),"float"===i&&(b.current.innerHTML=s.toFixed(1)),"time"===i&&(b.current.innerHTML=yd(s)),"procent"===i&&(b.current.innerHTML=`${s.toFixed(0)}%`)}function x(e,t){if(c&&B.current)for(let n=0;n<c.length;n++){const r=c[n];if(B.current.innerHTML="",B.current.style.display="none",t>=r.left&&t<=r.left+r.width&&r.name)return B.current.style.left=e,B.current.innerHTML=r.name,void(B.current.style.display="")}}return h.useEffect(()=>{d(n),C(u)},[n]),A.jsxs("div",{tabIndex:-1,ref:y,className:`seekBar-container ${s?.container}`,onClick:S,onMouseDown:()=>p(()=>!0),onMouseUp:()=>p(()=>!1),onMouseLeave:()=>{p(()=>!1),m(()=>!1)},onMouseEnter:()=>m(()=>!0),onMouseMove:function(e){T(e),f&&S(e)},children:[o&&A.jsx("div",{className:"seekbar-buffer-wrapper",children:o.map(e=>A.jsx("div",{className:"seekbar-buffer",style:{left:`${e.position}%`,width:`${e.width}%`}}))}),c&&c.length>0&&A.jsx("div",{className:"seekbar-chapters-wrapper",children:c.map(e=>A.jsx("div",{className:"seekbar-chapters "+("opening"==e.type||"ending"==e.type?"seekbar-chapters-opening-ending":""),style:{left:`${e.left}%`,width:`${e.width}%`}}))}),A.jsx("div",{tabIndex:-1,ref:v,className:`seekbar-progress ${s?.progress}`}),A.jsx("div",{tabIndex:-1,ref:w,className:`seekbar-thumb ${s?.thumb}`}),A.jsx("div",{tabIndex:-1,ref:b,style:g?{display:"block"}:{display:"none"},className:`seekbar-box ${s?.box}`}),A.jsxs("div",{className:"seekbar-content-wrapper",style:g?{display:"block"}:{display:"none"},children:[l&&A.jsx("div",{tabIndex:-1,ref:E,style:g?{display:"block",backgroundImage:`url(${l.src})`}:{display:"none"},className:"seekbar-thumbnail"}),c&&c.length>0&&A.jsx("div",{tabIndex:-1,ref:B,className:`seekbar-box ${l?"seekbar-chapter-box-thumbnails":"seekbar-chapter-box"} ${s?.box}`})]})]})},Ap=({description:e})=>{const[t,n]=h.useState(!1);return A.jsxs("div",{tabIndex:-1,className:"help-icon-container",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[A.jsx("div",{className:"material-symbols-outlined help-icon",children:"help"}),t&&A.jsx("div",{className:"help-icon-description",children:e})]})};async function lp(e=!1){if(!window.api)return;let t=await window.api.update.checkUpdate();console.log(t),t.available?Qt.info(du("update.available",{ver:t.version}),{...hu,onClick:()=>{var e;window.api.update.downloadUpdate(),e=Qt.loading(du("update.progress",{procent:0}),hu),window.api.update.updateProgress((t,n)=>{Qt.update(e,{render:du("update.progress",{procent:n.toFixed(1)})}),"100"==n.toFixed(0)&&(Qt.dismiss(e),Qt.success(du("update.done"),hu))})}}):e&&Qt.info(du("update.same",hu));let n=vh.getState().config;if(n){const e=new Date;n.update.lastTime=e.toString(),gh(n)}}function cp(){const e=be(),t=Kh(e=>e.config),n=Kh(e=>e.plugin.loadedPlugins),[r,i]=h.useState("general"),[s,a]=h.useState({old:structuredClone(t),new:structuredClone(t)}),[o,l]=h.useState([]),[c]=h.useState(window.api?window.electronAPI.process.versions:""),[u,d]=h.useState(!1),[f,p]=h.useState(void 0);let g={top:[{icon:"manufacturing",text:du("global.general"),onClick:()=>i(()=>"general")},{icon:"movie",text:du("global.player"),onClick:()=>i(()=>"player")},{icon:"extension",text:du("global.extensions"),onClick:()=>i(()=>"extensions")},{icon:"history",text:du("global.history"),onClick:()=>i(()=>"history")},{icon:"history",text:du("global.about"),onClick:()=>i(()=>"about")}],bottom:[{icon:"folder",text:du("global.cfglocation"),onClick:async()=>window.api??await window.api.open(await window.api.os.getPath("userData"))},{icon:"home",text:du("global.home"),onClick:()=>{e("/"),v()}}]};s.new.Developer.DeveloperMode&&g.top.push({icon:"code",text:du("global.dev"),onClick:()=>i(()=>"developer")}),oc(["ctrl+d"],()=>{s.new.Developer.DeveloperMode||cd({type:"info",title:du("settings.turnDeveloper"),buttons:{firstbutton:()=>y("Developer.DeveloperMode",!0),secondbutton:()=>y("Developer.DeveloperMode",!1)}})}),oc(["esc"],()=>{e("/"),v()});let m=[{option:du("dialog.reload"),onClick:()=>location.reload()},{option:"",line:!0},{option:du("dialog.exit"),onClick:()=>cd({type:"info",title:du("global.exitAnimu"),buttons:{firstbutton:()=>window.api??window.BrowserWindow.exit(),secondbutton:()=>""}})}];function y(e,t){a(n=>{const r=e.split("."),i=n.new;let s=i;for(let e=0;e<r.length-1;e++){const t=r[e];s[t]||(s[t]={}),s=s[t]}return s[r[r.length-1]]=t,{old:n.old,new:i}})}function v(){a(e=>(w(s.old.General.language),vd(s.old.General.theme),{old:structuredClone(e.old),new:structuredClone(e.old)})),Ch(),d(()=>!1)}function w(e){uu.changeLanguage(e),y("General.language",e)}s.new.Developer.DeveloperMode&&m.push({option:du("contextMenu.devtools"),onClick:()=>window.api??window.BrowserWindow.openDevTools()}),h.useEffect(()=>{JSON.stringify(s.old)!=JSON.stringify(s.new)&&d(()=>!0)},[s]),h.useEffect(()=>{window.api&&(window.api.getlistThemes().then(e=>{let t=e.map(e=>({label:e.name,onClick:()=>{vd(e.name),y("General.theme",e.name),p(()=>e)}}));l(()=>t),e.forEach(e=>{e.name==s.new.General.theme&&p(()=>e)})}),s.new.General.discordRPC&&window.api.rpc.setActivity(void 0,du("discordrpc.settings")))},[]);return A.jsxs("main",{className:"settings-container",onContextMenu:e=>Gh(m,e),children:[A.jsx(Vh,{data:g,sidebarClass:{container:"settings-sidebar-container",sidebar:"settings-sidebar"},hideButton:!0,showLogo:!0}),A.jsxs($l.div,{variants:{hidden:{y:200},visible:{y:0}},initial:"hidden",animate:u?"visible":"hidden",transition:{duration:.2},className:"settings-save-content",children:[A.jsx("div",{className:"settings-save-title",children:du("settings.saving.notification")}),A.jsxs("div",{className:"settings-save-buttons",children:[A.jsx(zt,{content:du("dialog.yes"),onClick:function(){try{vh.dispatch({type:"setConfig",payload:s.new}),a(e=>({old:structuredClone(e.new),new:structuredClone(e.new)})),d(()=>!1),gh(s.new),function(e){if(!window.api)return;window.BrowserWindow.setZoom(md(e))}(s.new.General.Window.Zoom),Ch(),Qt.success(du("settings.saving.done"),hu)}catch(e){Qt.success(du("settings.saving.error"),hu)}}}),A.jsx(zt,{content:du("dialog.reset"),onClick:v})]})]}),A.jsxs("div",{className:"settings-content-container",children:["general"==r&&A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"settings-page-container",children:[A.jsx("div",{className:"settings-page-title",children:du("global.general")}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.general.hideSidebar"),A.jsx(ip,{checked:s.new.General.HideSidebar,onChecked:e=>y("General.HideSidebar",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.general.hoverSidebar"),A.jsx(ip,{checked:s.new.General.HoverSidebar,onChecked:e=>y("General.HoverSidebar",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.general.language"),A.jsxs("div",{className:"settings-helpicon-space",children:[A.jsx(Xh,{options:Object.keys(uu.store.data).map(e=>({label:du(`lang.${e}`),onClick:()=>w(e)})),buttonText:du(`lang.${s.new.General.language}`),placeholderChange:()=>du(`lang.${s.new.General.language}`),disableX:!0}),A.jsx(zt,{icon:"folder",onClick:async()=>window.api??window.api.open(await xd(`${await window.api.os.getPath("userData")}/lang`))})]})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.general.theme"),A.jsxs("div",{className:"settings-helpicon-space",children:[f&&f.author&&A.jsx("div",{className:"settings-text-space",children:f.author}),f&&f.version&&A.jsx("div",{className:"settings-text-space",children:f.version}),A.jsx(Xh,{options:o,buttonText:s.new.General.theme,disableX:!0}),A.jsx(zt,{icon:"folder",onClick:async()=>window.api??window.api.open(await xd(`${await window.api.os.getPath("userData")}/themes`))})]})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.general.discordrpc"),A.jsx(ip,{checked:s.new.General.discordRPC,onChecked:e=>y("General.discordRPC",e)})]})]}),A.jsxs("div",{className:"settings-page-container",children:[A.jsx("div",{className:"settings-page-title",children:du("settings.general.updates")}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.general.checkupdate"),A.jsx(zt,{content:du("settings.general.checkupdates"),icon:"update",onClick:()=>lp(!0)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.general.updates"),A.jsx(ip,{checked:s.new.update.enable,onChecked:e=>y("update.enable",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.general.checkupdates"),A.jsx(Xh,{options:[{label:du("settings.general.onstart"),onClick:()=>y("update.type","On Start")},{label:du("settings.general.everyday"),onClick:()=>y("update.type","Every Day")},{label:du("settings.general.everyweek"),onClick:()=>y("update.type","Every Week")}],disableX:!0,buttonText:du(`settings.general.${s.new.update.type.toLowerCase().replaceAll(" ","")}`)})]})]}),A.jsxs("div",{className:"settings-page-container",children:[A.jsx("div",{className:"settings-page-title",children:du("settings.general.window")}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsxs("span",{className:"settings-helpicon-space",children:[du("settings.general.maximize"),A.jsx(Ap,{description:du("settings.tips.automaximize")})]}),A.jsx(ip,{checked:s.new.General.Window.AutoMaximize,onChecked:e=>y("General.Window.AutoMaximize",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsxs("span",{className:"settings-helpicon-space",children:[du("settings.general.fullscreen"),A.jsx(Ap,{description:du("settings.tips.autofullscreen")})]}),A.jsx(ip,{checked:s.new.General.Window.AutoFullscreen,onChecked:e=>y("General.Window.AutoFullscreen",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.general.zoom"),A.jsxs("div",{className:"settings-setting-seekbar-container",children:[A.jsx("span",{children:"50%"}),A.jsx(op,{maxValue:200,minValue:50,type:"procent",currentValue:s.new.General.Window.Zoom,onSeek:e=>{y("General.Window.Zoom",parseInt(e.toFixed(0)))}}),A.jsx("span",{children:"200%"})]})]})]})]}),"player"==r&&A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"settings-page-container",children:[A.jsx("div",{className:"settings-page-title",children:du("global.general")}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.play"),A.jsx(ip,{checked:s.new.Player.general.Autoplay,onChecked:e=>y("Player.general.Autoplay",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsxs("span",{className:"settings-helpicon-space",children:[du("settings.general.fullscreen"),A.jsx(Ap,{description:du("settings.tips.autofullscreenplayer")})]}),A.jsx(ip,{checked:s.new.Player.general.AutoFullscreen,onChecked:e=>y("Player.general.AutoFullscreen",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.skip"),A.jsx(ip,{checked:s.new.Player.general.AutoSkipEpisode,onChecked:e=>y("Player.general.AutoSkipEpisode",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.volume"),A.jsx(sp,{iconChar:"%",type:"number",onKeyDown:e=>y("Player.general.Volume",parseInt(e)),startValue:s.new.Player.general.Volume.toString()})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsxs("span",{className:"settings-helpicon-space",children:[du("settings.player.longskip"),A.jsx(Ap,{description:du("settings.tips.longskip")})]}),A.jsx(sp,{iconChar:"s",type:"number",onKeyDown:e=>y("Player.general.LongTimeSkipForward",parseInt(e)),startValue:s.new.Player.general.LongTimeSkipForward.toString()})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsxs("span",{className:"settings-helpicon-space",children:[du("settings.player.longskipb"),A.jsx(Ap,{description:du("settings.tips.longskip")})]}),A.jsx(sp,{iconChar:"s",type:"number",onKeyDown:e=>y("Player.general.LongTimeSkipBack",parseInt(e)),startValue:s.new.Player.general.LongTimeSkipBack.toString()})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsxs("span",{className:"settings-helpicon-space",children:[du("settings.player.shortskip"),A.jsx(Ap,{description:du("settings.tips.shotskip")})]}),A.jsx(sp,{iconChar:"s",type:"number",onKeyDown:e=>y("Player.general.TimeSkipRight",parseInt(e)),startValue:s.new.Player.general.TimeSkipRight.toString()})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsxs("span",{className:"settings-helpicon-space",children:[du("settings.player.shortskipb"),A.jsx(Ap,{description:du("settings.tips.shotskip")})]}),A.jsx(sp,{iconChar:"s",type:"number",onKeyDown:e=>y("Player.general.TimeSkipLeft",parseInt(e)),startValue:s.new.Player.general.TimeSkipLeft.toString()})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.stretching"),A.jsx(ip,{checked:s.new.Player.general.VideoStreching,onChecked:e=>y("Player.general.VideoStreching",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.playerexitbechaviour"),A.jsx(Xh,{options:[{label:du("settings.player.playerbeexit.information"),onClick:()=>y("Player.general.PlayerBehavior","information")},{label:du("settings.player.playerbeexit.home"),onClick:()=>y("Player.general.PlayerBehavior","home")}],buttonText:du(`settings.player.playerbeexit.${s.new.Player.general.PlayerBehavior}`),disableX:!0})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.skipOpening"),A.jsx(ip,{checked:s.new.Player.general.autoSkipOpenings,onChecked:e=>y("Player.general.autoSkipOpenings",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.skipEnding"),A.jsx(ip,{checked:s.new.Player.general.autoSkipEndings,onChecked:e=>y("Player.general.autoSkipEndings",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsxs("span",{className:"settings-helpicon-space",children:[du("settings.player.showBrokenBuffer"),A.jsx(Ap,{description:du("settings.tips.brokenBuffer")})]}),A.jsx(ip,{checked:s.new.Player.general.showBrokenBuffer,onChecked:e=>y("Player.general.showBrokenBuffer",e)})]})]}),A.jsxs("div",{className:"settings-page-container",children:[A.jsx("div",{className:"settings-page-title",children:du("settings.player.uptonextep")}),A.jsxs("div",{className:"settings-setting-container",children:[du("global.enable"),A.jsx(ip,{checked:s.new.Player.upToNextEpisode.enable,onChecked:e=>y("Player.upToNextEpisode.enable",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.notif_interval"),A.jsx(sp,{iconChar:"s",type:"number",onKeyDown:e=>y("Player.upToNextEpisode.interval",parseInt(e)),startValue:s.new.Player.upToNextEpisode.interval.toString()})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.epshorter"),A.jsx(sp,{iconChar:"m",type:"number",onKeyDown:e=>y("Player.upToNextEpisode.durationShow",parseInt(e)),startValue:s.new.Player.upToNextEpisode.durationShow.toString()})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.upNext.upNextStyle"),A.jsx(Xh,{options:[{label:du("settings.upNext.var1"),onClick:()=>y("Player.upToNextEpisode.variants","var1")},{label:du("settings.upNext.var2"),onClick:()=>y("Player.upToNextEpisode.variants","var2")},{label:du("settings.upNext.old"),onClick:()=>y("Player.upToNextEpisode.variants","old")}],buttonText:du(`settings.upNext.${s.new.Player.upToNextEpisode.variants}`),disableX:!0})]})]}),A.jsxs("div",{className:"settings-page-container",children:[A.jsx("div",{className:"settings-page-title",children:"Player Animations"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.playerUI.dvolumeanimation"),A.jsx(ip,{checked:s.new.Player.ui.DisableVolumeAnimation,onChecked:e=>y("Player.ui.DisableVolumeAnimation",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.playerUI.dspaceanimation"),A.jsx(ip,{checked:s.new.Player.ui.DisableSpaceAnimation,onChecked:e=>y("Player.ui.DisableSpaceAnimation",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.playerUI.dskipanimation"),A.jsx(ip,{checked:s.new.Player.ui.DisableSkipAnimation,onChecked:e=>y("Player.ui.DisableSkipAnimation",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.playerUI.dloadinganimation"),A.jsx(ip,{checked:s.new.Player.ui.DisableLoadingAnimation,onChecked:e=>y("Player.ui.DisableLoadingAnimation",e)})]})]}),A.jsxs("div",{className:"settings-page-container",children:[A.jsx("div",{className:"settings-page-title",children:du("settings.player.external")}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.enable_external"),A.jsx(ip,{checked:s.new.Player.external.enable,onChecked:e=>y("Player.external.enable",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.select_player"),A.jsx(Xh,{options:[{label:"Movian",onClick:()=>y("Player.external.type","Movian")},{label:"Mpv",onClick:()=>y("Player.external.type","Mpv")},{label:"VLC",onClick:()=>y("Player.external.type","VLC")},{label:"ChromeCast",onClick:()=>y("Player.external.type","ChromeCast")}],buttonText:s.new.Player.external.type,disableX:!0})]}),"ChromeCast"!=s.new.Player.external.type&&A.jsx("div",{className:"settings-line"}),"Movian"===s.new.Player.external.type&&A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.movianip"),A.jsx(sp,{iconChar:" ",type:"text",onKeyDown:e=>y("Player.external.movianIP",e),startValue:s.new.Player.external.movianIP})]}),"Mpv"===s.new.Player.external.type&&A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.mpvpath"),A.jsx(sp,{type:"text",onKeyDown:e=>y("Player.external.mpvPath",e),startValue:s.new.Player.external.mpvPath})]}),"VLC"===s.new.Player.external.type&&A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.vlcpath"),A.jsx(sp,{type:"text",onKeyDown:e=>y("Player.external.vlcPath",e),startValue:s.new.Player.external.vlcPath})]})]}),A.jsxs("div",{className:"settings-page-container",children:[A.jsx("div",{className:"settings-page-title",children:du("settings.player.screenshot")}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.screenask"),A.jsx(ip,{checked:s.new.Player.screenShot.alwaysAsk,onChecked:e=>y("Player.screenShot.alwaysAsk",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.type"),A.jsx(Xh,{options:[{label:du("settings.player.file"),onClick:()=>y("Player.screenShot.saveType","File")},{label:du("settings.player.clipboard"),onClick:()=>y("Player.screenShot.saveType","Clipboard")},{label:du("settings.player.both"),onClick:()=>y("Player.screenShot.saveType","Both")}],buttonText:s.new.Player.screenShot.saveType,disableX:!0})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsxs("div",{className:"settings-mini-container",children:[du("settings.player.path"),A.jsx("span",{className:"settings-text-space",children:s.new.Player.screenShot.path})]}),A.jsx(zt,{content:du("settings.player.changelocaton"),onClick:async()=>window.api??await async function(e){y("Player.screenShot.path",e||await hh())}(await window.api.os.openDialog(void 0,void 0,["openDirectory"]))})]})]}),A.jsxs("div",{className:"settings-page-container",children:[A.jsx("div",{className:"settings-page-title",children:du("settings.player.keybind")}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.keybinds.pause"),A.jsx(ap,{content:wd(s.new.Player.keybinds.Pause),keyBind:e=>y("Player.keybinds.Pause",e)})]}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.keybinds.fullscreen"),A.jsx(ap,{content:wd(s.new.Player.keybinds.Fullscreen),keyBind:e=>y("Player.keybinds.Fullscreen",e)})]}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.keybinds.exitplayer"),A.jsx(ap,{content:wd(s.new.Player.keybinds.ExitPlayer),keyBind:e=>y("Player.keybinds.ExitPlayer",e)})]}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.keybinds.lskipforward"),A.jsx(ap,{content:wd(s.new.Player.keybinds.LongTimeSkipForward),keyBind:e=>y("Player.keybinds.LongTimeSkipForward",e)})]}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.keybinds.lskipbackward"),A.jsx(ap,{content:wd(s.new.Player.keybinds.LongTimeSkipBack),keyBind:e=>y("Player.keybinds.LongTimeSkipBack",e)})]}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.keybinds.skipforward"),A.jsx(ap,{content:wd(s.new.Player.keybinds.TimeSkipRight),keyBind:e=>y("Player.keybinds.TimeSkipRight",e)})]}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.keybinds.skipbackward"),A.jsx(ap,{content:wd(s.new.Player.keybinds.TimeSkipLeft),keyBind:e=>y("Player.keybinds.TimeSkipLeft",e)})]}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.keybinds.fskipforward"),A.jsx(ap,{content:wd(s.new.Player.keybinds.FrameSkipForward),keyBind:e=>y("Player.keybinds.FrameSkipForward",e)})]}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.keybinds.fskipbackward"),A.jsx(ap,{content:wd(s.new.Player.keybinds.FrameSkipForward),keyBind:e=>y("Player.keybinds.FrameSkipForward",e)})]}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.keybinds.nextepisode"),A.jsx(ap,{content:wd(s.new.Player.keybinds.NextEpisode),keyBind:e=>y("Player.keybinds.NextEpisode",e)})]}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.keybinds.prevepisode"),A.jsx(ap,{content:wd(s.new.Player.keybinds.PrevEpisode),keyBind:e=>y("Player.keybinds.PrevEpisode",e)})]}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.keybinds.skipOpeningEnding"),A.jsx(ap,{content:wd(s.new.Player.keybinds.skipOpeningEnding),keyBind:e=>y("Player.keybinds.skipOpeningEnding",e)})]}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.keybinds.toggleSubtitles"),A.jsx(ap,{content:wd(s.new.Player.keybinds.toggleSubtitles),keyBind:e=>y("Player.keybinds.toggleSubtitles",e)})]}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.keybinds.pip"),A.jsx(ap,{content:wd(s.new.Player.keybinds.PictureInPicture),keyBind:e=>y("Player.keybinds.PictureInPicture",e)})]}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.keybinds.volumeup"),A.jsx(ap,{content:wd(s.new.Player.keybinds.VolumeUp),keyBind:e=>y("Player.keybinds.VolumeUp",e)})]}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.keybinds.volumedown"),A.jsx(ap,{content:wd(s.new.Player.keybinds.VolumeDown),keyBind:e=>y("Player.keybinds.VolumeDown",e)})]}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.keybinds.volumemute"),A.jsx(ap,{content:wd(s.new.Player.keybinds.VolumeMute),keyBind:e=>y("Player.keybinds.VolumeMute",e)})]}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.player.keybinds.screenshot"),A.jsx(ap,{content:wd(s.new.Player.keybinds.ScreenShot),keyBind:e=>y("Player.keybinds.ScreenShot",e)})]})]})]}),"history"==r&&A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"settings-page-container",children:[A.jsx("div",{className:"settings-page-title",children:du("global.general")}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.history.limited"),A.jsx(ip,{checked:s.new.History.history.LimitedHistory,onChecked:e=>y("History.history.LimitedHistory",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.history.limit"),A.jsx(sp,{iconChar:" ",type:"number",onKeyDown:e=>y("History.history.maxSave",parseInt(e)),startValue:s.new.History.history.maxSave.toString()})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.history.check_history"),A.jsx(zt,{content:du("settings.history.check"),onClick:async function(){Qt.info(du("settings.history.check_start"),hu),await async function(){if(!window.api)return;let e=await sd(),t=new Date;window.api.os.write(await nd+`/continueWatch.json.backup-${t.toISOString().replace(/[:.]/g,"-")}`,JSON.stringify(await window.api.os.read(await nd+"/continueWatch.json"))),window.api.os.write(await nd+"/continueWatch.json",JSON.stringify(rd));let n,r=0,i=0,s=[];n=Qt.loading(du("oldBackup.convertcontinue",{success:r,failed:i}),hu);for(let a=0;a<e.length;a++){const t=e[a];if("string"==typeof t.AnimeData.title){let e=await Gd(t.AnimeData.player_ID?t.AnimeData.player_ID:"");if(e){let n=await ed(e.AnimeData);null!=n?(s.push({...t,AnimeData:{...t.AnimeData,...n}}),r+=1):(i+=1,s.push({...t,...e,AnimeData:{...t.AnimeData,...e.AnimeData}}),Qt.error(du("oldBackup.failedconvert",{title:e.AnimeData.title.romaji}),hu))}else i+=1}else r+=1;Qt.update(n,{render:du("oldBackup.convertcontinue",{success:r,failed:i})})}window.api.os.write(await nd+"/continueWatch.json",JSON.stringify(s.reverse())),Qt.dismiss(n),Qt.success(du("oldBackup.convertcontinuedone",{success:r,failed:i}),hu)}(),await async function(){if(!window.api)return;let e,t=await ld(),n=new Date;window.api.os.write(await ad+`/history.json.backup-${n.toISOString().replace(/[:.]/g,"-")}`,JSON.stringify(await window.api.os.read(await ad+"/history.json"))),window.api.os.write(await ad+"/history.json",JSON.stringify(od));let r=0,i=0,s=[];e=Qt.loading(du("oldBackup.converthistory",{success:r,failed:i}),hu);for(let a=0;a<t.length;a++){const n=t[a];if("string"==typeof n.AnimeData.title){let e=await Gd(n.AnimeData.player_ID?n.AnimeData.player_ID:"");if(e){let t=await ed(e.AnimeData);null!=t?(s.push({...n,AnimeData:{...n.AnimeData,...t}}),r+=1):(i+=1,s.push({...n,...e,AnimeData:{...n.AnimeData,...e.AnimeData}}),Qt.error(du("oldBackup.failedconvert",{title:e.AnimeData.title.romaji}),hu))}else i+=1}else r+=1;Qt.update(e,{render:du("oldBackup.converthistory",{success:r,failed:i})})}window.api.os.write(await ad+"/history.json",JSON.stringify(s.reverse())),Qt.dismiss(e),Qt.success(du("oldBackup.converthistorydone",{success:r,failed:i}),hu)}(),await Ad()&&Qt.info(du("settings.history.history_good"),hu),await id()&&Qt.info(du("settings.history.continue_good"),hu)}})]})]}),A.jsxs("div",{className:"settings-page-container",children:[A.jsx("div",{className:"settings-page-title",children:du("global.continuewatch")}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsxs("span",{className:"settings-helpicon-space",children:[du("settings.history.startsave"),A.jsx(Ap,{description:du("settings.tips.continuewatchsavehistory")})]}),A.jsx(sp,{iconChar:"s",type:"number",onKeyDown:e=>y("History.continue.MinimalTimeSave",parseInt(e)),startValue:s.new.History.continue.MinimalTimeSave.toString()})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsxs("span",{className:"settings-helpicon-space",children:[du("settings.history.stopsave"),A.jsx(Ap,{description:du("settings.tips.continuewatchsavehistory")})]}),A.jsx(sp,{iconChar:"s",type:"number",onKeyDown:e=>y("History.continue.MaximizeTimeSave",parseInt(e)),startValue:s.new.History.continue.MaximizeTimeSave.toString()})]})]})]}),"developer"==r&&A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"settings-page-container",children:[A.jsx("div",{className:"settings-page-title",children:"DevTools"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.devmode.developermode"),A.jsx(ip,{checked:s.new.Developer.DeveloperMode,onChecked:e=>y("Developer.DeveloperMode",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.devmode.tornondevtools"),A.jsx(ip,{checked:s.new.Developer.DevTools,onChecked:e=>y("Developer.DevTools",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.devmode.devtoolsonstart"),A.jsx(ip,{checked:s.new.Developer.DevToolsOnStart,onChecked:e=>y("Developer.DevToolsOnStart",e)})]}),A.jsx("div",{className:"settings-line"}),A.jsxs("div",{className:"settings-setting-container",children:[du("settings.devmode.playerdebug"),A.jsx(ip,{checked:s.new.Developer.playerDebug,onChecked:e=>y("Developer.playerDebug",e)})]})]}),window.api&&A.jsxs("div",{className:"settings-page-container",children:[A.jsx("div",{className:"settings-page-title",children:du("settings.devmode.information")}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsx("span",{children:du("settings.devmode.electronver")}),A.jsx("span",{children:c.electron})]}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsx("span",{children:du("settings.devmode.chromiumver")}),A.jsx("span",{children:c.chrome})]}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsx("span",{children:du("settings.devmode.nodever")}),A.jsx("span",{children:c.node})]})]})]}),"extensions"==r&&A.jsxs("div",{className:"settings-page-container",children:[A.jsx("div",{className:"settings-page-title",children:du("global.extensions")}),A.jsx("div",{className:"settings-container-extensions",children:A.jsxs("table",{className:"settings-table-extensions",children:[A.jsxs("tr",{children:[A.jsx("th",{children:du("settings.extensions.name")}),A.jsx("th",{children:du("settings.extensions.author")}),A.jsx("th",{children:du("settings.extensions.version")}),A.jsx("th",{children:du("settings.extensions.type")})]}),n.map(e=>A.jsxs("tr",{className:"settings-table-button",children:[A.jsxs("td",{className:"settings-extensions-title",children:[e.icon?A.jsx("img",{className:"settings-extensions-icon",src:e.icon}):A.jsx("div",{className:"settings-extensions-icon-placeholder"}),e.name]}),A.jsx("td",{children:A.jsx("div",{className:"settings-extensions-background",children:e.author})}),A.jsx("td",{children:A.jsx("div",{className:"settings-extensions-background",children:e.version})}),A.jsx("td",{children:A.jsxs("div",{className:"settings-extensions-button-container",children:[A.jsxs("div",{className:"settings-extensions-type-container",children:[e.information&&A.jsx("div",{className:"settings-extensions-background",children:du("settings.extensions.information")}),e.player&&A.jsx("div",{className:"settings-extensions-background",children:du("global.player")})]}),A.jsx("div",{className:"settings-helpicon-space",children:A.jsx(ip,{checked:s.new.plugins.player==e.name||"AnilistApi"==e.name,onChecked:()=>"AnilistApi"!=e.name?y("plugins.player",e.name):""})})]})})]}))]})})]}),"about"==r&&A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"settings-page-container",children:[A.jsx("div",{className:"settings-page-title",children:du("settings.general.links")}),A.jsxs("div",{className:"settings-special-container",children:[A.jsx("img",{className:"settings-special-images",onClick:()=>window.api?window.api.open("https://github.com/Owca525/animu"):location.href="https://github.com/Owca525/animu",src:"https://github.com/fluidicon.png",alt:"Github Logo"}),A.jsx("img",{className:"settings-special-images",onClick:async function(){if(!window.api)return;let e=await window.api.request.get("https://raw.githubusercontent.com/Owca525/animu/refs/heads/unstable/assets/discord.txt",{"User-Agent":navigator.userAgent},"text");e.success&&window.api.open(e.data)},src:"https://cdn.prod.website-files.com/6257adef93867e50d84d30e2/66e3d80db9971f10a9757c99_Symbol.svg",alt:"Discord Logo"}),A.jsx("img",{className:"settings-special-images",onClick:()=>window.api?window.api.open("https://buymeacoffee.com/owca525"):location.href="https://buymeacoffee.com/owca525",src:"https://studio.buymeacoffee.com/assets/img/bmc-meta-new/new/android-icon-192x192.png",alt:"Buymeacoffee logo"})]})]}),A.jsxs("div",{className:"settings-page-container",children:[A.jsx("div",{className:"settings-page-title",children:du("settings.general.credits")}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsx("span",{className:"settings-user-title",children:"Owca525"})," ",du("credits.owca525")]}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsx("div",{className:"settings-user-title",children:"KartQ"}),"  ",du("credits.kartq")]}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsx("div",{className:"settings-user-title",children:"DawoleQ"}),"  ",du("credits.dawoleq")]}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsx("div",{className:"settings-user-title",children:"Ary"}),"  ",du("credits.ary")]}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsx("div",{className:"settings-user-title",children:"Rain_kyle"}),"  ",du("credits.rain_kyle")]}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsx("div",{className:"settings-user-title",children:"AkaShiro"}),"  ",du("credits.akashiro")]})]}),A.jsxs("div",{className:"settings-page-container",children:[A.jsx("div",{className:"settings-page-title",children:du("settings.general.specialthanks")}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsx("div",{className:"settings-user-title",children:"Talon"})," ",du("credits.talon")]}),A.jsxs("div",{className:"settings-setting-container",children:[A.jsx("div",{className:"settings-user-title",children:"Zomi"})," ",du("credits.zomi")]})]})]})]})]})}function up(e){let t=e.lastIndexOf("-");return-1===t?e:e.substring(0,t).replaceAll("-"," ")}const dp=({animeData:e,now_episodes:t,playerData:n,setNextEpisode:r,time:i,externalPlayerData:s})=>{const a=be(),o=Kh(e=>e.config),[l,c]=h.useState(()=>Td({title:e.AnimeData.title,ep:t.episode,format:e.AnimeData.format})),[u,d]=h.useState([]),f=h.useRef(void 0),[p,g]=h.useState(du("global.notFound")),[m,y]=h.useState(void 0),[v,w]=h.useState(s.current),[b,E]=h.useState([]),[B,C]=h.useState(!1),[S,T]=h.useState(0),[x,k]=h.useState(!1);function I(e){if(!e)return 0;for(let t=0;t<e.length;t++){if(!e[t].label.includes("Forced"))return t+1}return 0}function F(e){let n=t.episodes.findIndex(e=>e.ep===t.episode);n<0||("prev"==e&&(n-=1),"next"==e&&(n+=1),void 0!==t.episodes[n].ep&&r(t.episodes[n].ep))}function L(e,t){let n=v!=t&&t?t:v,r=m;e&&(r=e),"Movian"===n&&async function(e){if(!e)return;let t=await window.api.request.get(`http://${o.Player.external.movianIP}/showtime/open?url=${encodeURIComponent(e)}`,{});t.success||"fetch failed"!=t.error||Qt.error(du("externalPlayer.failed.movian"),hu)}(r),"Mpv"===n&&async function(e){if(!e)return;if(!f.current)return;let t=[];f.current.subtitles&&(t=f.current.subtitles.map(e=>e.url)),await window.api.runExternaPlayer({url:e,title:l,path:o.Player.external.mpvPath,time:i,subs:{subList:t,sid:I(f.current.subtitles)},chapters:f.current.chaptersUrl},"mpv")}(r),"VLC"===n&&async function(e){if(!e)return;if(!f.current)return;let t=[];f.current.subtitles&&(t=f.current.subtitles.map(e=>e.url)),await window.api.runExternaPlayer({url:e,title:l,path:o.Player.external.vlcPath,time:i,subs:{subList:t,sid:I(f.current.subtitles)}},"vlc")}(r),s.onChage(n),"ChromeCast"!==n&&Qt.success(du("externalPlayer.running",{player:n}),hu),"ChromeCast"===n&&_()}async function D(){E(await window.api.chromecast.deviceList())}function _(){T(()=>30),k(()=>!0),window.api.chromecast.startSearch()}function U(){T(()=>0),k(()=>!1),window.api.chromecast.stopSearch()}h.useEffect(()=>{n.length<=0?Qt.error(du("externalPlayer.failed.player"),hu):(f.current=n[0],n[0].resolution.length<=0?Qt.error(du("externalPlayer.failed.resolution"),hu):(d(()=>n[0].resolution),g(()=>n[0].resolution[0].res),y(()=>n[0].resolution[0].url),L(n[0].resolution[0].url),document.querySelectorAll("*").forEach(e=>{e.tabIndex=-1})))},[]),h.useEffect(()=>{if(S<=0)return void U();const e=setInterval(()=>{T(e=>(D(),e-1))},1e3);return()=>clearInterval(e)},[S]);return A.jsxs("div",{className:"external-player-container",children:[A.jsxs("div",{className:"external-player-container-player",children:[A.jsxs("div",{className:"external-player-top",children:[A.jsxs("div",{className:"video-top",children:[A.jsx(zt,{icon:"arrow_back",ButtonClass:"player-buttons",onClick:()=>a("/")}),A.jsx("div",{className:"player-title",children:l})]}),A.jsxs("div",{className:"external-dropdown",children:[A.jsx(Xh,{options:[{label:"Mpv",onClick:()=>{w(()=>"Mpv"),L(void 0,"Mpv")}},{label:"VLC",onClick:()=>{w(()=>"VLC"),L(void 0,"VLC")}},{label:"Movian",onClick:()=>{w(()=>"Movian"),L(void 0,"Movian")}},{label:"ChromeCast",onClick:()=>{w(()=>"ChromeCast"),L(void 0,"ChromeCast")}}],placeholder:du("global.notFound"),buttonText:o.Player.external.type,disableX:!0}),A.jsx(Xh,{placeholder:du("global.notFound"),buttonText:""!=p?Id(p)?`${p}p`:p:du("global.notFound"),options:u.map(e=>({label:Id(e.res)?`${e.res}p`:e.res,onClick:()=>{return t=e,console.log(t),g(()=>t.res),void y(()=>t.url);var t}})),disableX:!0}),A.jsx(Xh,{placeholder:du("global.notFound"),buttonText:f.current?f.current.hostname:du("global.notFound"),options:n.map(e=>({label:e.hostname,onClick:()=>{return t=e,f.current=t,void d(()=>t.resolution);var t}})),disableX:!0})]})]}),A.jsx("div",{className:"external-player-center",children:A.jsxs("div",{className:"external-button-container",children:[A.jsx(zt,{icon:"skip_previous",ButtonClass:"player-buttons",onClick:()=>F("prev")}),A.jsx(zt,{icon:"replay",ButtonClass:"player-buttons",onClick:()=>L(m,v)}),A.jsx(zt,{icon:"skip_next",ButtonClass:"player-buttons",onClick:()=>F("next")})]})}),A.jsxs("div",{className:"external-episodes-container",children:[A.jsx("div",{className:"external-episodes-title",children:du("externalPlayer.failed.episodes")}),A.jsx("div",{className:"external-episodes",children:t.episodes.map(e=>A.jsx("div",{className:"information-episode-button",onClick:()=>r(e.ep),children:e.ep}))})]})]}),A.jsx($l.div,{className:"external-player-container-player-chromecast",variants:{invisible:{opacity:0,x:-500},hidden:{opacity:1,x:-230},visible:{opacity:1,x:0}},initial:"invisible",animate:"ChromeCast"==v?B?"visible":"hidden":"invisible",onMouseEnter:()=>C(()=>!0),onMouseLeave:()=>C(()=>!1),transition:{duration:.2},children:A.jsxs("div",{className:"external-leftpanel-container",children:[A.jsxs("div",{className:"external-leftpanel-topbar",children:[A.jsx("button",{className:"button external-leftpanel-topbar-button material-symbols-outlined",onClick:()=>x?U():_(),children:x?"close":"search"}),A.jsx("button",{className:"button external-leftpanel-topbar-button material-symbols-outlined",onClick:D,children:"refresh"})]}),A.jsxs("div",{className:"external-leftpanel",children:[b.map(e=>A.jsxs("button",{className:"button external-panelbutton",onClick:async()=>await async function(e){f.current&&f.current.hls?Qt.error(du("externalPlayer.failed.chromecast")):m&&await window.api.chromecast.connect(e,{title:l,time:i,url:m,type:"video/mp4"})}(e),children:[A.jsx("div",{className:"external-panelbutton-icon material-symbols-outlined",children:"cast"}),A.jsxs("div",{className:"external-button-textcontainer",children:[A.jsx("span",{className:"external-panelbutton-title",children:up(e.name)}),A.jsx("span",{className:"external-panelbutton-bottomtext",children:du("externalPlayer.chromeCast.disconnected")})]})]})),x&&A.jsx("div",{className:"external-panel-search-text",children:du("externalPlayer.chromeCast.search")})]})]})})]})},hp=function(){const e="undefined"!=typeof document&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}(),fp={},pp=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};const i=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),a=s?.nonce||s?.getAttribute("nonce");r=e(t.map(e=>{if(e=function(e,t){return new URL(e,t).href}(e,n),e in fp)return;fp[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(n)for(let n=i.length-1;n>=0;n--){const r=i[n];if(r.href===e&&(!t||"stylesheet"===r.rel))return}else if(document.querySelector(`link[href="${e}"]${r}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":hp,t||(s.as="script"),s.crossOrigin="",s.href=e,a&&s.setAttribute("nonce",a),document.head.appendChild(s),t?new Promise((t,n)=>{s.addEventListener("load",t),s.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})},gp=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},mp=Number.isSafeInteger||function(e){return"number"==typeof e&&Math.abs(e)<=yp},yp=Number.MAX_SAFE_INTEGER||9007199254740991;let vp=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),wp=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",e.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",e.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.ASSET_LIST_LOAD_ERROR="assetListLoadError",e.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",e.ASSET_LIST_PARSING_ERROR="assetListParsingError",e.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.ATTACH_MEDIA_ERROR="attachMediaError",e.UNKNOWN="unknown",e}({}),bp=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.MEDIA_ENDED="hlsMediaEnded",e.STALL_RESOLVED="hlsStallResolved",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFERED_TO_END="hlsBufferedToEnd",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",e.ASSET_LIST_LOADING="hlsAssetListLoading",e.ASSET_LIST_LOADED="hlsAssetListLoaded",e.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",e.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",e.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",e.INTERSTITIAL_STARTED="hlsInterstitialStarted",e.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",e.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",e.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",e.INTERSTITIAL_ENDED="hlsInterstitialEnded",e.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",e.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",e.EVENT_CUE_ENTER="hlsEventCueEnter",e}({});var Ep="manifest",Bp="level",Cp="audioTrack",Sp="subtitleTrack",Tp="main",xp="audio",kp="subtitle";class Ip{constructor(e,t=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class Fp{constructor(e,t,n,r=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Ip(e),this.fast_=new Ip(t),this.defaultTTFB_=r,this.ttfb_=new Ip(e)}update(e,t){const{slow_:n,fast_:r,ttfb_:i}=this;n.halfLife!==e&&(this.slow_=new Ip(e,n.getEstimate(),n.getTotalWeight())),r.halfLife!==t&&(this.fast_=new Ip(t,r.getEstimate(),r.getTotalWeight())),i.halfLife!==e&&(this.ttfb_=new Ip(e,i.getEstimate(),i.getTotalWeight()))}sample(e,t){const n=(e=Math.max(e,this.minDelayMs_))/1e3,r=8*t/n;this.fast_.sample(n,r),this.slow_.sample(n,r)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function Lp(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dp(){return Dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dp.apply(null,arguments)}function _p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Up(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_p(Object(n),!0).forEach(function(t){Lp(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let Pp=class{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n=`[${e}]:`;this.trace=Rp,this.debug=t.debug.bind(null,n),this.log=t.log.bind(null,n),this.warn=t.warn.bind(null,n),this.info=t.info.bind(null,n),this.error=t.error.bind(null,n)}};const Rp=function(){},Op={trace:Rp,debug:Rp,log:Rp,warn:Rp,info:Rp,error:Rp};function Qp(){return Dp({},Op)}function Np(e,t,n){return t[e]?t[e].bind(t):function(e,t){const n=self.console[e];return n?n.bind(self.console,`${t?"["+t+"] ":""}[${e}] >`):Rp}(e,n)}const Mp=Qp();const Hp=Mp;function jp(e=!0){if("undefined"==typeof self)return;return(e||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function $p(e,t){const n=Object.keys(e),r=Object.keys(t),i=n.length,s=r.length;return!i||!s||i===s&&!n.some(e=>-1===r.indexOf(e))}function Kp(e,t=!1){if("undefined"!=typeof TextDecoder){const n=new TextDecoder("utf-8").decode(e);if(t){const e=n.indexOf("\0");return-1!==e?n.substring(0,e):n}return n.replace(/\0/g,"")}const n=e.length;let r,i,s,a="",o=0;for(;o<n;){if(r=e[o++],0===r&&t)return a;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(r);break;case 12:case 13:i=e[o++],a+=String.fromCharCode((31&r)<<6|63&i);break;case 14:i=e[o++],s=e[o++],a+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&s)}}return a}function Vp(e){let t="";for(let n=0;n<e.length;n++){let r=e[n].toString(16);r.length<2&&(r="0"+r),t+=r}return t}function Gp(e){return Uint8Array.from(e.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function Wp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zp,Yp={exports:{}};var qp,Xp,Jp,Zp,eg,tg=zp?Yp.exports:(zp=1,qp=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,Xp=/^(?=([^\/?#]*))\1([^]*)$/,Jp=/(?:\/|^)\.(?=\/)/g,Zp=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,Yp.exports=eg={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=eg.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=eg.normalizePath(r.path),eg.buildURLFromParts(r)}var i=eg.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return n.alwaysNormalize?(i.path=eg.normalizePath(i.path),eg.buildURLFromParts(i)):t;var s=eg.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var a=Xp.exec(s.path);s.netLoc=a[1],s.path=a[2]}s.netLoc&&!s.path&&(s.path="/");var o={scheme:s.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(o.netLoc=s.netLoc,"/"!==i.path[0]))if(i.path){var A=s.path,l=A.substring(0,A.lastIndexOf("/")+1)+i.path;o.path=eg.normalizePath(l)}else o.path=s.path,i.params||(o.params=s.params,i.query||(o.query=s.query));return null===o.path&&(o.path=n.alwaysNormalize?eg.normalizePath(i.path):i.path),eg.buildURLFromParts(o)},parseURL:function(e){var t=qp.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(Jp,"");e.length!==(e=e.replace(Zp,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}});class ng{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var rg="audio",ig="video",sg="audiovideo";class ag{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,"string"==typeof e&&(e={url:e}),this.base=e,function(e,t){const n=cg(e,t);n&&(n.enumerable=!0,Object.defineProperty(e,t,n))}(this,"stats")}setByteRange(e,t){const n=e.split("@",2);let r;r=1===n.length?(null==t?void 0:t.byteRangeEndOffset)||0:parseInt(n[1]),this._byteRange=[r,parseInt(n[0])+r]}get baseurl(){return this.base.url}get byteRange(){return null===this._byteRange?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return null===this._streams&&(this._streams={[rg]:null,[ig]:null,[sg]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return null!==this._stats}get hasStreams(){return null!==this._streams}get stats(){return null===this._stats&&(this._stats=new ng),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=tg.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[rg]=null,e[ig]=null,e[sg]=null}}function og(e){return"initSegment"!==e.sn}class Ag extends ag{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],t=this.byteRange[1];if(gp(e)&&gp(t))return t-e}return null}get bitrate(){return this.byteLength?8*this.byteLength/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:t}=this;if(!t||t.NONE)return null;if(t.identity)this._decryptdata||(this._decryptdata=t.identity.getDecryptData(this.sn));else if(null==(e=this._decryptdata)||!e.keyId){const e=Object.keys(t);if(1===e.length){const n=this._decryptdata=t[e[0]]||null;n&&(this._decryptdata=n.getDecryptData(this.sn,t))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime)return null;const e=gp(this.duration)?this.duration:0;return this.programDateTime+1e3*e}get encrypted(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){var t;const e=Object.keys(this.levelkeys),n=e.length;if(n>1||1===n&&null!=(t=this.levelkeys[e[0]])&&t.encrypted)return!0}return!1}get programDateTime(){return null===this._programDateTime&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){gp(e)?this._programDateTime=e:this._programDateTime=this.rawProgramDateTime=null}get ref(){return og(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const t=this.levelkeys;if(t){var n;const r=t[e];!r||null!=(n=this._decryptdata)&&n.keyId||(this._decryptdata=r.getDecryptData(this.sn,t))}}abortRequests(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(e,t,n,r,i,s=!1){const{elementaryStreams:a}=this,o=a[e];o?(o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,n),o.startDTS=Math.min(o.startDTS,r),o.endDTS=Math.max(o.endDTS,i)):a[e]={startPTS:t,endPTS:n,startDTS:r,endDTS:i,partial:s}}}class lg extends ag{constructor(e,t,n,r,i){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=r;const s=e.enumeratedString("BYTERANGE");s&&this.setByteRange(s,i),i&&(this.fragOffset=i.fragOffset+i.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function cg(e,t){const n=Object.getPrototypeOf(e);if(n){const e=Object.getOwnPropertyDescriptor(n,t);return e||cg(n,t)}}const ug=Math.pow(2,32)-1,dg=[].push,hg={video:1,audio:2,id3:3,text:4};function fg(e){return String.fromCharCode.apply(null,e)}function pg(e,t){const n=e[t]<<8|e[t+1];return n<0?65536+n:n}function gg(e,t){const n=yg(e,t);return n<0?4294967296+n:n}function mg(e,t){let n=gg(e,t);return n*=Math.pow(2,32),n+=gg(e,t+4),n}function yg(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function vg(e,t){const n=[];if(!t.length)return n;const r=e.byteLength;for(let i=0;i<r;){const s=gg(e,i),a=s>1?i+s:r;if(fg(e.subarray(i+4,i+8))===t[0])if(1===t.length)n.push(e.subarray(i+8,a));else{const r=vg(e.subarray(i+8,a),t.slice(1));r.length&&dg.apply(n,r)}i=a}return n}function wg(e){const t=[],n=e[0];let r=8;const i=gg(e,r);r+=4;let s=0,a=0;0===n?(s=gg(e,r),a=gg(e,r+4),r+=8):(s=mg(e,r),a=mg(e,r+8),r+=16),r+=2;let o=e.length+a;const A=pg(e,r);r+=2;for(let l=0;l<A;l++){let n=r;const s=gg(e,n);n+=4;const a=2147483647&s;if(1===(2147483648&s)>>>31)return Hp.warn("SIDX has hierarchical references (not supported)"),null;const A=gg(e,n);n+=4,t.push({referenceSize:a,subsegmentDuration:A,info:{duration:A/i,start:o,end:o+a-1}}),o+=a,n+=4,r=n}return{earliestPresentationTime:s,timescale:i,version:n,referencesCount:A,references:t}}function bg(e){const t=[],n=vg(e,["moov","trak"]);for(let r=0;r<n.length;r++){const e=n[r],i=vg(e,["tkhd"])[0];if(i){let n=i[0];const r=gg(i,0===n?12:20),s=vg(e,["mdia","mdhd"])[0];if(s){n=s[0];const i=gg(s,0===n?12:20),a=vg(e,["mdia","hdlr"])[0];if(a){const n=fg(a.subarray(8,12)),s={soun:rg,vide:ig}[n],o=Eg(vg(e,["mdia","minf","stbl","stsd"])[0]);s?(t[r]={timescale:i,type:s,stsd:o},t[s]=Up({timescale:i,id:r},o)):t[r]={timescale:i,type:n,stsd:o}}}}}return vg(e,["moov","mvex","trex"]).forEach(e=>{const n=gg(e,4),r=t[n];r&&(r.default={duration:gg(e,12),flags:gg(e,20)})}),t}function Eg(e){const t=e.subarray(8),n=t.subarray(86),r=fg(t.subarray(4,8));let i,s=r;const a="enca"===r||"encv"===r;if(a){const e=vg(t,[r])[0];vg(e.subarray("enca"===r?28:78),["sinf"]).forEach(e=>{const t=vg(e,["schm"])[0];if(t){const n=fg(t.subarray(4,8));if("cbcs"===n||"cenc"===n){const t=vg(e,["frma"])[0];t&&(s=fg(t))}}})}const o=s;switch(s){case"avc1":case"avc2":case"avc3":case"avc4":{const e=vg(n,["avcC"])[0];e&&e.length>3&&(s+="."+Sg(e[1])+Sg(e[2])+Sg(e[3]),i=Bg("avc1"===o?"dva1":"dvav",n));break}case"mp4a":{const e=vg(t,[r])[0],n=vg(e.subarray(28),["esds"])[0];if(n&&n.length>7){let e=4;if(3!==n[e++])break;e=Cg(n,e),e+=2;const t=n[e++];if(128&t&&(e+=2),64&t&&(e+=n[e++]),4!==n[e++])break;e=Cg(n,e);const r=n[e++];if(64!==r)break;if(s+="."+Sg(r),e+=12,5!==n[e++])break;e=Cg(n,e);const i=n[e++];let a=(248&i)>>3;31===a&&(a+=1+((7&i)<<3)+((224&n[e])>>5)),s+="."+a}break}case"hvc1":case"hev1":{const e=vg(n,["hvcC"])[0];if(e&&e.length>12){const t=e[1],n=["","A","B","C"][t>>6],r=31&t,i=gg(e,2),a=(32&t)>>5?"H":"L",o=e[12],A=e.subarray(6,12);s+="."+n+r,s+="."+function(e){let t=0;for(let n=0;n<32;n++)t|=(e>>n&1)<<31-n;return t>>>0}(i).toString(16).toUpperCase(),s+="."+a+o;let l="";for(let e=A.length;e--;){const t=A[e];if(t||l){l="."+t.toString(16).toUpperCase()+l}}s+=l}i=Bg("hev1"==o?"dvhe":"dvh1",n);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":s=Bg(s,n)||s;break;case"vp09":{const e=vg(n,["vpcC"])[0];if(e&&e.length>6){const t=e[4],n=e[5],r=e[6]>>4&15;s+="."+Tg(t)+"."+Tg(n)+"."+Tg(r)}break}case"av01":{const e=vg(n,["av1C"])[0];if(e&&e.length>2){const t=e[1]>>>5,r=31&e[1],a=e[2]>>>7?"H":"M",o=(64&e[2])>>6,A=(32&e[2])>>5,l=2===t&&o?A?12:10:o?10:8,c=(16&e[2])>>4,u=(8&e[2])>>3,d=(4&e[2])>>2,h=3&e[2],f=1,p=1,g=1,m=0;s+="."+t+"."+Tg(r)+a+"."+Tg(l)+"."+c+"."+u+d+h+"."+Tg(f)+"."+Tg(p)+"."+Tg(g)+"."+m,i=Bg("dav1",n)}break}}return{codec:s,encrypted:a,supplemental:i}}function Bg(e,t){const n=vg(t,["dvvC"]),r=n.length?n[0]:vg(t,["dvcC"])[0];if(r){const t=r[2]>>1&127,n=r[2]<<5&32|r[3]>>3&31;return e+"."+Tg(t)+"."+Tg(n)}}function Cg(e,t){const n=t+5;for(;128&e[t++]&&t<n;);return t}function Sg(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function Tg(e){return(e<10?"0":"")+e}function xg(e,t){vg(e,["moov","trak"]).forEach(e=>{const n=vg(e,["mdia","minf","stbl","stsd"])[0];if(!n)return;const r=n.subarray(8);let i=vg(r,["enca"]);const s=i.length>0;s||(i=vg(r,["encv"])),i.forEach(e=>{vg(s?e.subarray(28):e.subarray(78),["sinf"]).forEach(e=>{const n=kg(e);n&&t(n,s)})})})}function kg(e){const t=vg(e,["schm"])[0];if(t){const n=fg(t.subarray(4,8));if("cbcs"===n||"cenc"===n){const t=vg(e,["schi","tenc"])[0];if(t)return t}}}function Ig(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function Fg(e,t){const n=[],r=t.samples,i=t.timescale,s=t.id;let a=!1;return vg(r,["moof"]).map(o=>{const A=o.byteOffset-8;vg(o,["traf"]).map(o=>{const l=vg(o,["tfdt"]).map(e=>{const t=e[0];let n=gg(e,4);return 1===t&&(n*=Math.pow(2,32),n+=gg(e,8)),n/i})[0];return void 0!==l&&(e=l),vg(o,["tfhd"]).map(l=>{const c=gg(l,4),u=16777215&gg(l,0);let d=0;const h=!!(16&u);let f=0;const p=!!(32&u);let g=8;c===s&&(!!(1&u)&&(g+=8),!!(2&u)&&(g+=4),!!(8&u)&&(d=gg(l,g),g+=4),h&&(f=gg(l,g),g+=4),p&&(g+=4),"video"===t.type&&(a=Lg(t.codec)),vg(o,["trun"]).map(s=>{const o=s[0],l=16777215&gg(s,0),c=!!(1&l);let u=0;const h=!!(4&l),p=!!(256&l);let g=0;const m=!!(512&l);let y=0;const v=!!(1024&l),w=!!(2048&l);let b=0;const E=gg(s,4);let B=8;c&&(u=gg(s,B),B+=4),h&&(B+=4);let C=u+A;for(let A=0;A<E;A++){if(p?(g=gg(s,B),B+=4):g=d,m?(y=gg(s,B),B+=4):y=f,v&&(B+=4),w&&(b=0===o?gg(s,B):yg(s,B),B+=4),t.type===ig){let t=0;for(;t<y;){const s=gg(r,C);if(C+=4,Dg(a,r[C])){_g(r.subarray(C,C+s),a?2:1,e+b/i,n)}C+=s,t+=s+4}}e+=g/i}}))})})}),n}function Lg(e){if(!e)return!1;const t=e.substring(0,4);return"hvc1"===t||"hev1"===t||"dvh1"===t||"dvhe"===t}function Dg(e,t){if(e){const e=t>>1&63;return 39===e||40===e}return 6===(31&t)}function _g(e,t,n,r){const i=Ug(e);let s=0;s+=t;let a=0,o=0,A=0;for(;s<i.length;){a=0;do{if(s>=i.length)break;A=i[s++],a+=A}while(255===A);o=0;do{if(s>=i.length)break;A=i[s++],o+=A}while(255===A);const e=i.length-s;let t=s;if(o<e)s+=o;else if(o>e){Hp.error(`Malformed SEI payload. ${o} is too small, only ${e} bytes left to parse.`);break}if(4===a){if(181===i[t++]){const e=pg(i,t);if(t+=2,49===e){const e=gg(i,t);if(t+=4,1195456820===e){const e=i[t++];if(3===e){const s=i[t++],o=64&s,A=o?2+3*(31&s):0,l=new Uint8Array(A);if(o){l[0]=s;for(let e=1;e<A;e++)l[e]=i[t++]}r.push({type:e,payloadType:a,pts:n,bytes:l})}}}}}else if(5===a&&o>16){const e=[];for(let n=0;n<16;n++){const r=i[t++].toString(16);e.push(1==r.length?"0"+r:r),3!==n&&5!==n&&7!==n&&9!==n||e.push("-")}const s=o-16,A=new Uint8Array(s);for(let n=0;n<s;n++)A[n]=i[t++];r.push({payloadType:a,pts:n,uuid:e.join(""),userData:Kp(A),userDataBytes:A})}}}function Ug(e){const t=e.byteLength,n=[];let r=1;for(;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return e;const i=t-n.length,s=new Uint8Array(i);let a=0;for(r=0;r<i;a++,r++)a===n[0]&&(a++,n.shift()),s[r]=e[a];return s}function Pg(e,t,n){if(16!==e.byteLength)throw new RangeError("Invalid system id");let r,i,s;r=0,i=new Uint8Array,s=new Uint8Array;const a=new Uint8Array(4);return n.byteLength>0&&new DataView(a.buffer).setUint32(0,n.byteLength,!1),function(e,...t){const n=t.length;let r=8,i=n;for(;i--;)r+=t[i].byteLength;const s=new Uint8Array(r);for(s[0]=r>>24&255,s[1]=r>>16&255,s[2]=r>>8&255,s[3]=255&r,s.set(e,4),i=0,r=8;i<n;i++)s.set(t[i],r),r+=t[i].byteLength;return s}([112,115,115,104],new Uint8Array([0,0,0,0]),e,s,i,a,n)}function Rg(e){const t=e.getUint32(0),n=e.byteOffset,r=e.byteLength;if(r<t)return{offset:n,size:r};if(1886614376!==e.getUint32(4))return{offset:n,size:t};const i=e.getUint32(8)>>>24;if(0!==i&&1!==i)return{offset:n,size:t};const s=e.buffer,a=Vp(new Uint8Array(s,n+12,16));let o=null,A=null,l=0;if(0===i)l=28;else{const i=e.getUint32(28);if(!i||r<32+16*i)return{offset:n,size:t};o=[];for(let e=0;e<i;e++)o.push(new Uint8Array(s,n+32+16*e,16));l=32+16*i}if(!l)return{offset:n,size:t};const c=e.getUint32(l);return t-32<c?{offset:n,size:t}:(A=new Uint8Array(s,n+l+4,c),{version:i,systemId:a,kids:o,data:A,offset:n,size:t})}const Og=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Qg={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Ng(e,t){const n=Qg[t];return!!n&&!!n[e.slice(0,4)]}function Mg(e,t,n=!0){return!e.split(",").some(e=>!Hg(e,t,n))}function Hg(e,t,n=!0){var r;const i=jp(n);return null!=(r=null==i?void 0:i.isTypeSupported(jg(e,t)))&&r}function jg(e,t){return`${t}/mp4;codecs=${e}`}function $g(e){if(e){const t=e.substring(0,4);return Qg.video[t]}return 2}function Kg(e){const t=Og();return e.split(",").reduce((e,n)=>{const r=t&&Lg(n)?9:Qg.video[n];return r?(2*r+e)/(e?3:2):(Qg.audio[n]+e)/(e?2:1)},0)}const Vg={};const Gg=/flac|opus|mp4a\.40\.34/i;function Wg(e,t=!0){return e.replace(Gg,e=>function(e,t=!0){if(Vg[e])return Vg[e];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[e];for(let i=0;i<n.length;i++){var r;if(Hg(n[i],"audio",t))return Vg[e]=n[i],n[i];if("mp3"===n[i]&&null!=(r=jp(t))&&r.isTypeSupported("audio/mpeg"))return""}return e}(e.toLowerCase(),t))}function zg(e,t){if(e&&(e.length>4||-1!==["ac-3","ec-3","alac","fLaC","Opus"].indexOf(e))&&(Yg(e,"audio")||Yg(e,"video")))return e;if(t){const n=t.split(",");if(n.length>1){if(e)for(let t=n.length;t--;)if(n[t].substring(0,4)===e.substring(0,4))return n[t];return n[0]}}return t||e}function Yg(e,t){return Ng(e,t)&&Hg(e,t)}function qg(e){if(e.startsWith("av01.")){const t=e.split("."),n=["0","111","01","01","01","0"];for(let e=t.length;e>4&&e<10;e++)t[e]=n[e-4];return t.join(".")}return e}function Xg(e){const t=jp(e)||{isTypeSupported:()=>!1};return{mpeg:t.isTypeSupported("audio/mpeg"),mp3:t.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:t.isTypeSupported('audio/mp4; codecs="ac-3"')}}function Jg(e){return e.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const Zg={supported:!1,smooth:!1,powerEfficient:!1},em={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function tm(e,t){return{supported:!1,configurations:t,decodingInfoResults:[Zg],error:e}}function nm(e,t,n,r,i,s){const a=e.videoCodec,o=e.audioCodec?e.audioGroups:null,A=null==s?void 0:s.audioCodec,l=null==s?void 0:s.channels,c=l?parseInt(l):A?1/0:2;let u=null;if(null!=o&&o.length)try{u=1===o.length&&o[0]?t.groups[o[0]].channels:o.reduce((e,n)=>{if(n){const r=t.groups[n];if(!r)throw new Error(`Audio track group ${n} not found`);Object.keys(r.channels).forEach(t=>{e[t]=(e[t]||0)+r.channels[t]})}return e},{2:0})}catch(d){return!0}return void 0!==a&&(a.split(",").some(e=>Lg(e))||e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(r,30)||"SDR"!==e.videoRange&&e.videoRange!==n||e.bitrate>Math.max(i,8e6))||!!u&&gp(c)&&Object.keys(u).some(e=>parseInt(e)>c)}function rm(e,t,n,r={}){const i=e.videoCodec;if(!i&&!e.audioCodec||!n)return Promise.resolve(em);const s=[],a=function(e){var t;const n=null==(t=e.videoCodec)?void 0:t.split(","),r=sm(e),i=e.width||640,s=e.height||480,a=e.frameRate||30,o=e.videoRange.toLowerCase();return n?n.map(e=>{const t={contentType:jg(qg(e),"video"),width:i,height:s,bitrate:r,framerate:a};return"sdr"!==o&&(t.transferFunction=o),t}):[]}(e),o=a.length,A=function(e,t,n){var r;const i=null==(r=e.audioCodec)?void 0:r.split(","),s=sm(e);if(i&&e.audioGroups)return e.audioGroups.reduce((e,r)=>{var a;const o=r?null==(a=t.groups[r])?void 0:a.tracks:null;return o?o.reduce((e,t)=>{if(t.groupId===r){const r=parseFloat(t.channels||"");i.forEach(t=>{const i={contentType:jg(t,"audio"),bitrate:n?im(t,s):s};r&&(i.channels=""+r),e.push(i)})}return e},e):e},[]);return[]}(e,t,o>0),l=A.length;for(let c=o||1*l||1;c--;){const e={type:"media-source"};if(o&&(e.video=a[c%o]),l){e.audio=A[c%l];const t=e.audio.bitrate;e.video&&t&&(e.video.bitrate-=t)}s.push(e)}if(i){const e=navigator.userAgent;if(i.split(",").some(e=>Lg(e))&&Og())return Promise.resolve(tm(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${e})`),s))}return Promise.all(s.map(e=>{const t=function(e){let t="";const{audio:n,video:r}=e;if(r){t+=`${Jg(r.contentType)}_r${r.height}x${r.width}f${Math.ceil(r.framerate)}${r.transferFunction||"sd"}_${Math.ceil(r.bitrate/1e5)}`}if(n){t+=`${r?"_":""}${Jg(n.contentType)}_c${n.channels}`}return t}(e);return r[t]||(r[t]=n.decodingInfo(e))})).then(e=>({supported:!e.some(e=>!e.supported),configurations:s,decodingInfoResults:e})).catch(e=>({supported:!1,configurations:s,decodingInfoResults:[],error:e}))}function im(e,t){if(t<=1)return 1;let n=128e3;return"ec-3"===e?n=768e3:"ac-3"===e&&(n=64e4),Math.min(t/2,n)}function sm(e){return 1e3*Math.ceil(Math.max(.9*e.bitrate,e.averageBitrate)/1e3)||1}const am=["NONE","TYPE-0","TYPE-1",null];const om=["SDR","PQ","HLG"];var Am="",lm="YES",cm="v2";function um(e){const{canSkipUntil:t,canSkipDateRanges:n,age:r}=e;return t&&r<t/2?n?cm:lm:Am}class dm{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class hm{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(e=>!!e).map(e=>e.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const n=null==(t=e.supplemental)?void 0:t.videoCodec;n&&n!==e.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return fm(this._audioGroups,e)}hasSubtitleGroup(e){return fm(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t)if("audio"===e){let e=this._audioGroups;e||(e=this._audioGroups=[]),-1===e.indexOf(t)&&e.push(t)}else if("text"===e){let e=this._subtitleGroups;e||(e=this._subtitleGroups=[]),-1===e.indexOf(t)&&e.push(t)}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return null==(e=this.audioGroups)?void 0:e[0]}get textGroupId(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}addFallback(){}}function fm(e,t){return!(!t||!e)&&-1!==e.indexOf(t)}function pm(e,t){let n=!1,r=[];if(e&&(n="SDR"!==e,r=[e]),t){r=t.allowedVideoRanges||om.slice(0);const e="SDR"!==r.join("")&&!t.videoCodec;n=void 0!==t.preferHDR?t.preferHDR:e&&function(){if("function"==typeof matchMedia){const e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return!0===e.matches}return!1}(),n||(r=["SDR"])}return{preferHDR:n,allowedVideoRanges:r}}const gm=(e,t)=>JSON.stringify(e,(e=>{const t=new WeakSet;return(n,r)=>{if(e&&(r=e(n,r)),"object"==typeof r&&null!==r){if(t.has(r))return;t.add(r)}return r}})(t));function mm(e,t){Hp.log(`[abr] start candidates with "${e}" ignored because ${t}`)}function ym(e){return e.reduce((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const r=t.channels||"2";return n.channels[r]=(n.channels[r]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function vm(e){if(!e)return e;const{lang:t,assocLang:n,characteristics:r,channels:i,audioCodec:s}=e;return{lang:t,assocLang:n,characteristics:r,channels:i,audioCodec:s}}function wm(e,t,n){if("attrs"in e){const n=t.indexOf(e);if(-1!==n)return n}for(let r=0;r<t.length;r++){if(bm(e,t[r],n))return r}return-1}function bm(e,t,n){const{groupId:r,name:i,lang:s,assocLang:a,default:o}=e,A=e.forced;return(void 0===r||t.groupId===r)&&(void 0===i||t.name===i)&&(void 0===s||function(e,t="--"){if(e.length===t.length)return e===t;return e.startsWith(t)||t.startsWith(e)}(s,t.lang))&&(void 0===s||t.assocLang===a)&&(void 0===o||t.default===o)&&(void 0===A||t.forced===A)&&(!("characteristics"in e)||function(e,t=""){const n=e.split(","),r=t.split(",");return n.length===r.length&&!n.some(e=>-1===r.indexOf(e))}(e.characteristics||"",t.characteristics))&&(void 0===n||n(e,t))}function Em(e,t){const{audioCodec:n,channels:r}=e;return!(void 0!==n&&(t.audioCodec||"").substring(0,4)!==n.substring(0,4)||void 0!==r&&r!==(t.channels||"2"))}function Bm(e,t,n){for(let r=t;r>-1;r--)if(n(e[r]))return r;for(let r=t+1;r<e.length;r++)if(n(e[r]))return r;return-1}function Cm(e,t){var n;return!!e&&e!==(null==(n=t.loadLevelObj)?void 0:n.uri)}const Sm=function(e,t){let n=0,r=e.length-1,i=null,s=null;for(;n<=r;){i=(n+r)/2|0,s=e[i];const a=t(s);if(a>0)n=i+1;else{if(!(a<0))return s;r=i-1}}return null};function Tm(e,t,n=0,r=0,i=.005){let s=null;if(e){s=t[1+e.sn-t[0].sn]||null;const r=e.endDTS-n;r>0&&r<15e-7&&(n+=15e-7),s&&e.level!==s.level&&s.end<=e.end&&(s=t[2+e.sn-t[0].sn]||null)}else 0===n&&0===t[0].start&&(s=t[0]);if(s&&((!e||e.level===s.level)&&0===xm(n,r,s)||function(e,t,n){if(t&&0===t.start&&t.level<e.level&&(t.endPTS||0)>0){const r=t.tagList.reduce((e,t)=>("INF"===t[0]&&(e+=parseFloat(t[1])),e),n);return e.start<=r}return!1}(s,e,Math.min(i,r))))return s;const a=Sm(t,xm.bind(null,n,r));return!a||a===e&&s?s:a}function xm(e=0,t=0,n){if(n.start<=e&&n.start+n.duration>e)return 0;const r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=e?1:n.start-r>e&&n.start?-1:0}function km(e,t,n){const r=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-r>e}function Im(e,t,n){if(e&&e.startCC<=t&&e.endCC>=t){let r=e.fragments;const{fragmentHint:i}=e;let s;return i&&(r=r.concat(i)),Sm(r,e=>e.cc<t?1:e.cc>t?-1:(s=e,e.end<=n?1:e.start>n?-1:0)),s||null}return null}function Fm(e){switch(e.details){case wp.FRAG_LOAD_TIMEOUT:case wp.KEY_LOAD_TIMEOUT:case wp.LEVEL_LOAD_TIMEOUT:case wp.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Lm(e){return e.details.startsWith("key")}function Dm(e){return Lm(e)&&!!e.frag&&!e.frag.decryptdata}function _m(e,t){const n=Fm(t);return e.default[(n?"timeout":"error")+"Retry"]}function Um(e,t){const n="linear"===e.backoff?1:Math.pow(2,t);return Math.min(n*e.retryDelayMs,e.maxRetryDelayMs)}function Pm(e){return Up(Up({},e),{errorRetry:null,timeoutRetry:null})}function Rm(e,t,n,r){if(!e)return!1;const i=null==r?void 0:r.code,s=t<e.maxNumRetry&&(function(e){return Om(e)||!!e&&(e<400||e>499)}(i)||!!n);return e.shouldRetry?e.shouldRetry(e,t,n,r,s):s}function Om(e){return 0===e&&!1===navigator.onLine}var Qm=0,Nm=2,Mm=3,Hm=5,jm=0,$m=1,Km=2,Vm=4;function Gm(e){const t={action:Qm,flags:jm};return e&&(t.resolved=!0),t}var Wm="NOT_LOADED",zm="APPENDING",Ym="PARTIAL",qm="OK";class Xm{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.on(bp.BUFFER_APPENDED,this.onBufferAppended,this),e.on(bp.FRAG_BUFFERED,this.onFragBuffered,this),e.on(bp.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.off(bp.BUFFER_APPENDED,this.onBufferAppended,this),e.off(bp.FRAG_BUFFERED,this.onFragBuffered,this),e.off(bp.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let r=n.length;r--;){const t=n[r];if(!t)break;if(t.start<=e&&e<=t.end&&t.loaded)return t}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,n){const{fragments:r}=this,i=Object.keys(r);for(let s=i.length;s--;){const a=r[i[s]];if((null==a?void 0:a.body.type)===t&&(!n||a.buffered)){const t=a.body;if(t.start<=e&&e<=t.end)return t}}return null}detectEvictedFragments(e,t,n,r,i){this.timeRanges&&(this.timeRanges[e]=t);const s=(null==r?void 0:r.fragment.sn)||-1;Object.keys(this.fragments).forEach(r=>{const a=this.fragments[r];if(!a)return;if(s>=a.body.sn)return;if(!a.buffered&&(!a.loaded||i))return void(a.body.type===n&&this.removeFragment(a.body));const o=a.range[e];o&&(0!==o.time.length?o.time.some(e=>{const n=!this.isTimeBuffered(e.startPTS,e.endPTS,t);return n&&this.removeFragment(a.body),n}):this.removeFragment(a.body))})}detectPartialFragments(e){const t=this.timeRanges;if(!t||"initSegment"===e.frag.sn)return;const n=e.frag,r=Zm(n),i=this.fragments[r];if(!i||i.buffered&&n.gap)return;const s=!n.relurl;if(Object.keys(t).forEach(r=>{const a=n.elementaryStreams[r];if(!a)return;const o=t[r],A=s||!0===a.partial;i.range[r]=this.getBufferedTimes(n,e.part,A,o)}),i.loaded=null,Object.keys(i.range).length){i.buffered=!0;(i.body.endList=n.endList||i.body.endList)&&(this.endListFragments[i.body.type]=i),Jm(i)||this.removeParts(n.sn-1,n.type)}else this.removeFragment(i.body)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=ey(n,t=>t.fragment.sn>=e))}fragBuffered(e,t){const n=Zm(e);let r=this.fragments[n];!r&&t&&(r=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),r&&(r.loaded=null,r.buffered=!0)}getBufferedTimes(e,t,n,r){const i={time:[],partial:n},s=e.start,a=e.end,o=e.minEndPTS||a,A=e.maxStartPTS||s;for(let l=0;l<r.length;l++){const e=r.start(l)-this.bufferPadding,t=r.end(l)+this.bufferPadding;if(A>=e&&o<=t){i.time.push({startPTS:Math.max(s,r.start(l)),endPTS:Math.min(a,r.end(l))});break}if(s<t&&a>e){const e=Math.max(s,r.start(l)),t=Math.min(a,r.end(l));t>e&&(i.partial=!0,i.time.push({startPTS:e,endPTS:t}))}else if(a<=e)break}return i}getPartialFragment(e){let t,n,r,i=null,s=0;const{bufferPadding:a,fragments:o}=this;return Object.keys(o).forEach(A=>{const l=o[A];l&&Jm(l)&&(n=l.body.start-a,r=l.body.end+a,e>=n&&e<=r&&(t=Math.min(e-n,r-e),s<=t&&(i=l.body,s=t)))}),i}isEndListAppended(e){const t=this.endListFragments[e];return void 0!==t&&(t.buffered||Jm(t))}getState(e){const t=Zm(e),n=this.fragments[t];return n?n.buffered?Jm(n)?Ym:qm:zm:Wm}isTimeBuffered(e,t,n){let r,i;for(let s=0;s<n.length;s++){if(r=n.start(s)-this.bufferPadding,i=n.end(s)+this.bufferPadding,e>=r&&t<=i)return!0;if(t<=r)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if("initSegment"===t.frag.sn||t.frag.bitrateTest)return;const n=t.frag,r=t.part?null:t,i=Zm(n);this.fragments[i]={body:n,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:r,timeRanges:i,type:s}=t;if("initSegment"===n.sn)return;const a=n.type;if(r){let e=this.activePartLists[a];e||(this.activePartLists[a]=e=[]),e.push(r)}this.timeRanges=i;const o=i[s];this.detectEvictedFragments(s,o,a,r)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=Zm(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,n=Object.keys(t);if(!e)return n.length>0;for(let r=n.length;r--;){const i=t[n[r]];if((null==i?void 0:i.body.type)===e)return!0}return!1}hasParts(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)}removeFragmentsInRange(e,t,n,r,i){r&&!this.hasGaps||Object.keys(this.fragments).forEach(s=>{const a=this.fragments[s];if(!a)return;const o=a.body;o.type!==n||r&&!o.gap||o.start<t&&o.end>e&&(a.buffered||i)&&this.removeFragment(o)})}removeFragment(e){const t=Zm(e);e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const t=e.sn;this.activePartLists[e.type]=ey(n,e=>e.fragment.sn!==t)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const t=null==(e=this.hls)||null==(e=e.latestLevelDetails)?void 0:e.partList;t&&t.forEach(e=>e.clearElementaryStreamInfo())}}function Jm(e){var t,n,r;return e.buffered&&!!(e.body.gap||null!=(t=e.range.video)&&t.partial||null!=(n=e.range.audio)&&n.partial||null!=(r=e.range.audiovideo)&&r.partial)}function Zm(e){return`${e.type}_${e.level}_${e.sn}`}function ey(e,t){return e.filter(e=>{const n=t(e);return n||e.clearElementaryStreamInfo(),n})}var ty=0,ny=1;class ry{constructor(e,t,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=n}decrypt(e,t){switch(this.aesMode){case ty:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case ny:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}class iy{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let r=0;r<4;r++)n[r]=t.getUint32(4*r);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],s=n[2],a=n[3],o=this.invSubMix,A=o[0],l=o[1],c=o[2],u=o[3],d=new Uint32Array(256);let h=0,f=0,p=0;for(p=0;p<256;p++)d[p]=p<128?p<<1:p<<1^283;for(p=0;p<256;p++){let n=f^f<<1^f<<2^f<<3^f<<4;n=n>>>8^255&n^99,e[h]=n,t[n]=h;const o=d[h],p=d[o],g=d[p];let m=257*d[n]^16843008*n;r[h]=m<<24|m>>>8,i[h]=m<<16|m>>>16,s[h]=m<<8|m>>>24,a[h]=m,m=16843009*g^65537*p^257*o^16843008*h,A[n]=m<<24|m>>>8,l[n]=m<<16|m>>>16,c[n]=m<<8|m>>>24,u[n]=m,h?(h=o^d[d[d[g^o]]],f^=d[d[f]]):h=f=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,r=0;for(;r<t.length&&n;)n=t[r]===this.key[r],r++;if(n)return;this.key=t;const i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);const s=this.ksRows=4*(i+6+1);let a,o;const A=this.keySchedule=new Uint32Array(s),l=this.invKeySchedule=new Uint32Array(s),c=this.sBox,u=this.rcon,d=this.invSubMix,h=d[0],f=d[1],p=d[2],g=d[3];let m,y;for(a=0;a<s;a++)a<i?m=A[a]=t[a]:(y=m,a%i===0?(y=y<<8|y>>>24,y=c[y>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y],y^=u[a/i|0]<<24):i>6&&a%i===4&&(y=c[y>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y]),A[a]=m=(A[a-i]^y)>>>0);for(o=0;o<s;o++)a=s-o,y=3&o?A[a]:A[a-4],l[o]=o<4||a<=4?y:h[c[y>>>24]]^f[c[y>>>16&255]]^p[c[y>>>8&255]]^g[c[255&y]],l[o]=l[o]>>>0}networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}decrypt(e,t,n){const r=this.keySize+6,i=this.invKeySchedule,s=this.invSBox,a=this.invSubMix,o=a[0],A=a[1],l=a[2],c=a[3],u=this.uint8ArrayToUint32Array_(n);let d=u[0],h=u[1],f=u[2],p=u[3];const g=new Int32Array(e),m=new Int32Array(g.length);let y,v,w,b,E,B,C,S,T,x,k,I,F,L;const D=this.networkToHostOrderSwap;for(;t<g.length;){for(T=D(g[t]),x=D(g[t+1]),k=D(g[t+2]),I=D(g[t+3]),E=T^i[0],B=I^i[1],C=k^i[2],S=x^i[3],F=4,L=1;L<r;L++)y=o[E>>>24]^A[B>>16&255]^l[C>>8&255]^c[255&S]^i[F],v=o[B>>>24]^A[C>>16&255]^l[S>>8&255]^c[255&E]^i[F+1],w=o[C>>>24]^A[S>>16&255]^l[E>>8&255]^c[255&B]^i[F+2],b=o[S>>>24]^A[E>>16&255]^l[B>>8&255]^c[255&C]^i[F+3],E=y,B=v,C=w,S=b,F+=4;y=s[E>>>24]<<24^s[B>>16&255]<<16^s[C>>8&255]<<8^s[255&S]^i[F],v=s[B>>>24]<<24^s[C>>16&255]<<16^s[S>>8&255]<<8^s[255&E]^i[F+1],w=s[C>>>24]<<24^s[S>>16&255]<<16^s[E>>8&255]<<8^s[255&B]^i[F+2],b=s[S>>>24]<<24^s[E>>16&255]<<16^s[B>>8&255]<<8^s[255&C]^i[F+3],m[t]=D(y^d),m[t+1]=D(b^h),m[t+2]=D(w^f),m[t+3]=D(v^p),d=T,h=x,f=k,p=I,t+=4}return m.buffer}}class sy{constructor(e,t,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=n}expandKey(){const e=function(e){switch(e){case ty:return"AES-CBC";case ny:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${e}`)}}(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}class ay{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const e=self.crypto;e&&(this.subtle=e.subtle||e.webkitSubtle)}catch(c$){}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?function(e){const t=e.byteLength,n=t&&new DataView(e.buffer).getUint8(t-1);return n?e.slice(0,t-n):e}(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n,r){return this.useSoftware?new Promise((i,s)=>{const a=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(a,t,n,r);const o=this.flush();o?i(o.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,n,r)}softwareDecrypt(e,t,n,r){const{currentIV:i,currentResult:s,remainderData:a}=this;if(r!==ty||16!==t.byteLength)return Hp.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),a&&(e=Ig(a,e),this.remainderData=null);const o=this.getValidChunk(e);if(!o.length)return null;i&&(n=i);let A=this.softwareDecrypter;A||(A=this.softwareDecrypter=new iy),A.expandKey(t);const l=s;return this.currentResult=A.decrypt(o.buffer,0,n),this.currentIV=o.slice(-16).buffer,l||null}webCryptoDecrypt(e,t,n,r){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n,r));this.key=t,this.fastAesKey=new sy(this.subtle,t,r)}return this.fastAesKey.expandKey().then(t=>{if(!this.subtle)return Promise.reject(new Error("web crypto not initialized"));this.logOnce("WebCrypto AES decrypt");return new ry(this.subtle,new Uint8Array(n),r).decrypt(e.buffer,t)}).catch(i=>(Hp.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${i.name}: ${i.message}`),this.onWebCryptoError(e,t,n,r)))}onWebCryptoError(e,t,n,r){const i=this.enableSoftwareAES;if(i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n,r);const i=this.flush();if(i)return i.buffer}throw new Error("WebCrypto"+(i?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%16;return n!==e.length&&(t=e.slice(0,n),this.remainderData=e.slice(n)),t}logOnce(e){this.logEnabled&&(Hp.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const oy=Math.pow(2,17);class Ay{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new uy({type:vp.NETWORK_ERROR,details:wp.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(n?"part list":"url")),networkDetails:null}));this.abort();const r=this.config,i=r.fLoader,s=r.loader;return new Promise((a,o)=>{if(this.loader&&this.loader.destroy(),e.gap){if(e.tagList.some(e=>"GAP"===e[0]))return void o(cy(e));e.gap=!1}const A=this.loader=i?new i(r):new s(r),l=ly(e);e.loader=A;const c=Pm(r.fragLoadPolicy.default),u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:oy};e.stats=A.stats;const d={onSuccess:(t,n,r,i)=>{this.resetLoader(e,A);let s=t.data;r.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(s.slice(0,16)),s=s.slice(16)),a({frag:e,part:null,payload:s,networkDetails:i})},onError:(t,r,i,s)=>{this.resetLoader(e,A),o(new uy({type:vp.NETWORK_ERROR,details:wp.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Up({url:n,data:void 0},t),error:new Error(`HTTP Error ${t.code} ${t.text}`),networkDetails:i,stats:s}))},onAbort:(t,n,r)=>{this.resetLoader(e,A),o(new uy({type:vp.NETWORK_ERROR,details:wp.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:r,stats:t}))},onTimeout:(t,n,r)=>{this.resetLoader(e,A),o(new uy({type:vp.NETWORK_ERROR,details:wp.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${u.timeout}ms`),networkDetails:r,stats:t}))}};t&&(d.onProgress=(n,r,i,s)=>t({frag:e,part:null,payload:i,networkDetails:s})),A.load(l,u,d)})}loadPart(e,t,n){this.abort();const r=this.config,i=r.fLoader,s=r.loader;return new Promise((a,o)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap)return void o(cy(e,t));const A=this.loader=i?new i(r):new s(r),l=ly(e,t);e.loader=A;const c=Pm(r.fragLoadPolicy.default),u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:oy};t.stats=A.stats,A.load(l,u,{onSuccess:(r,i,s,o)=>{this.resetLoader(e,A),this.updateStatsFromPart(e,t);const l={frag:e,part:t,payload:r.data,networkDetails:o};n(l),a(l)},onError:(n,r,i,s)=>{this.resetLoader(e,A),o(new uy({type:vp.NETWORK_ERROR,details:wp.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:Up({url:l.url,data:void 0},n),error:new Error(`HTTP Error ${n.code} ${n.text}`),networkDetails:i,stats:s}))},onAbort:(n,r,i)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,A),o(new uy({type:vp.NETWORK_ERROR,details:wp.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:i,stats:n}))},onTimeout:(n,r,i)=>{this.resetLoader(e,A),o(new uy({type:vp.NETWORK_ERROR,details:wp.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${u.timeout}ms`),networkDetails:i,stats:n}))}})})}updateStatsFromPart(e,t){const n=e.stats,r=t.stats,i=r.total;if(n.loaded+=r.loaded,i){const r=Math.round(e.duration/t.duration),s=Math.min(Math.round(n.loaded/i),r),a=(r-s)*Math.round(n.loaded/s);n.total=n.loaded+a}else n.total=Math.max(n.loaded,n.total);const s=n.loading,a=r.loading;s.start?s.first+=a.first-a.start:(s.start=a.start,s.first=a.first),s.end=a.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function ly(e,t=null){const n=t||e,r={frag:e,part:t,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},i=n.byteRangeStartOffset,s=n.byteRangeEndOffset;if(gp(i)&&gp(s)){var a;let t=i,n=s;if("initSegment"===e.sn&&("AES-128"===(o=null==(a=e.decryptdata)?void 0:a.method)||"AES-256"===o)){const e=s-i;e%16&&(n=s+(16-e%16)),0!==i&&(r.resetIV=!0,t=i-16)}r.rangeStart=t,r.rangeEnd=n}var o;return r}function cy(e,t){const n=new Error(`GAP ${e.gap?"tag":"attribute"} found`),r={type:vp.MEDIA_ERROR,details:wp.FRAG_GAP,fatal:!1,frag:e,error:n,networkDetails:null};return t&&(r.part=t),(t||e).stats.aborted=!0,new uy(r)}class uy extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class dy extends Pp{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class hy{constructor(e,t,n,r=0,i=-1,s=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=n,this.size=r,this.part=i,this.partial=s}}const fy={length:0,start:()=>0,end:()=>0};class py{static isBuffered(e,t){if(e){const n=py.getBuffered(e);for(let e=n.length;e--;)if(t>=n.start(e)&&t<=n.end(e))return!0}return!1}static bufferedRanges(e){if(e){const t=py.getBuffered(e);return py.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}static bufferInfo(e,t,n){if(e){const r=py.bufferedRanges(e);if(r.length)return py.bufferedInfo(r,t,n)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.length>1&&e.sort((e,t)=>e.start-t.start||t.end-e.end);let r=-1,i=[];if(n)for(let l=0;l<e.length;l++){t>=e[l].start&&t<=e[l].end&&(r=l);const s=i.length;if(s){const t=i[s-1].end;e[l].start-t<n?e[l].end>t&&(i[s-1].end=e[l].end):i.push(e[l])}else i.push(e[l])}else i=e;let s,a=0,o=t,A=t;for(let l=0;l<i.length;l++){const e=i[l].start,c=i[l].end;if(-1===r&&t>=e&&t<=c&&(r=l),t+n>=e&&t<c)o=e,A=c,a=A-t;else if(t+n<e){s=e;break}}return{len:a,start:o||0,end:A||0,nextStart:s,buffered:e,bufferedIndex:r}}static getBuffered(e){try{return e.buffered||fy}catch(c$){return Hp.log("failed to get media.buffered",c$),fy}}}const gy=/\{\$([a-zA-Z0-9-_]+)\}/g;function my(e){return gy.test(e)}function yy(e,t){if(null!==e.variableList||e.hasVariableRefs){const n=e.variableList;return t.replace(gy,t=>{const r=t.substring(2,t.length-1),i=null==n?void 0:n[r];return void 0===i?(e.playlistParsingError||(e.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${r}"`)),t):i})}return t}function vy(e,t,n){let r,i,s=e.variableList;if(s||(e.variableList=s={}),"QUERYPARAM"in t){r=t.QUERYPARAM;try{const e=new self.URL(n).searchParams;if(!e.has(r))throw new Error(`"${r}" does not match any query parameter in URI: "${n}"`);i=e.get(r)}catch(a){e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else r=t.NAME,i=t.VALUE;r in s?e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${r}"`)):s[r]=i||""}function wy(e,t,n){const r=t.IMPORT;if(n&&r in n){let t=e.variableList;t||(e.variableList=t={}),t[r]=n[r]}else e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}const by=/^(\d+)x(\d+)$/,Ey=/(.+?)=(".*?"|.*?)(?:,|$)/g;class By{constructor(e,t){"string"==typeof e&&(e=By.parseAttrList(e,t)),Dp(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>"X-"===e.substring(0,2))}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;const n=new Uint8Array(t.length/2);for(let e=0;e<t.length/2;e++)n[e]=parseInt(t.slice(2*e,2*e+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const n=this[e];return(n?n.split(/[ ,]+/):[]).reduce((e,t)=>(e[t.toLowerCase()]=!0,e),t)}bool(e){return"YES"===this[e]}decimalResolution(e){const t=by.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let n;const r={};for(Ey.lastIndex=0;null!==(n=Ey.exec(e));){const i=n[1].trim();let s=n[2];const a=0===s.indexOf('"')&&s.lastIndexOf('"')===s.length-1;let o=!1;if(a)s=s.slice(1,-1);else switch(i){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":o=!0}if(t&&(a||o))s=yy(t,s);else if(!o&&!a)switch(i){case"CLOSED-CAPTIONS":if("NONE"===s)break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Hp.warn(`${e}: attribute ${i} is missing quotes`)}r[i]=s}return r}}function Cy(e){return"ID"!==e&&"CLASS"!==e&&"CUE"!==e&&"START-DATE"!==e&&"DURATION"!==e&&"END-DATE"!==e&&"END-ON-NEXT"!==e}function Sy(e){return"SCTE35-OUT"===e||"SCTE35-IN"===e||"SCTE35-CMD"===e}class Ty{constructor(e,t,n=0){var r;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(null==t?void 0:t.tagAnchor)||null,this.tagOrder=null!=(r=null==t?void 0:t.tagOrder)?r:n,t){const n=t.attr;for(const t in n)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==n[t]){Hp.warn(`DATERANGE tag attribute: "${t}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=t;break}e=Dp(new By({}),n,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const e=(null==t?void 0:t.endDate)||new Date(this.attr["END-DATE"]);gp(e.getTime())&&(this._endDate=e)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return void 0===e?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return null===e||null===e.programDateTime?(Hp.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return null!==t?this._dateAtEnd=new Date(this._startDate.getTime()+1e3*t):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(gp(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return"com.apple.hls.interstitial"===this.class}get isValid(){return!!this.id&&!this._badValueForSameId&&gp(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}class xy{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e)return this.advanced=!0,void(this.updated=!0);const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&n>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(t=>{let n=t.decryptdata;return n||(t.setKeyFormat(e.keyFormat),n=t.decryptdata),!!n&&e.matches(n)})}get hasProgramDateTime(){return!!this.fragments.length&&gp(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){const e=this.driftEndTime-this.driftStartTime;if(e>0){return 1e3*(this.driftEnd-this.driftStart)/e}return 1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(-1!==t){for(let n=e.length;n--;)if(e[n].index>t)return e[n].index;return t}}return 0}get lastPartSn(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function ky(e,t){return e.length===t.length&&!e.some((e,n)=>e!==t[n])}function Iy(e,t){return!e&&!t||!(!e||!t)&&ky(e,t)}function Fy(e){return"AES-128"===e||"AES-256"===e||"AES-256-CTR"===e}function Ly(e){switch(e){case"AES-128":case"AES-256":return ty;case"AES-256-CTR":return ny;default:throw new Error(`invalid full segment method ${e}`)}}function Dy(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}function _y(e){return Uint8Array.from(unescape(encodeURIComponent(e)),e=>e.charCodeAt(0))}function Uy(e){const t=function(e,t,n){const r=e[t];e[t]=e[n],e[n]=r};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}function Py(e){const t=e.split(":");let n=null;if("data"===t[0]&&2===t.length){const e=t[1].split(";"),r=e[e.length-1].split(",");if(2===r.length){const t="base64"===r[0],i=r[1];t?(e.splice(-1,1),n=Dy(i)):n=function(e){const t=_y(e).subarray(0,16),n=new Uint8Array(16);return n.set(t,16-t.length),n}(i)}}return n}const Ry="undefined"!=typeof self?self:void 0;var Oy={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Qy="org.w3.clearkey",Ny="com.apple.streamingkeydelivery",My="com.microsoft.playready",Hy="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function jy(e){switch(e){case Ny:return Oy.FAIRPLAY;case My:return Oy.PLAYREADY;case Hy:return Oy.WIDEVINE;case Qy:return Oy.CLEARKEY}}function $y(e){switch(e){case Oy.FAIRPLAY:return Ny;case Oy.PLAYREADY:return My;case Oy.WIDEVINE:return Hy;case Oy.CLEARKEY:return Qy}}function Ky(e){const{drmSystems:t,widevineLicenseUrl:n}=e,r=t?[Oy.FAIRPLAY,Oy.WIDEVINE,Oy.PLAYREADY,Oy.CLEARKEY].filter(e=>!!t[e]):[];return!r[Oy.WIDEVINE]&&n&&r.push(Oy.WIDEVINE),r}const Vy=null!=Ry&&null!=(Gy=Ry.navigator)&&Gy.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;var Gy;function Wy(e){const t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),n=String.fromCharCode.apply(null,Array.from(t)),r=n.substring(n.indexOf("<"),n.length),i=(new DOMParser).parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(i){const e=i.childNodes[0]?i.childNodes[0].nodeValue:i.getAttribute("VALUE");if(e){const t=Dy(e).subarray(0,16);return Uy(t),t}}return null}let zy={};class Yy{static clearKeyUriToKeyIdMap(){zy={}}static setKeyIdForUri(e,t){zy[e]=t}constructor(e,t,n,r=[1],i=null,s){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=r,this.iv=i,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&!Fy(e),null!=s&&s.startsWith("0x")&&(this.keyId=new Uint8Array(Gp(s)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&ky(e.keyFormatVersions,this.keyFormatVersions)&&Iy(e.iv,this.iv)&&Iy(e.keyId,this.keyId)}isSupported(){if(this.method){if(Fy(this.method)||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case Ny:case Hy:case My:case Qy:return-1!==["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(e,t){if(!this.encrypted||!this.uri)return null;if(Fy(this.method)){let t=this.iv;t||("number"!=typeof e&&(Hp.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),t=function(e){const t=new Uint8Array(16);for(let n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t}(e));return new Yy(this.method,this.uri,"identity",this.keyFormatVersions,t)}if(this.keyId){const e=zy[this.uri];if(e&&!ky(this.keyId,e)&&Yy.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const n=Py(this.uri);if(n)switch(this.keyFormat){case Hy:if(this.pssh=n,!this.keyId){const e=function(e){const t=[];if(e instanceof ArrayBuffer){const n=e.byteLength;let r=0;for(;r+32<n;){const n=Rg(new DataView(e,r));t.push(n),r+=n.size}}return t}(n.buffer);if(e.length){var r;const t=e[0];this.keyId=null!=(r=t.kids)&&r.length?t.kids[0]:null}}this.keyId||(this.keyId=qy(t));break;case My:{const e=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=Pg(e,0,n),this.keyId=Wy(n);break}default:{let e=n.subarray(0,16);if(16!==e.length){const t=new Uint8Array(16);t.set(e,16-e.length),e=t}this.keyId=e;break}}if(!this.keyId||16!==this.keyId.byteLength){let e;e=function(e){const t=null==e?void 0:e[Hy];if(t)return t.keyId;return null}(t),e||(e=qy(t),e||(e=zy[this.uri])),e&&(this.keyId=e,Yy.setKeyIdForUri(this.uri,e))}return this}}function qy(e){const t=null==e?void 0:e[My];if(t){const e=Py(t.uri);if(e)return Wy(e)}return null}const Xy=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,Jy=/#EXT-X-MEDIA:(.*)/g,Zy=/^#EXT(?:INF|-X-TARGETDURATION):/m,ev=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),tv=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class nv{static findGroup(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.id===t)return r}}static resolve(e,t){return tg.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return Zy.test(e)}static parseMasterPlaylist(e,t){const n={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:my(e)},r=[];if(Xy.lastIndex=0,!e.startsWith("#EXTM3U"))return n.playlistParsingError=new Error("no EXTM3U delimiter"),n;let i;for(;null!=(i=Xy.exec(e));)if(i[1]){var s;const e=new By(i[1],n),a=yy(n,i[2]),o={attrs:e,bitrate:e.decimalInteger("BANDWIDTH")||e.decimalInteger("AVERAGE-BANDWIDTH"),name:e.NAME,url:nv.resolve(a,t)},A=e.decimalResolution("RESOLUTION");A&&(o.width=A.width,o.height=A.height),ov(e.CODECS,o);const l=e["SUPPLEMENTAL-CODECS"];l&&(o.supplemental={},ov(l,o.supplemental)),null!=(s=o.unknownCodecs)&&s.length||r.push(o),n.levels.push(o)}else if(i[3]){const e=i[3],r=i[4];switch(e){case"SESSION-DATA":{const e=new By(r,n),t=e["DATA-ID"];t&&(null===n.sessionData&&(n.sessionData={}),n.sessionData[t]=e);break}case"SESSION-KEY":{const e=sv(r,t,n);e.encrypted&&e.isSupported()?(null===n.sessionKeys&&(n.sessionKeys=[]),n.sessionKeys.push(e)):Hp.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${r}"`);break}case"DEFINE":vy(n,new By(r,n),t);break;case"CONTENT-STEERING":{const e=new By(r,n);n.contentSteering={uri:nv.resolve(e["SERVER-URI"],t),pathwayId:e["PATHWAY-ID"]||"."};break}case"START":n.startTimeOffset=av(r)}}const a=r.length>0&&r.length<n.levels.length;return n.levels=a?r:n.levels,0===n.levels.length&&(n.playlistParsingError=new Error("no levels found in manifest")),n}static parseMasterPlaylistMedia(e,t,n){let r;const i={},s=n.levels,a={AUDIO:s.map(e=>({id:e.attrs.AUDIO,audioCodec:e.audioCodec})),SUBTITLES:s.map(e=>({id:e.attrs.SUBTITLES,textCodec:e.textCodec})),"CLOSED-CAPTIONS":[]};let o=0;for(Jy.lastIndex=0;null!==(r=Jy.exec(e));){const e=new By(r[1],n),s=e.TYPE;if(s){const n=a[s],r=i[s]||[];i[s]=r;const A=e.LANGUAGE,l=e["ASSOC-LANGUAGE"],c=e.CHANNELS,u=e.CHARACTERISTICS,d=e["INSTREAM-ID"],h={attrs:e,bitrate:0,id:o++,groupId:e["GROUP-ID"]||"",name:e.NAME||A||"",type:s,default:e.bool("DEFAULT"),autoselect:e.bool("AUTOSELECT"),forced:e.bool("FORCED"),lang:A,url:e.URI?nv.resolve(e.URI,t):""};if(l&&(h.assocLang=l),c&&(h.channels=c),u&&(h.characteristics=u),d&&(h.instreamId=d),null!=n&&n.length){const e=nv.findGroup(n,h.groupId)||n[0];Av(h,e,"audioCodec"),Av(h,e,"textCodec")}r.push(h)}}return i}static parseLevelPlaylist(e,t,n,r,i,s){var a;const o={url:t},A=new xy(t),l=A.fragments,c=[];let u,d,h,f,p=null,g=0,m=0,y=0,v=0,w=0,b=null,E=new Ag(r,o),B=-1,C=!1,S=null;if(ev.lastIndex=0,A.m3u8=e,A.hasVariableRefs=my(e),"#EXTM3U"!==(null==(a=ev.exec(e))?void 0:a[0]))return A.playlistParsingError=new Error("Missing format identifier #EXTM3U"),A;for(;null!==(u=ev.exec(e));){C&&(C=!1,E=new Ag(r,o),E.playlistOffset=y,E.setStart(y),E.sn=g,E.cc=v,w&&(E.bitrate=w),E.level=n,p&&(E.initSegment=p,p.rawProgramDateTime&&(E.rawProgramDateTime=p.rawProgramDateTime,p.rawProgramDateTime=null),S&&(E.setByteRange(S),S=null)));const e=u[1];if(e){E.duration=parseFloat(e);const t=(" "+u[2]).slice(1);E.title=t||null,E.tagList.push(t?["INF",e,t]:["INF",e])}else if(u[3]){if(gp(E.duration)){E.playlistOffset=y,E.setStart(y),h&&uv(E,h,A),E.sn=g,E.level=n,E.cc=v,l.push(E);const e=(" "+u[3]).slice(1);E.relurl=yy(A,e),lv(E,b,c),b=E,y+=E.duration,g++,m=0,C=!0}}else{if(u=u[0].match(tv),!u){Hp.warn("No matches on slow regex match for level playlist!");continue}for(d=1;d<u.length&&void 0===u[d];d++);const e=(" "+u[d]).slice(1),i=(" "+u[d+1]).slice(1),a=u[d+2]?(" "+u[d+2]).slice(1):null;switch(e){case"BYTERANGE":b?E.setByteRange(i,b):E.setByteRange(i);break;case"PROGRAM-DATE-TIME":E.rawProgramDateTime=i,E.tagList.push(["PROGRAM-DATE-TIME",i]),-1===B&&(B=l.length);break;case"PLAYLIST-TYPE":A.type&&dv(A,e,u),A.type=i.toUpperCase();break;case"MEDIA-SEQUENCE":0!==A.startSN?dv(A,e,u):l.length>0&&hv(A,e,u),g=A.startSN=parseInt(i);break;case"SKIP":{A.skippedSegments&&dv(A,e,u);const t=new By(i,A),n=t.decimalInteger("SKIPPED-SEGMENTS");if(gp(n)){A.skippedSegments+=n;for(let e=n;e--;)l.push(null);g+=n}const r=t.enumeratedString("RECENTLY-REMOVED-DATERANGES");r&&(A.recentlyRemovedDateranges=(A.recentlyRemovedDateranges||[]).concat(r.split("\t")));break}case"TARGETDURATION":0!==A.targetduration&&dv(A,e,u),A.targetduration=Math.max(parseInt(i),1);break;case"VERSION":null!==A.version&&dv(A,e,u),A.version=parseInt(i);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":A.live||dv(A,e,u),A.live=!1;break;case"#":(i||a)&&E.tagList.push(a?[i,a]:[i]);break;case"DISCONTINUITY":v++,E.tagList.push(["DIS"]);break;case"GAP":E.gap=!0,E.tagList.push([e]);break;case"BITRATE":E.tagList.push([e,i]),w=1e3*parseInt(i),gp(w)?E.bitrate=w:w=0;break;case"DATERANGE":{const e=new By(i,A),t=new Ty(e,A.dateRanges[e.ID],A.dateRangeTagCount);A.dateRangeTagCount++,t.isValid||A.skippedSegments?A.dateRanges[t.id]=t:Hp.warn(`Ignoring invalid DATERANGE tag: "${i}"`),E.tagList.push(["EXT-X-DATERANGE",i]);break}case"DEFINE":{const e=new By(i,A);"IMPORT"in e?wy(A,e,s):vy(A,e,t)}break;case"DISCONTINUITY-SEQUENCE":0!==A.startCC?dv(A,e,u):l.length>0&&hv(A,e,u),A.startCC=v=parseInt(i);break;case"KEY":{const e=sv(i,t,A);if(e.isSupported()){if("NONE"===e.method){h=void 0;break}h||(h={});const t=h[e.keyFormat];null!=t&&t.matches(e)||(t&&(h=Dp({},h)),h[e.keyFormat]=e)}else Hp.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${i}"`);break}case"START":A.startTimeOffset=av(i);break;case"MAP":{const e=new By(i,A);if(E.duration){const t=new Ag(r,o);cv(t,e,n,h),p=t,E.initSegment=p,p.rawProgramDateTime&&!E.rawProgramDateTime&&(E.rawProgramDateTime=p.rawProgramDateTime)}else{const t=E.byteRangeEndOffset;if(t){const e=E.byteRangeStartOffset;S=`${t-e}@${e}`}else S=null;cv(E,e,n,h),p=E,C=!0}p.cc=v;break}case"SERVER-CONTROL":f&&dv(A,e,u),f=new By(i),A.canBlockReload=f.bool("CAN-BLOCK-RELOAD"),A.canSkipUntil=f.optionalFloat("CAN-SKIP-UNTIL",0),A.canSkipDateRanges=A.canSkipUntil>0&&f.bool("CAN-SKIP-DATERANGES"),A.partHoldBack=f.optionalFloat("PART-HOLD-BACK",0),A.holdBack=f.optionalFloat("HOLD-BACK",0);break;case"PART-INF":{A.partTarget&&dv(A,e,u);const t=new By(i);A.partTarget=t.decimalFloatingPoint("PART-TARGET");break}case"PART":{let e=A.partList;e||(e=A.partList=[]);const t=m>0?e[e.length-1]:void 0,n=m++,r=new By(i,A),s=new lg(r,E,o,n,t);e.push(s),E.duration+=s.duration;break}case"PRELOAD-HINT":{const e=new By(i,A);A.preloadHint=e;break}case"RENDITION-REPORT":{const e=new By(i,A);A.renditionReports=A.renditionReports||[],A.renditionReports.push(e);break}default:Hp.warn(`line parsed but not handled: ${u}`)}}}b&&!b.relurl?(l.pop(),y-=b.duration,A.partList&&(A.fragmentHint=b)):A.partList&&(lv(E,b,c),E.cc=v,A.fragmentHint=E,h&&uv(E,h,A)),A.targetduration||(A.playlistParsingError=new Error("Missing Target Duration"));const T=l.length,x=l[0],k=l[T-1];if(y+=A.skippedSegments*A.targetduration,y>0&&T&&k){A.averagetargetduration=y/T;const e=k.sn;A.endSN="initSegment"!==e?e:0,A.live||(k.endList=!0),B>0&&(!function(e,t){let n=e[t];for(let r=t;r--;){const t=e[r];if(!t)return;t.programDateTime=n.programDateTime-1e3*t.duration,n=t}}(l,B),x&&c.unshift(x))}return A.fragmentHint&&(y+=A.fragmentHint.duration),A.totalduration=y,c.length&&A.dateRangeTagCount&&x&&rv(c,A),A.endCC=v,A}}function rv(e,t){let n=e.length;if(!n){if(!t.hasProgramDateTime)return;{const r=t.fragments[t.fragments.length-1];e.push(r),n++}}const r=e[n-1],i=t.live?1/0:t.totalduration,s=Object.keys(t.dateRanges);for(let o=s.length;o--;){const A=t.dateRanges[s[o]],l=A.startDate.getTime();A.tagAnchor=r.ref;for(let r=n;r--;){var a;if((null==(a=e[r])?void 0:a.sn)<t.startSN)break;const n=iv(t,l,e,r,i);if(-1!==n){A.tagAnchor=t.fragments[n].ref;break}}}}function iv(e,t,n,r,i){const s=n[r];if(s){const o=s.programDateTime;if(t>=o||0===r){var a;if(t<=o+1e3*(((null==(a=n[r+1])?void 0:a.start)||i)-s.start)){const i=n[r].sn-e.startSN;if(i<0)return-1;const s=e.fragments;if(s.length>n.length){for(let a=(n[r+1]||s[s.length-1]).sn-e.startSN;a>i;a--){const e=s[a].programDateTime;if(t>=e&&t<e+1e3*s[a].duration)return a}}return i}}}return-1}function sv(e,t,n){var r,i;const s=new By(e,n),a=null!=(r=s.METHOD)?r:"",o=s.URI,A=s.hexadecimalInteger("IV"),l=s.KEYFORMATVERSIONS,c=null!=(i=s.KEYFORMAT)?i:"identity";o&&s.IV&&!A&&Hp.error(`Invalid IV: ${s.IV}`);const u=o?nv.resolve(o,t):"",d=(l||"1").split("/").map(Number).filter(Number.isFinite);return new Yy(a,u,c,d,A,s.KEYID)}function av(e){const t=new By(e).decimalFloatingPoint("TIME-OFFSET");return gp(t)?t:null}function ov(e,t){let n=(e||"").split(/[ ,]+/).filter(e=>e);["video","audio","text"].forEach(e=>{const r=n.filter(t=>Ng(t,e));r.length&&(t[`${e}Codec`]=r.map(e=>e.split("/")[0]).join(","),n=n.filter(e=>-1===r.indexOf(e)))}),t.unknownCodecs=n}function Av(e,t,n){const r=t[n];r&&(e[n]=r)}function lv(e,t,n){e.rawProgramDateTime?n.push(e):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime)}function cv(e,t,n,r){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=n,e.sn="initSegment",r&&(e.levelkeys=r),e.initSegment=null}function uv(e,t,n){e.levelkeys=t;const{encryptedFragments:r}=n;r.length&&r[r.length-1].levelkeys===t||!Object.keys(t).some(e=>t[e].isCommonEncryption)||r.push(e)}function dv(e,t,n){e.playlistParsingError=new Error(`#EXT-X-${t} must not appear more than once (${n[0]})`)}function hv(e,t,n){e.playlistParsingError=new Error(`#EXT-X-${t} must appear before the first Media Segment (${n[0]})`)}function fv(e,t){const n=t.startPTS;if(gp(n)){let r,i=0;t.sn>e.sn?(i=n-e.start,r=e):(i=e.start-n,r=t),r.duration!==i&&r.setDuration(i)}else if(t.sn>e.sn){e.cc===t.cc&&e.minEndPTS?t.setStart(e.start+(e.minEndPTS-e.start)):t.setStart(e.start+e.duration)}else t.setStart(Math.max(e.start-t.duration,0))}function pv(e,t,n,r,i,s,a){r-n<=0&&(a.warn("Fragment should have a positive duration",t),r=n+t.duration,s=i+t.duration);let o=n,A=r;const l=t.startPTS,c=t.endPTS;if(gp(l)){const u=Math.abs(l-n);e&&u>e.totalduration?a.warn(`media timestamps and playlist times differ by ${u}s for level ${t.level} ${e.url}`):gp(t.deltaPTS)?t.deltaPTS=Math.max(u,t.deltaPTS):t.deltaPTS=u,o=Math.max(n,l),n=Math.min(n,l),i=void 0!==t.startDTS?Math.min(i,t.startDTS):i,A=Math.min(r,c),r=Math.max(r,c),s=void 0!==t.endDTS?Math.max(s,t.endDTS):s}const u=n-t.start;0!==t.start&&t.setStart(n),t.setDuration(r-t.start),t.startPTS=n,t.maxStartPTS=o,t.startDTS=i,t.endPTS=r,t.minEndPTS=A,t.endDTS=s;const d=t.sn;if(!e||d<e.startSN||d>e.endSN)return 0;let h;const f=d-e.startSN,p=e.fragments;for(p[f]=t,h=f;h>0;h--)fv(p[h],p[h-1]);for(h=f;h<p.length-1;h++)fv(p[h],p[h+1]);return e.fragmentHint&&fv(p[p.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,u}function gv(e,t,n){if(e===t)return;let r=null;const i=e.fragments;for(let c=i.length-1;c>=0;c--){const e=i[c].initSegment;if(e){r=e;break}}let s;e.fragmentHint&&delete e.fragmentHint.endPTS,function(e,t,n){const r=t.skippedSegments,i=Math.max(e.startSN,t.startSN)-t.startSN,s=(e.fragmentHint?1:0)+(r?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,a=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,A=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments;for(let l=i;l<=s;l++){const i=A[a+l];let s=o[l];if(r&&!s&&i&&(s=t.fragments[l]=i),i&&s){n(i,s,l,o);const r=i.relurl,a=s.relurl;if(r&&Sv(r,a))return void(t.playlistParsingError=mv(`media sequence mismatch ${s.sn}:`,e,t,i,s));if(i.cc!==s.cc)return void(t.playlistParsingError=mv(`discontinuity sequence mismatch (${i.cc}!=${s.cc})`,e,t,i,s))}}}(e,t,(e,n,i,a)=>{if((!t.startCC||t.skippedSegments)&&n.cc!==e.cc){const r=e.cc-n.cc;for(let e=i;e<a.length;e++)a[e].cc+=r;t.endCC=a[a.length-1].cc}gp(e.startPTS)&&gp(e.endPTS)&&(n.setStart(n.startPTS=e.startPTS),n.startDTS=e.startDTS,n.maxStartPTS=e.maxStartPTS,n.endPTS=e.endPTS,n.endDTS=e.endDTS,n.minEndPTS=e.minEndPTS,n.setDuration(e.endPTS-e.startPTS),n.duration&&(s=n),t.PTSKnown=t.alignedSliding=!0),e.hasStreams&&(n.elementaryStreams=e.elementaryStreams),n.loader=e.loader,e.hasStats&&(n.stats=e.stats),e.initSegment&&(n.initSegment=e.initSegment,r=e.initSegment)});const a=t.fragments,o=t.fragmentHint?a.concat(t.fragmentHint):a;if(r&&o.forEach(e=>{var t;!e||e.initSegment&&e.initSegment.relurl!==(null==(t=r)?void 0:t.relurl)||(e.initSegment=r)}),t.skippedSegments){if(t.deltaUpdateFailed=a.some(e=>!e),t.deltaUpdateFailed){n.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let e=t.skippedSegments;e--;)a.shift();t.startSN=a[0].sn}else{t.canSkipDateRanges&&(t.dateRanges=function(e,t,n){const{dateRanges:r,recentlyRemovedDateranges:i}=t,s=Dp({},e);i&&i.forEach(e=>{delete s[e]});const a=Object.keys(s).length;if(!a)return r;return Object.keys(r).forEach(e=>{const t=s[e],i=new Ty(r[e].attr,t);i.isValid?(s[e]=i,t||(i.tagOrder+=a)):n.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${gm(r[e].attr)}"`)}),s}(e.dateRanges,t,n));const r=e.fragments.filter(e=>e.rawProgramDateTime);if(e.hasProgramDateTime&&!t.hasProgramDateTime)for(let e=1;e<o.length;e++)null===o[e].programDateTime&&lv(o[e],o[e-1],r);rv(r,t)}t.endCC=a[a.length-1].cc}if(!t.startCC){var A;const n=bv(e,t.startSN-1);t.startCC=null!=(A=null==n?void 0:n.cc)?A:a[0].cc}!function(e,t,n){if(e&&t){let r=0;for(let i=0,s=e.length;i<=s;i++){const s=e[i],a=t[i+r];s&&a&&s.index===a.index&&s.fragment.sn===a.fragment.sn?n(s,a):r--}}}(e.partList,t.partList,(e,t)=>{t.elementaryStreams=e.elementaryStreams,t.stats=e.stats}),s?pv(t,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS,n):yv(e,t),a.length&&(t.totalduration=t.edge-a[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;const l=t.advancedDateTime;if(t.advanced&&l){const e=t.edge;t.driftStart||(t.driftStartTime=l,t.driftStart=e),t.driftEndTime=l,t.driftEnd=e}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime;-1===t.requestScheduled&&(t.requestScheduled=e.requestScheduled)}function mv(e,t,n,r,i){return new Error(`${e} ${i.url}\nPlaylist starting @${t.startSN}\n${t.m3u8}\n\nPlaylist starting @${n.startSN}\n${n.m3u8}`)}function yv(e,t,n=!0){const r=t.startSN+t.skippedSegments-e.startSN,i=e.fragments,s=r>=0;let a=0;if(s&&r<i.length)a=i[r].start;else if(s&&t.startSN===e.endSN+1)a=e.fragmentEnd;else if(s&&n)a=e.fragmentStart+r*t.levelTargetDuration;else{if(t.skippedSegments||0!==t.fragmentStart)return;a=e.fragmentStart}vv(t,a)}function vv(e,t){if(t){const n=e.fragments;for(let r=e.skippedSegments;r<n.length;r++)n[r].addStart(t);e.fragmentHint&&e.fragmentHint.addStart(t)}}function wv(e,t=1/0){let n=1e3*e.targetduration;if(e.updated){const r=e.fragments,i=4;if(r.length&&n*i>t){const e=1e3*r[r.length-1].duration;e<n&&(n=e)}}else n/=2;return Math.round(n)}function bv(e,t,n){if(!e)return null;let r=e.fragments[t-e.startSN];return r||(r=e.fragmentHint,r&&r.sn===t?r:t<e.startSN&&n&&n.sn===t?n:null)}function Ev(e,t,n){return e?Bv(e.partList,t,n):null}function Bv(e,t,n){if(e)for(let r=e.length;r--;){const i=e[r];if(i.index===n&&i.fragment.sn===t)return i}return null}function Cv(e){e.forEach((e,t)=>{var n;null==(n=e.details)||n.fragments.forEach(e=>{e.level=t,e.initSegment&&(e.initSegment.level=t)})})}function Sv(e,t){return!(e===t||!t)&&Tv(e)!==Tv(t)}function Tv(e){return e.replace(/\?[^?]*$/,"")}function xv(e,t){for(let r=0,i=e.length;r<i;r++){var n;if((null==(n=e[r])?void 0:n.cc)===t)return e[r]}return null}function kv(e,t){const n=e.start+t;e.startPTS=n,e.setStart(n),e.endPTS=n+e.duration}function Iv(e,t){const n=t.fragments;for(let r=0,i=n.length;r<i;r++)kv(n[r],e);t.fragmentHint&&kv(t.fragmentHint,e),t.alignedSliding=!0}function Fv(e,t){if(!function(e,t){return!!(e&&t.startCC<e.endCC&&t.endCC>e.startCC)}(t,e))return;const n=Math.min(t.endCC,e.endCC),r=xv(t.fragments,n),i=xv(e.fragments,n);if(!r||!i)return;Hp.log(`Aligning playlist at start of dicontinuity sequence ${n}`);Iv(r.start-i.start,e)}function Lv(e,t){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;const n=e.fragments,r=t.fragments;if(!n.length||!r.length)return;let i,s;const a=Math.min(t.endCC,e.endCC);t.startCC<a&&e.startCC<a&&(i=xv(r,a),s=xv(n,a)),i&&s||(i=r[Math.floor(r.length/2)],s=xv(n,i.cc)||n[Math.floor(n.length/2)]);const o=i.programDateTime,A=s.programDateTime;if(!o||!A)return;Iv((A-o)/1e3-(s.start-i.start),e)}function Dv(e,t,n){_v(e,t,n),e.addEventListener(t,n)}function _v(e,t,n){e.removeEventListener(t,n)}const Uv=function(e){let t="";const n=e.length;for(let r=0;r<n;r++)t+=`[${e.start(r).toFixed(3)}-${e.end(r).toFixed(3)}]`;return t},Pv="STOPPED",Rv="IDLE",Ov="KEY_LOADING",Qv="FRAG_LOADING",Nv="FRAG_LOADING_WAITING_RETRY",Mv="WAITING_TRACK",Hv="PARSING",jv="PARSED",$v="ENDED",Kv="ERROR",Vv="WAITING_INIT_PTS",Gv="WAITING_LEVEL";class Wv extends dy{constructor(e,t,n,r,i){super(r,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=Pv,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:e,fragCurrent:t,media:n,mediaBuffer:r,state:i}=this,s=n?n.currentTime:0,a=py.bufferInfo(r||n,s,e.maxBufferHole),o=!a.len;if(this.log(`Media seeking to ${gp(s)?s.toFixed(3):s}, state: ${i}, ${o?"out of":"in"} buffer`),this.state===$v)this.resetLoadingState();else if(t){const n=e.maxFragLookUpTolerance,r=t.start-n,i=t.start+t.duration+n;if(o||i<a.start||r>a.end){const e=s>i;(s<r||e)&&(e&&t.loader&&(this.log(`Cancelling fragment load for seek (sn: ${t.sn})`),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(n){this.fragmentTracker.removeFragmentsInRange(s,1/0,this.playlistType,!0);if(s>this.lastCurrentTime&&(this.lastCurrentTime=s),!this.loadingParts){const e=Math.max(a.end,s),t=this.shouldLoadParts(this.getLevelDetails(),e);t&&(this.log(`LL-Part loading ON after seeking to ${s.toFixed(2)} with buffer @${e.toFixed(2)}`),this.loadingParts=t)}}this.hls.hasEnoughToStart||(this.log(`Setting ${o?"startPosition":"nextLoadPosition"} to ${s} for seek without enough to start`),this.nextLoadPosition=s,o&&(this.startPosition=s)),o&&this.state===Rv&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=i,this.hls=e,this.fragmentLoader=new Ay(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new ay(e.config)}registerListeners(){const{hls:e}=this;e.on(bp.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(bp.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.on(bp.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(bp.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(bp.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(bp.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.off(bp.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(bp.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===Pv)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Pv}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return-1===t&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const n=e.end||0,r=this.config.timelineOffset||0;if(n<=r)return!1;const i=e.buffered;this.config.maxBufferHole&&i&&i.length>1&&(e=py.bufferedInfo(i,e.start,0));const s=e.nextStart;if(s&&s>r&&s<t.edge)return!1;if(this.media.currentTime<e.start)return!1;const a=t.partList;if(null!=a&&a.length){const e=a[a.length-1];return py.isBuffered(this.media,e.start+e.duration/2)}const o=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(o)}getLevelDetails(){if(this.levels&&null!==this.levelLastLoaded)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;var t;return e?(null==(t=this.getLevelDetails())?void 0:t.appliedTimelineOffset)||e:0}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;Dv(n,"seeking",this.onMediaSeeking),Dv(n,"ended",this.onMediaEnded);const r=this.config;this.levels&&r.autoStartLoad&&this.state===Pv&&this.startLoad(r.startPosition)}onMediaDetaching(e,t){const n=!!t.transferMedia,r=this.media;if(null!==r){if(r.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),_v(r,"seeking",this.onMediaSeeking),_v(r,"ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n)return this.resetLoadingState(),void this.resetTransmuxer();this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=Pv,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this.startFragRequested=!0,this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){this._doFragLoad(e,t,n,e=>{const t=e.frag;if(this.fragContextChanged(t))return this.warn(`${t.type} sn: ${t.sn}${e.part?" part: "+e.part.index:""} of ${this.fragInfo(t,!1,e.part)}) was dropped during download.`),void this.fragmentTracker.removeFragment(t);t.stats.chunkCount++,this._handleFragmentLoadProgress(e)}).then(e=>{if(!e)return;const t=this.state,n=e.frag;this.fragContextChanged(n)?(t===Qv||!this.fragCurrent&&t===Hv)&&(this.fragmentTracker.removeFragment(n),this.state=Rv):("payload"in e&&(this.log(`Loaded ${n.type} sn: ${n.sn} of ${this.playlistLabel()} ${n.level}`),this.hls.trigger(bp.FRAG_LOADED,e)),this._handleFragmentLoadComplete(e))}).catch(t=>{this.state!==Pv&&this.state!==Kv&&(this.warn(`Frag error: ${(null==t?void 0:t.message)||t}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===zm){const t=e.type,r=this.getFwdBufferInfo(this.mediaBuffer,t),i=Math.max(e.duration,r?r.len:this.config.maxBufferLength),s=this.backtrackFragment;(1===(s?e.sn-s.sn:0)||this.reduceMaxBufferLength(i,e.duration))&&n.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===Ym&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return(null==t?void 0:t.live)&&"EVENT"!==t.type&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,n=null){if(!(e-t))return;const r={startOffset:e,endOffset:t,type:n};this.hls.trigger(bp.BUFFER_FLUSHING,r)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(e=>{const t=null==e?void 0:e.frag;if(!t||this.fragContextChanged(t)||!this.levels)throw new Error("init load aborted");return e}).then(e=>{const{hls:t}=this,{frag:n,payload:r}=e,i=n.decryptdata;if(r&&r.byteLength>0&&null!=i&&i.key&&i.iv&&Fy(i.method)){const s=self.performance.now();return this.decrypter.decrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer,Ly(i.method)).catch(e=>{throw t.trigger(bp.ERROR,{type:vp.MEDIA_ERROR,details:wp.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:n}),e}).then(r=>{const i=self.performance.now();return t.trigger(bp.FRAG_DECRYPTED,{frag:n,payload:r,stats:{tstart:s,tdecrypt:i}}),e.payload=r,this.completeInitSegmentLoad(e)})}return this.completeInitSegmentLoad(e)}).catch(t=>{this.state!==Pv&&this.state!==Kv&&(this.warn(t),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state!==Pv&&(this.state=Rv),e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var n,r;const i=e.tracks;if(i&&!t.encrypted&&(null!=(n=i.audio)&&n.encrypted||null!=(r=i.video)&&r.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const e=this.media,n=new Error(`Encrypted track with no key in ${this.fragInfo(t)} (media ${e?"attached mediaKeys: "+e.mediaKeys:"detached"})`);return this.warn(n.message),!e||e.mediaKeys?!1:(this.hls.trigger(bp.ERROR,{type:vp.KEY_SYSTEM_ERROR,details:wp.KEY_SYSTEM_NO_KEYS,fatal:!1,error:n,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${n?Uv(py.getBuffered(n)):"(detached)"})`),og(e)){var r;if(e.type!==kp){const t=e.elementaryStreams;if(!Object.keys(t).some(e=>!!t[e]))return void(this.state=Rv)}const t=null==(r=this.levels)?void 0:r[e.level];null!=t&&t.fragmentError&&(this.log(`Resetting level fragment error count of ${t.fragmentError} on frag buffered`),t.fragmentError=0)}this.state=Rv}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:r,partsLoaded:i}=e,s=!i||0===i.length||i.some(e=>!e),a=new hy(n.level,n.sn,n.stats.chunkCount+1,0,r?r.index:-1,!s);t.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,n=null,r){var i;this.fragCurrent=e;const s=t.details;if(!this.levels||!s)throw new Error(`frag load aborted, missing level${s?"":" detail"}s`);let a=null;if(!e.encrypted||null!=(i=e.decryptdata)&&i.key)e.encrypted||(a=this.keyLoader.loadClear(e,s.encryptedFragments,this.startFragRequested),a&&this.log("[eme] blocking frag load until media-keys acquired"));else if(this.log(`Loading key for ${e.sn} of [${s.startSN}-${s.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=Ov,this.fragCurrent=e,a=this.keyLoader.load(e).then(e=>{if(!this.fragContextChanged(e.frag))return this.hls.trigger(bp.KEY_LOADED,e),this.state===Ov&&(this.state=Rv),e}),this.hls.trigger(bp.KEY_LOADING,{frag:e}),null===this.fragCurrent)return this.log("context changed in KEY_LOADING"),Promise.resolve(null);const o=this.fragPrevious;if(og(e)&&(!o||e.sn!==o.sn)){const n=this.shouldLoadParts(t.details,e.end);n!==this.loadingParts&&(this.log(`LL-Part loading ${n?"ON":"OFF"} loading sn ${null==o?void 0:o.sn}->${e.sn}`),this.loadingParts=n)}if(n=Math.max(e.start,n||0),this.loadingParts&&og(e)){const i=s.partList;if(i&&r){n>s.fragmentEnd&&s.fragmentHint&&(e=s.fragmentHint);const o=this.getNextPart(i,e,n);if(o>-1){const A=i[o];let l;return e=this.fragCurrent=A.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${A.index} (${o}/${i.length-1}) of ${this.fragInfo(e,!1,A)}) cc: ${e.cc} [${s.startSN}-${s.endSN}], target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=A.start+A.duration,this.state=Qv,l=a?a.then(n=>!n||this.fragContextChanged(n.frag)?null:this.doFragPartsLoad(e,A,t,r)).catch(e=>this.handleFragLoadError(e)):this.doFragPartsLoad(e,A,t,r).catch(e=>this.handleFragLoadError(e)),this.hls.trigger(bp.FRAG_LOADING,{frag:e,part:A,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):l}if(!e.url||this.loadedEndOfParts(i,n))return Promise.resolve(null)}}var A;if(og(e)&&this.loadingParts)this.log(`LL-Part loading OFF after next part miss @${n.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${null==(A=s.partList)?void 0:A.filter(e=>e.loaded).map(e=>`[${e.start}-${e.end}]`)}`),this.loadingParts=!1;else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+s.startSN+"-"+s.endSN+"]"}, target: ${parseFloat(n.toFixed(3))}`),gp(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Qv;const l=this.config.progressive;let c;return c=l&&a?a.then(t=>!t||this.fragContextChanged(t.frag)?null:this.fragmentLoader.load(e,r)).catch(e=>this.handleFragLoadError(e)):Promise.all([this.fragmentLoader.load(e,l?r:void 0),a]).then(([e])=>(!l&&r&&r(e),e)).catch(e=>this.handleFragLoadError(e)),this.hls.trigger(bp.FRAG_LOADING,{frag:e,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):c}doFragPartsLoad(e,t,n,r){return new Promise((i,s)=>{var a;const o=[],A=null==(a=n.details)?void 0:a.partList,l=t=>{this.fragmentLoader.loadPart(e,t,r).then(r=>{o[t.index]=r;const s=r.part;this.hls.trigger(bp.FRAG_LOADED,r);const a=Ev(n.details,e.sn,t.index+1)||Bv(A,e.sn,t.index+1);if(!a)return i({frag:e,part:s,partsLoaded:o});l(a)}).catch(s)};l(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;t.frag&&t.details===wp.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):t.frag&&t.type===vp.KEY_SYSTEM_ERROR?(t.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(t.frag)):this.hls.trigger(bp.ERROR,t)}else this.hls.trigger(bp.ERROR,{type:vp.OTHER_ERROR,details:wp.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==Hv)return void(this.fragCurrent||this.state===Pv||this.state===Kv||(this.state=Rv));const{frag:n,part:r,level:i}=t,s=self.performance.now();n.stats.parsing.end=s,r&&(r.stats.parsing.end=s);const a=this.getLevelDetails(),o=a&&n.sn>a.endSN||this.shouldLoadParts(a,n.end);o!==this.loadingParts&&(this.log(`LL-Part loading ${o?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=o),this.updateLevelTiming(n,r,i,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var n;const i=e.partList[0];if(i.fragment.type===kp)return!1;if(t>=i.end+((null==(n=e.fragmentHint)?void 0:n.duration)||0)){var r;if((this.hls.hasEnoughToStart?(null==(r=this.media)?void 0:r.currentTime)||this.lastCurrentTime:this.getLoadPosition())>i.start-i.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:r,sn:i,part:s}=e;if(null==t||!t[r])return this.warn(`Levels object was unset while buffering fragment ${i} of ${this.playlistLabel()} ${r}. The current chunk will not be buffered.`),null;const a=t[r],o=a.details,A=s>-1?Ev(o,i,s):null,l=A?A.fragment:bv(o,i,n);return l?(n&&n!==l&&(l.stats=n.stats),{frag:l,part:A,level:a}):null}bufferFragmentData(e,t,n,r,i){if(this.state!==Hv)return;const{data1:s,data2:a}=e;let o=s;if(a&&(o=Ig(s,a)),!o.length)return;const A=this.initPTS[t.cc],l=A?-A.baseTime/A.timescale:void 0,c={type:e.type,frag:t,part:n,chunkMeta:r,offset:l,parent:t.type,data:o};if(this.hls.trigger(bp.BUFFER_APPENDING,c),e.dropped&&e.independent&&!n){if(i)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!py.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,e.start);const n=t.currentTime,r=py.bufferInfo(t,n,0),i=e.duration,s=Math.min(2*this.config.maxFragLookUpTolerance,.25*i),a=Math.max(Math.min(e.start-s,r.end-s),n+s);e.start-a>s&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,t){var n;const r=this.getLoadPosition();if(!gp(r))return null;const i=this.lastCurrentTime>r||null!=(n=this.media)&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,r,t,i)}getFwdBufferInfoAtPos(e,t,n,r){const i=py.bufferInfo(e,t,r);if(0===i.len&&void 0!==i.nextStart){const s=this.fragmentTracker.getBufferedFrag(t,n);if(s&&(i.nextStart<=s.end||s.gap)){const n=Math.max(Math.min(i.nextStart,s.end)-t,r);return py.bufferInfo(e,t,n)}}return i}getMaxBufferLength(e){const{config:t}=this;let n;return n=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,r=Math.max(Math.min(e-t,n.maxBufferLength),t),i=Math.max(e-3*t,n.maxMaxBufferLength/2,r);return i>=r&&(n.maxMaxBufferLength=i,this.warn(`Reduce max buffer length to ${i}s`),!0)}getAppendedFrag(e,t=Tp){const n=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return n&&"fragment"in n?n.fragment:n}getNextFragment(e,t){const n=t.fragments,r=n.length;if(!r)return null;const{config:i}=this,s=n[0].start,a=i.lowLatencyMode&&!!t.partList;let o=null;if(t.live){const n=i.initialLiveManifestSize;if(r<n)return this.warn(`Not enough fragments to start playback (have: ${r}, need: ${n})`),null;if(!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||e<s){var A;a&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),o=this.getInitialLiveFragment(t);const n=this.hls.startPosition,r=this.hls.liveSyncPosition,i=o?(-1!==n&&n>=s?n:r)||o.start:e;this.log(`Setting startPosition to ${i} to match start frag at live edge. mainStart: ${n} liveSyncPosition: ${r} frag.start: ${null==(A=o)?void 0:A.start}`),this.startPosition=this.nextLoadPosition=i}}else e<=s&&(o=n[0]);if(!o){const n=this.loadingParts?t.partEnd:t.fragmentEnd;o=this.getFragmentAtPosition(e,n,t)}let l=this.filterReplacedPrimary(o,t);if(!l&&o){const e=o.sn-t.startSN;l=this.filterReplacedPrimary(n[e+1]||null,t)}return this.mapToInitFragWhenRequired(l)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===qm||n===Ym&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,r,i){let s=null;if(e.gap&&(s=this.getNextFragment(this.nextLoadPosition,t),s&&!s.gap&&n.nextStart)){const e=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,r,0);if(null!==e&&n.len+e.len>=i){const e=s.sn;return this.loopSn!==e&&(this.log(`buffer full after gaps in "${r}" playlist starting at sn: ${e}`),this.loopSn=e),null}}return this.loopSn=void 0,s}get primaryPrefetch(){if(zv(this.config)){var e;if(null==(e=this.hls.interstitialsManager)||null==(e=e.playingItem)?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(zv(this.config)&&e.type!==kp){const n=this.hls.interstitialsManager,r=null==n?void 0:n.bufferingItem;if(r){const n=r.event;if(n){if(n.appendInPlace||Math.abs(e.start-r.start)>1||0===r.start)return null}else{if(e.end<=r.start&&!1===(null==t?void 0:t.live))return null;if(e.start>r.end&&r.nextEvent&&(r.nextEvent.appendInPlace||e.start-r.end>1))return null}}const i=null==n?void 0:n.playerQueue;if(i)for(let t=i.length;t--;){const n=i[t].interstitial;if(n.appendInPlace&&e.start>=n.startTime&&e.end<=n.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return null==e||!e.initSegment||e.initSegment.data||this.bitrateTest?e:e.initSegment}getNextPart(e,t,n){let r=-1,i=!1,s=!0;for(let a=0,o=e.length;a<o;a++){const o=e[a];if(s=s&&!o.independent,r>-1&&n<o.start)break;const A=o.loaded;A?r=-1:(i||(o.independent||s)&&o.fragment===t)&&(o.fragment!==t&&this.warn(`Need buffer at ${n} but next unloaded part starts at ${o.start}`),r=a),i=A}return r}loadedEndOfParts(e,t){let n;for(let r=e.length;r--;){if(n=e[r],!n.loaded)return!1;if(t>n.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,n=this.fragPrevious;let r=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),r=function(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!gp(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;for(let r=0;r<e.length;++r){const i=e[r];if(km(t,n,i))return i}return null}(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){const i=n.sn+1;if(i>=e.startSN&&i<=e.endSN){const s=t[i-e.startSN];n.cc===s.cc&&(r=s,this.log(`Live playlist, switching playlist, load frag with next SN: ${r.sn}`))}r||(r=Im(e,n.cc,n.end),r&&this.log(`Live playlist, switching playlist, load frag with same CC: ${r.sn}`))}}else{const t=this.hls.liveSyncPosition;null!==t&&(r=this.getFragmentAtPosition(t,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r}getFragmentAtPosition(e,t,n){const{config:r}=this;let{fragPrevious:i}=this,{fragments:s,endSN:a}=n;const{fragmentHint:o}=n,{maxFragLookUpTolerance:A}=r,l=n.partList,c=!!(this.loadingParts&&null!=l&&l.length&&o);let u;if(c&&!this.bitrateTest&&l[l.length-1].fragment.sn===o.sn&&(s=s.concat(o),a=o.sn),e<t){var d;u=Tm(i,s,e,e<this.lastCurrentTime||e>t-A||null!=(d=this.media)&&d.paused||!this.startFragRequested?0:A)}else u=s[s.length-1];if(u){const e=u.sn-n.startSN,t=this.fragmentTracker.getState(u);if((t===qm||t===Ym&&u.gap)&&(i=u),i&&u.sn===i.sn&&(!c||l[0].fragment.sn>u.sn||!n.live)){if(u.level===i.level){const t=s[e+1];u=u.sn<a&&this.fragmentTracker.getState(t)!==qm?t:null}}}return u}alignPlaylists(e,t,n){const r=e.fragments.length;if(!r)return this.warn("No fragments in live playlist"),0;const i=e.fragmentStart,s=!t,a=e.alignedSliding&&gp(i);if(s||!a&&!i){!function(e,t){e&&(Fv(t,e),t.alignedSliding||Lv(t,e),t.alignedSliding||t.skippedSegments||yv(e,t,!1))}(n,e);const i=e.fragmentStart;return this.log(`Live playlist sliding: ${i.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${r}`),i}return i}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)}setStartPosition(e,t){let n=this.startPosition;n<t&&(n=-1);const r=this.timelineOffset;if(-1===n){const i=null!==this.startTimeOffset,s=i?this.startTimeOffset:e.startTimeOffset;null!==s&&gp(s)?(n=t+s,s<0&&(n+=e.edge),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Setting startPosition to ${n} for start time offset ${s} found in ${i?"multivariant":"media"} playlist`),this.startPosition=n):e.live?(n=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${n}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+r}this.nextLoadPosition=n+r}getLoadPosition(){var e;const{media:t}=this;let n=0;return null!=(e=this.hls)&&e.hasEnoughToStart&&t?n=t.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&og(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===Nv)||(this.state=Rv)}onFragmentOrKeyLoadError(e,t){var n;if(t.chunkMeta&&!t.frag){const e=this.getCurrentContext(t.chunkMeta);e&&(t.frag=e.frag)}const r=t.frag;if(!r||r.type!==e||!this.levels)return;var i;if(this.fragContextChanged(r))return void this.warn(`Frag load error must match current frag to retry ${r.url} > ${null==(i=this.fragCurrent)?void 0:i.url}`);const s=t.details===wp.FRAG_GAP;s&&this.fragmentTracker.fragBuffered(r,!0);const a=t.errorAction;if(!a)return void(this.state=Kv);const{action:o,flags:A,retryCount:l=0,retryConfig:c}=a,u=!!c,d=u&&o===Hm,h=u&&!a.resolved&&A===$m,f=null==(n=this.hls.latestLevelDetails)?void 0:n.live;if(!d&&h&&og(r)&&!r.endList&&f&&!Dm(t))this.resetFragmentErrors(e),this.treatAsGap(r),a.resolved=!0;else if((d||h)&&l<c.maxNumRetry){var p;const n=Om(null==(p=t.response)?void 0:p.code),i=Um(c,l);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+i,this.state=Nv,a.resolved=!0,n)return this.log("Waiting for connection (offline)"),this.retryDate=1/0,void(t.reason="offline");this.warn(`Fragment ${r.sn} of ${e} ${r.level} errored with ${t.details}, retrying loading ${l+1}/${c.maxNumRetry} in ${i}ms`)}else if(c){if(this.resetFragmentErrors(e),!(l<c.maxNumRetry))return void this.warn(`${t.details} reached or exceeded max retry (${l})`);s||o===Mm||(a.resolved=!0)}else this.state=o===Nm?Gv:Kv;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),t=this.retryDate,n=t===1/0;(!t||e>=t||n&&!Om(0))&&(n&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=Rv)}reduceLengthAndFlushBuffer(e){if(this.state===Hv||this.state===jv){const t=e.frag,n=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,n),i=r&&r.len>.5;i&&this.reduceMaxBufferLength(r.len,(null==t?void 0:t.duration)||10);const s=!i;return s&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${n} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),s}return!1}resetFragmentErrors(e){e===xp&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==Pv&&(this.state=Rv)}afterBufferFlushed(e,t,n){if(!e)return;const r=py.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,r,n),this.state===$v&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==Pv&&(this.state=Rv)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,t=e?e.details:null;null!=t&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${-1===e.level?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,r){const i=n.details;if(!i)return void this.warn("level.details undefined");var s;if(!Object.keys(e.elementaryStreams).reduce((t,s)=>{const a=e.elementaryStreams[s];if(a){const o=a.endPTS-a.startPTS;if(o<=0)return this.warn(`Could not parse fragment ${e.sn} ${s} duration reliably (${o})`),t||!1;const A=r?0:pv(i,e,a.startPTS,a.endPTS,a.startDTS,a.endDTS,this);return this.hls.trigger(bp.LEVEL_PTS_UPDATED,{details:i,level:n,drift:A,type:s,frag:e,start:a.startPTS,end:a.endPTS}),!0}return t},!1)&&(0===n.fragmentError&&this.treatAsGap(e,n),null===(null==(s=this.transmuxer)?void 0:s.error))){const t=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(t.message),this.hls.trigger(bp.ERROR,{type:vp.MEDIA_ERROR,details:wp.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=jv,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(bp.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===Tp?"level":"track"}fragInfo(e,t=!0,n){var r,i;return`${this.playlistLabel()} ${e.level} (${n?"part":"frag"}:[${(null!=(r=t&&!n?e.startPTS:(n||e).start)?r:NaN).toFixed(3)}-${(null!=(i=t&&!n?e.endPTS:(n||e).end)?i:NaN).toFixed(3)}]${n&&"main"===e.type?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;null==(e=this.transmuxer)||e.reset()}recoverWorkerError(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function zv(e){return!!e.interstitialsController&&!1!==e.enableInterstitialPlayback}class Yv{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;return e.length?(n=1===e.length?e[0]:function(e,t){const n=new Uint8Array(t);let r=0;for(let i=0;i<e.length;i++){const t=e[i];n.set(t,r),r+=t.length}return n}(e,t),this.reset(),n):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}var qv,Xv={exports:{}};var Jv=(qv||(qv=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,r,s,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new i(r,s||e,a),A=n?n+t:t;return e._events[A]?e._events[A].fn?e._events[A]=[e._events[A],o]:e._events[A].push(o):(e._events[A]=o,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,a=new Array(s);i<s;i++)a[i]=r[i].fn;return a},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,i,s,a){var o=n?n+e:e;if(!this._events[o])return!1;var A,l,c=this._events[o],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,s),!0;case 6:return c.fn.call(c.context,t,r,i,s,a),!0}for(l=1,A=new Array(u-1);l<u;l++)A[l-1]=arguments[l];c.fn.apply(c.context,A)}else{var d,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;case 4:c[l].fn.call(c[l].context,t,r,i);break;default:if(!A)for(d=1,A=new Array(u-1);d<u;d++)A[d-1]=arguments[d];c[l].fn.apply(c[l].context,A)}}return!0},o.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,i){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||i&&!o.once||r&&o.context!==r||a(this,s);else{for(var A=0,l=[],c=o.length;A<c;A++)(o[A].fn!==t||i&&!o[A].once||r&&o[A].context!==r)&&l.push(o[A]);l.length?this._events[s]=1===l.length?l[0]:l:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(Xv)),Xv.exports),Zv=Wp(Jv);const ew="1.6.14",tw={};function nw(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function rw(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function iw(e,t){let n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3],n}function sw(e,t){const n=t;let r=0;for(;rw(e,t);){r+=10;r+=iw(e,t+6),nw(e,t+10)&&(r+=10),t+=r}if(r>0)return e.subarray(n,n+r)}function aw(e,t){return 255===e[t]&&240==(246&e[t+1])}function ow(e,t){return 1&e[t+1]?7:9}function Aw(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function lw(e,t){return t+1<e.length&&aw(e,t)}function cw(e,t){if(lw(e,t)){const n=ow(e,t);if(t+n>=e.length)return!1;const r=Aw(e,t);if(r<=n)return!1;const i=t+r;return i===e.length||lw(e,i)}return!1}function uw(e,t,n,r,i){if(!e.samplerate){const s=function(e,t,n,r){const i=t[n+2],s=i>>2&15;if(s>12){const t=new Error(`invalid ADTS sampling index:${s}`);return void e.emit(bp.ERROR,bp.ERROR,{type:vp.MEDIA_ERROR,details:wp.FRAG_PARSING_ERROR,fatal:!0,error:t,reason:t.message})}const a=1+(i>>6&3),o=t[n+3]>>6&3|(1&i)<<2,A="mp4a.40."+a,l=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350][s];let c=s;5!==a&&29!==a||(c-=3);const u=[a<<3|(14&c)>>1,(1&c)<<7|o<<3];return Hp.log(`manifest codec:${r}, parsed codec:${A}, channels:${o}, rate:${l} (ADTS object type:${a} sampling index:${s})`),{config:u,samplerate:l,channelCount:o,codec:A,parsedCodec:A,manifestCodec:r}}(t,n,r,i);if(!s)return;Dp(e,s)}}function dw(e){return 9216e4/e}function hw(e,t,n,r,i){const s=r+i*dw(e.samplerate),a=function(e,t){const n=ow(e,t);if(t+n<=e.length){const r=Aw(e,t)-n;if(r>0)return{headerLength:n,frameLength:r}}}(t,n);let o;if(a){const{frameLength:r,headerLength:i}=a,A=i+r,l=Math.max(0,n+A-t.length);l?(o=new Uint8Array(A-i),o.set(t.subarray(n+i,t.length),0)):o=t.subarray(n+i,n+A);const c={unit:o,pts:s};return l||e.samples.push(c),{sample:c,length:A,missing:l}}const A=t.length-n;o=new Uint8Array(A),o.set(t.subarray(n,t.length),0);return{sample:{unit:o,pts:s},length:A,missing:-1}}function fw(e,t){return rw(e,t)&&iw(e,t+6)+10<=e.length-t}function pw(e,t=0,n=1/0){return function(e,t,n,r){const i=(s=e,s instanceof ArrayBuffer?s:s.buffer);var s;let a=1;"BYTES_PER_ELEMENT"in r&&(a=r.BYTES_PER_ELEMENT);const o=(d=e,d&&d.buffer instanceof ArrayBuffer&&void 0!==d.byteLength&&void 0!==d.byteOffset?e.byteOffset:0),A=(o+e.byteLength)/a,l=(o+t)/a,c=Math.floor(Math.max(0,Math.min(l,A))),u=Math.floor(Math.min(c+Math.max(n,0),A));var d;return new r(i,c,u-c)}(e,t,n,Uint8Array)}function gw(e){const t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.size<2)return;if(3!==e.data[0])return void console.log("Ignore frame with unrecognized character encoding");const n=e.data.subarray(1).indexOf(0);if(-1===n)return;const r=Kp(pw(e.data,1,n)),i=e.data[2+n],s=e.data.subarray(3+n).indexOf(0);if(-1===s)return;const a=Kp(pw(e.data,3+n,s));let o;var A;return o="--\x3e"===r?Kp(pw(e.data,4+n+s)):(A=e.data.subarray(4+n+s))instanceof ArrayBuffer?A:0==A.byteOffset&&A.byteLength==A.buffer.byteLength?A.buffer:new Uint8Array(A).buffer,t.mimeType=r,t.pictureType=i,t.description=a,t.data=o,t}function mw(e){return"PRIV"===e.type?function(e){if(e.size<2)return;const t=Kp(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}}(e):"W"===e.type[0]?function(e){if("WXXX"===e.type){if(e.size<2)return;let t=1;const n=Kp(e.data.subarray(t),!0);t+=n.length+1;const r=Kp(e.data.subarray(t));return{key:e.type,info:n,data:r}}const t=Kp(e.data);return{key:e.type,info:"",data:t}}(e):"APIC"===e.type?gw(e):function(e){if(e.size<2)return;if("TXXX"===e.type){let t=1;const n=Kp(e.data.subarray(t),!0);t+=n.length+1;const r=Kp(e.data.subarray(t));return{key:e.type,info:n,data:r}}const t=Kp(e.data.subarray(1));return{key:e.type,info:"",data:t}}(e)}function yw(e){const t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=iw(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}}function vw(e){let t=0;const n=[];for(;rw(e,t);){const r=iw(e,t+6);e[t+5]>>6&1&&(t+=10),t+=10;const i=t+r;for(;t+10<i;){const r=yw(e.subarray(t)),i=mw(r);i&&n.push(i),t+=r.size+10}nw(e,t)&&(t+=10)}return n}function ww(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}function bw(e){if(8===e.data.byteLength){const t=new Uint8Array(e.data),n=1&t[3];let r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}}function Ew(e){const t=vw(e);for(let n=0;n<t.length;n++){const e=t[n];if(ww(e))return bw(e)}}let Bw=function(e){return e.audioId3="org.id3",e.dateRange="com.apple.quicktime.HLS",e.emsg="https://aomedia.org/emsg/ID3",e.misbklv="urn:misb:KLV:bin:1910.1",e}({});function Cw(e="",t=9e4){return{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}class Sw{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=Ig(this.cachedData,e),this.cachedData=null);let n,r=sw(e,0),i=r?r.length:0;const s=this._audioTrack,a=this._id3Track,o=r?Ew(r):void 0,A=e.length;for((null===this.basePTS||0===this.frameIndex&&gp(o))&&(this.basePTS=Tw(o,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),r&&r.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:Bw.audioId3,duration:Number.POSITIVE_INFINITY});i<A;){if(this.canParse(e,i)){const t=this.appendFrame(s,e,i);t?(this.frameIndex++,this.lastPTS=t.sample.pts,i+=t.length,n=i):i=A}else fw(e,i)?(r=sw(e,i),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:Bw.audioId3,duration:Number.POSITIVE_INFINITY}),i+=r.length,n=i):i++;if(i===A&&n!==A){const t=e.slice(n);this.cachedData?this.cachedData=Ig(this.cachedData,t):this.cachedData=t}}return{audioTrack:s,videoTrack:Cw(),id3Track:a,textTrack:Cw()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Cw(),id3Track:this._id3Track,textTrack:Cw()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const Tw=(e,t,n)=>{if(gp(e))return 90*e;return 9e4*t+(n?9e4*n.baseTime/n.timescale:0)};let xw=null;const kw=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Iw=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Fw=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Lw=[0,1,1,4];function Dw(e,t,n,r,i){if(n+24>t.length)return;const s=_w(t,n);if(s&&n+s.frameLength<=t.length){const a=r+i*(9e4*s.samplesPerFrame/s.sampleRate),o={unit:t.subarray(n,n+s.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=s.channelCount,e.samplerate=s.sampleRate,e.samples.push(o),{sample:o,length:s.frameLength,missing:0}}}function _w(e,t){const n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,s=e[t+2]>>2&3;if(1!==n&&0!==i&&15!==i&&3!==s){const a=e[t+2]>>1&1,o=e[t+3]>>6,A=1e3*kw[14*(3===n?3-r:3===r?3:4)+i-1],l=Iw[3*(3===n?0:2===n?1:2)+s],c=3===o?1:2,u=Fw[n][r],d=Lw[r],h=8*u*d,f=Math.floor(u*A/l+a)*d;if(null===xw){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);xw=e?parseInt(e[1]):0}return!!xw&&xw<=87&&2===r&&A>=224e3&&0===o&&(e[t+3]=128|e[t+3]),{sampleRate:l,channelCount:c,frameLength:f,samplesPerFrame:h}}}function Uw(e,t){return!(255!==e[t]||224&~e[t+1]||!(6&e[t+1]))}function Pw(e,t){return t+1<e.length&&Uw(e,t)}function Rw(e,t){if(t+1<e.length&&Uw(e,t)){const n=4,r=_w(e,t);let i=n;null!=r&&r.frameLength&&(i=r.frameLength);const s=t+i;return s===e.length||Pw(e,s)}return!1}const Ow=(e,t)=>{let n=0,r=5;t+=r;const i=new Uint32Array(1),s=new Uint32Array(1),a=new Uint8Array(1);for(;r>0;){a[0]=e[t];const o=Math.min(r,8),A=8-o;s[0]=4278190080>>>24+A<<A,i[0]=(a[0]&s[0])>>A,n=n?n<<o|i[0]:i[0],t+=1,r-=o}return n};class Qw extends Sw{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const r=Nw(e,t,n,this.basePTS,this.frameIndex);if(-1!==r){return{sample:e.samples[e.samples.length-1],length:r,missing:0}}}static probe(e){if(!e)return!1;const t=sw(e,0);if(!t)return!1;const n=t.length;return 11===e[n]&&119===e[n+1]&&void 0!==Ew(t)&&Ow(e,n)<16}}function Nw(e,t,n,r,i){if(n+8>t.length)return-1;if(11!==t[n]||119!==t[n+1])return-1;const s=t[n+4]>>6;if(s>=3)return-1;const a=[48e3,44100,32e3][s],o=63&t[n+4],A=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+s];if(n+A>t.length)return-1;const l=t[n+6]>>5;let c=0;2===l?c+=2:(1&l&&1!==l&&(c+=2),4&l&&(c+=2));const u=(t[n+6]<<8|t[n+7])>>12-c&1,d=[2,1,2,3,3,4,4,5][l]+u,h=t[n+5]>>3,f=7&t[n+5],p=new Uint8Array([s<<6|h<<1|f>>2,(3&f)<<6|l<<3|u<<2|o>>4,o<<4&224]),g=r+i*(1536/a*9e4),m=t.subarray(n,n+A);return e.config=p,e.channelCount=d,e.samplerate=a,e.samples.push({unit:m,pts:g}),A}const Mw=/\/emsg[-/]ID3/i;function Hw(e,t){return gp(e.presentationTime)?e.presentationTime/e.timeScale:t+e.presentationTimeDelta/e.timeScale}class jw{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new ay(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,ty)}decryptAacSample(e,t,n){const r=e[t].unit;if(r.length<=16)return;const i=r.subarray(16,r.length-r.length%16),s=i.buffer.slice(i.byteOffset,i.byteOffset+i.length);this.decryptBuffer(s).then(i=>{const s=new Uint8Array(i);r.set(s,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)}).catch(n)}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t);let r=0;for(let i=32;i<e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let r=0;for(let i=32;i<e.length-16;i+=160,r+=16)e.set(n.subarray(r,r+16),i);return e}decryptAvcSample(e,t,n,r,i){const s=Ug(i.data),a=this.getAvcEncryptedData(s);this.decryptBuffer(a.buffer).then(a=>{i.data=this.getAvcDecryptedUnit(s,a),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,r)}).catch(r)}decryptAvcSamples(e,t,n,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void r();const i=e[t].units;for(;!(n>=i.length);n++){const s=i[n];if(!(s.data.length<=48||1!==s.type&&5!==s.type||(this.decryptAvcSample(e,t,n,r,s),this.decrypter.isSync())))return}}}}class $w{constructor(){this.VideoSample=null}createVideoSample(e,t,n){return{key:e,frame:!1,pts:t,dts:n,units:[],length:0}}getLastNalUnit(e){var t;let n,r=this.VideoSample;if(r&&0!==r.units.length||(r=e[e.length-1]),null!=(t=r)&&t.units){const e=r.units;n=e[e.length-1]}return n}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){const n=t.samples,r=n.length;if(!r)return void t.dropped++;{const t=n[r-1];e.pts=t.pts,e.dts=t.dts}}t.samples.push(e)}}parseNALu(e,t,n){const r=t.byteLength;let i=e.naluState||0;const s=i,a=[];let o,A,l,c=0,u=-1,d=0;for(-1===i&&(u=0,d=this.getNALuType(t,0),i=0,c=1);c<r;)if(o=t[c++],i)if(1!==i)if(o)if(1===o){if(A=c-i-1,u>=0){const e={data:t.subarray(u,A),type:d};a.push(e)}else{const n=this.getLastNalUnit(e.samples);n&&(s&&c<=4-s&&n.state&&(n.data=n.data.subarray(0,n.data.byteLength-s)),A>0&&(n.data=Ig(n.data,t.subarray(0,A)),n.state=0))}c<r?(l=this.getNALuType(t,c),u=c,d=l,i=0):i=-1}else i=0;else i=3;else i=o?0:2;else i=o?0:1;if(u>=0&&i>=0){const e={data:t.subarray(u,r),type:d,state:i};a.push(e)}if(0===a.length){const n=this.getLastNalUnit(e.samples);n&&(n.data=Ig(n.data,t))}return e.naluState=i,a}}class Kw{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i}skipBits(e){let t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(t=(e-=this.bitsAvailable)>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&Hp.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class Vw extends $w{parsePES(e,t,n,r){const i=this.parseNALu(e,n.data,r);let s,a=this.VideoSample,o=!1;n.data=null,a&&i.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),i.forEach(r=>{var i,A;switch(r.type){case 1:{let t=!1;s=!0;const i=r.data;if(o&&i.length>4){const e=this.readSliceType(i);2!==e&&4!==e&&7!==e&&9!==e||(t=!0)}var l;if(t)null!=(l=a)&&l.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null);a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.frame=!0,a.key=t;break}case 5:s=!0,null!=(i=a)&&i.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 6:s=!0,_g(r.data,1,n.pts,t.samples);break;case 7:{var c,u;s=!0,o=!0;const t=r.data,n=this.readSPS(t);if(!e.sps||e.width!==n.width||e.height!==n.height||(null==(c=e.pixelRatio)?void 0:c[0])!==n.pixelRatio[0]||(null==(u=e.pixelRatio)?void 0:u[1])!==n.pixelRatio[1]){e.width=n.width,e.height=n.height,e.pixelRatio=n.pixelRatio,e.sps=[t];const r=t.subarray(1,4);let i="avc1.";for(let e=0;e<3;e++){let t=r[e].toString(16);t.length<2&&(t="0"+t),i+=t}e.codec=i}break}case 8:s=!0,e.pps=[r.data];break;case 9:s=!0,e.audFound=!0,null!=(A=a)&&A.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:s=!0;break;default:s=!1}if(a&&s){a.units.push(r)}}),r&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}getNALuType(e,t){return 31&e[t]}readSliceType(e){const t=new Kw(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let n,r=8,i=8;for(let s=0;s<e;s++)0!==i&&(n=t.readEG(),i=(r+n+256)%256),r=0===i?r:i}readSPS(e){const t=new Kw(e);let n,r,i,s=0,a=0,o=0,A=0;const l=t.readUByte.bind(t),c=t.readBits.bind(t),u=t.readUEG.bind(t),d=t.readBoolean.bind(t),h=t.skipBits.bind(t),f=t.skipEG.bind(t),p=t.skipUEG.bind(t),g=this.skipScalingList.bind(this);l();const m=l();if(c(5),h(3),l(),p(),100===m||110===m||122===m||244===m||44===m||83===m||86===m||118===m||128===m){const e=u();if(3===e&&h(1),p(),p(),h(1),d())for(r=3!==e?8:12,i=0;i<r;i++)d()&&g(i<6?16:64,t)}p();const y=u();if(0===y)u();else if(1===y)for(h(1),f(),f(),n=u(),i=0;i<n;i++)f();p(),h(1);const v=u(),w=u(),b=c(1);0===b&&h(1),h(1),d()&&(s=u(),a=u(),o=u(),A=u());let E=[1,1];if(d()&&d()){switch(l()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[l()<<8|l(),l()<<8|l()]}}return{width:Math.ceil(16*(v+1)-2*s-2*a),height:(2-b)*(w+1)*16-(b?2:4)*(o+A),pixelRatio:E}}}class Gw extends $w{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,n,r){const i=this.parseNALu(e,n.data,r);let s,a=this.VideoSample,o=!1;n.data=null,a&&i.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),i.forEach(r=>{var i,A;switch(r.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),a.frame=!0,s=!0;break;case 16:case 17:case 18:case 21:var l;if(s=!0,o)null!=(l=a)&&l.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null);a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 19:case 20:s=!0,null!=(i=a)&&i.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 39:s=!0,_g(r.data,2,n.pts,t.samples);break;case 32:s=!0,e.vps||("object"!=typeof e.params&&(e.params={}),e.params=Dp(e.params,this.readVPS(r.data)),this.initVPS=r.data),e.vps=[r.data];break;case 33:if(s=!0,o=!0,void 0===e.vps||e.vps[0]===this.initVPS||void 0===e.sps||this.matchSPS(e.sps[0],r.data)||(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const t=this.readSPS(r.data);e.width=t.width,e.height=t.height,e.pixelRatio=t.pixelRatio,e.codec=t.codecString,e.sps=[],"object"!=typeof e.params&&(e.params={});for(const n in t.params)e.params[n]=t.params[n]}this.pushParameterSet(e.sps,r.data,e.vps),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0;break;case 34:if(s=!0,"object"==typeof e.params){if(!e.pps){e.pps=[];const t=this.readPPS(r.data);for(const n in t)e.params[n]=t[n]}this.pushParameterSet(e.pps,r.data,e.vps)}break;case 35:s=!0,e.audFound=!0,null!=(A=a)&&A.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:s=!1}if(a&&s){a.units.push(r)}}),r&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}pushParameterSet(e,t,n){(n&&n[0]===this.initVPS||!n&&!e.length)&&e.push(t)}getNALuType(e,t){return(126&e[t])>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let n=0;for(let r=0;r<e.byteLength;r++)r>=2&&3===e[r]&&0===e[r-1]&&0===e[r-2]||(t[n]=e[r],n++);return new Uint8Array(t.buffer,0,n)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new Kw(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);return{numTemporalLayers:t.readBits(3)+1,temporalIdNested:t.readBoolean()}}readSPS(e){const t=new Kw(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const n=t.readBits(3);t.readBoolean();const r=t.readBits(2),i=t.readBoolean(),s=t.readBits(5),a=t.readUByte(),o=t.readUByte(),A=t.readUByte(),l=t.readUByte(),c=t.readUByte(),u=t.readUByte(),d=t.readUByte(),h=t.readUByte(),f=t.readUByte(),p=t.readUByte(),g=t.readUByte(),m=[],y=[];for(let V=0;V<n;V++)m.push(t.readBoolean()),y.push(t.readBoolean());if(n>0)for(let V=n;V<8;V++)t.readBits(2);for(let V=0;V<n;V++)m[V]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),y[V]&&t.readUByte();t.readUEG();const v=t.readUEG();3==v&&t.skipBits(1);const w=t.readUEG(),b=t.readUEG(),E=t.readBoolean();let B=0,C=0,S=0,T=0;E&&(B+=t.readUEG(),C+=t.readUEG(),S+=t.readUEG(),T+=t.readUEG());const x=t.readUEG(),k=t.readUEG(),I=t.readUEG();for(let V=t.readBoolean()?0:n;V<=n;V++)t.skipUEG(),t.skipUEG(),t.skipUEG();t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.readBoolean()){if(t.readBoolean())for(let e=0;e<4;e++)for(let n=0;n<(3===e?2:6);n++){if(t.readBoolean()){const n=Math.min(64,1<<4+(e<<1));e>1&&t.readEG();for(let e=0;e<n;e++)t.readEG()}else t.readUEG()}}t.readBoolean(),t.readBoolean();t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const F=t.readUEG();let L=0;for(let V=0;V<F;V++){let e=!1;if(0!==V&&(e=t.readBoolean()),e){V===F&&t.readUEG(),t.readBoolean(),t.readUEG();let e=0;for(let n=0;n<=L;n++){const n=t.readBoolean();let r=!1;n||(r=t.readBoolean()),(n||r)&&e++}L=e}else{const e=t.readUEG(),n=t.readUEG();L=e+n;for(let r=0;r<e;r++)t.readUEG(),t.readBoolean();for(let r=0;r<n;r++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const e=t.readUEG();for(let n=0;n<e;n++){for(let e=0;e<I+4;e++)t.readBits(1);t.readBits(1)}}let D=0,_=1,U=1,P=!0,R=1,O=0;t.readBoolean(),t.readBoolean();let Q=!1;if(t.readBoolean()){if(t.readBoolean()){const e=t.readUByte();e>0&&e<16?(_=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][e-1],U=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][e-1]):255===e&&(_=t.readBits(16),U=t.readBits(16))}t.readBoolean()&&t.readBoolean();if(t.readBoolean()){t.readBits(3),t.readBoolean();t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())}t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),Q=t.readBoolean(),Q&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG());if(t.readBoolean()){R=t.readBits(32),O=t.readBits(32);t.readBoolean()&&t.readUEG();if(t.readBoolean()){const e=t.readBoolean(),r=t.readBoolean();let i=!1;(e||r)&&(i=t.readBoolean(),i&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),i&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let s=0;s<=n;s++){P=t.readBoolean();let n=!1;P||t.readBoolean()?t.readEG():n=t.readBoolean();const s=n?1:t.readUEG()+1;if(e)for(let e=0;e<s;e++)t.readUEG(),t.readUEG(),i&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(r)for(let e=0;e<s;e++)t.readUEG(),t.readUEG(),i&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),D=t.readUEG())}let N=w,M=b;if(E){let e=1,t=1;1===v?e=t=2:2==v&&(e=2),N=w-e*C-e*B,M=b-t*T-t*S}const H=r?["A","B","C"][r]:"",j=a<<24|o<<16|A<<8|l;let $=0;for(let V=0;V<32;V++)$=($|(j>>V&1)<<31-V)>>>0;let K=$.toString(16);1===s&&"2"===K&&(K="6");return{codecString:`hvc1.${H}${s}.${K}.${i?"H":"L"}${g}.B0`,params:{general_tier_flag:i,general_profile_idc:s,general_profile_space:r,general_profile_compatibility_flags:[a,o,A,l],general_constraint_indicator_flags:[c,u,d,h,f,p],general_level_idc:g,bit_depth:x+8,bit_depth_luma_minus8:x,bit_depth_chroma_minus8:k,min_spatial_segmentation_idc:D,chroma_format_idc:v,frame_rate:{fixed:P,fps:O/R}},width:N,height:M,pixelRatio:[_,U]}}readPPS(e){const t=new Kw(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2);t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const n=t.readBoolean(),r=t.readBoolean();let i=1;return r&&n?i=0:r?i=3:n&&(i=2),{parallelismType:i}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const Ww=188;class zw{constructor(e,t,n,r){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.logger=r,this.videoParser=null}static probe(e,t){const n=zw.syncOffset(e);return n>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),-1!==n}static syncOffset(e){const t=e.length;let n=Math.min(940,t-Ww)+1,r=0;for(;r<n;){let i=!1,s=-1,a=0;for(let o=r;o<t;o+=Ww){if(71!==e[o]||t-o!==Ww&&71!==e[o+Ww]){if(a)return-1;break}if(a++,-1===s&&(s=o,0!==s&&(n=Math.min(s+18612,e.length-Ww)+1)),i||(i=0===Yw(e,o)),i&&a>1&&(0===s&&a>2||o+Ww>n))return s}r++}return-1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:hg[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,n,r){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=zw.createTrack("video"),this._videoTrack.duration=r,this._audioTrack=zw.createTrack("audio",r),this._id3Track=zw.createTrack("id3"),this._txtTrack=zw.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,n=!1,r=!1){let i;n||(this.sampleAes=null);const s=this._videoTrack,a=this._audioTrack,o=this._id3Track,A=this._txtTrack;let l=s.pid,c=s.pesData,u=a.pid,d=o.pid,h=a.pesData,f=o.pesData,p=null,g=this.pmtParsed,m=this._pmtId,y=e.length;if(this.remainderData&&(y=(e=Ig(this.remainderData,e)).length,this.remainderData=null),y<Ww&&!r)return this.remainderData=e,{audioTrack:a,videoTrack:s,id3Track:o,textTrack:A};const v=Math.max(0,zw.syncOffset(e));y-=(y-v)%Ww,y<e.byteLength&&!r&&(this.remainderData=new Uint8Array(e.buffer,y,e.buffer.byteLength-y));let w=0;for(let E=v;E<y;E+=Ww)if(71===e[E]){const t=!!(64&e[E+1]),r=Yw(e,E);let y;if((48&e[E+3])>>4>1){if(y=E+5+e[E+4],y===E+Ww)continue}else y=E+4;switch(r){case l:t&&(c&&(i=eb(c,this.logger))&&(this.readyVideoParser(s.segmentCodec),null!==this.videoParser&&this.videoParser.parsePES(s,A,i,!1)),c={data:[],size:0}),c&&(c.data.push(e.subarray(y,E+Ww)),c.size+=E+Ww-y);break;case u:if(t){if(h&&(i=eb(h,this.logger)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,i);break;case"mp3":this.parseMPEGPES(a,i);break;case"ac3":this.parseAC3PES(a,i)}h={data:[],size:0}}h&&(h.data.push(e.subarray(y,E+Ww)),h.size+=E+Ww-y);break;case d:t&&(f&&(i=eb(f,this.logger))&&this.parseID3PES(o,i),f={data:[],size:0}),f&&(f.data.push(e.subarray(y,E+Ww)),f.size+=E+Ww-y);break;case 0:t&&(y+=e[y]+1),m=this._pmtId=qw(e,y);break;case m:{t&&(y+=e[y]+1);const r=Xw(e,y,this.typeSupported,n,this.observer,this.logger);l=r.videoPid,l>0&&(s.pid=l,s.segmentCodec=r.segmentVideoCodec),u=r.audioPid,u>0&&(a.pid=u,a.segmentCodec=r.segmentAudioCodec),d=r.id3Pid,d>0&&(o.pid=d),null===p||g||(this.logger.warn(`MPEG-TS PMT found at ${E} after unknown PID '${p}'. Backtracking to sync byte @${v} to parse all TS packets.`),p=null,E=v-188),g=this.pmtParsed=!0;break}case 17:case 8191:break;default:p=r}}else w++;w>0&&Jw(this.observer,new Error(`Found ${w} TS packet/s that do not start with 0x47`),void 0,this.logger),s.pesData=c,a.pesData=h,o.pesData=f;const b={audioTrack:a,videoTrack:s,id3Track:o,textTrack:A};return r&&this.extractRemainingSamples(b),b}flush(){const{remainderData:e}=this;let t;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:r,textTrack:i}=e,s=n.pesData,a=t.pesData,o=r.pesData;let A;if(s&&(A=eb(s,this.logger))?(this.readyVideoParser(n.segmentCodec),null!==this.videoParser&&(this.videoParser.parsePES(n,i,A,!0),n.pesData=null)):n.pesData=s,a&&(A=eb(a,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,A);break;case"mp3":this.parseMPEGPES(t,A);break;case"ac3":this.parseAC3PES(t,A)}t.pesData=null}else null!=a&&a.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=a;o&&(A=eb(o,this.logger))?(this.parseID3PES(r,A),r.pesData=null):r.pesData=o}demuxSampleAes(e,t,n){const r=this.demux(e,n,!0,!this.config.progressive),i=this.sampleAes=new jw(this.observer,this.config,t);return this.decrypt(r,i)}readyVideoParser(e){null===this.videoParser&&("avc"===e?this.videoParser=new Vw:"hevc"===e&&(this.videoParser=new Gw))}decrypt(e,t){return new Promise(n=>{const{audioTrack:r,videoTrack:i}=e;r.samples&&"aac"===r.segmentCodec?t.decryptAacSamples(r.samples,0,()=>{i.samples?t.decryptAvcSamples(i.samples,0,0,()=>{n(e)}):n(e)}):i.samples&&t.decryptAvcSamples(i.samples,0,0,()=>{n(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let n=0;const r=this.aacOverFlow;let i,s,a,o=t.data;if(r){this.aacOverFlow=null;const t=r.missing,i=r.sample.unit.byteLength;if(-1===t)o=Ig(r.sample.unit,o);else{const s=i-t;r.sample.unit.set(o.subarray(0,t),s),e.samples.push(r.sample),n=r.missing}}for(i=n,s=o.length;i<s-1&&!lw(o,i);i++);if(i!==n){let e;const t=i<s-1;if(e=t?`AAC PES did not start with ADTS header,offset:${i}`:"No ADTS header found in AAC PES",Jw(this.observer,new Error(e),t,this.logger),!t)return}if(uw(e,this.observer,o,i,this.audioCodec),void 0!==t.pts)a=t.pts;else{if(!r)return void this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");{const t=dw(e.samplerate);a=r.sample.pts+t}}let A,l=0;for(;i<s;){if(A=hw(e,o,i,a,l),i+=A.length,A.missing){this.aacOverFlow=A;break}for(l++;i<s-1&&!lw(o,i);i++);}}parseMPEGPES(e,t){const n=t.data,r=n.length;let i=0,s=0;const a=t.pts;if(void 0!==a)for(;s<r;)if(Pw(n,s)){const t=Dw(e,n,s,a,i);if(!t)break;s+=t.length,i++}else s++;else this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseAC3PES(e,t){{const n=t.data,r=t.pts;if(void 0===r)return void this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");const i=n.length;let s,a=0,o=0;for(;o<i&&(s=Nw(e,n,o,r,a++))>0;)o+=s}}parseID3PES(e,t){if(void 0===t.pts)return void this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");const n=Dp({},t,{type:this._videoTrack?Bw.emsg:Bw.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function Yw(e,t){return((31&e[t+1])<<8)+e[t+2]}function qw(e,t){return(31&e[t+10])<<8|e[t+11]}function Xw(e,t,n,r,i,s){const a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<o;){const o=Yw(e,t),A=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!r){Zw("ADTS AAC",s);break}case 15:-1===a.audioPid&&(a.audioPid=o);break;case 21:-1===a.id3Pid&&(a.id3Pid=o);break;case 219:if(!r){Zw("H.264",s);break}case 27:-1===a.videoPid&&(a.videoPid=o);break;case 3:case 4:n.mpeg||n.mp3?-1===a.audioPid&&(a.audioPid=o,a.segmentAudioCodec="mp3"):s.log("MPEG audio found, not supported in this browser");break;case 193:if(!r){Zw("AC-3",s);break}case 129:n.ac3?-1===a.audioPid&&(a.audioPid=o,a.segmentAudioCodec="ac3"):s.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===a.audioPid&&A>0){let r=t+5,i=A;for(;i>2;){if(106===e[r])!0!==n.ac3?s.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=o,a.segmentAudioCodec="ac3");const t=e[r+1]+2;r+=t,i-=t}}break;case 194:case 135:return Jw(i,new Error("Unsupported EC-3 in M2TS found"),void 0,s),a;case 36:-1===a.videoPid&&(a.videoPid=o,a.segmentVideoCodec="hevc",s.log("HEVC in M2TS found"))}t+=A+5}return a}function Jw(e,t,n,r){r.warn(`parsing error: ${t.message}`),e.emit(bp.ERROR,bp.ERROR,{type:vp.MEDIA_ERROR,details:wp.FRAG_PARSING_ERROR,fatal:!1,levelRetry:n,error:t,reason:t.message})}function Zw(e,t){t.log(`${e} with AES-128-CBC encryption found in unencrypted stream`)}function eb(e,t){let n,r,i,s,a,o=0;const A=e.data;if(!e||0===e.size)return null;for(;A[0].length<19&&A.length>1;)A[0]=Ig(A[0],A[1]),A.splice(1,1);n=A[0];if(1===(n[0]<<16)+(n[1]<<8)+n[2]){if(r=(n[4]<<8)+n[5],r&&r>e.size-6)return null;const l=n[7];192&l&&(s=536870912*(14&n[9])+4194304*(255&n[10])+16384*(254&n[11])+128*(255&n[12])+(254&n[13])/2,64&l?(a=536870912*(14&n[14])+4194304*(255&n[15])+16384*(254&n[16])+128*(255&n[17])+(254&n[18])/2,s-a>54e5&&(t.warn(`${Math.round((s-a)/9e4)}s delta between PTS and DTS, align them`),s=a)):a=s),i=n[8];let c=i+9;if(e.size<=c)return null;e.size-=c;const u=new Uint8Array(e.size);for(let e=0,t=A.length;e<t;e++){n=A[e];let t=n.byteLength;if(c){if(c>t){c-=t;continue}n=n.subarray(c),t-=c,c=0}u.set(n,o),o+=t}return r&&(r-=i+3),{data:u,pts:s,dts:a,len:r}}return null}class tb{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const nb=Math.pow(2,32)-1;class rb{static init(){let e;for(e in rb.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},rb.types)rb.types.hasOwnProperty(e)&&(rb.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);rb.HDLR_TYPES={video:t,audio:n};const r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);rb.STTS=rb.STSC=rb.STCO=i,rb.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),rb.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),rb.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),rb.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const s=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);rb.FTYP=rb.box(rb.types.ftyp,s,o,s,a),rb.DINF=rb.box(rb.types.dinf,rb.box(rb.types.dref,r))}static box(e,...t){let n=8,r=t.length;const i=r;for(;r--;)n+=t[r].byteLength;const s=new Uint8Array(n);for(s[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=255&n,s.set(e,4),r=0,n=8;r<i;r++)s.set(t[r],n),n+=t[r].byteLength;return s}static hdlr(e){return rb.box(rb.types.hdlr,rb.HDLR_TYPES[e])}static mdat(e){return rb.box(rb.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(nb+1)),r=Math.floor(t%(nb+1));return rb.box(rb.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))}static mdia(e){return rb.box(rb.types.mdia,rb.mdhd(e.timescale||0,e.duration||0),rb.hdlr(e.type),rb.minf(e))}static mfhd(e){return rb.box(rb.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static minf(e){return"audio"===e.type?rb.box(rb.types.minf,rb.box(rb.types.smhd,rb.SMHD),rb.DINF,rb.stbl(e)):rb.box(rb.types.minf,rb.box(rb.types.vmhd,rb.VMHD),rb.DINF,rb.stbl(e))}static moof(e,t,n){return rb.box(rb.types.moof,rb.mfhd(e),rb.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=rb.trak(e[t]);return rb.box.apply(null,[rb.types.moov,rb.mvhd(e[0].timescale||0,e[0].duration||0)].concat(n).concat(rb.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=rb.trex(e[t]);return rb.box.apply(null,[rb.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(nb+1)),r=Math.floor(t%(nb+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return rb.box(rb.types.mvhd,i)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let r,i;for(r=0;r<t.length;r++)i=t[r].flags,n[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return rb.box(rb.types.sdtp,n)}static stbl(e){return rb.box(rb.types.stbl,rb.stsd(e),rb.box(rb.types.stts,rb.STTS),rb.box(rb.types.stsc,rb.STSC),rb.box(rb.types.stsz,rb.STSZ),rb.box(rb.types.stco,rb.STCO))}static avc1(e){let t,n,r,i=[],s=[];for(t=0;t<e.sps.length;t++)n=e.sps[t],r=n.byteLength,i.push(r>>>8&255),i.push(255&r),i=i.concat(Array.prototype.slice.call(n));for(t=0;t<e.pps.length;t++)n=e.pps[t],r=n.byteLength,s.push(r>>>8&255),s.push(255&r),s=s.concat(Array.prototype.slice.call(n));const a=rb.box(rb.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(s))),o=e.width,A=e.height,l=e.pixelRatio[0],c=e.pixelRatio[1];return rb.box(rb.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,A>>8&255,255&A,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,rb.box(rb.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),rb.box(rb.types.pasp,new Uint8Array([l>>24,l>>16&255,l>>8&255,255&l,c>>24,c>>16&255,c>>8&255,255&c])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,255&t,0,0])}static mp4a(e){return rb.box(rb.types.mp4a,rb.audioStsd(e),rb.box(rb.types.esds,rb.esds(e)))}static mp3(e){return rb.box(rb.types[".mp3"],rb.audioStsd(e))}static ac3(e){return rb.box(rb.types["ac-3"],rb.audioStsd(e),rb.box(rb.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if("audio"===e.type){if("aac"===t)return rb.box(rb.types.stsd,rb.STSD,rb.mp4a(e));if("ac3"===t&&e.config)return rb.box(rb.types.stsd,rb.STSD,rb.ac3(e));if("mp3"===t&&"mp3"===e.codec)return rb.box(rb.types.stsd,rb.STSD,rb.mp3(e))}else{if(!e.pps||!e.sps)throw new Error("video track missing pps or sps");if("avc"===t)return rb.box(rb.types.stsd,rb.STSD,rb.avc1(e));if("hevc"===t&&e.vps)return rb.box(rb.types.stsd,rb.STSD,rb.hvc1(e))}throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,n=(e.duration||0)*(e.timescale||0),r=e.width||0,i=e.height||0,s=Math.floor(n/(nb+1)),a=Math.floor(n%(nb+1));return rb.box(rb.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,i>>8&255,255&i,0,0]))}static traf(e,t){const n=rb.sdtp(e),r=e.id,i=Math.floor(t/(nb+1)),s=Math.floor(t%(nb+1));return rb.box(rb.types.traf,rb.box(rb.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),rb.box(rb.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s])),rb.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,rb.box(rb.types.trak,rb.tkhd(e),rb.mdia(e))}static trex(e){const t=e.id;return rb.box(rb.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],r=n.length,i=12+16*r,s=new Uint8Array(i);let a,o,A,l,c,u;for(t+=8+i,s.set(["video"===e.type?1:0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,255&r,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),a=0;a<r;a++)o=n[a],A=o.duration,l=o.size,c=o.flags,u=o.cts,s.set([A>>>24&255,A>>>16&255,A>>>8&255,255&A,l>>>24&255,l>>>16&255,l>>>8&255,255&l,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.paddingValue<<1|c.isNonSync,61440&c.degradPrio,15&c.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*a);return rb.box(rb.types.trun,s)}static initSegment(e){rb.types||rb.init();const t=rb.moov(e);return Ig(rb.FTYP,t)}static hvc1(e){const t=e.params,n=[e.vps,e.sps,e.pps],r=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),3|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),n.length]);let i=r.length;for(let d=0;d<n.length;d+=1){i+=3;for(let e=0;e<n[d].length;e+=1)i+=2+n[d][e].length}const s=new Uint8Array(i);s.set(r,0),i=r.length;const a=n.length-1;for(let d=0;d<n.length;d+=1){s.set(new Uint8Array([32+d|(d===a?128:0),0,n[d].length]),i),i+=3;for(let e=0;e<n[d].length;e+=1)s.set(new Uint8Array([n[d][e].length>>8,255&n[d][e].length]),i),i+=2,s.set(n[d][e],i),i+=n[d][e].length}const o=rb.box(rb.types.hvcC,s),A=e.width,l=e.height,c=e.pixelRatio[0],u=e.pixelRatio[1];return rb.box(rb.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,A>>8&255,255&A,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,rb.box(rb.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),rb.box(rb.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,u>>24,u>>16&255,u>>8&255,255&u])))}}rb.types=void 0,rb.HDLR_TYPES=void 0,rb.STTS=void 0,rb.STSC=void 0,rb.STCO=void 0,rb.STSZ=void 0,rb.VMHD=void 0,rb.SMHD=void 0,rb.STSD=void 0,rb.FTYP=void 0,rb.DINF=void 0;function ib(e,t,n=1,r=!1){const i=e*t*n;return r?Math.round(i):i}function sb(e,t=!1){return ib(e,1e3,1/9e4,t)}function ab(e){const{baseTime:t,timescale:n,trackId:r}=e;return`${t/n} (${t}/${n}) trackId: ${r}`}let ob,Ab=null,lb=null;function cb(e,t,n,r){return{duration:t,size:n,cts:r,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class ub extends Pp{constructor(e,t,n,r){if(super("mp4-remuxer",r),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===Ab){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Ab=e?parseInt(e[1]):0}if(null===lb){const e=navigator.userAgent.match(/Safari\/(\d+)/i);lb=e?parseInt(e[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const t=this._initPTS;t&&e&&e.trackId===t.trackId&&e.baseTime===t.baseTime&&e.timescale===t.timescale||this.log(`Reset initPTS: ${t?ab(t):t} > ${e?ab(e):e}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,r=e.reduce((e,r)=>{let i=r.pts,s=i-e;return s<-4294967296&&(t=!0,i=db(i,n),s=i-e),s>0?e:i},n);return t&&this.debug("PTS rollover detected"),r}remux(e,t,n,r,i,s,a,o){let A,l,c,u,d,h,f=i,p=i;const g=e.pid>-1,m=t.pid>-1,y=t.samples.length,v=e.samples.length>0,w=a&&y>0||y>1;if((!g||v)&&(!m||w)||this.ISGenerated||a){if(this.ISGenerated){var b,E,B,C;const e=this.videoTrackConfig;(e&&(t.width!==e.width||t.height!==e.height||(null==(b=t.pixelRatio)?void 0:b[0])!==(null==(E=e.pixelRatio)?void 0:E[0])||(null==(B=t.pixelRatio)?void 0:B[1])!==(null==(C=e.pixelRatio)?void 0:C[1]))||!e&&w||null===this.nextAudioTs&&v)&&this.resetInitSegment()}this.ISGenerated||(c=this.generateIS(e,t,i,s));const n=this.isVideoContiguous;let r,a=-1;if(w&&(a=function(e){for(let t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!n&&this.config.forceKeyFrameOnDiscontinuity))if(h=!0,a>0){this.warn(`Dropped ${a} out of ${y} video samples due to a missing keyframe`);const e=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(a),t.dropped+=a,p+=(t.samples[0].pts-e)/t.inputTimeScale,r=p}else-1===a&&(this.warn(`No keyframe found out of ${y} video samples`),h=!1);if(this.ISGenerated){if(v&&w){const n=this.getVideoStartPts(t.samples),r=(db(e.samples[0].pts,n)-n)/t.inputTimeScale;f+=Math.max(0,r),p+=Math.max(0,-r)}if(v){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),c=this.generateIS(e,t,i,s)),l=this.remuxAudio(e,f,this.isAudioContiguous,s,m||w||o===xp?p:void 0),w){const r=l?l.endPTS-l.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),c=this.generateIS(e,t,i,s)),A=this.remuxVideo(t,p,n,r)}}else w&&(A=this.remuxVideo(t,p,n,0));A&&(A.firstKeyFrame=a,A.independent=-1!==a,A.firstKeyFramePTS=r)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(d=hb(n,i,this._initPTS,this._initDTS)),r.samples.length&&(u=fb(r,i,this._initPTS))),{audio:l,video:A,initSegment:c,independent:h,text:u,id3:d}}computeInitPts(e,t,n,r){const i=Math.round(n*t);let s=db(e,i);if(s<i+t)for(this.log(`Adjusting PTS for rollover in timeline near ${(i-s)/t} ${r}`);s<i+t;)s+=8589934592;return s-i}generateIS(e,t,n,r){const i=e.samples,s=t.samples,a=this.typeSupported,o={},A=this._initPTS;let l,c,u,d=!A||r,h="audio/mp4",f=-1;if(d&&(l=c=1/0),e.config&&i.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(h="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}o.audio={id:"audio",container:h,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&a.mpeg?new Uint8Array(0):rb.initSegment([e]),metadata:{channelCount:e.channelCount}},d&&(f=e.id,u=e.inputTimeScale,A&&u===A.timescale?d=!1:l=c=this.computeInitPts(i[0].pts,u,n,"audio"))}if(t.sps&&t.pps&&s.length){if(t.timescale=t.inputTimeScale,o.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:rb.initSegment([t]),metadata:{width:t.width,height:t.height}},d)if(f=t.id,u=t.inputTimeScale,A&&u===A.timescale)d=!1;else{const e=this.getVideoStartPts(s),t=db(s[0].dts,e),r=this.computeInitPts(t,u,n,"video"),i=this.computeInitPts(e,u,n,"video");c=Math.min(c,r),l=Math.min(l,i)}this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(o).length)return this.ISGenerated=!0,d?(A&&this.warn(`Timestamps at playlist time: ${r?"":"~"}${n} ${l/u} != initPTS: ${A.baseTime/A.timescale} (${A.baseTime}/${A.timescale}) trackId: ${A.trackId}`),this.log(`Found initPTS at playlist time: ${n} offset: ${l/u} (${l}/${u}) trackId: ${f}`),this._initPTS={baseTime:l,timescale:u,trackId:f},this._initDTS={baseTime:c,timescale:u,trackId:f}):l=u=void 0,{tracks:o,initPTS:l,timescale:u,trackId:f}}remuxVideo(e,t,n,r){const i=e.inputTimeScale,s=e.samples,a=[],o=s.length,A=this._initPTS,l=A.baseTime*i/A.timescale;let c,u,d=this.nextVideoTs,h=8,f=this.videoSampleDuration,p=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,m=!1;if(!n||null===d){const e=l+t*i,r=s[0].pts-db(s[0].dts,s[0].pts);Ab&&null!==d&&Math.abs(e-r-(d+l))<15e3?n=!0:d=e-r-l}const y=d+l;for(let P=0;P<o;P++){const e=s[P];e.pts=db(e.pts,y),e.dts=db(e.dts,y),e.dts<s[P>0?P-1:P].dts&&(m=!0)}m&&s.sort(function(e,t){const n=e.dts-t.dts,r=e.pts-t.pts;return n||r}),c=s[0].dts,u=s[s.length-1].dts;const v=u-c,w=v?Math.round(v/(o-1)):f||e.inputTimeScale/30;if(n){const n=c-y,r=n>w,i=n<-1;if((r||i)&&(r?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${sb(n,!0)} ms (${n}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${sb(-n,!0)} ms (${n}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!i||y>=s[0].pts||Ab)){c=y;const e=s[0].pts-n;if(r)s[0].dts=c,s[0].pts=e;else{let t=!0;for(let r=0;r<s.length&&!(s[r].dts>e&&t);r++){const e=s[r].pts;if(s[r].dts-=n,s[r].pts-=n,r<s.length-1){const n=s[r+1].pts;t=n<=s[r].pts==n<=e}}}this.log(`Video: Initial PTS/DTS adjusted: ${sb(e,!0)}/${sb(c,!0)}, delta: ${sb(n,!0)} ms`)}}c=Math.max(0,c);let b=0,E=0,B=c;for(let P=0;P<o;P++){const e=s[P],t=e.units,n=t.length;let r=0;for(let i=0;i<n;i++)r+=t[i].data.length;E+=r,b+=n,e.length=r,e.dts<B?(e.dts=B,B+=w/4|0||1):B=e.dts,p=Math.min(e.pts,p),g=Math.max(e.pts,g)}u=s[o-1].dts;const C=E+4*b+8;let S;try{S=new Uint8Array(C)}catch(U){return void this.observer.emit(bp.ERROR,bp.ERROR,{type:vp.MUX_ERROR,details:wp.REMUX_ALLOC_ERROR,fatal:!1,error:U,bytes:C,reason:`fail allocating video mdat ${C}`})}const T=new DataView(S.buffer);T.setUint32(0,C),S.set(rb.types.mdat,4);let x=!1,k=Number.POSITIVE_INFINITY,I=Number.POSITIVE_INFINITY,F=Number.NEGATIVE_INFINITY,L=Number.NEGATIVE_INFINITY;for(let P=0;P<o;P++){const e=s[P],t=e.units;let n,A=0;for(let r=0,i=t.length;r<i;r++){const e=t[r],n=e.data,i=e.data.byteLength;T.setUint32(h,i),h+=4,S.set(n,h),h+=i,A+=4+i}if(P<o-1)f=s[P+1].dts-e.dts,n=s[P+1].pts-e.pts;else{const t=this.config,a=P>0?e.dts-s[P-1].dts:w;if(n=P>0?e.pts-s[P-1].pts:w,t.stretchShortVideoTrack&&null!==this.nextAudioTs){const n=Math.floor(t.maxBufferHole*i),s=(r?p+r*i:this.nextAudioTs+l)-e.pts;s>n?(f=s-a,f<0?f=a:x=!0,this.log(`It is approximately ${s/90} ms to the next segment; using duration ${f/90} ms for the last video frame.`)):f=a}else f=a}const c=Math.round(e.pts-e.dts);k=Math.min(k,f),F=Math.max(F,f),I=Math.min(I,n),L=Math.max(L,n),a.push(cb(e.key,f,A,c))}if(a.length)if(Ab){if(Ab<70){const e=a[0].flags;e.dependsOn=2,e.isNonSync=0}}else if(lb&&L-I<F-k&&w/F<.025&&0===a[0].cts){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let e=c;for(let t=0,n=a.length;t<n;t++){const r=e+a[t].duration,i=e+a[t].cts;if(t<n-1){const e=r+a[t+1].cts;a[t].duration=e-i}else a[t].duration=t?a[t-1].duration:w;a[t].cts=0,e=r}}f=x||!f?w:f;const D=u+f;this.nextVideoTs=d=D-l,this.videoSampleDuration=f,this.isVideoContiguous=!0;const _={data1:rb.moof(e.sequenceNumber++,c,Dp(e,{samples:a})),data2:S,startPTS:(p-l)/i,endPTS:(g+f-l)/i,startDTS:(c-l)/i,endDTS:d/i,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,_}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}}remuxAudio(e,t,n,r,i){const s=e.inputTimeScale,a=s/(e.samplerate?e.samplerate:s),o=this.getSamplesPerFrame(e),A=o*a,l=this._initPTS,c="mp3"===e.segmentCodec&&this.typeSupported.mpeg,u=[],d=void 0!==i;let h=e.samples,f=c?0:8,p=this.nextAudioTs||-1;const g=l.baseTime*s/l.timescale,m=g+t*s;if(this.isAudioContiguous=n=n||h.length&&p>0&&(r&&Math.abs(m-(p+g))<9e3||Math.abs(db(h[0].pts,m)-(p+g))<20*A),h.forEach(function(e){e.pts=db(e.pts,m)}),!n||p<0){const e=h.length;if(h=h.filter(e=>e.pts>=0),e!==h.length&&this.warn(`Removed ${h.length-e} of ${e} samples (initPTS ${g} / ${s})`),!h.length)return;p=0===i?0:r&&!d?Math.max(0,m-g):h[0].pts-g}if("aac"===e.segmentCodec){const t=this.config.maxAudioFramesDrift;for(let n=0,r=p+g;n<h.length;n++){const i=h[n],a=i.pts,o=a-r,l=Math.abs(1e3*o/s);if(o<=-t*A&&d)0===n&&(this.warn(`Audio frame @ ${(a/s).toFixed(3)}s overlaps marker by ${Math.round(1e3*o/s)} ms.`),this.nextAudioTs=p=a-g,r=a);else if(o>=t*A&&l<1e4&&d){let t=Math.round(o/A);for(r=a-t*A;r<0&&t&&A;)t--,r+=A;0===n&&(this.nextAudioTs=p=r-g),this.warn(`Injecting ${t} audio frames @ ${((r-g)/s).toFixed(3)}s due to ${Math.round(1e3*o/s)} ms gap.`);for(let s=0;s<t;s++){let t=tb.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);t||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),t=i.unit.subarray()),h.splice(n,0,{unit:t,pts:r}),r+=A,n++}}i.pts=r,r+=A}}let y,v=null,w=null,b=0,E=h.length;for(;E--;)b+=h[E].unit.byteLength;for(let F=0,L=h.length;F<L;F++){const t=h[F],r=t.unit;let i=t.pts;if(null!==w){u[F-1].duration=Math.round((i-w)/a)}else{if(n&&"aac"===e.segmentCodec&&(i=p+g),v=i,!(b>0))return;b+=f;try{y=new Uint8Array(b)}catch(I){return void this.observer.emit(bp.ERROR,bp.ERROR,{type:vp.MUX_ERROR,details:wp.REMUX_ALLOC_ERROR,fatal:!1,error:I,bytes:b,reason:`fail allocating audio mdat ${b}`})}if(!c){new DataView(y.buffer).setUint32(0,b),y.set(rb.types.mdat,4)}}y.set(r,f);const s=r.byteLength;f+=s,u.push(cb(!0,o,s,0)),w=i}const B=u.length;if(!B)return;const C=u[u.length-1];p=w-g,this.nextAudioTs=p+a*C.duration;const S=c?new Uint8Array(0):rb.moof(e.sequenceNumber++,v/a,Dp({},e,{samples:u}));e.samples=[];const T=(v-g)/s,x=p/s,k={data1:S,data2:y,startPTS:T,endPTS:x,startDTS:T,endDTS:x,type:"audio",hasAudio:!0,hasVideo:!1,nb:B};return this.isAudioContiguous=!0,k}}function db(e,t){let n;if(null===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}function hb(e,t,n,r){const i=e.samples.length;if(!i)return;const s=e.inputTimeScale;for(let o=0;o<i;o++){const i=e.samples[o];i.pts=db(i.pts-n.baseTime*s/n.timescale,t*s)/s,i.dts=db(i.dts-r.baseTime*s/r.timescale,t*s)/s}const a=e.samples;return e.samples=[],{samples:a}}function fb(e,t,n){const r=e.samples.length;if(!r)return;const i=e.inputTimeScale;for(let a=0;a<r;a++){const r=e.samples[a];r.pts=db(r.pts-n.baseTime*i/n.timescale,t*i)/i}e.samples.sort((e,t)=>e.pts-t.pts);const s=e.samples;return e.samples=[],{samples:s}}function pb(e,t,n=!1){return void 0!==(null==e?void 0:e.start)?(e.start+(n?e.duration:0))/e.timescale:t}function gb(e,t,n){const r=e.codec;if(r&&r.length>4)return r;if(t===rg){if("ec-3"===r||"ac-3"===r||"alac"===r)return r;if("fLaC"===r||"Opus"===r){return Wg(r,!1)}return n.warn(`Unhandled audio codec "${r}" in mp4 MAP`),r||"mp4a"}return n.warn(`Unhandled video codec "${r}" in mp4 MAP`),r||"avc1"}try{ob=self.performance.now.bind(self.performance)}catch(u$){ob=Date.now}const mb=[{demux:class{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,r){const i=this.videoTrack=Cw("video",1),s=this.audioTrack=Cw("audio",1),a=this.txtTrack=Cw("text",1);if(this.id3Track=Cw("id3",1),this.timeOffset=0,null==e||!e.byteLength)return;const o=bg(e);if(o.video){const{id:e,timescale:t,codec:n,supplemental:r}=o.video;i.id=e,i.timescale=a.timescale=t,i.codec=n,i.supplemental=r}if(o.audio){const{id:e,timescale:t,codec:n}=o.audio;s.id=e,s.timescale=t,s.codec=n}a.id=hg.text,i.sampleDuration=0,i.duration=s.duration=r}resetContiguity(){this.remainderData=null}static probe(e){return function(e){const t=e.byteLength;for(let n=0;n<t;){const r=gg(e,n);if(r>8&&109===e[n+4]&&111===e[n+5]&&111===e[n+6]&&102===e[n+7])return!0;n=r>1?n+r:t}return!1}(e)}demux(e,t){this.timeOffset=t;let n=e;const r=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=Ig(this.remainderData,e));const t=function(e){const t={valid:null,remainder:null},n=vg(e,["moof"]);if(n.length<2)return t.remainder=e,t;const r=n[n.length-1];return t.valid=e.slice(0,r.byteOffset-8),t.remainder=e.slice(r.byteOffset-8),t}(n);this.remainderData=t.remainder,r.samples=t.valid||new Uint8Array}else r.samples=n;const s=this.extractID3Track(r,t);return i.samples=Fg(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const r=this.extractID3Track(t,this.timeOffset);return n.samples=Fg(e,t),{videoTrack:t,audioTrack:Cw(),id3Track:r,textTrack:Cw()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const r=vg(e.samples,["emsg"]);r&&r.forEach(e=>{const r=function(e){const t=e[0];let n="",r="",i=0,s=0,a=0,o=0,A=0,l=0;if(0===t){for(;"\0"!==fg(e.subarray(l,l+1));)n+=fg(e.subarray(l,l+1)),l+=1;for(n+=fg(e.subarray(l,l+1)),l+=1;"\0"!==fg(e.subarray(l,l+1));)r+=fg(e.subarray(l,l+1)),l+=1;r+=fg(e.subarray(l,l+1)),l+=1,i=gg(e,12),s=gg(e,16),o=gg(e,20),A=gg(e,24),l=28}else if(1===t){l+=4,i=gg(e,l),l+=4;const t=gg(e,l);l+=4;const s=gg(e,l);for(l+=4,a=2**32*t+s,mp(a)||(a=Number.MAX_SAFE_INTEGER,Hp.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=gg(e,l),l+=4,A=gg(e,l),l+=4;"\0"!==fg(e.subarray(l,l+1));)n+=fg(e.subarray(l,l+1)),l+=1;for(n+=fg(e.subarray(l,l+1)),l+=1;"\0"!==fg(e.subarray(l,l+1));)r+=fg(e.subarray(l,l+1)),l+=1;r+=fg(e.subarray(l,l+1)),l+=1}return{schemeIdUri:n,value:r,timeScale:i,presentationTime:a,presentationTimeDelta:s,eventDuration:o,id:A,payload:e.subarray(l,e.byteLength)}}(e);if(Mw.test(r.schemeIdUri)){const e=Hw(r,t);let i=4294967295===r.eventDuration?Number.POSITIVE_INFINITY:r.eventDuration/r.timeScale;i<=.001&&(i=Number.POSITIVE_INFINITY);const s=r.payload;n.samples.push({data:s,len:s.byteLength,dts:e,pts:e,type:Bw.emsg,duration:i})}else if(this.config.enableEmsgKLVMetadata&&r.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const e=Hw(r,t);n.samples.push({data:r.payload,len:r.payload.byteLength,dts:e,pts:e,type:Bw.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}},remux:class extends Pp{constructor(e,t,n,r){super("passthrough-remuxer",r),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,n,r){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(e,r),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:n,videoCodec:r}=this;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const{audio:i,video:s}=this.initData=bg(e);if(t)!function(e,t){if(!e||!t)return;const n=t.keyId;n&&t.isCommonEncryption&&xg(e,(e,t)=>{const r=e.subarray(8,24);r.some(e=>0!==e)||(Hp.log(`[eme] Patching keyId in 'enc${t?"a":"v"}>sinf>>tenc' box: ${Vp(r)} -> ${Vp(n)}`),e.set(n,8))})}(e,t);else{const e=i||s;null!=e&&e.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${e.codec}")!`)}i&&(n=gb(i,rg,this)),s&&(r=gb(s,ig,this));const a={};i&&s?a.audiovideo={container:"video/mp4",codec:n+","+r,supplemental:s.supplemental,encrypted:s.encrypted,initSegment:e,id:"main"}:i?a.audio={container:"audio/mp4",codec:n,encrypted:i.encrypted,initSegment:e,id:"audio"}:s?a.video={container:"video/mp4",codec:r,supplemental:s.supplemental,encrypted:s.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=a}remux(e,t,n,r,i,s){var a,o;let{initPTS:A,lastEndTime:l}=this;const c={audio:void 0,video:void 0,text:r,id3:n,initSegment:void 0};gp(l)||(l=this.lastEndTime=i||0);const u=t.samples;if(!u.length)return c;const d={initPTS:void 0,timescale:void 0,trackId:void 0};let h=this.initData;if(null!=(a=h)&&a.length||(this.generateInitSegment(u),h=this.initData),null==(o=h)||!o.length)return this.warn("Failed to generate initSegment."),c;this.emitInitSegment&&(d.tracks=this.initTracks,this.emitInitSegment=!1);const f=function(e,t,n){const r={},i=vg(e,["moof","traf"]);for(let s=0;s<i.length;s++){const e=i[s],a=vg(e,["tfhd"])[0],o=gg(a,4),A=t[o];if(!A)continue;r[o]||(r[o]={start:NaN,duration:0,sampleCount:0,timescale:A.timescale,type:A.type});const l=r[o],c=vg(e,["tfdt"])[0];if(c){const e=c[0];let t=gg(c,4);1===e&&(t===ug?n.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(t*=ug+1,t+=gg(c,8))),gp(t)&&(!gp(l.start)||t<l.start)&&(l.start=t)}const u=A.default,d=gg(a,0)|(null==u?void 0:u.flags);let h=(null==u?void 0:u.duration)||0;8&d&&(h=gg(a,2&d?12:8));const f=vg(e,["trun"]);let p=l.start||0,g=0,m=h;for(let t=0;t<f.length;t++){const e=f[t],n=gg(e,4),r=l.sampleCount;l.sampleCount+=n;const i=1&e[3],s=4&e[3],a=1&e[2],o=2&e[2],A=4&e[2],c=8&e[2];let u=8,d=n;for(i&&(u+=4),s&&n&&(1&e[u+1]||void 0!==l.keyFrameIndex||(l.keyFrameIndex=r),u+=4,a?(m=gg(e,u),u+=4):m=h,o&&(u+=4),c&&(u+=4),p+=m,g+=m,d--);d--;)a?(m=gg(e,u),u+=4):m=h,o&&(u+=4),A&&(1&e[u+1]||void 0===l.keyFrameIndex&&(l.keyFrameIndex=l.sampleCount-(d+1),l.keyFrameStart=p),u+=4),c&&(u+=4),p+=m,g+=m;!g&&h&&(g+=h*n)}l.duration+=g}if(!Object.keys(r).some(e=>r[e].duration)){let t=1/0,n=0;const i=vg(e,["sidx"]);for(let e=0;e<i.length;e++){const r=wg(i[e]);if(null!=r&&r.references){t=Math.min(t,r.earliestPresentationTime/r.timescale);const e=r.references.reduce((e,t)=>e+t.info.duration||0,0);n=Math.max(n,e+r.earliestPresentationTime/r.timescale)}}n&&gp(n)&&Object.keys(r).forEach(e=>{r[e].duration||(r[e].duration=n*r[e].timescale-r[e].start)})}return r}(u,h,this),p=h.audio?f[h.audio.id]:null,g=h.video?f[h.video.id]:null,m=pb(g,1/0),y=pb(p,1/0),v=pb(g,0,!0),w=pb(p,0,!0);let b=i,E=0;const B=p&&(!g||!A&&y<m||A&&A.trackId===h.audio.id),C=B?p:g;if(C){const e=C.timescale,t=C.start-i*e,n=B?h.audio.id:h.video.id;b=C.start/e,E=B?w-y:v-m,!s&&A||!function(e,t,n,r){if(null===e)return!0;const i=Math.max(r,1),s=t-e.baseTime/e.timescale;return Math.abs(s-n)>i}(A,b,i,E)&&e===A.timescale||(A&&this.warn(`Timestamps at playlist time: ${s?"":"~"}${i} ${t/e} != initPTS: ${A.baseTime/A.timescale} (${A.baseTime}/${A.timescale}) trackId: ${A.trackId}`),this.log(`Found initPTS at playlist time: ${i} offset: ${b-i} (${t}/${e}) trackId: ${n}`),A=null,d.initPTS=t,d.timescale=e,d.trackId=n)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${i}`);A?(d.initPTS=A.baseTime,d.timescale=A.timescale,d.trackId=A.trackId):(d.timescale&&void 0!==d.trackId&&void 0!==d.initPTS||(this.warn("Could not set initPTS"),d.initPTS=b,d.timescale=1,d.trackId=-1),this.initPTS=A={baseTime:d.initPTS,timescale:d.timescale,trackId:d.trackId});const S=b-A.baseTime/A.timescale,T=S+E;E>0?this.lastEndTime=T:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const x=!!h.audio,k=!!h.video;let I="";x&&(I+="audio"),k&&(I+="video");const F={data1:u,startPTS:S,startDTS:S,endPTS:T,endDTS:T,type:I,hasAudio:x,hasVideo:k,nb:1,dropped:0,encrypted:!!h.audio&&h.audio.encrypted||!!h.video&&h.video.encrypted};c.audio=x&&!k?F:void 0,c.video=k?F:void 0;const L=null==g?void 0:g.sampleCount;if(L){const e=g.keyFrameIndex,t=-1!==e;F.nb=L,F.dropped=0===e||this.isVideoContiguous?0:t?e:L,F.independent=t,F.firstKeyFrame=e,t&&g.keyFrameStart&&(F.firstKeyFramePTS=(g.keyFrameStart-A.baseTime)/A.timescale),this.isVideoContiguous||(c.independent=t),this.isVideoContiguous||(this.isVideoContiguous=t),F.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${e}/${L} dropped: ${F.dropped} start: ${F.firstKeyFramePTS||"NA"}`)}return c.initSegment=d,c.id3=hb(n,i,A,A),r.samples.length&&(c.text=fb(r,i,A)),c}}},{demux:zw,remux:ub},{demux:class extends Sw{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const n=sw(e,0);let r=(null==n?void 0:n.length)||0;if(Rw(e,r))return!1;for(let i=e.length;r<i;r++)if(cw(e,r))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return function(e,t){return t+5<e.length}(e,t)&&aw(e,t)&&Aw(e,t)<=e.length-t}(e,t)}appendFrame(e,t,n){uw(e,this.observer,t,n,e.manifestCodec);const r=hw(e,t,n,this.basePTS,this.frameIndex);if(r&&0===r.missing)return r}},remux:ub},{demux:class extends Sw{resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=sw(e,0);let n=(null==t?void 0:t.length)||0;if(t&&11===e[n]&&119===e[n+1]&&void 0!==Ew(t)&&Ow(e,n)<=16)return!1;for(let r=e.length;n<r;n++)if(Rw(e,n))return Hp.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return Uw(e,t)&&4<=e.length-t}(e,t)}appendFrame(e,t,n){if(null!==this.basePTS)return Dw(e,t,n,this.basePTS,this.frameIndex)}},remux:ub}];mb.splice(2,0,{demux:Qw,remux:ub});class yb{constructor(e,t,n,r,i,s){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.id=i,this.logger=s}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,r){const i=n.transmuxing;i.executeStart=ob();let s=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:o}=this;r&&(this.currentTransmuxState=r);const{contiguous:A,discontinuity:l,trackSwitch:c,accurateTimeOffset:u,timeOffset:d,initSegmentChange:h}=r||a,{audioCodec:f,videoCodec:p,defaultInitPts:g,duration:m,initSegmentData:y}=o,v=function(e,t){let n=null;e.byteLength>0&&null!=(null==t?void 0:t.key)&&null!==t.iv&&null!=t.method&&(n=t);return n}(s,t);if(v&&Fy(v.method)){const e=this.getDecrypter(),t=Ly(v.method);if(!e.isSync())return this.asyncResult=!0,this.decryptionPromise=e.webCryptoDecrypt(s,v.key.buffer,v.iv.buffer,t).then(e=>{const t=this.push(e,null,n);return this.decryptionPromise=null,t}),this.decryptionPromise;{let r=e.softwareDecrypt(s,v.key.buffer,v.iv.buffer,t);if(n.part>-1){const t=e.flush();r=t?t.buffer:t}if(!r)return i.executeEnd=ob(),vb(n);s=new Uint8Array(r)}}const w=this.needsProbing(l,c);if(w){const e=this.configureTransmuxer(s);if(e)return this.logger.warn(`[transmuxer] ${e.message}`),this.observer.emit(bp.ERROR,bp.ERROR,{type:vp.MEDIA_ERROR,details:wp.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message}),i.executeEnd=ob(),vb(n)}(l||c||h||w)&&this.resetInitSegment(y,f,p,m,t),(l||h||w)&&this.resetInitialTimestamp(g),A||this.resetContiguity();const b=this.transmux(s,v,d,u,n);this.asyncResult=wb(b);const E=this.currentTransmuxState;return E.contiguous=!0,E.discontinuity=!1,E.trackSwitch=!1,i.executeEnd=ob(),b}flush(e){const t=e.transmuxing;t.executeStart=ob();const{decrypter:n,currentTransmuxState:r,decryptionPromise:i}=this;if(i)return this.asyncResult=!0,i.then(()=>this.flush(e));const s=[],{timeOffset:a}=r;if(n){const t=n.flush();t&&s.push(this.push(t.buffer,null,e))}const{demuxer:o,remuxer:A}=this;if(!o||!A){t.executeEnd=ob();const n=[vb(e)];return this.asyncResult?Promise.resolve(n):n}const l=o.flush(a);return wb(l)?(this.asyncResult=!0,l.then(t=>(this.flushRemux(s,t,e),s))):(this.flushRemux(s,l,e),this.asyncResult?Promise.resolve(s):s)}flushRemux(e,t,n){const{audioTrack:r,videoTrack:i,id3Track:s,textTrack:a}=t,{accurateTimeOffset:o,timeOffset:A}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===Tp?"level":"track"} ${n.level}`);const l=this.remuxer.remux(r,i,s,a,A,o,!0,this.id);e.push({remuxResult:l,chunkMeta:n}),n.transmuxing.executeEnd=ob()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,r,i){const{demuxer:s,remuxer:a}=this;s&&a&&(s.resetInitSegment(e,t,n,r),a.resetInitSegment(e,t,n,i))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,r,i){let s;return s=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,r,i):this.transmuxUnencrypted(e,n,r,i),s}transmuxUnencrypted(e,t,n,r){const{audioTrack:i,videoTrack:s,id3Track:a,textTrack:o}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(i,s,a,o,t,n,!1,this.id),chunkMeta:r}}transmuxSampleAes(e,t,n,r,i){return this.demuxer.demuxSampleAes(e,t,n).then(e=>({remuxResult:this.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,n,r,!1,this.id),chunkMeta:i}))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:r}=this;let i;for(let c=0,u=mb.length;c<u;c++){var s;if(null!=(s=mb[c].demux)&&s.probe(e,this.logger)){i=mb[c];break}}if(!i)return new Error("Failed to find demuxer by probing fragment data");const a=this.demuxer,o=this.remuxer,A=i.remux,l=i.demux;o&&o instanceof A||(this.remuxer=new A(n,t,r,this.logger)),a&&a instanceof l||(this.demuxer=new l(n,t,r,this.logger),this.probe=l.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new ay(this.config)),e}}const vb=e=>({remuxResult:{},chunkMeta:e});function wb(e){return"then"in e&&e.then instanceof Function}class bb{constructor(e,t,n,r,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=r,this.defaultInitPts=i||null}}class Eb{constructor(e,t,n,r,i,s){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=r,this.timeOffset=i,this.initSegmentChange=s}}let Bb=0;class Cb{constructor(e,t,n,r){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=Bb++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=e=>{const t=e.data,n=this.hls;if(n&&null!=t&&t.event&&t.instanceNo===this.instanceNo)switch(t.event){case"init":{var r;const e=null==(r=this.workerContext)?void 0:r.objectURL;e&&self.URL.revokeObjectURL(e);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":n.logger[t.data.logType]&&n.logger[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.part=this.part,t.data.id=this.id,n.trigger(t.event,t.data)}},this.onWorkerError=e=>{if(!this.hls)return;const t=new Error(`${e.message}  (${e.filename}:${e.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(bp.ERROR,{type:vp.OTHER_ERROR,details:wp.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:t})};const i=e.config;this.hls=e,this.id=t,this.useWorker=!!i.enableWorker,this.onTransmuxComplete=n,this.onFlush=r;const s=(e,t)=>{(t=t||{}).frag=this.frag||void 0,e===bp.ERROR&&(t.parent=this.id,t.part=this.part,this.error=t.error),this.hls.trigger(e,t)};this.observer=new Zv,this.observer.on(bp.FRAG_DECRYPTED,s),this.observer.on(bp.ERROR,s);const a=Xg(i.preferManagedMediaSource);if(this.useWorker&&"undefined"!=typeof Worker){const n=this.hls.logger;if(i.workerPath||"function"==typeof __HLS_WORKER_BUNDLE__){try{i.workerPath?(n.log(`loading Web Worker ${i.workerPath} for "${t}"`),this.workerContext=function(e){const t=tw[e];if(t)return t.clientCount++,t;const n=new self.URL(e,self.location.href).href,r={worker:new self.Worker(n),scriptURL:n,clientCount:1};return tw[e]=r,r}(i.workerPath)):(n.log(`injecting Web Worker for "${t}"`),this.workerContext=function(){const e=tw[ew];if(e)return e.clientCount++,e;const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),n=self.URL.createObjectURL(t),r={worker:new self.Worker(n),objectURL:n,clientCount:1};return tw[ew]=r,r}());const{worker:e}=this.workerContext;e.addEventListener("message",this.onWorkerMessage),e.addEventListener("error",this.onWorkerError),e.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:a,id:t,config:gm(i)})}catch(u$){n.warn(`Error setting up "${t}" Web Worker, fallback to inline`,u$),this.terminateWorker(),this.error=null,this.transmuxer=new yb(this.observer,a,i,"",t,e.logger)}return}}this.transmuxer=new yb(this.observer,a,i,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=Bb++;const t=this.hls.config,n=Xg(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:n,id:this.id,config:gm(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),function(e){const t=tw[e||ew];if(t&&1===t.clientCount--){const{worker:n,objectURL:r}=t;delete tw[e||ew],r&&self.URL.revokeObjectURL(r),n.terminate()}}(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,n,r,i,s,a,o,A,l){var c,u;A.transmuxing.start=self.performance.now();const{instanceNo:d,transmuxer:h}=this,f=s?s.start:i.start,p=i.decryptdata,g=this.frag,m=!(g&&i.cc===g.cc),y=!(g&&A.level===g.level),v=g?A.sn-g.sn:-1,w=this.part?A.part-this.part.index:-1,b=0===v&&A.id>1&&A.id===(null==g?void 0:g.stats.chunkCount),E=!y&&(1===v||0===v&&(1===w||b&&w<=0)),B=self.performance.now();(y||v||0===i.stats.parsing.start)&&(i.stats.parsing.start=B),!s||!w&&E||(s.stats.parsing.start=B);const C=!(g&&(null==(c=i.initSegment)?void 0:c.url)===(null==(u=g.initSegment)?void 0:u.url)),S=new Eb(m,E,o,y,f,C);if(!E||m||C){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${i.type} sn: ${A.sn}${A.part>-1?" part: "+A.part:""} ${this.id===Tp?"level":"track"}: ${A.level} id: ${A.id}\n        discontinuity: ${m}\n        trackSwitch: ${y}\n        contiguous: ${E}\n        accurateTimeOffset: ${o}\n        timeOffset: ${f}\n        initSegmentChange: ${C}`);const e=new bb(n,r,t,a,l);this.configureTransmuxer(e)}if(this.frag=i,this.part=s,this.workerContext)this.workerContext.worker.postMessage({instanceNo:d,cmd:"demux",data:e,decryptdata:p,chunkMeta:A,state:S},e instanceof ArrayBuffer?[e]:[]);else if(h){const t=h.push(e,p,A,S);wb(t)?t.then(e=>{this.handleTransmuxComplete(e)}).catch(e=>{this.transmuxerError(e,A,"transmuxer-interface push error")}):this.handleTransmuxComplete(t)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(n){const t=n.flush(e);wb(t)?t.then(t=>{this.handleFlushResult(t,e)}).catch(t=>{this.transmuxerError(t,e,"transmuxer-interface flush error")}):this.handleFlushResult(t,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(bp.ERROR,{type:vp.MEDIA_ERROR,details:wp.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach(e=>{this.handleTransmuxComplete(e)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}class Sb extends Pp{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const r=null==t?void 0:t.renditionReports;if(r){let s=-1;for(let n=0;n<r.length;n++){const a=r[n];let o;try{o=new self.URL(a.URI,t.url).href}catch(i){this.warn(`Could not construct new URL for Rendition Report: ${i}`),o=a.URI||""}if(o===e){s=n;break}o===e.substring(0,o.length)&&(s=n)}if(-1!==s){const e=r[s],i=parseInt(e["LAST-MSN"])||t.lastPartSn;let a=parseInt(e["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const e=Math.min(t.age-t.partTarget,t.targetduration);a>=0&&e>t.partTarget&&(a+=1)}const o=n&&um(n);return new dm(i,a>=0?a:void 0,o)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(n){this.warn(`Could not construct new URL with HLS Delivery Directives: ${n}`)}return e}playlistLoaded(e,t,n){const{details:r,stats:i}=t,s=self.performance.now(),a=i.loading.first?Math.max(0,s-i.loading.first):0;r.advancedDateTime=Date.now()-a;const o=this.hls.config.timelineOffset;if(o!==r.appliedTimelineOffset){const e=Math.max(o||0,0);r.appliedTimelineOffset=e,r.fragments.forEach(t=>{t.setStart(t.playlistOffset+e)})}if(r.live||null!=n&&n.live){const o="levelInfo"in t?t.levelInfo:t.track;if(r.reloaded(n),n&&r.fragments.length>0){gv(n,r,this);const e=r.playlistParsingError;if(e){this.warn(e);const n=this.hls;if(!n.config.ignorePlaylistParsingErrors){var A;const{networkDetails:s}=t;return void n.trigger(bp.ERROR,{type:vp.NETWORK_ERROR,details:wp.LEVEL_PARSING_ERROR,fatal:!1,url:r.url,error:e,reason:e.message,level:t.level||void 0,parent:null==(A=r.fragments[0])?void 0:A.type,networkDetails:s,stats:i})}r.playlistParsingError=null}}-1===r.requestScheduled&&(r.requestScheduled=i.loading.start);const l=this.hls.mainForwardBufferInfo,c=l?l.end-l.len:0,u=wv(r,1e3*(r.edge-c));if(r.requestScheduled+u<s?r.requestScheduled=s:r.requestScheduled+=u,this.log(`live playlist ${e} ${r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED"}`),!this.canLoad||!r.live)return;let d,h,f;if(r.canBlockReload&&r.endSN&&r.advanced){const e=this.hls.config.lowLatencyMode,i=r.lastPartSn,a=r.endSN,A=r.lastPartIndex,l=i===a;-1!==A?l?(h=a+1,f=e?0:A):(h=i,f=e?A+1:r.maxPartIndex):h=a+1;const c=r.age,u=c+r.ageHeader;let p=Math.min(u-r.partTarget,1.5*r.targetduration);if(p>0){if(u>3*r.targetduration)this.log(`Playlist last advanced ${c.toFixed(2)}s ago. Omitting segment and part directives.`),h=void 0,f=void 0;else if(null!=n&&n.tuneInGoal&&u-r.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${p} with playlist age: ${r.age}`),p=0;else{const e=Math.floor(p/r.targetduration);if(h+=e,void 0!==f){f+=Math.round(p%r.targetduration/r.partTarget)}this.log(`CDN Tune-in age: ${r.ageHeader}s last advanced ${c.toFixed(2)}s goal: ${p} skip sn ${e} to part ${f}`)}r.tuneInGoal=p}if(d=this.getDeliveryDirectives(r,t.deliveryDirectives,h,f),e||!l)return r.requestScheduled=s,void this.loadingPlaylist(o,d)}else(r.canBlockReload||r.canSkipUntil)&&(d=this.getDeliveryDirectives(r,t.deliveryDirectives,h,f));d&&void 0!==h&&r.canBlockReload&&(r.requestScheduled=i.loading.first+Math.max(u-2*a,u/2)),this.scheduleLoading(o,d,r)}else this.clearTimer()}scheduleLoading(e,t,n){const r=n||e.details;if(!r)return void this.loadingPlaylist(e,t);const i=self.performance.now(),s=r.requestScheduled;if(i>=s)return void this.loadingPlaylist(e,t);const a=s-i;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(a)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),a)}getDeliveryDirectives(e,t,n,r){let i=um(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,r=t.part,i=Am),new dm(n,r,i)}checkRetry(e){const t=e.details,n=Fm(e),r=e.errorAction,{action:i,retryCount:s=0,retryConfig:a}=r||{},o=!!r&&!!a&&(i===Hm||!r.resolved&&i===Nm);if(o){var A;if(s>=a.maxNumRetry)return!1;if(n&&null!=(A=e.context)&&A.deliveryDirectives)this.warn(`Retrying playlist loading ${s+1}/${a.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const e=Um(a,s);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),e),this.warn(`Retrying playlist loading ${s+1}/${a.maxNumRetry} after "${t}" in ${e}ms`)}e.levelRetry=!0,r.resolved=!0}return o}}function Tb(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!xb(e[n].attrs,t[n].attrs))return!1;return!0}function xb(e,t,n){const r=e["STABLE-RENDITION-ID"];return r&&!n?r===t["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(n=>e[n]!==t[n])}function kb(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}class Ib{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,n){if(null===this.queues||null===this.tracks)return;const r=this.queues[t];r.push(e),1!==r.length||n||this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const n={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const n={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(n)}})}removeBlockers(){null!==this.queues&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const n=null==(t=e[0])?void 0:t.label;"async-blocker"!==n&&"async-blocker-prepend"!==n||(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(null===this.queues)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(null===this.queues||null===this.tracks)return;const t=this.queues[e];if(t.length){const i=t[0];try{i.execute()}catch(r){var n;if(i.onError(r),null===this.queues||null===this.tracks)return;const t=null==(n=this.tracks[e])?void 0:n.buffer;null!=t&&t.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){null!==this.queues&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return(null==(t=this.queues)?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return null===e||null===t?"<destroyed>":`\n${this.list("video")}\n${this.list("audio")}\n${this.list("audiovideo")}}`}list(e){var t,n;return null!=(t=this.queues)&&t[e]||null!=(n=this.tracks)&&n[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const n=null==(t=this.tracks)?void 0:t[e],r=null==n?void 0:n.buffer;return r?`SourceBuffer${r.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(e){var t;return(null==(t=this.queues)?void 0:t[e].map(e=>e.label).join(", "))||""}}const Fb=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,Lb="HlsJsTrackRemovedError";class Db extends Error{constructor(e){super(e),this.name=Lb}}function _b(e){const t=e.querySelectorAll("source");[].slice.call(t).forEach(t=>{e.removeChild(t)})}function Ub(e){return"audio"===e?1:0}class Pb{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(bp.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(bp.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(bp.MANIFEST_PARSED,this.onManifestParsed,this),e.on(bp.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(bp.BUFFER_CODECS,this.onBufferCodecs,this),e.on(bp.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(bp.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(bp.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(bp.MANIFEST_PARSED,this.onManifestParsed,this),e.off(bp.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(bp.BUFFER_CODECS,this.onBufferCodecs,this),e.off(bp.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&gp(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter((t,n)=>this.isLevelAllowed(t)&&n<=e);return this.clientRect=null,Pb.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(c$){}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(t=>e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height)}static getMaxLevelByMediaSize(e,t,n){if(null==e||!e.length)return-1;const r=(e,t)=>!t||(e.width!==t.width||e.height!==t.height);let i=e.length-1;const s=Math.max(t,n);for(let a=0;a<e.length;a+=1){const t=e[a];if((t.width>=s||t.height>=s)&&r(t,e[a+1])){i=a;break}}return i}}const Rb={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Ob={HLS:"h"};class Qb{constructor(e,t){Array.isArray(e)&&(e=e.map(e=>e instanceof Qb?e:new Qb(e))),this.value=e,this.params=t}}function Nb(e,t,n,r){return new Error(`failed to ${e} "${i=t,Array.isArray(i)?JSON.stringify(i):i instanceof Map?"Map{}":i instanceof Set?"Set{}":"object"==typeof i?JSON.stringify(i):String(i)}" as ${n}`,{cause:r});var i}function Mb(e,t,n){return Nb("serialize",e,t,n)}class Hb{constructor(e){this.description=e}}const jb="Bare Item";function $b(e){if(!1===ArrayBuffer.isView(e))throw Mb(e,"Byte Sequence");return`:${t=e,btoa(String.fromCharCode(...t))}:`;var t}function Kb(e){if(function(e){return e<-999999999999999||999999999999999<e}(e))throw Mb(e,"Integer");return e.toString()}function Vb(e,t){if(e<0)return-Vb(-e,t);const n=Math.pow(10,t);if(Math.abs(e*n%1-.5)<Number.EPSILON){const t=Math.floor(e*n);return(t%2==0?t:t+1)/n}return Math.round(e*n)/n}function Gb(e){const t=Vb(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw Mb(e,"Decimal");const n=t.toString();return n.includes(".")?n:`${n}.0`}const Wb=/[\x00-\x1f\x7f]+/;function zb(e){const t=(n=e).description||n.toString().slice(7,-1);var n;if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t))throw Mb(t,"Token");return t}function Yb(e){switch(typeof e){case"number":if(!gp(e))throw Mb(e,jb);return Number.isInteger(e)?Kb(e):Gb(e);case"string":return function(e){if(Wb.test(e))throw Mb(e,"String");return`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}(e);case"symbol":return zb(e);case"boolean":return function(e){if("boolean"!=typeof e)throw Mb(e,"Boolean");return e?"?1":"?0"}(e);case"object":if(e instanceof Date)return function(e){return`@${Kb(e.getTime()/1e3)}`}(e);if(e instanceof Uint8Array)return $b(e);if(e instanceof Hb)return zb(e);default:throw Mb(e,jb)}}function qb(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw Mb(e,"Key");return e}function Xb(e){return null==e?"":Object.entries(e).map(([e,t])=>!0===t?`;${qb(e)}`:`;${qb(e)}=${Yb(t)}`).join("")}function Jb(e){return e instanceof Qb?`${Yb(e.value)}${Xb(e.params)}`:Yb(e)}function Zb(e,t={whitespace:!0}){if("object"!=typeof e||null==e)throw Mb(e,"Dict");const n=e instanceof Map?e.entries():Object.entries(e),r=(null==t?void 0:t.whitespace)?" ":"";return Array.from(n).map(([e,t])=>{t instanceof Qb==!1&&(t=new Qb(t));let n=qb(e);var r;return!0===t.value?n+=Xb(t.params):(n+="=",Array.isArray(t.value)?n+=`(${(r=t).value.map(Jb).join(" ")})${Xb(r.params)}`:n+=Jb(t)),n}).join(`,${r}`)}function eE(e,t){return Zb(e,t)}const tE="CMCD-Object",nE="CMCD-Request",rE="CMCD-Session",iE="CMCD-Status",sE={br:tE,ab:tE,d:tE,ot:tE,tb:tE,tpb:tE,lb:tE,tab:tE,lab:tE,url:tE,pb:nE,bl:nE,tbl:nE,dl:nE,ltc:nE,mtp:nE,nor:nE,nrr:nE,rc:nE,sn:nE,sta:nE,su:nE,ttfb:nE,ttfbb:nE,ttlb:nE,cmsdd:nE,cmsds:nE,smrt:nE,df:nE,cs:nE,ts:nE,cid:rE,pr:rE,sf:rE,sid:rE,st:rE,v:rE,msd:rE,bs:iE,bsd:iE,cdn:iE,rtp:iE,bg:iE,pt:iE,ec:iE,e:iE},aE=nE;function oE(e,t){const n={};if(!e)return n;const r=Object.keys(e),i=t?(s=t,Object.keys(s).reduce((e,t)=>{var n;return null===(n=s[t])||void 0===n||n.forEach(n=>e[n]=t),e},{})):{};var s;return r.reduce((t,n)=>{var r;const s=sE[n]||i[n]||aE;return(null!==(r=t[s])&&void 0!==r?r:t[s]={})[n]=e[n],t},n)}const AE="event";const lE=e=>Math.round(e),cE=(e,t)=>Array.isArray(e)?e.map(e=>cE(e,t)):e instanceof Qb&&"string"==typeof e.value?new Qb(cE(e.value,t),e.params):(t.baseUrl&&(e=function(e,t){const n=new URL(e),r=new URL(t);if(n.origin!==r.origin)return e;const i=n.pathname.split("/").slice(1),s=r.pathname.split("/").slice(1,-1);for(;i[0]===s[0];)i.shift(),s.shift();for(;s.length;)s.shift(),i.unshift("..");return i.join("/")+n.search+n.hash}(e,t.baseUrl)),1===t.version?encodeURIComponent(e):e),uE=e=>100*lE(e/100),dE={br:lE,d:lE,bl:uE,dl:uE,mtp:uE,nor:(e,t)=>{let n=e;return t.version>=2&&(e instanceof Qb&&"string"==typeof e.value?n=new Qb([e]):"string"==typeof e&&(n=[e])),cE(n,t)},rtp:uE,tb:lE},hE="request",fE="response",pE=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],gE=["e"],mE=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function yE(e){return mE.test(e)}const vE=["d","dl","nor","ot","rtp","su"];const wE=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];const bE=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function EE(e){return bE.includes(e)||yE(e)}const BE={[fE]:function(e){return pE.includes(e)||vE.includes(e)||wE.includes(e)||yE(e)},[AE]:function(e){return pE.includes(e)||gE.includes(e)||yE(e)},[hE]:function(e){return pE.includes(e)||vE.includes(e)||yE(e)}};function CE(e,t={}){const n={};if(null==e||"object"!=typeof e)return n;const r=t.version||e.v||1,i=t.reportingMode||hE,s=1===r?EE:BE[i];let a=Object.keys(e).filter(s);const o=t.filter;"function"==typeof o&&(a=a.filter(o));const A=i===fE||i===AE;A&&!a.includes("ts")&&a.push("ts"),r>1&&!a.includes("v")&&a.push("v");const l=Dp({},dE,t.formatters),c={version:r,reportingMode:i,baseUrl:t.baseUrl};return a.sort().forEach(t=>{let i=e[t];const s=l[t];if("function"==typeof s&&(i=s(i,c)),"v"===t){if(1===r)return;i=r}"pr"==t&&1===i||(A&&"ts"===t&&!gp(i)&&(i=Date.now()),function(e){return"number"==typeof e?gp(e):null!=e&&""!==e&&!1!==e}(i)&&(function(e){return["ot","sf","st","e","sta"].includes(e)}(t)&&"string"==typeof i&&(i=new Hb(i)),n[t]=i))}),n}function SE(e,t,n){return Dp(e,function(e,t={}){const n={};if(!e)return n;const r=oE(CE(e,t),null==t?void 0:t.customHeaderMap);return Object.entries(r).reduce((e,[t,n])=>{const r=eE(n,{whitespace:!1});return r&&(e[t]=r),e},n)}(t,n))}function TE(e,t={}){if(!e)return"";const n=function(e,t={}){return e?eE(CE(e,t),{whitespace:!1}):""}(e,t);return encodeURIComponent(n)}const xE=/CMCD=[^&#]+/;function kE(e,t,n){const r=function(e,t={}){return e?`CMCD=${TE(e,t)}`:""}(t,n);if(!r)return e;if(xE.test(e))return e.replace(xE,r);const i=e.includes("?")?"&":"?";return`${e}${i}${r}`}function IE(e,t,n,r){e&&Object.keys(t).forEach(i=>{const s=e.filter(e=>e.groupId===i).map(e=>{const s=Dp({},e);return s.details=void 0,s.attrs=new By(s.attrs),s.url=s.attrs.URI=FE(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),s.groupId=s.attrs["GROUP-ID"]=t[i],s.attrs["PATHWAY-ID"]=r,s});e.push(...s)})}function FE(e,t,n,r){const{HOST:i,PARAMS:s,[n]:a}=r;let o;t&&(o=null==a?void 0:a[t],o&&(e=o));const A=new self.URL(e);return i&&!o&&(A.host=i),s&&Object.keys(s).sort().forEach(e=>{e&&A.searchParams.set(e,s[e])}),A.href}class LE extends Pp{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.mediaResolved=void 0,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=LE.CDMCleanupPromise?[LE.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=e=>{const{initDataType:t,initData:n}=e,r=`"${e.type}" event: init data type: "${t}"`;if(this.debug(r),null!==n){if(!this.keyFormatPromise){let e=Object.keys(this.keySystemAccessPromises);e.length||(e=Ky(this.config));const t=e.map($y).filter(e=>!!e);this.keyFormatPromise=this.getKeyFormatPromise(t)}this.keyFormatPromise.then(i=>{const s=jy(i);if("sinf"!==t||s!==Oy.FAIRPLAY)return void this.log(`Ignoring "${e.type}" event with init data type: "${t}" for selected key-system ${s}`);let a;try{const e=fg(new Uint8Array(n)),t=kg(Dy(JSON.parse(e).sinf));if(!t)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");a=new Uint8Array(t.subarray(8,24))}catch(u){return void this.warn(`${r} Failed to parse sinf: ${u}`)}const o=Vp(a),{keyIdToKeySessionPromise:A,mediaKeySessions:l}=this;let c=A[o];for(let e=0;e<l.length;e++){const r=l[e],i=r.decryptdata;if(!i.keyId)continue;const s=Vp(i.keyId);if(ky(a,i.keyId)||-1!==i.uri.replace(/-/g,"").indexOf(o)){if(c=A[s],!c)continue;if(i.pssh)break;delete A[s],i.pssh=new Uint8Array(n),i.keyId=a,c=A[o]=c.then(()=>this.generateRequestWithPreferredKeySession(r,t,n,"encrypted-event-key-match")),c.catch(e=>this.handleError(e));break}}c||this.handleError(new Error(`Key ID ${o} not encountered in playlist. Key-system sessions ${l.length}.`))}).catch(e=>this.handleError(e))}},this.onWaitingForKey=e=>{this.log(`"${e.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(bp.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(bp.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(bp.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(bp.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(bp.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(bp.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(bp.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(bp.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(bp.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(bp.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,r=null==t?void 0:t[e];return r?r.licenseUrl:e===Oy.WIDEVINE&&n?n:void 0}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(void 0===t)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=null==t?void 0:t[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(e,t,n)=>!!e&&n.indexOf(e)===t,r=t.map(e=>e.audioCodec).filter(n),i=t.map(e=>e.videoCodec).filter(n);return r.length+i.length===0&&i.push("avc1.42e01e"),new Promise((t,n)=>{const s=e=>{const a=e.shift();this.getMediaKeysPromise(a,r,i).then(e=>t({keySystem:a,mediaKeys:e})).catch(t=>{e.length?s(e):n(t instanceof UE?t:new UE({type:vp.KEY_SYSTEM_ERROR,details:wp.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))})};s(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if("function"!=typeof n){let e=`Configured requestMediaKeySystemAccess is not a function ${n}`;return null===Vy&&"http:"===self.location.protocol&&(e=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(e))}return n(e,t)}getMediaKeysPromise(e,t,n){var r;const i=function(e,t,n,r){let i;switch(e){case Oy.FAIRPLAY:i=["cenc","sinf"];break;case Oy.WIDEVINE:case Oy.PLAYREADY:i=["cenc"];break;case Oy.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${e}`)}return function(e,t,n,r){return[{initDataTypes:e,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:t.map(e=>({contentType:`audio/mp4; codecs=${e}`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:n.map(e=>({contentType:`video/mp4; codecs=${e}`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}(i,t,n,r)}(e,t,n,this.config.drmSystemOptions||{});let s=this.keySystemAccessPromises[e],a=null==(r=s)?void 0:r.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${gm(i)}`),a=this.requestMediaKeySystemAccess(e,i);const t=s=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(t=>{this.log(`Failed to obtain access to key-system "${e}": ${t}`)}),a.then(n=>{this.log(`Access for key-system "${n.keySystem}" obtained`);const r=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const i=t.mediaKeys=n.createMediaKeys().then(n=>(this.log(`Media-keys created for "${e}"`),t.hasMediaKeys=!0,r.then(t=>t?this.setMediaKeysServerCertificate(n,e,t):n)));return i.catch(t=>{this.error(`Failed to create media-keys for "${e}"}: ${t}`)}),i})}return a.then(()=>s.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:n}){this.log(`Creating key-system session "${t}" keyId: ${Vp(e.keyId||[])} keyUri: ${e.uri}`);const r=n.createSession(),i={decryptdata:e,keySystem:t,mediaKeys:n,mediaKeysSession:r,keyStatus:"status-pending"};return this.mediaKeySessions.push(i),i}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),r=DE(t),i="cenc";this.keyIdToKeySessionPromise[r]=this.generateRequestWithPreferredKeySession(n,i,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,t){const n=e.mediaKeysSession;return this.log(`Updating key-session "${n.sessionId}" for keyId ${Vp(e.decryptdata.keyId||[])}\n      } (data length: ${t.byteLength})`),n.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>$y(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:e,mediaKeys:t})=>this.attemptSetMediaKeys(e,t))}selectKeySystem(e){return new Promise((t,n)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:e})=>{const r=$y(e);r?t(r):n(new Error(`Unable to find format for key-system "${e}"`))}).catch(n)})}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=Ky(this.config),n=e.map(jy).filter(e=>!!e&&-1!==t.indexOf(e));return this.selectKeySystem(n)}getKeyStatus(e){const{mediaKeySessions:t}=this;for(let n=0;n<t.length;n++){const r=_E(e,t[n]);if(r)return r}}loadKey(e){const t=e.keyInfo.decryptdata,n=DE(t),r=this.bannedKeyIds[n];if(r||"internal-error"===this.getKeyStatus(t)){const n=PE(r||"internal-error",t);return this.handleError(n,e.frag),Promise.reject(n)}const i=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${i}`);const s=this.keyIdToKeySessionPromise[n];if(!s){const r=this.getKeySystemForKeyPromise(t).then(({keySystem:n,mediaKeys:r})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(n,r).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:n,mediaKeys:r,decryptdata:t}))))).then(e=>{const n=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(e,"cenc",n,"playlist-key")});return r.catch(t=>this.handleError(t,e.frag)),this.keyIdToKeySessionPromise[n]=r,r}return s.catch(n=>{if(n instanceof UE){const r=Up({},n.data);"internal-error"===this.getKeyStatus(t)&&(r.decryptdata=t);const i=new UE(r,n.message);this.handleError(i,e.frag)}}),s}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,t){if(this.hls)if(e instanceof UE){t&&(e.data.frag=t);const n=e.data.decryptdata;this.error(`${e.message}${n?` (${Vp(n.keyId||[])})`:""}`),this.hls.trigger(bp.ERROR,e.data)}else this.error(e.message),this.hls.trigger(bp.ERROR,{type:vp.KEY_SYSTEM_ERROR,details:wp.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const t=DE(e),n=this.keyIdToKeySessionPromise[t];if(!n){const t=jy(e.keyFormat),n=t?[t]:Ky(this.config);return this.attemptKeySystemAccess(n)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=Ky(this.config)),0===e.length)throw new UE({type:vp.KEY_SYSTEM_ERROR,details:wp.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${gm({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaResolved=void 0,this.mediaKeys===t)return Promise.resolve();const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const r=Promise.all(n).then(()=>this.media?this.media.setMediaKeys(t):new Promise((e,n)=>{this.mediaResolved=()=>{if(this.mediaResolved=void 0,!this.media)return n(new Error("Attempted to set mediaKeys without media element attached"));this.mediaKeys=t,this.media.setMediaKeys(t).then(e).catch(n)}}));return this.mediaKeys=t,this.setMediaKeysQueue.push(r),r.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(r),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(e=>-1===n.indexOf(e))})}generateRequestWithPreferredKeySession(e,t,n,r){var i;const s=null==(i=this.config.drmSystems)||null==(i=i[e.keySystem])?void 0:i.generateRequest;if(s)try{const r=s.call(this.hls,t,n,e);if(!r)throw new Error("Invalid response from configured generateRequest filter");t=r.initDataType,n=r.initData?r.initData:null,e.decryptdata.pssh=n?new Uint8Array(n):null}catch(h){if(this.warn(h.message),this.hls&&this.hls.config.debug)throw h}if(null===n)return this.log(`Skipping key-session request for "${r}" (no initData)`),Promise.resolve(e);const a=DE(e.decryptdata),o=e.decryptdata.uri;this.log(`Generating key-session request for "${r}" keyId: ${a} URI: ${o} (init data type: ${t} length: ${n.byteLength})`);const A=new Zv,l=e._onmessage=t=>{const n=e.mediaKeysSession;if(!n)return void A.emit("error",new Error("invalid state"));const{messageType:r,message:i}=t;this.log(`"${r}" message event for session "${n.sessionId}" message size: ${i.byteLength}`),"license-request"===r||"license-renewal"===r?this.renewLicense(e,i).catch(e=>{A.eventNames().length?A.emit("error",e):this.handleError(e)}):"license-release"===r?e.keySystem===Oy.FAIRPLAY&&this.updateKeySession(e,_y("acknowledged")).then(()=>this.removeSession(e)).catch(e=>this.handleError(e)):this.warn(`unhandled media key message type "${r}"`)},c=(e,t)=>{let n;t.keyStatus=e,e.startsWith("usable")?A.emit("resolved"):"internal-error"===e||"output-restricted"===e||"output-downscaled"===e?n=PE(e,t.decryptdata):"expired"===e?n=new Error(`key expired (keyId: ${a})`):"released"===e?n=new Error("key released"):"status-pending"===e||this.warn(`unhandled key status change "${e}" (keyId: ${a})`),n&&(A.eventNames().length?A.emit("error",n):this.handleError(n))},u=e._onkeystatuseschange=t=>{if(!e.mediaKeysSession)return void A.emit("error",new Error("invalid state"));const n=this.getKeyStatuses(e);if(!Object.keys(n).some(e=>"status-pending"!==n[e]))return;if("expired"===n[a])return this.log(`Expired key ${gm(n)} in key-session "${e.mediaKeysSession.sessionId}"`),void this.renewKeySession(e);let r=n[a];if(r)c(r,e);else{var i;const t=1e3;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(i=e.keyStatusTimeouts)[a]||(i[a]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const n=this.getKeyStatus(e.decryptdata);if(n&&"status-pending"!==n)return this.log(`No status for keyId ${a} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${n} from other session.`),c(n,e);this.log(`key status for ${a} in key-session "${e.mediaKeysSession.sessionId}" timed out after ${t}ms`),r="internal-error",c(r,e)},t)),this.log(`No status for keyId ${a} (${gm(n)}).`)}};Dv(e.mediaKeysSession,"message",l),Dv(e.mediaKeysSession,"keystatuseschange",u);const d=new Promise((e,t)=>{A.on("error",t),A.on("resolved",e)});return e.mediaKeysSession.generateRequest(t,n).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${a} URI: ${o}`)}).catch(t=>{throw new UE({type:vp.KEY_SYSTEM_ERROR,details:wp.KEY_SYSTEM_NO_SESSION,error:t,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${t}`)}).then(()=>d).catch(t=>(A.removeAllListeners(),this.removeSession(e).then(()=>{throw t}))).then(()=>(A.removeAllListeners(),e))}getKeyStatuses(e){const t={};return e.mediaKeysSession.keyStatuses.forEach((n,r)=>{if("string"==typeof r&&"object"==typeof n){const e=r;r=n,n=e}const i="buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r);e.keySystem===Oy.PLAYREADY&&16===i.length&&Uy(i);const s=Vp(i);"internal-error"===n&&(this.bannedKeyIds[s]=n),this.log(`key status change "${n}" for keyStatuses keyId: ${s} key-session "${e.mediaKeysSession.sessionId}"`),t[s]=n}),t}fetchServerCertificate(e){const t=this.config,n=new(0,t.loader)(t),r=this.getServerCertificateUrl(e);return r?(this.log(`Fetching server certificate for "${e}"`),new Promise((i,s)=>{const a={responseType:"arraybuffer",url:r},o=t.certLoadPolicy.default,A={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},l={onSuccess:(e,t,n,r)=>{i(e.data)},onError:(t,n,i,o)=>{s(new UE({type:vp.KEY_SYSTEM_ERROR,details:wp.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:Up({url:a.url,data:void 0},t)},`"${e}" certificate request failed (${r}). Status: ${t.code} (${t.text})`))},onTimeout:(t,n,i)=>{s(new UE({type:vp.KEY_SYSTEM_ERROR,details:wp.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:{url:a.url,data:void 0}},`"${e}" certificate request timed out (${r})`))},onAbort:(e,t,n)=>{s(new Error("aborted"))}};n.load(a,A,l)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise((r,i)=>{e.setServerCertificate(n).then(i=>{this.log(`setServerCertificate ${i?"success":"not supported by CDM"} (${n.byteLength}) on "${t}"`),r(e)}).catch(e=>{i(new UE({type:vp.KEY_SYSTEM_ERROR,details:wp.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(t=>this.updateKeySession(e,new Uint8Array(t)).catch(t=>{throw new UE({type:vp.KEY_SYSTEM_ERROR,details:wp.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:t,fatal:!1},t.message)}))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const r=(new DOMParser).parseFromString(n,"application/xml"),i=r.querySelectorAll("HttpHeader");if(i.length>0){let t;for(let n=0,r=i.length;n<r;n++){var s,a;t=i[n];const r=null==(s=t.querySelector("name"))?void 0:s.textContent,o=null==(a=t.querySelector("value"))?void 0:a.textContent;r&&o&&e.setRequestHeader(r,o)}}const o=r.querySelector("Challenge"),A=null==o?void 0:o.textContent;if(!A)throw new Error("Cannot find <Challenge> in key message");return _y(atob(A))}setupLicenseXHR(e,t,n,r){const i=this.config.licenseXhrSetup;return i?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return i.call(this.hls,e,t,n,r)}).catch(s=>{if(!n.decryptdata)throw s;return e.open("POST",t,!0),i.call(this.hls,e,t,n,r)}).then(n=>{e.readyState||e.open("POST",t,!0);return{xhr:e,licenseChallenge:n||r}}):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:r}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise((r,i)=>{const s=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${s}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return i(new Error("invalid state"));if(4===a.readyState)if(200===a.status){this._requestLicenseFailureCount=0;let t=a.response;this.log(`License received ${t instanceof ArrayBuffer?t.byteLength:t}`);const n=this.config.licenseResponseCallback;if(n)try{t=n.call(this.hls,a,s,e)}catch(o){this.error(o)}r(t)}else{const o=n.errorRetry,A=o?o.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>A||a.status>=400&&a.status<500)i(new UE({type:vp.KEY_SYSTEM_ERROR,details:wp.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:a,response:{url:s,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${s}). Status: ${a.status} (${a.statusText})`));else{const n=A-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${n} attempts left`),this.requestLicense(e,t).then(r,i)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,s,e,t).then(({xhr:t,licenseChallenge:n})=>{e.keySystem==Oy.PLAYREADY&&(n=this.unpackPlayReadyKeyMessage(t,n)),t.send(n)}).catch(i)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,Dv(n,"encrypted",this.onMediaEncrypted),Dv(n,"waitingforkey",this.onWaitingForKey);const r=this.mediaResolved;r?r():this.mediaKeys=n.mediaKeys}onMediaDetached(){const e=this.media;e&&(_v(e,"encrypted",this.onMediaEncrypted),_v(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={};const t=this.mediaResolved;if(t&&t(),!this.mediaKeys&&!this.mediaKeySessions.length)return;const n=this.media,r=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,Yy.clearKeyUriToKeyIdMap();const i=r.length;LE.CDMCleanupPromise=Promise.all(r.map(e=>this.removeSession(e)).concat((null==n||null==(e=n.setMediaKeys(null))?void 0:e.catch(e=>{this.log(`Could not clear media keys: ${e}`),this.hls&&this.hls.trigger(bp.ERROR,{type:vp.OTHER_ERROR,details:wp.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${e}`)})}))||Promise.resolve())).catch(e=>{this.log(`Could not close sessions and clear media keys: ${e}`),this.hls&&this.hls.trigger(bp.ERROR,{type:vp.OTHER_ERROR,details:wp.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${e}`)})}).then(()=>{i&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this._clear()}onManifestLoaded(e,{sessionKeys:t}){if(t&&this.config.emeEnabled&&!this.keyFormatPromise){const e=t.reduce((e,t)=>(-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e),[]);this.log(`Selecting key-system from session-keys ${e.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(e)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n,decryptdata:r}=e;if(t){this.log(`Remove licenses and keys and close session "${t.sessionId}" keyId: ${Vp((null==r?void 0:r.keyId)||[])}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);i>-1&&this.mediaKeySessions.splice(i,1);const{keyStatusTimeouts:s}=e;s&&Object.keys(s).forEach(e=>self.clearTimeout(s[e]));const{drmSystemOptions:a}=this.config,o=function(e){var t;return!(!e||"persistent-license"!==e.sessionType&&(null==(t=e.sessionTypes)||!t.some(e=>"persistent-license"===e)))}(a)?new Promise((e,n)=>{self.setTimeout(()=>n(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(e).catch(n)}):Promise.resolve();return o.catch(e=>{this.log(`Could not remove session: ${e}`),this.hls&&this.hls.trigger(bp.ERROR,{type:vp.OTHER_ERROR,details:wp.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${e}`)})}).then(()=>t.close()).catch(e=>{this.log(`Could not close session: ${e}`),this.hls&&this.hls.trigger(bp.ERROR,{type:vp.OTHER_ERROR,details:wp.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${e}`)})})}return Promise.resolve()}}function DE(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return Vp(e.keyId)}function _E(e,t){return e.keyId&&t.mediaKeysSession.keyStatuses.has(e.keyId)?t.mediaKeysSession.keyStatuses.get(e.keyId):e.matches(t.decryptdata)?t.keyStatus:void 0}LE.CDMCleanupPromise=void 0;class UE extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}function PE(e,t){const n="output-restricted"===e,r=n?wp.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:wp.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new UE({type:vp.KEY_SYSTEM_ERROR,details:r,fatal:!1,decryptdata:t},n?"HDCP level output restricted":`key status changed to "${e}"`)}function RE(e,t){let n;try{n=new Event("addtrack")}catch(u$){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function OE(e,t){const n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error(`addCue is failed for: ${t}`)}catch(u$){Hp.debug(`[texttrack-utils]: ${u$}`);try{const n=new self.TextTrackCue(t.startTime,t.endTime,t.text);n.id=t.id,e.addCue(n)}catch(r){Hp.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${r}`)}}"disabled"===n&&(e.mode=n)}function QE(e,t){const n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues)for(let r=e.cues.length;r--;)t&&e.cues[r].removeEventListener("enter",t),e.removeCue(e.cues[r]);"disabled"===n&&(e.mode=n)}function NE(e,t,n,r){const i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&e.cues.length>0){const i=function(e,t,n){const r=[],i=function(e,t){if(t<=e[0].startTime)return 0;const n=e.length-1;if(t>e[n].endTime)return-1;let r,i=0,s=n;for(;i<=s;)if(r=Math.floor((s+i)/2),t<e[r].startTime)s=r-1;else{if(!(t>e[r].startTime&&i<n))return r;i=r+1}return e[i].startTime-t<t-e[s].startTime?i:s}(e,t);if(i>-1)for(let s=i,a=e.length;s<a;s++){const i=e[s];if(i.startTime>=t&&i.endTime<=n)r.push(i);else if(i.startTime>n)return r}return r}(e.cues,t,n);for(let t=0;t<i.length;t++)r&&!r(i[t])||e.removeCue(i[t])}"disabled"===i&&(e.mode=i)}function ME(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];"subtitles"!==r.kind&&"captions"!==r.kind||!r.label||t.push(e[n])}return t}function HE(e){let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()}const jE=.025;let $E=function(e){return e[e.Point=0]="Point",e[e.Range=1]="Range",e}({});function KE(e,t,n){return`${e.identifier}-${n+1}-${HE(t)}`}class VE{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,null==(e=this.assetListLoader)||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const n=this.playoutLimit;if(e<=0||isNaN(n))return!1;if(0===n)return!0;return((null==(t=this.assetList[e])?void 0:t.startOffset)||0)>n}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return GE(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(0===this.startTime||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime;return t-GE(t,e)<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=gp(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return GE(e,t)}return e}get appendInPlace(){return!!this.appendInPlaceStarted||!this.appendInPlaceDisabled&&!(this.cue.once||this.cue.pre||!this.startIsAligned||!(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<jE))}set appendInPlace(e){this.appendInPlaceStarted?this.resetOnResume=!e:this.appendInPlaceDisabled=!e}get timelineStart(){return null!==this._timelineStart?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return t=null!==this._duration?this._duration:this.dateRange.duration?this.dateRange.duration:this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return"RANGE"===this.dateRange.attr["X-TIMELINE-OCCUPIES"]?$E.Range:$E.Point}get supplementsPrimary(){return"PRIMARY"===this.dateRange.attr["X-TIMELINE-STYLE"]}get contentMayVary(){return"NO"!==this.dateRange.attr["X-CONTENT-MAY-VARY"]}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||null!==this.assetListResponse}toString(){return`["${(e=this).identifier}" ${e.cue.pre?"<pre>":e.cue.post?"<post>":""}${e.timelineStart.toFixed(2)}-${e.resumeTime.toFixed(2)}]`;var e}}function GE(e,t){return e-t.start<t.duration/2&&!(Math.abs(e-(t.start+t.duration))<jE)?t.start:t.start+t.duration}function WE(e,t,n){const r=new self.URL(e,n);return"data:"!==r.protocol&&r.searchParams.set("_HLS_primary_id",t),r}function zE(e,t){for(;null!=(n=e.assetList[++t])&&n.error;)var n;return t}function YE(e){const t=e.timelineStart,n=e.duration||0;return`["${e.identifier}" ${t.toFixed(2)}-${(t+n).toFixed(2)}]`}class qE{constructor(e,t,n,r){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(bp.PLAYOUT_LIMIT_REACHED,{})};const i=this.hls=new e(t);this.interstitial=n,this.assetItem=r;const s=()=>{this.hasDetails=!0};i.once(bp.LEVEL_LOADED,s),i.once(bp.AUDIO_TRACK_LOADED,s),i.once(bp.SUBTITLE_TRACK_LOADED,s),i.on(bp.MEDIA_ATTACHING,(e,{media:t})=>{this.removeMediaListeners(),this.mediaAttached=t;this.interstitial.playoutLimit&&(t.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&i.on(bp.BUFFER_APPENDED,()=>{const e=this.bufferedEnd;this.reachedPlayout(e)&&(this._bufferedEosTime=e,i.trigger(bp.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let n=this.assetItem.uri;try{n=WE(n,e.config.primarySessionId||"").href}catch(t){}e.loadSource(n)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if(null!=(t=this.hls)&&t.bufferedToEnd)return!0;if(!e)return!1;const n=Math.min(this._bufferedEosTime||1/0,this.duration),r=this.timelineOffset,i=py.bufferInfo(e,r,0);return this.getAssetTime(i.end)>=n-.02}reachedPlayout(e){const t=this.interstitial.playoutLimit;return this.startOffset+e>=t}get destroyed(){var e;return!(null!=(e=this.hls)&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return(null==(e=this.hls)?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=py.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const t=this.interstitial.playoutLimit;if(t){const n=t-this.startOffset;if(n>0&&n<e)return n}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return(null==(e=this.hls)?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const n=e-t;if(Math.abs(n)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,e-t),n)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){var e;this.mediaAttached&&(null!=(e=this.hls)&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd))}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),null==(t=this.hls)||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,null==(e=this.hls)||e.detachMedia()}resumeBuffering(){var e;null==(e=this.hls)||e.resumeBuffering()}pauseBuffering(){var e;null==(e=this.hls)||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),(null==(e=this.hls)?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=e=>delete e.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,n){var r;null==(r=this.hls)||r.on(e,t)}once(e,t,n){var r;null==(r=this.hls)||r.once(e,t)}off(e,t,n){var r;null==(r=this.hls)||r.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${YE(this.assetItem)} ${null==(e=this.hls)?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}class XE extends Pp{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((n,r)=>e<=r.startOffset&&t>r.startOffset?(delete r.error,n+1):n,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let n=-1;e.nextEvent?n=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(n=this.findEventIndex(e.previousEvent.identifier)+1);const r=this.items;if(r)for(r[n]||(void 0===t&&(t=e.start),n=this.findItemIndexAtTime(t));n>=0&&null!=(i=r[n])&&i.event;){var i;n--}return n}findItemIndexAtTime(e,t){const n=this.items;if(n)for(let r=0;r<n.length;r++){let i=n[r];if(t&&"primary"!==t&&(i=i[t]),e===i.start||e>i.start&&e<i.end)return r}return-1}findJumpRestrictedIndex(e,t){const n=this.items;if(n)for(let r=e;r<=t&&n[r];r++){const e=n[r].event;if(null!=e&&e.restrictions.jump&&!e.appendInPlace)return r}return-1}findEventIndex(e){const t=this.items;if(t)for(let r=t.length;r--;){var n;if((null==(n=t[r].event)?void 0:n.identifier)===e)return r}return-1}findAssetIndex(e,t){const n=e.assetList,r=n.length;if(r>1)for(let i=0;i<r;i++){const e=n[i];if(!e.error){const n=e.timelineStart;if(t===n||t>n&&(t<n+(e.duration||0)||i===r-1))return i}}return 0}get assetIdAtEnd(){var e;const t=null==(e=this.items)||null==(e=e[this.length-1])?void 0:e.event;if(t){const e=t.assetList,n=e[e.length-1];if(n)return n.identifier}return null}parseInterstitialDateRanges(e,t){const n=e.main.details,{dateRanges:r}=n,i=this.events,s=this.parseDateRanges(r,{url:n.url},t),a=Object.keys(r),o=i?i.filter(e=>!a.includes(e.identifier)):[];s.length&&s.sort((e,t)=>{const n=e.cue.pre,r=e.cue.post,i=t.cue.pre,s=t.cue.post;if(n&&!i)return-1;if(i&&!n)return 1;if(r&&!s)return 1;if(s&&!r)return-1;if(!(n||i||r||s)){const n=e.startTime,r=t.startTime;if(n!==r)return n-r}return e.dateRange.tagOrder-t.dateRange.tagOrder}),this.events=s,o.forEach(e=>{this.removeEvent(e)}),this.updateSchedule(e,o)}updateSchedule(e,t=[],n=!1){const r=this.events||[];if(r.length||t.length||this.length<2){const i=this.items,s=this.parseSchedule(r,e),a=n||t.length||(null==i?void 0:i.length)!==s.length||s.some((e,t)=>Math.abs(e.playout.start-i[t].playout.start)>.005||Math.abs(e.playout.end-i[t].playout.end)>.005);a&&(this.items=s,this.onScheduleUpdate(t,i))}}parseDateRanges(e,t,n){const r=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const a=i[s],o=e[a];if(o.isInterstitial){let e=this.eventMap[a];e?e.setDateRange(o):(e=new VE(o,t),this.eventMap[a]=e,!1===n&&(e.appendInPlace=n)),r.push(e)}}return r}parseSchedule(e,t){const n=[],r=t.main.details,i=r.live?1/0:r.edge;let s=0;if((e=e.filter(e=>!(e.error||e.cue.once&&e.hasPlayed))).length){this.resolveOffsets(e,t);let r=0,o=0;if(e.forEach((t,a)=>{const A=t.cue.pre,l=t.cue.post,c=e[a-1]||null,u=t.appendInPlace,d=l?i:t.startOffset,h=t.duration,f=t.timelineOccupancy===$E.Range?h:0,p=t.resumptionOffset,g=(null==c?void 0:c.startTime)===d,m=d+t.cumulativeDuration;let y=u?m+h:d+p;if(A||!l&&d<=0){const e=o;o+=f,t.timelineStart=m;const r=s;s+=h,n.push({event:t,start:m,end:y,playout:{start:r,end:s},integrated:{start:e,end:o}})}else{if(!(d<=i))return;{if(!g){const i=d-r;if(i>.033){const A=r,l=o;o+=i;const c=s;s+=i;const u={previousEvent:e[a-1]||null,nextEvent:t,start:A,end:A+i,playout:{start:c,end:s},integrated:{start:l,end:o}};n.push(u)}else i>0&&c&&(c.cumulativeDuration+=i,n[n.length-1].end=d)}l&&(y=m),t.timelineStart=m;const i=o;o+=f;const A=s;s+=h,n.push({event:t,start:m,end:y,playout:{start:A,end:s},integrated:{start:i,end:o}})}}const v=t.resumeTime;r=l||v>i?i:v}),r<i){var a;const e=r,t=o,A=i-r;o+=A;const l=s;s+=A,n.push({previousEvent:(null==(a=n[n.length-1])?void 0:a.event)||null,nextEvent:null,start:r,end:e+A,playout:{start:l,end:s},integrated:{start:t,end:o}})}this.setDurations(i,s,o)}else{const e=0;n.push({previousEvent:null,nextEvent:null,start:e,end:i,playout:{start:e,end:i},integrated:{start:e,end:i}}),this.setDurations(i,i,i)}return n}setDurations(e,t,n){this.durations={primary:e,playout:t,integrated:n}}resolveOffsets(e,t){const n=t.main.details,r=n.live?1/0:n.edge;let i=0,s=-1;e.forEach((a,o)=>{const A=a.cue.pre,l=a.cue.post,c=A?0:l?r:a.startTime;this.updateAssetDurations(a);if(s===c?a.cumulativeDuration=i:(i=0,s=c),!l&&a.snapOptions.in&&(a.resumeAnchor=Tm(null,n.fragments,a.startOffset+a.resumptionOffset,0,0)||void 0),a.appendInPlace&&!a.appendInPlaceStarted){this.primaryCanResumeInPlaceAt(a,t)||(a.appendInPlace=!1)}if(!a.appendInPlace&&o+1<e.length){e[o+1].startTime-e[o].resumeTime<.033&&(e[o+1].appendInPlace=!1,e[o+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${a}`))}const u=gp(a.resumeOffset)?a.resumeOffset:a.duration;i+=u})}primaryCanResumeInPlaceAt(e,t){const n=e.resumeTime,r=e.startTime+e.resumptionOffset;if(Math.abs(n-r)>jE)return this.log(`"${e.identifier}" resumption ${n} not aligned with estimated timeline end ${r}`),!1;return!Object.keys(t).some(r=>{const i=t[r].details,s=i.edge;if(n>=s)return this.log(`"${e.identifier}" resumption ${n} past ${r} playlist end ${s}`),!1;const a=Tm(null,i.fragments,n);if(!a)return this.log(`"${e.identifier}" resumption ${n} does not align with any fragments in ${r} playlist (${i.fragStart}-${i.fragmentEnd})`),!0;const o="audio"===r?.175:0;return!(Math.abs(a.start-n)<jE+o||Math.abs(a.end-n)<jE+o)&&(this.log(`"${e.identifier}" resumption ${n} not aligned with ${r} fragment bounds (${a.start}-${a.end} sn: ${a.sn} cc: ${a.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let n=0,r=!1,i=!1;for(let s=0;s<e.assetList.length;s++){const a=e.assetList[s],o=t+n;a.startOffset=n,a.timelineStart=o,r||(r=null===a.duration),i||(i=!!a.error);n+=a.error?0:a.duration||0}e.duration=r&&!i?Math.max(n,e.duration):n}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function JE(e){return`[${e.event?'"'+e.event.identifier+'"':"primary"}: ${e.start.toFixed(2)}-${e.end.toFixed(2)}]`}class ZE{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const n=e.assetListUrl;let r;try{r=WE(n,this.hls.sessionId,e.baseUrl)}catch(c){const t=this.assignAssetListError(e,wp.ASSET_LIST_LOAD_ERROR,c,n);return void this.hls.trigger(bp.ERROR,t)}t&&"data:"!==r.protocol&&r.searchParams.set("_HLS_start_offset",""+t);const i=this.hls.config,s=new(0,i.loader)(i),a={responseType:"json",url:r.href},o=i.interstitialAssetListLoadPolicy.default,A={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},l={onSuccess:(t,n,r,i)=>{const s=t.data,a=null==s?void 0:s.ASSETS;if(!Array.isArray(a)){const t=this.assignAssetListError(e,wp.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),r.url,n,i);return void this.hls.trigger(bp.ERROR,t)}e.assetListResponse=s,this.hls.trigger(bp.ASSET_LIST_LOADED,{event:e,assetListResponse:s,networkDetails:i})},onError:(t,n,r,i)=>{const s=this.assignAssetListError(e,wp.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${t.code} ${t.text} (${n.url})`),n.url,i,r);this.hls.trigger(bp.ERROR,s)},onTimeout:(t,n,r)=>{const i=this.assignAssetListError(e,wp.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${n.url})`),n.url,t,r);this.hls.trigger(bp.ERROR,i)}};return s.load(a,A,l),this.hls.trigger(bp.ASSET_LIST_LOADING,{event:e}),s}assignAssetListError(e,t,n,r,i,s){return e.error=n,{type:vp.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:r,error:n,networkDetails:s,stats:i}}}function eB(e){var t;null==e||null==(t=e.play())||t.catch(()=>{})}function tB(e,t){return`[${e}] Advancing timeline position to ${t}`}class nB{constructor(e){this.buffered=void 0;const t=(t,n,r)=>{if((n>>>=0)>r-1)throw new DOMException(`Failed to execute '${t}' on 'TimeRanges': The index provided (${n}) is greater than the maximum bound (${r})`);return e[n][t]};this.buffered={get length(){return e.length},end:n=>t("end",n,e.length),start:n=>t("start",n,e.length)}}}const rB={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},iB=e=>String.fromCharCode(rB[e]||e),sB=15,aB=100,oB={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},AB={17:2,18:4,21:6,22:8,23:10,19:13,20:15},lB={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},cB={25:2,26:4,29:6,30:8,31:10,27:13,28:15},uB=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class dB{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n="function"==typeof t?t():t;Hp.log(`${this.time} [${e}] ${n}`)}}}const hB=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class fB{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class pB{constructor(){this.uchar=" ",this.penState=new fB}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class gB{constructor(e){this.chars=[],this.pos=0,this.currPenState=new fB,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<aB;t++)this.chars.push(new pB);this.logger=e}equals(e){for(let t=0;t<aB;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<aB;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<aB;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>aB&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=aB)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=iB(e);this.pos>=aB?this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(e){let t;for(t=e;t<aB;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<aB;n++){const r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e);this.chars[this.pos].setPenState(this.currPenState)}}class mB{constructor(e){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<sB;t++)this.rows.push(new gB(e));this.logger=e}reset(){for(let e=0;e<sB;e++)this.rows[e].clear();this.currRow=14}equals(e){let t=!0;for(let n=0;n<sB;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<sB;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<sB;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e);this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+gm(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let t=0;t<sB;t++)this.rows[t].clear();const e=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){const r=n.rows[e].cueStartTime,i=this.logger.time;if(null!==r&&null!==i&&r<i)for(let s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(n.rows[e+s])}}this.currRow=t;const n=this.rows[this.currRow];if(null!==e.indent){const t=e.indent,r=Math.max(t-1,0);n.setCursor(e.indent),e.color=n.chars[r].penState.foreground}const r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+gm(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",r=-1;for(let i=0;i<sB;i++){const n=this.rows[i].getTextString();n&&(r=i+1,e?t.push("Row "+r+": '"+n+"'"):t.push(n.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n}getTextAndFormat(){return this.rows}}class yB{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new mB(n),this.nonDisplayedMemory=new mB(n),this.lastOutputScreen=new mB(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}this.logger.log(2,"MIDROW: "+gm(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class vB{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;const r=this.logger=new dB;this.channels=[null,new yB(e,t,r),new yB(e+1,n,r)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let n=0;n<t.length;n+=2){const e=127&t[n],r=127&t[n+1];let i=!1,s=null;if(0===e&&0===r)continue;this.logger.log(3,()=>"["+hB([t[n],t[n+1]])+"] -> ("+hB([e,r])+")");const a=this.cmdHistory;if(e>=16&&e<=31){if(bB(e,r,a)){wB(null,null,a),this.logger.log(3,()=>"Repeated command ("+hB([e,r])+") is dropped");continue}wB(e,r,this.cmdHistory),i=this.parseCmd(e,r),i||(i=this.parseMidrow(e,r)),i||(i=this.parsePAC(e,r)),i||(i=this.parseBackgroundAttributes(e,r))}else wB(null,null,a);if(!i&&(s=this.parseChars(e,r),s)){const e=this.currentChannel;if(e&&e>0){this.channels[e].insertChars(s)}else this.logger.log(2,"No channel found yet. TEXT-MODE?")}i||s||this.logger.log(2,()=>"Couldn't parse cleaned data "+hB([e,r])+" orig: "+hB([t[n],t[n+1]]))}}parseCmd(e,t){if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;const n=20===e||21===e||23===e?1:2,r=this.channels[n];return 20===e||21===e||28===e||29===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),this.currentChannel=n,!0}parseMidrow(e,t){let n=0;if((17===e||25===e)&&t>=32&&t<=47){if(n=17===e?1:2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[n];return!!r&&(r.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+hB([e,t])+")"),!0)}return!1}parsePAC(e,t){let n;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;const r=e<=23?1:2;n=t>=64&&t<=95?1===r?oB[e]:lB[e]:1===r?AB[e]:cB[e];const i=this.channels[r];return!!i&&(i.setPAC(this.interpretPAC(n,t)),this.currentChannel=r,!0)}interpretPAC(e,t){let n;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=!(1&~n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r}parseChars(e,t){let n,r=null,i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),i>=17&&i<=19){let e;e=17===i?t+80:18===i?t+112:t+144,this.logger.log(2,()=>"Special char '"+iB(e)+"' in channel "+n),r=[e]}else e>=32&&e<=127&&(r=0===t?[e]:[e,t]);return r&&this.logger.log(3,()=>"Char codes =  "+hB(r).join(",")),r}parseBackgroundAttributes(e,t){if(!((16===e||24===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=45&&t<=47))return!1;let n;const r={};16===e||24===e?(n=Math.floor((t-32)/2),r.background=uB[n],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0));const i=e<=23?1:2;return this.channels[i].setBkgData(r),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}wB(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function wB(e,t,n){n.a=e,n.b=t}function bB(e,t,n){return n.a===e&&n.b===t}var EB=function(){if(null!=Ry&&Ry.VTTCue)return self.VTTCue;const e=["","lr","rl"],t=["start","middle","end","left","right"];function n(e,t){if("string"!=typeof t)return!1;if(!Array.isArray(e))return!1;const n=t.toLowerCase();return!!~e.indexOf(n)&&n}function r(e){return n(t,e)}function i(e,...t){let n=1;for(;n<arguments.length;n++){const t=arguments[n];for(const n in t)e[n]=t[n]}return e}function s(t,s,a){const o=this,A={enumerable:!0};o.hasBeenReset=!1;let l="",c=!1,u=t,d=s,h=a,f=null,p="",g=!0,m="auto",y="start",v=50,w="middle",b=50,E="middle";Object.defineProperty(o,"id",i({},A,{get:function(){return l},set:function(e){l=""+e}})),Object.defineProperty(o,"pauseOnExit",i({},A,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(o,"startTime",i({},A,{get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");u=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",i({},A,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",i({},A,{get:function(){return h},set:function(e){h=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",i({},A,{get:function(){return f},set:function(e){f=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",i({},A,{get:function(){return p},set:function(t){const r=function(t){return n(e,t)}(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");p=r,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",i({},A,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",i({},A,{get:function(){return m},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",i({},A,{get:function(){return y},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",i({},A,{get:function(){return v},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",i({},A,{get:function(){return w},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",i({},A,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",i({},A,{get:function(){return E},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),o.displayState=void 0}return s.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},s}();class BB{decode(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function CB(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(r||0)}const n=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?t(n[2],n[3],0,n[4]):t(n[1],n[2],n[3],n[4]):null}class SB{constructor(){this.values=Object.create(null)}set(e,t){this.get(e)||""===t||(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function TB(e,t,n,r){const i=r?e.split(r):[e];for(const s in i){if("string"!=typeof i[s])continue;const e=i[s].split(n);if(2!==e.length)continue;t(e[0],e[1])}}const xB=new EB(0,0,""),kB="middle"===xB.align?"middle":"center";function IB(e,t,n){const r=e;function i(){const t=CB(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function s(){e=e.replace(/^\s+/,"")}if(s(),t.startTime=i(),s(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.slice(3),s(),t.endTime=i(),s(),function(e,t){const r=new SB;TB(e,function(e,t){let i;switch(e){case"region":for(let i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),r.integer(e,i[0]),r.percent(e,i[0])&&r.set("snapToLines",!1),r.alt(e,i[0],["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start",kB,"end"]);break;case"position":i=t.split(","),r.percent(e,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start",kB,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",kB,"end","left","right"])}},/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");let i=r.get("line","auto");"auto"===i&&-1===xB.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",kB);let s=r.get("position","auto");"auto"===s&&50===xB.position&&(s="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=s}(e,t)}function FB(e){return e.replace(/<br(?: \/)?>/gi,"\n")}class LB{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new BB,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;function n(){let e=t.buffer,n=0;for(e=FB(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;const r=e.slice(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.slice(n),r}function r(e){TB(e,function(e,t){},/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{let e="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;e=n();const r=e.match(/^()?WEBVTT([ \t].*)?$/);if(null==r||!r[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let i=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(i?i=!1:e=n(),t.state){case"HEADER":/:/.test(e)?r(e):e||(t.state="ID");continue;case"NOTE":e||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){t.state="NOTE";break}if(!e)continue;if(t.cue=new EB(0,0,""),t.state="CUE",-1===e.indexOf("--\x3e")){t.cue.id=e;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{IB(e,t.cue,t.regionList)}catch(c$){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const n=-1!==e.indexOf("--\x3e");if(!e||n&&(i=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=e}continue;case"BADCUE":e||(t.state="ID")}}}catch(c$){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(c$){e.onparsingerror&&e.onparsingerror(c$)}return e.onflush&&e.onflush(),this}}const DB=/\r\n|\n\r|\n|\r/g,_B=function(e,t,n=0){return e.slice(n,n+t.length)===t};function UB(e,t,n){return HE(e.toString())+HE(t.toString())+HE(n)}function PB(e,t,n,r,i,s,a){const o=new LB,A=Kp(new Uint8Array(e)).trim().replace(DB,"\n").split("\n"),l=[],c=t?function(e,t=1){return ib(e,9e4,1/t)}(t.baseTime,t.timescale):0;let u,d="00:00.000",h=0,f=0,p=!0;o.oncue=function(e){const s=n[r];let a=n.ccOffset;const o=(h-c)/9e4;if(null!=s&&s.new&&(void 0!==f?a=n.ccOffset=s.start:function(e,t,n){let r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;null!=(s=i)&&s.new;){var s;e.ccOffset+=r.start-i.start,r.new=!1,r=i,i=e[r.prevCC]}e.presentationOffset=n}(n,r,o)),o){if(!t)return void(u=new Error("Missing initPTS for VTT MPEGTS"));a=o-n.presentationOffset}const A=e.endTime-e.startTime,d=db(9e4*(e.startTime+a-f),9e4*i)/9e4;e.startTime=Math.max(d,0),e.endTime=Math.max(d+A,0);const p=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(p)),e.id||(e.id=UB(e.startTime,e.endTime,p)),e.endTime>0&&l.push(e)},o.onparsingerror=function(e){u=e},o.onflush=function(){u?a(u):s(l)},A.forEach(e=>{if(p){if(_B(e,"X-TIMESTAMP-MAP=")){p=!1,e.slice(16).split(",").forEach(e=>{_B(e,"LOCAL:")?d=e.slice(6):_B(e,"MPEGTS:")&&(h=parseInt(e.slice(7)))});try{f=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),i=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!(gp(t)&&gp(n)&&gp(r)&&gp(i)))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=6e4*r,t+=36e5*i,t}(d)/1e3}catch(t){u=t}return}""===e&&(p=!1)}o.parse(e+"\n")}),o.flush()}const RB="stpp.ttml.im1t",OB=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,QB=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,NB={left:"start",center:"center",right:"end",start:"start",end:"end"};function MB(e,t,n,r){const i=vg(new Uint8Array(e),["mdat"]);if(0===i.length)return void r(new Error("Could not parse IMSC1 mdat"));const s=i.map(e=>Kp(e)),a=function(e,t,n=1,r=!1){return ib(e,t,1/n,r)}(t.baseTime,1,t.timescale);try{s.forEach(e=>n(function(e,t){const n=(new DOMParser).parseFromString(e,"text/xml"),r=n.getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},s=Object.keys(i).reduce((e,t)=>(e[t]=r.getAttribute(`ttp:${t}`)||i[t],e),{}),a="preserve"!==r.getAttribute("xml:space"),o=jB(HB(r,"styling","style")),A=jB(HB(r,"layout","region")),l=HB(r,"body","[begin]");return[].map.call(l,e=>{const n=$B(e,a);if(!n||!e.hasAttribute("begin"))return null;const r=GB(e.getAttribute("begin"),s),i=GB(e.getAttribute("dur"),s);let l=GB(e.getAttribute("end"),s);if(null===r)throw VB(e);if(null===l){if(null===i)throw VB(e);l=r+i}const c=new EB(r-t,l-t,n);c.id=UB(c.startTime,c.endTime,c.text);const u=function(e,t,n){const r="http://www.w3.org/ns/ttml#styling";let i=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;a&&n.hasOwnProperty(a)&&(i=n[a]);return s.reduce((n,s)=>{const a=KB(t,r,s)||KB(e,r,s)||KB(i,r,s);return a&&(n[s]=a),n},{})}(A[e.getAttribute("region")],o[e.getAttribute("style")],o),{textAlign:d}=u;if(d){const e=NB[d];e&&(c.lineAlign=e),c.align=d}return Dp(c,u),c}).filter(e=>null!==e)}(e,a)))}catch(o){r(o)}}function HB(e,t,n){const r=e.getElementsByTagName(t)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function jB(e){return e.reduce((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function $B(e,t){return[].slice.call(e.childNodes).reduce((e,n,r)=>{var i;return"br"===n.nodeName&&r?e+"\n":null!=(i=n.childNodes)&&i.length?$B(n,t):t?e+n.textContent.trim().replace(/\s+/g," "):e+n.textContent},"")}function KB(e,t,n){return e&&e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function VB(e){return new Error(`Could not parse ttml timestamp ${e}`)}function GB(e,t){if(!e)return null;let n=CB(e);return null===n&&(OB.test(e)?n=function(e,t){const n=OB.exec(e),r=(0|n[4])+(0|n[5])/t.subFrameRate;return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+r/t.frameRate}(e,t):QB.test(e)&&(n=function(e,t){const n=QB.exec(e),r=Number(n[1]);switch(n[2]){case"h":return 3600*r;case"m":return 60*r;case"ms":return 1e3*r;case"f":return r/t.frameRate;case"t":return r/t.tickRate}return r}(e,t))),n}class WB{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}function zB(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function YB(e,t){return!!e&&e.kind===zB(t)&&kb(t,e)}function qB(e,t,n,r){return Math.min(t,r)-Math.max(e,n)}const XB=/\s/,JB={newCue(e,t,n,r){const i=[];let s,a,o,A,l;const c=self.VTTCue||self.TextTrackCue;for(let d=0;d<r.rows.length;d++)if(s=r.rows[d],o=!0,A=0,l="",!s.isEmpty()){var u;for(let e=0;e<s.chars.length;e++)XB.test(s.chars[e].uchar)&&o?A++:(l+=s.chars[e].uchar,o=!1);s.cueStartTime=t,t===n&&(n+=1e-4),A>=16?A--:A++;const r=FB(l.trim()),h=UB(t,n,r);null!=e&&null!=(u=e.cues)&&u.getCueById(h)||(a=new c(t,n,r),a.id=h,a.line=d+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*A/32)),i.push(a))}return e&&i.length&&(i.sort((e,t)=>"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line),i.forEach(t=>OE(e,t))),i}};const ZB=/(\d+)-(\d+)\/(\d+)/;class eC{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||tC,this.controller=new self.AbortController,this.stats=new ng}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();const i=function(e,t){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(Dp({},e.headers))};e.rangeEnd&&n.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1));return n}(e,this.controller.signal),s="arraybuffer"===e.responseType,a=s?"byteLength":"length",{maxTimeToFirstByteMs:o,maxLoadTimeMs:A}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,i),self.clearTimeout(this.requestTimeout),t.timeout=o&&gp(o)?o:A,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(r,e,this.response))},t.timeout);(wb(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(n=>{var i;this.response=this.loader=n;const a=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=A,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(r,e,this.response))},A-(a-r.loading.start)),!n.ok){const{status:e,statusText:t}=n;throw new nC(t||"fetch, bad network response",e,n)}r.loading.first=a,r.total=function(e){const t=e.get("Content-Range");if(t){const e=function(e){const t=ZB.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}(t);if(gp(e))return e}const n=e.get("Content-Length");if(n)return parseInt(n)}(n.headers)||r.total;const o=null==(i=this.callbacks)?void 0:i.onProgress;return o&&gp(t.highWaterMark)?this.loadProgressively(n,r,e,t.highWaterMark,o):s?n.arrayBuffer():"json"===e.responseType?n.json():n.text()}).then(n=>{var i,s;const o=this.response;if(!o)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);const A=n[a];A&&(r.loaded=r.total=A);const l={url:o.url,data:n,code:o.status},c=null==(i=this.callbacks)?void 0:i.onProgress;c&&!gp(t.highWaterMark)&&c(r,e,n,o),null==(s=this.callbacks)||s.onSuccess(l,r,e,o)}).catch(t=>{var n;if(self.clearTimeout(this.requestTimeout),r.aborted)return;const i=t&&t.code||0,s=t?t.message:null;null==(n=this.callbacks)||n.onError({code:i,text:s},e,t?t.details:null,r)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n,r=0,i){const s=new Yv,a=e.body.getReader(),o=()=>a.read().then(a=>{if(a.done)return s.dataLength&&i(t,n,s.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const A=a.value,l=A.length;return t.loaded+=l,l<r||s.dataLength?(s.push(A),s.dataLength>=r&&i(t,n,s.flush().buffer,e)):i(t,n,A.buffer,e),o()}).catch(()=>Promise.reject());return o()}}function tC(e,t){return new self.Request(e.url,t)}class nC extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const rC=/^age:\s*[\d.]+\s*$/im;class iC{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new ng,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;const i=this.xhrSetup;i?Promise.resolve().then(()=>{if(this.loader===n&&!this.stats.aborted)return i(n,t.url)}).catch(e=>{if(this.loader===n&&!this.stats.aborted)return n.open("GET",t.url,!0),i(n,t.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)}).catch(e=>{var i;null==(i=this.callbacks)||i.onError({code:n.status,text:e.message},t,n,r)}):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const r=t.headers,{maxTimeToFirstByteMs:i,maxLoadTimeMs:s}=n.loadPolicy;if(r)for(const a in r)e.setRequestHeader(a,r[a]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=i&&gp(i)?i:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const r=t.readyState,i=this.config;if(!n.aborted&&r>=2&&(0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),i.timeout!==i.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),i.timeout=i.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),4===r)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const r=t.status,A="text"===t.responseType?t.responseText:null;if(r>=200&&r<300){const i=null!=A?A:t.response;if(null!=i){var s,a;n.loading.end=Math.max(self.performance.now(),n.loading.first);const o="arraybuffer"===t.responseType?i.byteLength:i.length;n.loaded=n.total=o,n.bwEstimate=8e3*n.total/(n.loading.end-n.loading.first);const A=null==(s=this.callbacks)?void 0:s.onProgress;A&&A(n,e,i,t);const l={url:t.responseURL,data:i,code:r};return void(null==(a=this.callbacks)||a.onSuccess(l,n,e,t))}}const l=i.loadPolicy.errorRetry;var o;if(Rm(l,n.retry,!1,{url:e.url,data:void 0,code:r}))this.retry(l);else Hp.error(`${r} while loading ${e.url}`),null==(o=this.callbacks)||o.onError({code:r,text:t.statusText},e,t,n)}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry;if(Rm(e,this.stats.retry,!0))this.retry(e);else{var t;Hp.warn(`timeout while loading ${null==(t=this.context)?void 0:t.url}`);const e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=Um(e,n.retry),n.retry++,Hp.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${null==t?void 0:t.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&rC.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const sC=Up(Up({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:6e7,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:iC,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:class extends Pp{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=e=>{var t;const{fragCurrent:n,partCurrent:r,hls:i}=this,{autoLevelEnabled:s,media:a}=i;if(!n||!a)return;const o=performance.now(),A=r?r.stats:n.stats,l=r?r.duration:n.duration,c=o-A.loading.start,u=i.minAutoLevel,d=n.level,h=this._nextAutoLevel;if(A.aborted||A.loaded&&A.loaded===A.total||d<=u)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!s)return;const f=h>-1&&h!==d,p=!!e||f;if(!p&&(a.paused||!a.playbackRate||!a.readyState))return;const g=i.mainForwardBufferInfo;if(!p&&null===g)return;const m=this.bwEstimator.getEstimateTTFB(),y=Math.abs(a.playbackRate);if(c<=Math.max(m,l/(2*y)*1e3))return;const v=g?g.len/y:0,w=A.loading.first?A.loading.first-A.loading.start:-1,b=A.loaded&&w>-1,E=this.getBwEstimate(),B=i.levels,C=B[d],S=Math.max(A.loaded,Math.round(l*(n.bitrate||C.averageBitrate)/8));let T=b?c-w:c;T<1&&b&&(T=Math.min(c,8*A.loaded/E));const x=b?1e3*A.loaded/T:0,k=m/1e3,I=x?(S-A.loaded)/x:8*S/E+k;if(I<=v)return;const F=x?8*x:E,L=!0===(null==(t=(null==e?void 0:e.details)||this.hls.latestLevelDetails)?void 0:t.live),D=this.hls.config.abrBandWidthUpFactor;let _,U=Number.POSITIVE_INFINITY;for(_=d-1;_>u;_--){const e=B[_].maxBitrate,t=!B[_].details||L;if(U=this.getTimeToLoadFrag(k,F,l*e,t),U<Math.min(v,l+k))break}if(U>=I)return;if(U>10*l)return;b?this.bwEstimator.sample(c-Math.min(m,w),A.loaded):this.bwEstimator.sampleTTFB(c);const P=B[_].maxBitrate;this.getBwEstimate()*D>P&&this.resetEstimator(P);const R=this.findBestLevel(P,u,_,0,v,1,1);R>-1&&(_=R),this.warn(`Fragment ${n.sn}${r?" part "+r.index:""} of level ${d} is loading too slowly;\n      Fragment duration: ${n.duration.toFixed(3)}\n      Time to underbuffer: ${v.toFixed(3)} s\n      Estimated load time for current fragment: ${I.toFixed(3)} s\n      Estimated load time for down switch fragment: ${U.toFixed(3)} s\n      TTFB estimate: ${0|w} ms\n      Current BW estimate: ${gp(E)?0|E:"Unknown"} bps\n      New BW estimate: ${0|this.getBwEstimate()} bps\n      Switching to level ${_} @ ${0|P} bps`),i.nextLoadLevel=i.nextAutoLevel=_,this.clearTimer();const O=()=>{if(this.clearTimer(),this.fragCurrent===n&&this.hls.loadLevel===_&&_>0){const e=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${_>0?"and switching down":""}\n      Fragment duration: ${n.duration.toFixed(3)} s\n      Time to underbuffer: ${e.toFixed(3)} s`),n.abortRequests(),this.fragCurrent=this.partCurrent=null,_>u){let t=this.findBestLevel(this.hls.levels[u].bitrate,u,_,0,e,1,1);-1===t&&(t=u),this.hls.nextLoadLevel=this.hls.nextAutoLevel=t,this.resetEstimator(this.hls.levels[t].bitrate)}}};f||I>2*U?O():this.timer=self.setInterval(O,1e3*U),i.trigger(bp.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,part:r,stats:A})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new Fp(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.on(bp.FRAG_LOADING,this.onFragLoading,this),e.on(bp.FRAG_LOADED,this.onFragLoaded,this),e.on(bp.FRAG_BUFFERED,this.onFragBuffered,this),e.on(bp.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(bp.LEVEL_LOADED,this.onLevelLoaded,this),e.on(bp.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(bp.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(bp.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.off(bp.FRAG_LOADING,this.onFragLoading,this),e.off(bp.FRAG_LOADED,this.onFragLoaded,this),e.off(bp.FRAG_BUFFERED,this.onFragBuffered,this),e.off(bp.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(bp.LEVEL_LOADED,this.onLevelLoaded,this),e.off(bp.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(bp.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(bp.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){var r;if(!n.bitrateTest)this.fragCurrent=n,this.partCurrent=null!=(r=t.part)?r:null;this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case wp.BUFFER_ADD_CODEC_ERROR:case wp.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case wp.FRAG_LOAD_TIMEOUT:{const e=t.frag,{fragCurrent:n,partCurrent:r}=this;if(e&&n&&e.sn===n.sn&&e.level===n.level){const t=performance.now(),n=r?r.stats:e.stats,i=t-n.loading.start,s=n.loading.first?n.loading.first-n.loading.start:-1;if(n.loaded&&s>-1){const e=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(i-Math.min(e,s),n.loaded)}else this.bwEstimator.sampleTTFB(i)}break}}}getTimeToLoadFrag(e,t,n,r){return e+n/t+(r?e+this.lastLevelLoadSec:0)}onLevelLoaded(e,t){const n=this.hls.config,{loading:r}=t.stats,i=r.end-r.first;gp(i)&&(this.lastLevelLoadSec=i/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:n}){const r=n?n.stats:t.stats;if(t.type===Tp&&this.bwEstimator.sampleTTFB(r.loading.first-r.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const e=n?n.duration:t.duration,i=this.hls.levels[t.level],s=(i.loaded?i.loaded.bytes:0)+r.loaded,a=(i.loaded?i.loaded.duration:0)+e;i.loaded={bytes:s,duration:a},i.realBitrate=Math.round(8*s/a)}if(t.bitrateTest){const e={stats:r,frag:t,part:n,id:t.type};this.onFragBuffered(bp.FRAG_BUFFERED,e),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:n,part:r}=t,i=null!=r&&r.stats.loaded?r.stats:n.stats;if(i.aborted)return;if(this.ignoreFragment(n))return;const s=i.parsing.end-i.loading.start-Math.min(i.loading.first-i.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(s,i.loaded),i.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Tp||"initSegment"===e.sn}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,i=this.findBestLevel(n,t,e,0,r,1,1);if(i>-1)return i;const s=this.hls.firstLevel,a=Math.min(Math.max(s,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${s} clamped to ${a}`),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,t=this.bwEstimator.canEstimate(),n=this.lastLoadedFragLevel>-1;if(!(-1===e||t&&n&&this.nextAutoLevelKey!==this.getAutoLevelKey()))return e;const r=t&&n?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){const t=this.hls.levels;if(t.length>Math.max(e,r)&&t[e].loadError<=t[r].loadError)return e}return this._nextAutoLevel=r,this.nextAutoLevelKey=this.getAutoLevelKey(),r}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:r,config:i,minAutoLevel:s}=n,a=t?t.duration:e?e.duration:0,o=this.getBwEstimate(),A=this.getStarvationDelay();let l=i.abrBandWidthFactor,c=i.abrBandWidthUpFactor;if(A){const e=this.findBestLevel(o,s,r,A,0,l,c);if(e>=0)return this.rebufferNotice=-1,e}let u=a?Math.min(a,i.maxStarvationDelay):i.maxStarvationDelay;if(!A){const e=this.bitrateTestDelay;if(e){u=(a?Math.min(a,i.maxLoadingDelay):i.maxLoadingDelay)-e,this.info(`bitrate test took ${Math.round(1e3*e)}ms, set first fragment max fetchDuration to ${Math.round(1e3*u)} ms`),l=c=1}}const d=this.findBestLevel(o,s,r,A,u,l,c);if(this.rebufferNotice!==d&&(this.rebufferNotice=d,this.info(`${A?"rebuffering expected":"buffer is empty"}, optimal quality level ${d}`)),d>-1)return d;const h=n.levels[s],f=n.loadLevelObj;return f&&(null==h?void 0:h.bitrate)<f.bitrate?s:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,r=e.mainForwardBufferInfo;return(r?r.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,r,i,s,a){var o;const A=r+i,l=this.lastLoadedFragLevel,c=-1===l?this.hls.firstLevel:l,{fragCurrent:u,partCurrent:d}=this,{levels:h,allAudioTracks:f,loadLevel:p,config:g}=this.hls;if(1===h.length)return 0;const m=h[c],y=!(null==(o=this.hls.latestLevelDetails)||!o.live),v=-1===p||-1===l;let w,b="SDR",E=(null==m?void 0:m.frameRate)||0;const{audioPreference:B,videoPreference:C}=g,S=this.audioTracksByGroup||(this.audioTracksByGroup=ym(f));let T=-1;if(v){if(-1!==this.firstSelection)return this.firstSelection;const r=this.codecTiers||(this.codecTiers=function(e,t,n,r){return e.slice(n,r+1).reduce((e,n,r)=>{if(!n.codecSet)return e;const i=n.audioGroups;let s=e[n.codecSet];s||(e[n.codecSet]=s={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:r,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!i,fragmentError:0}),s.minBitrate=Math.min(s.minBitrate,n.bitrate);const a=Math.min(n.height,n.width);return s.minHeight=Math.min(s.minHeight,a),s.minFramerate=Math.min(s.minFramerate,n.frameRate),s.minIndex=Math.min(s.minIndex,r),s.maxScore=Math.max(s.maxScore,n.score),s.fragmentError+=n.fragmentError,s.videoRanges[n.videoRange]=(s.videoRanges[n.videoRange]||0)+1,i&&i.forEach(e=>{if(!e)return;const n=t.groups[e];n&&(s.hasDefaultAudio=s.hasDefaultAudio||t.hasDefaultAudio?n.hasDefault:n.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(n.channels).forEach(e=>{s.channels[e]=(s.channels[e]||0)+n.channels[e]}))}),e},{})}(h,S,t,n)),i=function(e,t,n,r,i){const s=Object.keys(e),a=null==r?void 0:r.channels,o=null==r?void 0:r.audioCodec,A=null==i?void 0:i.videoCodec,l=a&&2===parseInt(a);let c=!1,u=!1,d=1/0,h=1/0,f=1/0,p=1/0,g=0,m=[];const{preferHDR:y,allowedVideoRanges:v}=pm(t,i);for(let B=s.length;B--;){const t=e[s[B]];c||(c=t.channels[2]>0),d=Math.min(d,t.minHeight),h=Math.min(h,t.minFramerate),f=Math.min(f,t.minBitrate),v.filter(e=>t.videoRanges[e]>0).length>0&&(u=!0)}d=gp(d)?d:0,h=gp(h)?h:0;const w=Math.max(1080,d),b=Math.max(30,h);f=gp(f)?f:n,n=Math.max(f,n),u||(t=void 0);const E=s.length>1;return{codecSet:s.reduce((t,r)=>{const i=e[r];if(r===t)return t;if(m=u?v.filter(e=>i.videoRanges[e]>0):[],E){if(i.minBitrate>n)return mm(r,`min bitrate of ${i.minBitrate} > current estimate of ${n}`),t;if(!i.hasDefaultAudio)return mm(r,"no renditions with default or auto-select sound found"),t;if(o&&r.indexOf(o.substring(0,4))%5!=0)return mm(r,`audio codec preference "${o}" not found`),t;if(a&&!l){if(!i.channels[a])return mm(r,`no renditions with ${a} channel sound found (channels options: ${Object.keys(i.channels)})`),t}else if((!o||l)&&c&&0===i.channels[2])return mm(r,"no renditions with stereo sound found"),t;if(i.minHeight>w)return mm(r,`min resolution of ${i.minHeight} > maximum of ${w}`),t;if(i.minFramerate>b)return mm(r,`min framerate of ${i.minFramerate} > maximum of ${b}`),t;if(!m.some(e=>i.videoRanges[e]>0))return mm(r,`no variants with VIDEO-RANGE of ${gm(m)} found`),t;if(A&&r.indexOf(A.substring(0,4))%5!=0)return mm(r,`video codec preference "${A}" not found`),t;if(i.maxScore<g)return mm(r,`max score of ${i.maxScore} < selected max of ${g}`),t}return t&&(Kg(r)>=Kg(t)||i.fragmentError>e[t].fragmentError)?t:(p=i.minIndex,g=i.maxScore,r)},void 0),videoRanges:m,preferHDR:y,minFramerate:h,minBitrate:f,minIndex:p}}(r,b,e,B,C),{codecSet:s,videoRanges:a,minFramerate:o,minBitrate:A,minIndex:l,preferHDR:c}=i;T=l,w=s,b=c?a[a.length-1]:a[0],E=o,e=Math.max(e,A),this.log(`picked start tier ${gm(i)}`)}else w=null==m?void 0:m.codecSet,b=null==m?void 0:m.videoRange;const x=d?d.duration:u?u.duration:0,k=this.bwEstimator.getEstimateTTFB()/1e3,I=[];for(let L=n;L>=t;L--){var F;const t=h[L],o=L>c;if(!t)continue;if(g.useMediaCapabilities&&!t.supportedResult&&!t.supportedPromise){const n=navigator.mediaCapabilities;"function"==typeof(null==n?void 0:n.decodingInfo)&&nm(t,S,b,E,e,B)?(t.supportedPromise=rm(t,S,n,this.supportedCache),t.supportedPromise.then(e=>{if(!this.hls)return;t.supportedResult=e;const n=this.hls.levels,r=n.indexOf(t);e.error?this.warn(`MediaCapabilities decodingInfo error: "${e.error}" for level ${r} ${gm(e)}`):e.supported?e.decodingInfoResults.some(e=>!1===e.smooth||!1===e.powerEfficient)&&this.log(`MediaCapabilities decodingInfo for level ${r} not smooth or powerEfficient: ${gm(e)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${r} ${gm(e)}`),r>-1&&n.length>1&&(this.log(`Removing unsupported level ${r}`),this.hls.removeLevel(r),-1===this.hls.loadLevel&&(this.hls.nextLoadLevel=0)))}).catch(e=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${e}`)})):t.supportedResult=em}if((w&&t.codecSet!==w||b&&t.videoRange!==b||o&&E>t.frameRate||!o&&E>0&&E<t.frameRate||null!=(F=t.supportedResult)&&null!=(F=F.decodingInfoResults)&&F.some(e=>!1===e.smooth))&&(!v||L!==T)){I.push(L);continue}const u=t.details,f=(d?null==u?void 0:u.partTarget:null==u?void 0:u.averagetargetduration)||x;let m;m=o?a*e:s*e;const C=x&&r>=2*x&&0===i?t.averageBitrate:t.maxBitrate,D=this.getTimeToLoadFrag(k,m,C*f,void 0===u);if(m>=C&&(L===l||0===t.loadError&&0===t.fragmentError)&&(D<=k||!gp(D)||y&&!this.bitrateTestDelay||D<A)){const e=this.forcedAutoLevel;return L===p||-1!==e&&e===p||(I.length&&this.trace(`Skipped level(s) ${I.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${h[I[0]].codecs}" ${h[I[0]].videoRange}; not compatible with "${w}" ${b}`),this.info(`switch candidate:${c}->${L} adjustedbw(${Math.round(m)})-bitrate=${Math.round(m-C)} ttfb:${k.toFixed(1)} avgDuration:${f.toFixed(1)} maxFetchDuration:${A.toFixed(1)} fetchDuration:${D.toFixed(1)} firstSelection:${v} codecSet:${t.codecSet} videoRange:${t.videoRange} hls.loadLevel:${p}`)),v&&(this.firstSelection=L),L}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls;return Math.min(Math.max(e,n),t)}},bufferController:class extends Pp{constructor(e,t){var n;super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=e=>{var t;this.hls&&"open"===(null==(t=this.mediaSource)?void 0:t.readyState)&&this.hls.pauseBuffering()},this._onStartStreaming=e=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=e=>{const{media:t,mediaSource:n}=this;e&&this.log("Media source opened"),t&&n&&(n.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(bp.MEDIA_ATTACHED,{media:t,mediaSource:n}),null!==this.mediaSource&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:e,_objectUrl:t}=this;e!==t&&this.error(`Media element src was set while attaching MediaSource (${t} > ${e})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=(n=jp(e.config.preferManagedMediaSource),"undefined"!=typeof self&&n===self.ManagedMediaSource),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(bp.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(bp.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.on(bp.MANIFEST_PARSED,this.onManifestParsed,this),e.on(bp.BUFFER_RESET,this.onBufferReset,this),e.on(bp.BUFFER_APPENDING,this.onBufferAppending,this),e.on(bp.BUFFER_CODECS,this.onBufferCodecs,this),e.on(bp.BUFFER_EOS,this.onBufferEos,this),e.on(bp.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(bp.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(bp.FRAG_PARSED,this.onFragParsed,this),e.on(bp.FRAG_CHANGED,this.onFragChanged,this),e.on(bp.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(bp.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(bp.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.off(bp.MANIFEST_PARSED,this.onManifestParsed,this),e.off(bp.BUFFER_RESET,this.onBufferReset,this),e.off(bp.BUFFER_APPENDING,this.onBufferAppending,this),e.off(bp.BUFFER_CODECS,this.onBufferCodecs,this),e.off(bp.BUFFER_EOS,this.onBufferEos,this),e.off(bp.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(bp.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(bp.FRAG_PARSED,this.onFragParsed,this),e.off(bp.FRAG_CHANGED,this.onFragChanged,this),e.off(bp.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const n={};if(this.operationQueue){const e=this.isUpdating();e||this.operationQueue.removeBlockers();const t=this.isQueued();(e||t)&&this.warn(`Transfering MediaSource with${t?" operations in queue":""}${e?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const r=this.transferData;return!this.sourceBufferCount&&r&&r.mediaSource===t?Dp(n,r.tracks):this.sourceBuffers.forEach(e=>{const[t]=e;t&&(n[t]=Dp({},this.tracks[t]),this.removeBuffer(t)),e[0]=e[1]=null}),{media:e,mediaSource:t,tracks:n}}initTracks(){this.sourceBuffers=[[null,null],[null,null]],this.tracks={},this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var n;let r=2;(t.audio&&!t.video||!t.altAudio)&&(r=1),this.bufferCodecEventsTotal=r,this.log(`${r} bufferCodec event(s) expected.`),null!=(n=this.transferData)&&n.mediaSource&&this.sourceBufferCount&&r&&this.bufferCreated()}onMediaAttaching(e,t){const n=this.media=t.media;this.transferData=this.overrides=void 0;const r=jp(this.appendSource);if(r){const e=!!t.mediaSource;(e||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const s=this.mediaSource=t.mediaSource||new r;if(this.assignMediaSource(s),e)this._objectUrl=n.src,this.attachTransferred();else{const e=this._objectUrl=self.URL.createObjectURL(s);if(this.appendSource)try{n.removeAttribute("src");const t=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||t&&s instanceof t,_b(n),function(e,t){const n=self.document.createElement("source");n.type="video/mp4",n.src=t,e.appendChild(n)}(n,e),n.load()}catch(i){n.src=e}else n.src=e}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,n;this.log(`${(null==(t=this.transferData)?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${null==(n=e.constructor)?void 0:n.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const n=this.tracks,r=t.tracks,i=r?Object.keys(r):null,s=i?i.length:0,a=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(r&&i&&s){if(!this.tracksReady)return this.hls.config.startFragPrefetch=!0,void this.log("attachTransferred: waiting for SourceBuffer track info");if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})\nrequired tracks: ${gm(n,(e,t)=>"initSegment"===e?void 0:t)};\ntransfer tracks: ${gm(r,(e,t)=>"initSegment"===e?void 0:t)}}`),!$p(r,n)){t.mediaSource=null,t.tracks=void 0;const i=e.currentTime,s=this.details,a=Math.max(i,(null==s?void 0:s.fragments[0].start)||0);return a-i>1?void this.log(`attachTransferred: waiting for playback to reach new tracks start time ${i} -> ${a}`):(this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(r)}"->"${Object.keys(n)}") start time: ${a} currentTime: ${i}`),this.onMediaDetaching(bp.MEDIA_DETACHING,{}),this.onMediaAttaching(bp.MEDIA_ATTACHING,t),void(e.currentTime=a))}this.transferData=void 0,i.forEach(e=>{const t=e,n=r[t];if(n){const e=n.buffer;if(e){const r=this.fragmentTracker,i=n.id;if(r.hasFragments(i)||r.hasParts(i)){const n=py.getBuffered(e);r.detectEvictedFragments(t,n,i,null,!0)}const s=Ub(t),a=[t,e];this.sourceBuffers[s]=a,e.updating&&this.operationQueue&&this.operationQueue.prependBlocker(t),this.trackSourceBuffer(t,n)}}}),a(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),a()}get mediaSourceOpenOrEnded(){var e;const t=null==(e=this.mediaSource)?void 0:e.readyState;return"open"===t||"ended"===t}onMediaDetaching(e,t){const n=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:r,mediaSource:i,_objectUrl:s}=this;if(i){if(this.log("media source "+(n?"transferring":"detaching")),n)this.sourceBuffers.forEach(([e])=>{e&&this.removeBuffer(e)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const e="open"===i.readyState;try{const t=i.sourceBuffers;for(let n=t.length;n--;)e&&t[n].abort(),i.removeSourceBuffer(t[n]);e&&i.endOfStream()}catch(u$){this.warn(`onMediaDetaching: ${u$.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}i.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("sourceended",this._onMediaSourceEnded),i.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(i.removeEventListener("startstreaming",this._onStartStreaming),i.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}r&&(r.removeEventListener("emptied",this._onMediaEmptied),n||(s&&self.URL.revokeObjectURL(s),this.mediaSrc===s?(r.removeAttribute("src"),this.appendSource&&_b(r),r.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(bp.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const n=null==(t=this.tracks[e])?void 0:t.buffer;if(this.removeBuffer(e),n)try{var r;null!=(r=this.mediaSource)&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(u$){this.warn(`onBufferReset ${e}`,u$)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[Ub(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new Ib(this.tracks)}onBufferCodecs(e,t){var n;const r=this.tracks,i=Object.keys(t);this.log(`BUFFER_CODECS: "${i}" (current SB count ${this.sourceBufferCount})`);const s="audiovideo"in t&&(r.audio||r.video)||r.audiovideo&&("audio"in t||"video"in t),a=!s&&this.sourceBufferCount&&this.media&&i.some(e=>!r[e]);s||a?this.warn(`Unsupported transition between "${Object.keys(r)}" and "${i}" SourceBuffers`):(i.forEach(e=>{var n,i;const s=t[e],{id:a,codec:o,levelCodec:A,container:l,metadata:c,supplemental:u}=s;let d=r[e];const h=null==(n=this.transferData)||null==(n=n.tracks)?void 0:n[e],f=null!=h&&h.buffer?h:d,p=(null==f?void 0:f.pendingCodec)||(null==f?void 0:f.codec),g=null==f?void 0:f.levelCodec;d||(d=r[e]={buffer:void 0,listeners:[],codec:o,supplemental:u,container:l,levelCodec:A,metadata:c,id:a});const m=zg(p,g),y=null==m?void 0:m.replace(Fb,"$1");let v=zg(o,A);const w=null==(i=v)?void 0:i.replace(Fb,"$1");v&&m&&y!==w&&("audio"===e.slice(0,5)&&(v=Wg(v,this.appendSource)),this.log(`switching codec ${p} to ${v}`),v!==(d.pendingCodec||d.codec)&&(d.pendingCodec=v),d.container=l,this.appendChangeType(e,l,v))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),this.sourceBufferCount||(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!t.video&&"main"===(null==(n=t.audio)?void 0:n.id)&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks()))}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const n=this.tracks[t];return e[t]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},e},{})}appendChangeType(e,t,n){const r=`${t};codecs=${n}`,i={label:`change-type=${r}`,execute:()=>{const i=this.tracks[e];if(i){const s=i.buffer;null!=s&&s.changeType&&(this.log(`changing ${e} sourceBuffer type to ${r}`),s.changeType(r),i.codec=n,i.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:t=>{this.warn(`Failed to change ${e} SourceBuffer type`,t)}};this.append(i,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const n=e.start,r=n+.05*e.duration;if(!0===(null==(t=this.fragmentTracker.getAppendedFrag(n,Tp))?void 0:t.gap))return;const i={label:"block-audio",execute:()=>{var e;const t=this.tracks.video;(this.lastVideoAppendEnd>r||null!=t&&t.buffer&&py.isBuffered(t.buffer,r)||!0===(null==(e=this.fragmentTracker.getAppendedFrag(r,Tp))?void 0:e.gap))&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:e=>{this.warn("Error executing block-audio operation",e)}};this.blockedAudioAppend={op:i,frag:e},this.append(i,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:n}=this,{data:r,type:i,parent:s,frag:a,part:o,chunkMeta:A,offset:l}=t,c=A.buffering[i],{sn:u,cc:d}=a,h=self.performance.now();c.start=h;const f=a.stats.buffering,p=o?o.stats.buffering:null;0===f.start&&(f.start=h),p&&0===p.start&&(p.start=h);const g=n.audio;let m=!1;"audio"===i&&"audio/mpeg"===(null==g?void 0:g.container)&&(m=!this.lastMpegAudioChunk||1===A.id||this.lastMpegAudioChunk.sn!==A.sn,this.lastMpegAudioChunk=A);const y=n.video,v=null==y?void 0:y.buffer;if(v&&"initSegment"!==u){const e=o||a,t=this.blockedAudioAppend;if("audio"!==i||"main"===s||this.blockedAudioAppend||y.ending||y.ended){if("video"===i){const n=e.end;if(t){const e=t.frag.start;(n>e||n<this.lastVideoAppendEnd||py.isBuffered(v,e))&&this.unblockAudio()}this.lastVideoAppendEnd=n}}else{const t=e.start+.05*e.duration,n=v.buffered,r=this.currentOp("video");n.length||r?!r&&!py.isBuffered(v,t)&&this.lastVideoAppendEnd<t&&this.blockAudio(e):this.blockAudio(e)}}const w=(o||a).start,b={label:`append-${i}`,execute:()=>{var e;c.executeStart=self.performance.now();const t=null==(e=this.tracks[i])?void 0:e.buffer;t&&(m?this.updateTimestampOffset(t,w,.1,i,u,d):void 0!==l&&gp(l)&&this.updateTimestampOffset(t,l,1e-6,i,u,d)),this.appendExecutor(r,i)},onStart:()=>{},onComplete:()=>{const e=self.performance.now();c.executeEnd=c.end=e,0===f.first&&(f.first=e),p&&0===p.first&&(p.first=e);const t={};this.sourceBuffers.forEach(([e,n])=>{e&&(t[e]=py.getBuffered(n))}),this.appendErrors[i]=0,"audio"===i||"video"===i?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(bp.BUFFER_APPENDED,{type:i,frag:a,part:o,chunkMeta:A,parent:a.type,timeRanges:t})},onError:e=>{var t;const n={type:vp.MEDIA_ERROR,parent:a.type,details:wp.BUFFER_APPEND_ERROR,sourceBufferName:i,frag:a,part:o,chunkMeta:A,error:e,err:e,fatal:!1},r=null==(t=this.media)?void 0:t.error;if(e.code===DOMException.QUOTA_EXCEEDED_ERR||"QuotaExceededError"==e.name||"quota"in e)n.details=wp.BUFFER_FULL_ERROR;else if(e.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!r)n.errorAction=Gm(!0);else if(e.name===Lb&&0===this.sourceBufferCount)n.errorAction=Gm(!0);else{const e=++this.appendErrors[i];this.warn(`Failed ${e}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${i}" sourceBuffer (${r||"no media error"})`),(e>=this.hls.config.appendErrorMaxRetry||r)&&(n.fatal=!0)}this.hls.trigger(bp.ERROR,n)}};this.log(`queuing "${i}" append sn: ${u}${o?" p: "+o.index:""} of ${a.type===Tp?"level":"track"} ${a.level} cc: ${d}`),this.append(b,i,this.isPending(this.tracks[i]))}getFlushOp(e,t,n){return this.log(`queuing "${e}" remove ${t}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(bp.BUFFER_FLUSHED,{type:e})},onError:r=>{this.warn(`Failed to remove ${t}-${n} from "${e}" SourceBuffer`,r)}}}onBufferFlushing(e,t){const{type:n,startOffset:r,endOffset:i}=t;n?this.append(this.getFlushOp(n,r,i),n):this.sourceBuffers.forEach(([e])=>{e&&this.append(this.getFlushOp(e,r,i),e)})}onFragParsed(e,t){const{frag:n,part:r}=t,i=[],s=r?r.elementaryStreams:n.elementaryStreams;s[sg]?i.push("audiovideo"):(s[rg]&&i.push("audio"),s[ig]&&i.push("video"));0===i.length&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(()=>{const e=self.performance.now();n.stats.buffering.end=e,r&&(r.stats.buffering.end=e);const t=r?r.stats:n.stats;this.hls.trigger(bp.FRAG_BUFFERED,{frag:n,part:r,stats:t,id:n.type})},i).catch(e=>{this.warn(`Fragment buffered callback ${e}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const t=this.tracks[e];if(t)return!t.ended||t.ending}return!1})}onBufferEos(e,t){var n;this.sourceBuffers.forEach(([e])=>{if(e){const n=this.tracks[e];t.type&&t.type!==e||(n.ending=!0,n.ended||(n.ended=!0,this.log(`${e} buffer reached EOS`)))}});const r=!1!==(null==(n=this.overrides)?void 0:n.endOfStream);this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{var t;return e&&!(null!=(t=this.tracks[e])&&t.ended)})?r?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:e}=this;e&&"open"===e.readyState?(this.log("Calling mediaSource.endOfStream()"),e.endOfStream(),this.hls.trigger(bp.BUFFERED_TO_END,void 0)):e&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${e.readyState}`)})):(this.tracksEnded(),this.hls.trigger(bp.BUFFERED_TO_END,void 0)):"video"===t.type&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(null!==e){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===wp.BUFFER_APPEND_ERROR&&t.frag){var n;const e=null==(n=t.errorAction)?void 0:n.nextAutoLevel;gp(e)&&e!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||null===t)return;if(!this.sourceBufferCount)return;const r=e.config,i=n.currentTime,s=t.levelTargetDuration,a=t.live&&null!==r.liveBackBufferLength?r.liveBackBufferLength:r.backBufferLength;if(gp(a)&&a>=0){const e=Math.max(a,s),t=Math.floor(i/s)*s-e;this.flushBackBuffer(i,s,t)}const o=r.frontBufferFlushThreshold;if(gp(o)&&o>0){const e=Math.max(r.maxBufferLength,o),t=Math.max(e,s),n=Math.floor(i/s)*s+t;this.flushFrontBuffer(i,s,n)}}flushBackBuffer(e,t,n){this.sourceBuffers.forEach(([e,t])=>{if(t){const i=py.getBuffered(t);if(i.length>0&&n>i.start(0)){var r;this.hls.trigger(bp.BACK_BUFFER_REACHED,{bufferEnd:n});const t=this.tracks[e];if(null!=(r=this.details)&&r.live)this.hls.trigger(bp.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(null!=t&&t.ended)return void this.log(`Cannot flush ${e} back buffer while SourceBuffer is in ended state`);this.hls.trigger(bp.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:e})}}})}flushFrontBuffer(e,t,n){this.sourceBuffers.forEach(([t,r])=>{if(r){const i=py.getBuffered(r),s=i.length;if(s<2)return;const a=i.start(s-1),o=i.end(s-1);if(n>a||e>=a&&e<=o)return;this.hls.trigger(bp.BUFFER_FLUSHING,{startOffset:a,endOffset:1/0,type:t})}})}getDurationAndRange(){var e;const{details:t,mediaSource:n}=this;if(!t||!this.media||"open"!==(null==n?void 0:n.readyState))return null;const r=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&n.setLiveSeekableRange){const e=Math.max(0,t.fragmentStart);return{duration:1/0,start:e,end:Math.max(e,r)}}return{duration:1/0}}const i=null==(e=this.overrides)?void 0:e.duration;if(i)return gp(i)?{duration:i}:null;const s=this.media.duration;return r>(gp(n.duration)?n.duration:0)&&r>s||!gp(s)?{duration:r}:null}updateMediaSource({duration:e,start:t,end:n}){const r=this.mediaSource;this.media&&r&&"open"===r.readyState&&(r.duration!==e&&(gp(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),r.duration=e),void 0!==t&&void 0!==n&&(this.log(`MediaSource duration is set to ${r.duration}. Setting seekable range to ${t}-${n}.`),r.setLiveSeekableRange(t,n)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${gm(n)}`),this.tracksReady){var r;const e=null==(r=this.transferData)?void 0:r.tracks;e&&Object.keys(e).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,n])=>{if(t){const r=this.tracks[t];e[t]={buffer:n,container:r.container,codec:r.codec,supplemental:r.supplemental,levelCodec:r.levelCodec,id:r.id,metadata:r.metadata}}}),this.hls.trigger(bp.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([e])=>{this.executeNext(e)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(bp.ERROR,{type:vp.MEDIA_ERROR,details:wp.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const s in e){const a=s,o=e[a];if(this.isPending(o)){const e=this.getTrackCodec(o,a),s=`${o.container};codecs=${e}`;o.codec=e,this.log(`creating sourceBuffer(${s})${this.currentOp(a)?" Queued":""} ${gm(o)}`);try{const e=n.addSourceBuffer(s),r=Ub(a),i=[a,e];t[r]=i,o.buffer=e}catch(i){var r;return this.error(`error while trying to add sourceBuffer: ${i.message}`),this.shiftAndExecuteNext(a),null==(r=this.operationQueue)||r.removeBlockers(),delete this.tracks[a],void this.hls.trigger(bp.ERROR,{type:vp.MEDIA_ERROR,details:wp.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:i,sourceBufferName:a,mimeType:s,parent:o.id})}this.trackSourceBuffer(a,o)}}this.bufferCreated()}getTrackCodec(e,t){const n=e.supplemental;let r=e.codec;n&&("video"===t||"audiovideo"===t)&&Mg(n,"video")&&(r=function(e,t){const n=[];if(e){const t=e.split(",");for(let e=0;e<t.length;e++)Ng(t[e],"video")||n.push(t[e])}return t&&n.push(t),n.join(",")}(r,n));const i=zg(r,e.levelCodec);return i?"audio"===t.slice(0,5)?Wg(i,this.appendSource):i:""}trackSourceBuffer(e,t){const n=t.buffer;if(!n)return;const r=this.getTrackCodec(t,e);this.tracks[e]={buffer:n,codec:r,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(e,t)=>{const n=t.removedRanges;null!=n&&n.length&&this.hls.trigger(bp.BUFFER_FLUSHED,{type:e})})}get mediaSrc(){var e,t;const n=(null==(e=this.media)||null==(t=e.querySelector)?void 0:t.call(e,"source"))||this.media;return null==n?void 0:n.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if("closed"===(null==(t=this.mediaSource)?void 0:t.readyState))return void this.resetBuffer(e);const n=this.currentOp(e);n&&(n.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var n;const r=new Error(`${e} SourceBuffer error. MediaSource readyState: ${null==(n=this.mediaSource)?void 0:n.readyState}`);this.error(`${r}`,t),this.hls.trigger(bp.ERROR,{type:vp.MEDIA_ERROR,details:wp.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:r,fatal:!1});const i=this.currentOp(e);i&&i.onError(r)}updateTimestampOffset(e,t,n,r,i,s){const a=t-e.timestampOffset;Math.abs(a)>=n&&(this.log(`Updating ${r} SourceBuffer timestampOffset to ${t} (sn: ${i} cc: ${s})`),e.timestampOffset=t)}removeExecutor(e,t,n){const{media:r,mediaSource:i}=this,s=this.tracks[e],a=null==s?void 0:s.buffer;if(!r||!i||!a)return this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),void this.shiftAndExecuteNext(e);const o=gp(r.duration)?r.duration:1/0,A=gp(i.duration)?i.duration:1/0,l=Math.max(0,t),c=Math.min(n,o,A);c>l&&(!s.ending||s.ended)?(s.ended=!1,this.log(`Removing [${l},${c}] from the ${e} SourceBuffer`),a.remove(l,c)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.tracks[t],r=null==n?void 0:n.buffer;if(!r)throw new Db(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,r.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(e=>{this.warn(`SourceBuffer blocked callback ${e}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:n}=this,r=t.map(e=>this.appendBlocker(e));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(r).then(t=>{n===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(e=>{var t;const n=null==(t=this.tracks[e])?void 0:t.buffer;n&&!n.updating&&this.shiftAndExecuteNext(e)})}append(e,t,n){this.operationQueue&&this.operationQueue.append(e,t,n)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,n){const r=this.tracks[e];if(!r)return;const i=r.buffer;if(!i)return;const s=n.bind(this,e);r.listeners.push({event:t,listener:s}),i.addEventListener(t,s)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const n=t.buffer;n&&(t.listeners.forEach(e=>{n.removeEventListener(e.event,e.listener)}),t.listeners.length=0)}},capLevelController:Pb,errorController:class extends Pp{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(bp.ERROR,this.onError,this),e.on(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.on(bp.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(bp.ERROR,this.onError,this),e.off(bp.ERROR,this.onErrorOut,this),e.off(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.off(bp.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(null==e?void 0:e.type)===Tp?e.level:this.getVariantIndex()}getVariantIndex(){var e;const t=this.hls,n=t.currentLevel;return null!=(e=t.loadLevelObj)&&e.details||-1===n?t.loadLevel:n}variantHasKey(e,t){if(e){var n;if(null!=(n=e.details)&&n.hasKey(t))return!0;const r=e.audioGroups;if(r){return this.hls.allAudioTracks.filter(e=>r.indexOf(e.groupId)>=0).some(e=>{var n;return null==(n=e.details)?void 0:n.hasKey(t)})}}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,t){var n;if(t.fatal)return;const r=this.hls,i=t.context;switch(t.details){case wp.FRAG_LOAD_ERROR:case wp.FRAG_LOAD_TIMEOUT:case wp.KEY_LOAD_ERROR:case wp.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case wp.FRAG_PARSING_ERROR:if(null!=(n=t.frag)&&n.gap)return void(t.errorAction=Gm());case wp.FRAG_GAP:case wp.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=Nm);case wp.LEVEL_EMPTY_ERROR:case wp.LEVEL_PARSING_ERROR:{var s;const e=t.parent===Tp?t.level:r.loadLevel;t.details===wp.LEVEL_EMPTY_ERROR&&null!=(s=t.context)&&null!=(s=s.levelDetails)&&s.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,e):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e))}return;case wp.LEVEL_LOAD_ERROR:case wp.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==i?void 0:i.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.level)));case wp.AUDIO_TRACK_LOAD_ERROR:case wp.AUDIO_TRACK_LOAD_TIMEOUT:case wp.SUBTITLE_LOAD_ERROR:case wp.SUBTITLE_TRACK_LOAD_TIMEOUT:if(i){const e=r.loadLevelObj;if(e&&(i.type===Cp&&e.hasAudioGroup(i.groupId)||i.type===Sp&&e.hasSubtitleGroup(i.groupId)))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.loadLevel),t.errorAction.action=Nm,void(t.errorAction.flags=$m)}return;case wp.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:return void(t.errorAction={action:Nm,flags:Km});case wp.KEY_SYSTEM_SESSION_UPDATE_FAILED:case wp.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case wp.KEY_SYSTEM_NO_SESSION:return void(t.errorAction={action:Nm,flags:Vm});case wp.BUFFER_ADD_CODEC_ERROR:case wp.REMUX_ALLOC_ERROR:case wp.BUFFER_APPEND_ERROR:var a;if(!t.errorAction)t.errorAction=this.getLevelSwitchAction(t,null!=(a=t.level)?a:r.loadLevel);return;case wp.INTERNAL_EXCEPTION:case wp.BUFFER_APPENDING_ERROR:case wp.BUFFER_FULL_ERROR:case wp.LEVEL_SWITCH_ERROR:case wp.BUFFER_STALLED_ERROR:case wp.BUFFER_SEEK_OVER_HOLE:case wp.BUFFER_NUDGE_ON_STALL:return void(t.errorAction=Gm())}t.type===vp.KEY_SYSTEM_ERROR&&(t.levelRetry=!1,t.errorAction=Gm())}getPlaylistRetryOrSwitchAction(e,t){const n=_m(this.hls.config.playlistLoadPolicy,e),r=this.playlistError++;if(Rm(n,r,Fm(e),e.response))return{action:Hm,flags:jm,retryConfig:n,retryCount:r};const i=this.getLevelSwitchAction(e,t);return n&&(i.retryConfig=n,i.retryCount=r),i}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),r=t.levels[n],{fragLoadPolicy:i,keyLoadPolicy:s}=t.config,a=_m(Lm(e)?s:i,e),o=t.levels.reduce((e,t)=>e+t.fragmentError,0);if(r&&(e.details!==wp.FRAG_GAP&&r.fragmentError++,!Dm(e))){if(Rm(a,o,Fm(e),e.response))return{action:Hm,flags:jm,retryConfig:a,retryCount:o}}const A=this.getLevelSwitchAction(e,n);return a&&(A.retryConfig=a,A.retryCount=o),A}getLevelSwitchAction(e,t){const n=this.hls;null==t&&(t=n.loadLevel);const r=this.hls.levels[t];if(r){var i,s;const t=e.details;r.loadError++,t===wp.BUFFER_APPEND_ERROR&&r.fragmentError++;let A=-1;const{levels:l,loadLevel:c,minAutoLevel:u,maxAutoLevel:d}=n;n.autoLevelEnabled||n.config.preserveManualLevelOnError||(n.loadLevel=-1);const h=null==(i=e.frag)?void 0:i.type,f=(h===xp&&t===wp.FRAG_PARSING_ERROR||"audio"===e.sourceBufferName&&(t===wp.BUFFER_ADD_CODEC_ERROR||t===wp.BUFFER_APPEND_ERROR))&&l.some(({audioCodec:e})=>r.audioCodec!==e),p="video"===e.sourceBufferName&&(t===wp.BUFFER_ADD_CODEC_ERROR||t===wp.BUFFER_APPEND_ERROR)&&l.some(({codecSet:e,audioCodec:t})=>r.codecSet!==e&&r.audioCodec===t),{type:g,groupId:m}=null!=(s=e.context)?s:{};for(let n=l.length;n--;){const i=(n+c)%l.length;if(i!==c&&i>=u&&i<=d&&0===l[i].loadError){var a,o;const n=l[i];if(t===wp.FRAG_GAP&&h===Tp&&e.frag){const t=l[i].details;if(t){const n=Tm(e.frag,t.fragments,e.frag.start);if(null!=n&&n.gap)continue}}else{if(g===Cp&&n.hasAudioGroup(m)||g===Sp&&n.hasSubtitleGroup(m))continue;if(h===xp&&null!=(a=r.audioGroups)&&a.some(e=>n.hasAudioGroup(e))||h===kp&&null!=(o=r.subtitleGroups)&&o.some(e=>n.hasSubtitleGroup(e))||f&&r.audioCodec===n.audioCodec||p&&r.codecSet===n.codecSet||!f&&r.codecSet!==n.codecSet)continue}A=i;break}}if(A>-1&&n.loadLevel!==A)return e.levelRetry=!0,this.playlistError=0,{action:Nm,flags:jm,nextAutoLevel:A}}return{action:Nm,flags:$m}}onErrorOut(e,t){var n;switch(null==(n=t.errorAction)?void 0:n.action){case Qm:break;case Nm:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===wp.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError()):t.fatal=!0}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:r}=n,i=n.nextAutoLevel;switch(r){case jm:this.switchLevel(e,i);break;case Km:{const r=this.getVariantLevelIndex(e.frag),i=t.levels[r],s=null==i?void 0:i.attrs["HDCP-LEVEL"];if(n.hdcpLevel=s,"NONE"===s)this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(s){t.maxHdcpLevel=am[am.indexOf(s)-1],n.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}}case Vm:{const t=e.decryptdata;if(t){const r=this.hls.levels,i=r.length;for(let n=i;n--;){var s,a;if(this.variantHasKey(r[n],t))this.log(`Banned key found in level ${n} (${r[n].bitrate}bps) or audio group "${null==(s=r[n].audioGroups)?void 0:s.join(",")}" (${null==(a=e.frag)?void 0:a.type} fragment) ${Vp(t.keyId||[])}`),r[n].fragmentError++,r[n].loadError++,this.log(`Removing level ${n} with key error (${e.error})`),this.hls.removeLevel(n)}const o=e.frag;if(this.hls.levels.length<i)n.resolved=!0;else if(o&&o.type!==Tp){const e=o.decryptdata;e&&!t.matches(e)&&(n.resolved=!0)}}break}}n.resolved||this.switchLevel(e,i)}switchLevel(e,t){if(void 0!==t&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===wp.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&"audiovideo"!==e.sourceBufferName)){const t=Jg(e.mimeType),n=this.hls.levels;for(let r=n.length;r--;)n[r][`${e.sourceBufferName}Codec`]===t&&(this.log(`Removing level ${r} for ${e.details} ("${t}" not supported)`),this.hls.removeLevel(r))}}},fpsController:class{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(bp.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(bp.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(bp.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(bp.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const e=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=e,e&&"function"==typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,n){const r=performance.now();if(t){if(this.lastTime){const e=r-this.lastTime,i=n-this.lastDroppedFrames,s=t-this.lastDecodedFrames,a=1e3*i/e,o=this.hls;if(o.trigger(bp.FPS_DROP,{currentDropped:i,currentDecoded:s,totalDroppedFrames:n}),a>0&&i>o.config.fpsDroppedMonitoringThreshold*s){let e=o.currentLevel;o.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+e),e>0&&(-1===o.autoLevelCapping||o.autoLevelCapping>=e)&&(e-=1,o.trigger(bp.FPS_DROP_LEVEL_CAPPING,{level:e,droppedLevel:o.currentLevel}),o.autoLevelCapping=e,this.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Vy,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:JB,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:class extends Wv{constructor(e,t,n){super(e,t,n,"subtitle-stream-controller",kp),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(bp.LEVEL_LOADED,this.onLevelLoaded,this),e.on(bp.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(bp.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(bp.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(bp.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(bp.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(bp.LEVEL_LOADED,this.onLevelLoaded,this),e.off(bp.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(bp.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(bp.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(bp.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(bp.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=Rv,this.setInterval(500),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:r}=t;if(this.fragContextChanged(n)||(og(n)&&(this.fragPrevious=n),this.state=Rv),!r)return;const i=this.tracksBuffered[this.currentTrackId];if(!i)return;let s;const a=n.start;for(let A=0;A<i.length;A++)if(a>=i[A].start&&a<=i[A].end){s=i[A];break}const o=n.start+n.duration;s?s.end=o:(s={start:a,end:o},i.push(s)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:n,endOffset:r}=t;if(0===n&&r!==Number.POSITIVE_INFINITY){const e=r-1;if(e<=0)return;t.endOffsetSubtitles=Math.max(0,e),this.tracksBuffered.forEach(t=>{for(let n=0;n<t.length;)if(t[n].end<=e)t.shift();else{if(!(t[n].start<e))break;t[n].start=e,n++}}),this.fragmentTracker.removeFragmentsInRange(n,e,kp)}}onError(e,t){const n=t.frag;(null==n?void 0:n.type)===kp&&(t.details===wp.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Pv&&(this.state=Rv))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){this.levels&&Tb(this.levels,t)?this.levels=t.map(e=>new hm(e)):(this.tracksBuffered=[],this.levels=t.map(e=>{const t=new hm(e);return this.tracksBuffered[t.id]=[],t}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,kp),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,null==(n=this.levels)||!n.length||-1===this.currentTrackId)return void this.clearInterval();const r=this.levels[this.currentTrackId];null!=r&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.state!==Pv&&this.setInterval(500)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:r,levels:i}=this,{details:s,id:a}=t;if(!i)return void this.warn(`Subtitle tracks were reset while loading level ${a}`);const o=i[a];if(a>=i.length||!o)return;this.log(`Subtitle track ${a} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let A=0;if(s.live||null!=(n=o.details)&&n.live){if(s.deltaUpdateFailed)return;const e=this.mainDetails;if(!e)return void(this.startFragRequested=!1);const t=e.fragments[0];var l;if(o.details)A=this.alignPlaylists(s,o.details,null==(l=this.levelLastLoaded)?void 0:l.details),0===A&&t&&(A=t.start,vv(s,A));else s.hasProgramDateTime&&e.hasProgramDateTime?(Lv(s,e),A=s.fragmentStart):t&&(A=t.start,vv(s,A));e&&!this.startFragRequested&&this.setStartPosition(e,A)}if(o.details=s,this.levelLastLoaded=o,a===r&&(this.hls.trigger(bp.SUBTITLE_TRACK_UPDATED,{details:s,id:a,groupId:t.groupId}),this.tick(),s.live&&!this.fragCurrent&&this.media&&this.state===Rv)){Tm(null,s.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0)}}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,r=t.decryptdata,i=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&null!=r&&r.key&&r.iv&&Fy(r.method)){const e=performance.now();this.decrypter.decrypt(new Uint8Array(n),r.key.buffer,r.iv.buffer,Ly(r.method)).catch(e=>{throw i.trigger(bp.ERROR,{type:vp.MEDIA_ERROR,details:wp.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e}).then(n=>{const r=performance.now();i.trigger(bp.FRAG_DECRYPTED,{frag:t,payload:n,stats:{tstart:e,tdecrypt:r}})}).catch(e=>{this.warn(`${e.name}: ${e.message}`),this.state=Rv})}}doTick(){if(this.media){if(this.state===Rv){const{currentTrackId:e,levels:t}=this,n=null==t?void 0:t[e];if(!n||!t.length||!n.details)return;if(this.waitForLive(n))return;const{config:r}=this,i=this.getLoadPosition(),s=py.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],i,r.maxBufferHole),{end:a,len:o}=s,A=n.details;if(o>this.hls.maxBufferLength+A.levelTargetDuration)return;const l=A.fragments,c=l.length,u=A.edge;let d=null;const h=this.fragPrevious;if(a<u){const e=r.maxFragLookUpTolerance,t=a>u-e?0:e;d=Tm(h,l,Math.max(l[0].start,a),t),!d&&h&&h.start<l[0].start&&(d=l[0])}else d=l[c-1];if(d=this.filterReplacedPrimary(d,n.details),!d)return;const f=l[d.sn-A.startSN-1];if(f&&f.cc===d.cc&&this.fragmentTracker.getState(f)===Wm&&(d=f),this.fragmentTracker.getState(d)===Wm){const e=this.mapToInitFragWhenRequired(d);e&&this.loadFragment(e,n,a)}}}else this.state=Rv}loadFragment(e,t,n){og(e)?super.loadFragment(e,t,n):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new nB(this.tracksBuffered[this.currentTrackId]||[])}},subtitleTrackController:class extends Sb{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=null;const t=ME(this.media.textTracks);for(let r=0;r<t.length;r++)if("hidden"===t[r].mode)e=t[r];else if("showing"===t[r].mode){e=t[r];break}const n=this.findTrackForTextTrack(e);this.subtitleTrack!==n&&this.setSubtitleTrack(n)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(bp.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(bp.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.on(bp.MANIFEST_PARSED,this.onManifestParsed,this),e.on(bp.LEVEL_LOADING,this.onLevelLoading,this),e.on(bp.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(bp.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(bp.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(bp.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(bp.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.off(bp.MANIFEST_PARSED,this.onManifestParsed,this),e.off(bp.LEVEL_LOADING,this.onLevelLoading,this),e.off(bp.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(bp.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(bp.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const n=this.media;if(!n)return;const r=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,r)return;ME(n.textTracks).forEach(e=>{QE(e)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:r,details:i}=t,s=this.tracksInGroup[n];if(!s||s.groupId!==r)return void this.warn(`Subtitle track with id:${n} and group:${r} not found in active group ${null==s?void 0:s.groupId}`);const a=s.details;s.details=t.details,this.log(`Subtitle track ${n} "${s.name}" lang:${s.lang} group:${r} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,r=this.groupIds;let i=this.currentTrack;if(!n||(null==r?void 0:r.length)!==(null==n?void 0:n.length)||null!=n&&n.some(e=>-1===(null==r?void 0:r.indexOf(e)))){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter(e=>!n||-1!==n.indexOf(e.groupId));if(e.length)this.selectDefaultTrack&&!e.some(e=>e.default)&&(this.selectDefaultTrack=!1),e.forEach((e,t)=>{e.id=t});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.subtitlePreference;if(!i&&t){this.selectDefaultTrack=!1;const n=wm(t,e);if(n>-1)i=e[n];else{const e=wm(t,this.tracks);i=this.tracks[e]}}let r=this.findTrackId(i);-1===r&&i&&(r=this.findTrackId(null));const s={subtitleTracks:e};this.log(`Updating subtitle tracks, ${e.length} track(s) found in "${null==n?void 0:n.join(",")}" group-id`),this.hls.trigger(bp.SUBTITLE_TRACKS_UPDATED,s),-1!==r&&-1===this.trackId&&this.setSubtitleTrack(r)}}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let r=0;r<t.length;r++){const i=t[r];if((!n||i.default)&&(n||e)&&(!e||bm(i,e)))return r}if(e){for(let n=0;n<t.length;n++){const r=t[n];if(xb(e.attrs,r.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return n}for(let n=0;n<t.length;n++){const r=t[n];if(xb(e.attrs,r.attrs,["LANGUAGE"]))return n}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){if(kb(t[n],e))return n}}return-1}onError(e,t){!t.fatal&&t.context&&(t.context.type!==Sp||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(-1===e.id)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&bm(e,n))return n;const r=wm(e,this.tracksInGroup);if(r>-1){const e=this.tracksInGroup[r];return this.setSubtitleTrack(r),e}if(n)return null;{const n=wm(e,t);if(n>-1)return t[n]}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,r=e.groupId,i=this.getUrlWithDirectives(e.url,t),s=e.details,a=null==s?void 0:s.age;this.log(`Loading subtitle ${n} "${e.name}" lang:${e.lang} group:${r}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${a&&s.live?" age "+a.toFixed(1)+(s.type&&" "+s.type||""):""} ${i}`),this.hls.trigger(bp.SUBTITLE_TRACK_LOADING,{url:i,id:n,groupId:r,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=ME(e.textTracks),n=this.currentTrack;let r;if(n&&(r=t.filter(e=>kb(n,e))[0],r||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach(e=>{"disabled"!==e.mode&&e!==r&&(e.mode="disabled")}),r){const e=this.subtitleDisplay?"showing":"hidden";r.mode!==e&&(r.mode=e)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=e);if(e<-1||e>=t.length||!gp(e))return void this.warn(`Invalid subtitle track id: ${e}`);this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e]||null;if(this.trackId=e,this.currentTrack=r,this.toggleTrackModes(),!r)return void this.hls.trigger(bp.SUBTITLE_TRACK_SWITCH,{id:e});const i=!!r.details&&!r.details.live;if(e===this.trackId&&r===n&&i)return;this.log(`Switching to subtitle-track ${e}`+(r?` "${r.name}" lang:${r.lang} group:${r.groupId}`:""));const{id:s,groupId:a="",name:o,type:A,url:l}=r;this.hls.trigger(bp.SUBTITLE_TRACK_SWITCH,{id:s,groupId:a,name:o,type:A,url:l});const c=this.switchParams(r.url,null==n?void 0:n.details,r.details);this.loadPlaylist(c)}},timelineController:class{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(bp.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(bp.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.on(bp.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(bp.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(bp.FRAG_LOADING,this.onFragLoading,this),e.on(bp.FRAG_LOADED,this.onFragLoaded,this),e.on(bp.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(bp.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(bp.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(bp.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(bp.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(bp.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(bp.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.off(bp.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(bp.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(bp.FRAG_LOADING,this.onFragLoading,this),e.off(bp.FRAG_LOADED,this.onFragLoaded,this),e.off(bp.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(bp.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(bp.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(bp.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(bp.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new WB(this,"textTrack1"),t=new WB(this,"textTrack2"),n=new WB(this,"textTrack3"),r=new WB(this,"textTrack4");this.cea608Parser1=new vB(1,e,t),this.cea608Parser2=new vB(3,n,r)}addCues(e,t,n,r,i){let s=!1;for(let a=i.length;a--;){const e=i[a],r=qB(e[0],e[1],t,n);if(r>=0&&(e[0]=Math.min(e[0],t),e[1]=Math.max(e[1],n),s=!0,r/(n-t)>.5))return}if(s||i.push([t,n]),this.config.renderTextTracksNatively){const i=this.captionsTracks[e];this.Cues.newCue(i,t,n,r)}else{const i=this.Cues.newCue(null,t,n,r);this.hls.trigger(bp.CUES_PARSED,{type:"captions",cues:i,track:e})}}onInitPtsFound(e,{frag:t,id:n,initPTS:r,timescale:i,trackId:s}){const{unparsedVttFrags:a}=this;n===Tp&&(this.initPTS[t.cc]={baseTime:r,timescale:i,trackId:s}),a.length&&(this.unparsedVttFrags=[],a.forEach(e=>{this.initPTS[e.frag.cc]?this.onFragLoaded(bp.FRAG_LOADED,e):this.hls.trigger(bp.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let r=0;r<n.textTracks.length;r++){const i=n.textTracks[r];if(YB(i,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return i}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:r}=this,{label:i,languageCode:s}=t[e],a=this.getExistingTrack(i,s);if(a)n[e]=a,QE(n[e]),RE(n[e],r);else{const t=this.createTextTrack("captions",i,s);t&&(t[e]=!0,n[e]=t)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(bp.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}createTextTrack(e,t,n){const r=this.media;if(r)return r.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const n=!!t.transferMedia;if(this.media=null,n)return;const{captionsTracks:r}=this;Object.keys(r).forEach(e=>{QE(r[e]),delete r[e]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)QE(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],r=n.some(e=>e.textCodec===RB);if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(Tb(this.tracks,n))return void(this.tracks=n);if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const e=this.media,t=e?ME(e.textTracks):null;if(this.tracks.forEach((e,n)=>{let r;if(t){let n=null;for(let r=0;r<t.length;r++)if(t[r]&&YB(t[r],e)){n=t[r],t[r]=null;break}n&&(r=n)}if(r)QE(r);else{const t=zB(e);r=this.createTextTrack(t,e.name,e.lang),r&&(r.mode="disabled")}r&&this.textTracks.push(r)}),null!=t&&t.length){const e=t.filter(e=>null!==e).map(e=>e.label);e.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${e.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const e=this.tracks.map(e=>({label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}));this.hls.trigger(bp.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:e})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(e=>{const t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(!t)return;const n=`textTrack${t[1]}`,r=this.captionsProperties[n];r&&(r.label=e.name,e.lang&&(r.languageCode=e.lang),r.media=e)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===Tp){var n,r;const{cea608Parser1:e,cea608Parser2:i,lastSn:s}=this,{cc:a,sn:o}=t.frag,A=null!=(n=null==(r=t.part)?void 0:r.index)?n:-1;e&&i&&(o!==s+1||o===s&&A!==this.lastPartIndex+1||a!==this.lastCc)&&(e.reset(),i.reset()),this.lastCc=a,this.lastSn=o,this.lastPartIndex=A}}onFragLoaded(e,t){const{frag:n,payload:r}=t;if(n.type===kp)if(r.byteLength){const e=n.decryptdata,i="stats"in t;if(null==e||!e.encrypted||i){const e=this.tracks[n.level],i=this.vttCCs;i[n.cc]||(i[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),e&&e.textCodec===RB?this._parseIMSC1(n,r):this._parseVTTs(t)}}else this.hls.trigger(bp.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;MB(t,this.initPTS[e.cc],t=>{this._appendCues(t,e.level),n.trigger(bp.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},t=>{n.logger.log(`Failed to parse IMSC1: ${t}`),n.trigger(bp.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})})}_parseVTTs(e){var t;const{frag:n,payload:r}=e,{initPTS:i,unparsedVttFrags:s}=this,a=i.length-1;if(!i[n.cc]&&-1===a)return void s.push(e);const o=this.hls;PB(null!=(t=n.initSegment)&&t.data?Ig(n.initSegment.data,new Uint8Array(r)).buffer:r,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,e=>{this._appendCues(e,n.level),o.trigger(bp.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},t=>{const i="Missing initPTS for VTT MPEGTS"===t.message;i?s.push(e):this._fallbackToIMSC1(n,r),o.logger.log(`Failed to parse VTT cue: ${t}`),i&&a>n.cc||o.trigger(bp.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:t})})}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||MB(t,this.initPTS[e.cc],()=>{n.textCodec=RB,this._parseIMSC1(e,t)},()=>{n.textCodec="wvtt"})}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const n=this.textTracks[t];if(!n||"disabled"===n.mode)return;e.forEach(e=>OE(n,e))}else{const r=this.tracks[t];if(!r)return;const i=r.default?"default":"subtitles"+t;n.trigger(bp.CUES_PARSED,{type:"subtitles",cues:e,track:i})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===kp&&this.onFragLoaded(bp.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:r}=t;if(n.type!==Tp||"NONE"!==this.closedCaptionsForLevel(n))for(let i=0;i<r.length;i++){const e=r[i].bytes;if(e){this.cea608Parser1||this.initCea608Parsers();const t=this.extractCea608Data(e);this.cea608Parser1.addData(r[i].pts,t[0]),this.cea608Parser2.addData(r[i].pts,t[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:n,endOffsetSubtitles:r,type:i}){const{media:s}=this;if(s&&!(s.currentTime<n)){if(!i||"video"===i){const{captionsTracks:e}=this;Object.keys(e).forEach(r=>NE(e[r],t,n))}if(this.config.renderTextTracksNatively&&0===t&&void 0!==r){const{textTracks:e}=this;Object.keys(e).forEach(n=>NE(e[n],t,r))}}}extractCea608Data(e){const t=[[],[]],n=31&e[0];let r=2;for(let i=0;i<n;i++){const n=e[r++],i=127&e[r++],s=127&e[r++];if(0===i&&0===s)continue;if(!!(4&n)){const e=3&n;0!==e&&1!==e||(t[e].push(i),t[e].push(s))}}return t}},audioStreamController:class extends Wv{constructor(e,t,n){super(e,t,n,"audio-stream-controller",xp),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(bp.LEVEL_LOADED,this.onLevelLoaded,this),e.on(bp.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(bp.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(bp.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(bp.BUFFER_RESET,this.onBufferReset,this),e.on(bp.BUFFER_CREATED,this.onBufferCreated,this),e.on(bp.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(bp.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(bp.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(bp.FRAG_LOADING,this.onFragLoading,this),e.on(bp.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(bp.LEVEL_LOADED,this.onLevelLoaded,this),e.off(bp.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(bp.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(bp.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(bp.BUFFER_RESET,this.onBufferReset,this),e.off(bp.BUFFER_CREATED,this.onBufferCreated,this),e.off(bp.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(bp.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(bp.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(bp.FRAG_LOADING,this.onFragLoading,this),e.off(bp.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:n,initPTS:r,timescale:i,trackId:s}){if(n===Tp){const e=t.cc,n=this.fragCurrent;if(this.initPTS[e]={baseTime:r,timescale:i,trackId:s},this.log(`InitPTS for cc: ${e} found from main: ${r/i} (${r}/${i}) trackId: ${s}`),this.mainAnchor=t,this.state===Vv){const n=this.waitingData;(!n&&!this.loadingParts||n&&n.frag.cc!==e)&&this.syncWithAnchor(t,null==n?void 0:n.frag)}else!this.hls.hasEnoughToStart&&n&&n.cc!==e?(n.abortRequests(),this.syncWithAnchor(t,n)):this.state===Rv&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var n;const r=(null==(n=this.mainFragLoading)?void 0:n.frag)||null;if(t&&(null==r?void 0:r.cc)===t.cc)return;const i=(r||e).cc,s=Im(this.getLevelDetails(),i,this.getLoadPosition());s&&(this.log(`Syncing with main frag at ${s.start} cc ${s.cc}`),this.startFragRequested=!1,this.nextLoadPosition=s.start,this.resetLoadingState(),this.state===Rv&&this.doTickIdle())}startLoad(e,t){if(!this.levels)return this.startPosition=e,void(this.state=Pv);const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),n>0&&-1===e?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=Rv):this.state=Mv,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case Rv:this.doTickIdle();break;case Mv:{const{levels:e,trackId:t}=this,n=null==e?void 0:e[t],r=null==n?void 0:n.details;if(r&&!this.waitForLive(n)){if(this.waitForCdnTuneIn(r))break;this.state=Vv}break}case Nv:this.checkRetryDate();break;case Vv:{const e=this.waitingData;if(e){const{frag:t,part:n,cache:r,complete:i}=e,s=this.mainAnchor;if(void 0!==this.initPTS[t.cc]){this.waitingData=null,this.state=Qv;const e={frag:t,part:n,payload:r.flush().buffer,networkDetails:null};this._handleFragmentLoadProgress(e),i&&super._handleFragmentLoadComplete(e)}else s&&s.cc!==e.frag.cc&&this.syncWithAnchor(s,e.frag)}else this.state=Rv}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:n,media:r,trackId:i}=this,s=t.config;if(!this.buffering||!r&&!this.primaryPrefetch&&(this.startFragRequested||!s.startFragPrefetch)||null==n||!n[i])return;const a=n[i],o=a.details;if(!o||this.waitForLive(a)||this.waitForCdnTuneIn(o))return this.state=Mv,void(this.startFragRequested=!1);const A=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&A&&(this.bufferFlushed=!1,this.afterBufferFlushed(A,rg,xp));const l=this.getFwdBufferInfo(A,xp);if(null===l)return;if(!this.switchingTrack&&this._streamEnded(l,o))return t.trigger(bp.BUFFER_EOS,{type:"audio"}),void(this.state=$v);const c=l.len,u=t.maxBufferLength,d=o.fragments,h=d[0].start,f=this.getLoadPosition(),p=this.flushing?f:l.end;if(this.switchingTrack&&r){const e=f;o.PTSKnown&&e<h&&(l.end>h||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=h+.05)}if(c>=u&&!this.switchingTrack&&p<d[d.length-1].start)return;let g=this.getNextFragment(p,o);if(g&&this.isLoopLoading(g,p)&&(g=this.getNextFragmentLoopLoading(g,o,l,Tp,u)),!g)return void(this.bufferFlushed=!0);let m=(null==(e=this.mainFragLoading)?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&m&&og(g)&&!g.endList&&(!o.live||!this.loadingParts&&p<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(m)===qm&&(this.mainFragLoading=m=null),m&&og(m))){if(g.start>m.end){const e=this.fragmentTracker.getFragAtPos(p,Tp);e&&e.end>m.end&&(m=e,this.mainFragLoading={frag:e,targetBufferTime:null})}if(g.start>m.end)return}this.loadFragment(g,a,p)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(e=>new hm(e))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:r}=this;r&&(r.abortRequests(),this.removeUnbufferedFrags(r.start)),this.resetLoadingState(),n?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==Pv&&(this.setInterval(100),this.state=Rv,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(bp.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(e,t){var n;const{levels:r}=this,{details:i,id:s,groupId:a,track:o}=t;if(!r)return void this.warn(`Audio tracks reset while loading track ${s} "${o.name}" of "${a}"`);const A=this.mainDetails;if(!A||i.endCC>A.endCC||A.expired)return this.cachedTrackLoadedData=t,void(this.state!==Pv&&(this.state=Mv));this.cachedTrackLoadedData=null,this.log(`Audio track ${s} "${o.name}" of "${a}" loaded [${i.startSN},${i.endSN}]${i.lastPartSn?`[part-${i.lastPartSn}-${i.lastPartIndex}]`:""},duration:${i.totalduration}`);const l=r[s];let c=0;if(i.live||null!=(n=l.details)&&n.live){if(this.checkLiveUpdate(i),i.deltaUpdateFailed)return;var u;if(l.details)c=this.alignPlaylists(i,l.details,null==(u=this.levelLastLoaded)?void 0:u.details);i.alignedSliding||(Fv(i,A),i.alignedSliding||Lv(i,A),c=i.fragmentStart)}l.details=i,this.levelLastLoaded=l,this.startFragRequested||this.setStartPosition(A,c),this.hls.trigger(bp.AUDIO_TRACK_UPDATED,{details:i,id:s,groupId:t.groupId}),this.state!==Mv||this.waitForCdnTuneIn(i)||(this.state=Rv),this.tick()}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:r,payload:i}=e,{config:s,trackId:a,levels:o}=this;if(!o)return void this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);const A=o[a];if(!A)return void this.warn("Audio track is undefined on fragment load progress");const l=A.details;if(!l)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(n.start);const c=s.defaultAudioCodec||A.audioCodec||"mp4a.40.2";let u=this.transmuxer;u||(u=this.transmuxer=new Cb(this.hls,xp,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const d=this.initPTS[n.cc],h=null==(t=n.initSegment)?void 0:t.data;if(void 0!==d){const e=!1,t=r?r.index:-1,s=-1!==t,a=new hy(n.level,n.sn,n.stats.chunkCount,i.byteLength,t,s);u.push(i,h,c,"",n,r,l.totalduration,e,a,d)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${l.startSN} ,${l.endSN}],track ${a}`);const{cache:e}=this.waitingData=this.waitingData||{frag:n,part:r,cache:new Yv,complete:!1};e.push(new Uint8Array(i)),this.state!==Pv&&(this.state=Vv)}}_handleFragmentLoadComplete(e){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===Tp&&og(t.frag)&&(this.mainFragLoading=t,this.state===Rv&&this.tick())}onFragBuffered(e,t){const{frag:n,part:r}=t;if(n.type===xp)if(this.fragContextChanged(n))this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);else{if(og(n)){this.fragPrevious=n;const e=this.switchingTrack;e&&(this.bufferedTrack=e,this.switchingTrack=null,this.hls.trigger(bp.AUDIO_TRACK_SWITCHED,Up({},e)))}this.fragBufferedComplete(n,r),this.media&&this.tick()}else this.audioOnly||n.type!==Tp||n.elementaryStreams.video||n.elementaryStreams.audiovideo||(this.audioOnly=!0,this.mainFragLoading=null)}onError(e,t){var n;if(t.fatal)this.state=Kv;else switch(t.details){case wp.FRAG_GAP:case wp.FRAG_PARSING_ERROR:case wp.FRAG_DECRYPT_ERROR:case wp.FRAG_LOAD_ERROR:case wp.FRAG_LOAD_TIMEOUT:case wp.KEY_LOAD_ERROR:case wp.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(xp,t);break;case wp.AUDIO_TRACK_LOAD_ERROR:case wp.AUDIO_TRACK_LOAD_TIMEOUT:case wp.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==Mv||(null==(n=t.context)?void 0:n.type)!==Cp||(this.state=Rv);break;case wp.BUFFER_ADD_CODEC_ERROR:case wp.BUFFER_APPEND_ERROR:if("audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case wp.BUFFER_FULL_ERROR:if("audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case wp.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onBufferFlushing(e,{type:t}){t!==ig&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==ig){this.flushing=!1,this.bufferFlushed=!0,this.state===$v&&(this.state=Rv);const e=this.mediaBuffer||this.media;e&&(this.afterBufferFlushed(e,t,xp),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:r}=this,{remuxResult:i,chunkMeta:s}=e,a=this.getCurrentContext(s);if(!a)return void this.resetWhenMissingContext(s);const{frag:o,part:A,level:l}=a,{details:c}=l,{audio:u,text:d,id3:h,initSegment:f}=i;if(!this.fragContextChanged(o)&&c){if(this.state=Hv,this.switchingTrack&&u&&this.completeAudioSwitch(this.switchingTrack),null!=f&&f.tracks){const e=o.initSegment||o;if(this.unhandledEncryptionError(f,o))return;this._bufferInitSegment(l,f.tracks,e,s),r.trigger(bp.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:n,tracks:f.tracks})}if(u){const{startPTS:e,endPTS:t,startDTS:n,endDTS:r}=u;A&&(A.elementaryStreams[rg]={startPTS:e,endPTS:t,startDTS:n,endDTS:r}),o.setElementaryStreamInfo(rg,e,t,n,r),this.bufferFragmentData(u,o,A,s)}if(null!=h&&null!=(t=h.samples)&&t.length){const e=Dp({id:n,frag:o,details:c},h);r.trigger(bp.FRAG_PARSING_METADATA,e)}if(d){const e=Dp({id:n,frag:o,details:c},d);r.trigger(bp.FRAG_PARSING_USERDATA,e)}}else this.fragmentTracker.removeFragment(o)}_bufferInitSegment(e,t,n,r){if(this.state!==Hv)return;if(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio)return;const i=t.audio;i.id=xp;const s=e.audioCodec;this.log(`Init audio buffer, container:${i.container}, codecs[level/parsed]=[${s}/${i.codec}]`),s&&1===s.split(",").length&&(i.levelCodec=s),this.hls.trigger(bp.BUFFER_CODECS,t);const a=i.initSegment;if(null!=a&&a.byteLength){const e={type:"audio",frag:n,part:null,chunkMeta:r,parent:n.type,data:a};this.hls.trigger(bp.BUFFER_APPENDING,e)}this.tickImmediate()}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);var i;if(this.switchingTrack||r===Wm||r===Ym)if(og(e))if(null!=(i=t.details)&&i.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=Vv;const n=this.mainDetails;n&&n.fragmentStart!==t.details.fragmentStart&&Lv(t.details,n)}else super.loadFragment(e,t,n);else this._loadInitSegment(e,t);else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:n,assocLang:r,characteristics:i,audioCodec:s,channels:a}=this.bufferedTrack;bm({name:t,lang:n,assocLang:r,characteristics:i,audioCodec:s,channels:a},e,Em)||(Cm(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(bp.AUDIO_TRACK_SWITCHED,Up({},e))}},audioTrackController:class extends Sb{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.on(bp.MANIFEST_PARSED,this.onManifestParsed,this),e.on(bp.LEVEL_LOADING,this.onLevelLoading,this),e.on(bp.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(bp.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(bp.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.off(bp.MANIFEST_PARSED,this.onManifestParsed,this),e.off(bp.LEVEL_LOADING,this.onLevelLoading,this),e.off(bp.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(bp.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(bp.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:r,details:i}=t,s=this.tracksInGroup[n];if(!s||s.groupId!==r)return void this.warn(`Audio track with id:${n} and group:${r} not found in active group ${null==s?void 0:s.groupId}`);const a=s.details;s.details=t.details,this.log(`Audio track ${n} "${s.name}" lang:${s.lang} group:${r} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,r=this.groupIds;let i=this.currentTrack;if(!n||(null==r?void 0:r.length)!==(null==n?void 0:n.length)||null!=n&&n.some(e=>-1===(null==r?void 0:r.indexOf(e)))){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter(e=>!n||-1!==n.indexOf(e.groupId));if(e.length)this.selectDefaultTrack&&!e.some(e=>e.default)&&(this.selectDefaultTrack=!1),e.forEach((e,t)=>{e.id=t});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.audioPreference;if(!i&&t){const n=wm(t,e,Em);if(n>-1)i=e[n];else{const e=wm(t,this.tracks);i=this.tracks[e]}}let r=this.findTrackId(i);-1===r&&i&&(r=this.findTrackId(null));const a={audioTracks:e};this.log(`Updating audio tracks, ${e.length} track(s) found in group(s): ${null==n?void 0:n.join(",")}`),this.hls.trigger(bp.AUDIO_TRACKS_UPDATED,a);const o=this.trackId;if(-1!==r&&-1===o)this.setAudioTrack(r);else if(e.length&&-1===o){var s;const t=new Error(`No audio track selected for current audio group-ID(s): ${null==(s=this.groupIds)?void 0:s.join(",")} track count: ${e.length}`);this.warn(t.message),this.hls.trigger(bp.ERROR,{type:vp.MEDIA_ERROR,details:wp.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t})}}}onError(e,t){!t.fatal&&t.context&&(t.context.type!==Cp||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&bm(e,r,Em))return r;const i=wm(e,this.tracksInGroup,Em);if(i>-1){const e=this.tracksInGroup[i];return this.setAudioTrack(i),e}if(r){let r=t.loadLevel;-1===r&&(r=t.firstAutoLevel);const i=function(e,t,n,r,i){const s=t[r],a=t.reduce((e,t,n)=>{const r=t.uri;return(e[r]||(e[r]=[])).push(n),e},{})[s.uri];a.length>1&&(r=Math.max.apply(Math,a));const o=s.videoRange,A=s.frameRate,l=s.codecSet.substring(0,4),c=Bm(t,r,t=>{if(t.videoRange!==o||t.frameRate!==A||t.codecSet.substring(0,4)!==l)return!1;const r=t.audioGroups,s=n.filter(e=>!r||-1!==r.indexOf(e.groupId));return wm(e,s,i)>-1});return c>-1?c:Bm(t,r,t=>{const r=t.audioGroups,s=n.filter(e=>!r||-1!==r.indexOf(e.groupId));return wm(e,s,i)>-1})}(e,t.levels,n,r,Em);if(-1===i)return null;t.nextLoadLevel=i}if(e.channels||e.audioCodec){const t=wm(e,n);if(t>-1)return n[t]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length)return void this.warn(`Invalid audio track id: ${e}`);this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e],i=r.details&&!r.details.live;if(e===this.trackId&&r===n&&i)return;if(this.log(`Switching to audio-track ${e} "${r.name}" lang:${r.lang} group:${r.groupId} channels:${r.channels}`),this.trackId=e,this.currentTrack=r,this.hls.trigger(bp.AUDIO_TRACK_SWITCHING,Up({},r)),i)return;const s=this.switchParams(r.url,null==n?void 0:n.details,r.details);this.loadPlaylist(s)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const r=t[n];if((!this.selectDefaultTrack||r.default)&&(!e||bm(e,r,Em)))return n}if(e){const{name:n,lang:r,assocLang:i,characteristics:s,audioCodec:a,channels:o}=e;for(let e=0;e<t.length;e++){if(bm({name:n,lang:r,assocLang:i,characteristics:s,audioCodec:a,channels:o},t[e],Em))return e}for(let A=0;A<t.length;A++){const n=t[A];if(xb(e.attrs,n.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return A}for(let A=0;A<t.length;A++){const n=t[A];if(xb(e.attrs,n.attrs,["LANGUAGE"]))return A}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&Cm(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,r=e.groupId,i=this.getUrlWithDirectives(e.url,t),s=e.details,a=null==s?void 0:s.age;this.log(`Loading audio-track ${n} "${e.name}" lang:${e.lang} group:${r}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${a&&s.live?" age "+a.toFixed(1)+(s.type&&" "+s.type||""):""} ${i}`),this.hls.trigger(bp.AUDIO_TRACK_LOADING,{url:i,id:n,groupId:r,deliveryDirectives:t||null,track:e})}},emeController:LE,cmcdController:class{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=e=>{try{this.apply(e,{ot:Rb.MANIFEST,su:!this.initialized})}catch(t){this.hls.logger.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=e=>{try{const{frag:t,part:n}=e,r=this.hls.levels[t.level],i=this.getObjectType(t),s={d:1e3*(n||t).duration,ot:i};i!==Rb.VIDEO&&i!==Rb.AUDIO&&i!=Rb.MUXED||(s.br=r.bitrate/1e3,s.tb=this.getTopBandwidth(i)/1e3,s.bl=this.getBufferLength(i));const a=n?this.getNextPart(n):this.getNextFrag(t);null!=a&&a.url&&a.url!==t.url&&(s.nor=a.url),this.apply(e,s)}catch(t){this.hls.logger.warn("Could not generate segment CMCD data.",t)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;null!=n&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=!0===n.useHeaders,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(bp.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(bp.MEDIA_DETACHED,this.onMediaDetached,this),e.on(bp.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(bp.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(bp.MEDIA_DETACHED,this.onMediaDetached,this),e.off(bp.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,r;this.audioBuffer=null==(n=t.tracks.audio)?void 0:n.buffer,this.videoBuffer=null==(r=t.tracks.video)?void 0:r.buffer}createData(){var e;return{v:1,sf:Ob.HLS,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){Dp(t,this.createData());const n=t.ot===Rb.INIT||t.ot===Rb.VIDEO||t.ot===Rb.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering);const{includeKeys:r}=this;r&&(t=Object.keys(t).reduce((e,n)=>(r.includes(n)&&(e[n]=t[n]),e),{}));const i={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),SE(e.headers,t,i)):e.url=kE(e.url,t,i)}getNextFrag(e){var t;const n=null==(t=this.hls.levels[e.level])?void 0:t.details;if(n){const t=e.sn-n.startSN;return n.fragments[t+1]}}getNextPart(e){var t;const{index:n,fragment:r}=e,i=null==(t=this.hls.levels[r.level])||null==(t=t.details)?void 0:t.partList;if(i){const{sn:e}=r;for(let t=i.length-1;t>=0;t--){const r=i[t];if(r.index===n&&r.fragment.sn===e)return i[t+1]}}}getObjectType(e){const{type:t}=e;return"subtitle"===t?Rb.TIMED_TEXT:"initSegment"===e.sn?Rb.INIT:"audio"===t?Rb.AUDIO:"main"===t?this.hls.audioTracks.length?Rb.VIDEO:Rb.MUXED:void 0}getTopBandwidth(e){let t,n=0;const r=this.hls;if(e===Rb.AUDIO)t=r.audioTracks;else{const e=r.maxAutoLevel,n=e>-1?e+1:r.levels.length;t=r.levels.slice(0,n)}return t.forEach(e=>{e.bitrate>n&&(n=e.bitrate)}),n>0?n:NaN}getBufferLength(e){const t=this.media,n=e===Rb.AUDIO?this.audioBuffer:this.videoBuffer;if(!n||!t)return NaN;return 1e3*py.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,r){t(e),this.loader.load(e,n,r)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,r){t(e),this.loader.load(e,n,r)}}}},contentSteeringController:class extends Pp{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.on(bp.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(bp.MANIFEST_PARSED,this.onManifestParsed,this),e.on(bp.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.off(bp.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(bp.MANIFEST_PARSED,this.onManifestParsed,this),e.off(bp.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=1e3*this.timeToLoad-(performance.now()-this.updated);if(e>0)return void this.scheduleRefresh(this.uri,e)}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(t=>t!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;null!==n&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if((null==n?void 0:n.action)===Nm&&n.flags===$m){const e=this.levels;let r=this._pathwayPriority,i=this.pathwayId;if(t.context){const{groupId:n,pathwayId:r,type:s}=t.context;n&&e?i=this.getPathwayForGroupId(n,s,i):r&&(i=r)}i in this.penalizedPathways||(this.penalizedPathways[i]=performance.now()),!r&&e&&(r=this.pathways()),r&&r.length>1&&(this.updatePathwayPriority(r),n.resolved=this.pathwayId!==i),t.details!==wp.BUFFER_APPEND_ERROR||t.fatal?n.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${i} levels: ${e?e.length:e} priorities: ${gm(r)} penalized: ${gm(this.penalizedPathways)}`):n.resolved=!0}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return null===this.levels?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){let t;this._pathwayPriority=e;const n=this.penalizedPathways,r=performance.now();Object.keys(n).forEach(e=>{r-n[e]>3e5&&delete n[e]});for(let i=0;i<e.length;i++){const r=e[i];if(r in n)continue;if(r===this.pathwayId)return;const s=this.hls.nextLoadLevel,a=this.hls.levels[s];if(t=this.getLevelsForPathway(r),t.length>0){this.log(`Setting Pathway to "${r}"`),this.pathwayId=r,Cv(t),this.hls.trigger(bp.LEVELS_UPDATED,{levels:t});const e=this.hls.levels[s];a&&e&&this.levels&&(e.attrs["STABLE-VARIANT-ID"]!==a.attrs["STABLE-VARIANT-ID"]&&e.bitrate!==a.bitrate&&this.log(`Unstable Pathways change from bitrate ${a.bitrate} to ${e.bitrate}`),this.hls.nextLoadLevel=s);break}}}getPathwayForGroupId(e,t,n){const r=this.getLevelsForPathway(n).concat(this.levels||[]);for(let i=0;i<r.length;i++)if(t===Cp&&r[i].hasAudioGroup(e)||t===Sp&&r[i].hasSubtitleGroup(e))return r[i].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},r={};e.forEach(e=>{const{ID:i,"BASE-ID":s,"URI-REPLACEMENT":a}=e;if(t.some(e=>e.pathwayId===i))return;const o=this.getLevelsForPathway(s).map(e=>{const t=new By(e.attrs);t["PATHWAY-ID"]=i;const s=t.AUDIO&&`${t.AUDIO}_clone_${i}`,o=t.SUBTITLES&&`${t.SUBTITLES}_clone_${i}`;s&&(n[t.AUDIO]=s,t.AUDIO=s),o&&(r[t.SUBTITLES]=o,t.SUBTITLES=o);const A=FE(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",a),l=new hm({attrs:t,audioCodec:e.audioCodec,bitrate:e.bitrate,height:e.height,name:e.name,url:A,videoCodec:e.videoCodec,width:e.width});if(e.audioGroups)for(let n=1;n<e.audioGroups.length;n++)l.addGroupId("audio",`${e.audioGroups[n]}_clone_${i}`);if(e.subtitleGroups)for(let n=1;n<e.subtitleGroups.length;n++)l.addGroupId("text",`${e.subtitleGroups[n]}_clone_${i}`);return l});t.push(...o),IE(this.audioTracks,n,a,i),IE(this.subtitleTracks,r,a,i)})}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;let r;this.loader&&this.loader.destroy(),this.loader=new n(t);try{r=new self.URL(e)}catch(l){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest URI: ${e}`)}if("data:"!==r.protocol){const e=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);r.searchParams.set("_HLS_pathway",this.pathwayId),r.searchParams.set("_HLS_throughput",""+e)}const i={responseType:"json",url:r.href},s=t.steeringManifestLoadPolicy.default,a=s.errorRetry||s.timeoutRetry||{},o={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},A={onSuccess:(e,t,n,i)=>{this.log(`Loaded steering manifest: "${r}"`);const s=e.data;if(1!==(null==s?void 0:s.VERSION))return void this.log(`Steering VERSION ${s.VERSION} not supported!`);this.updated=performance.now(),this.timeToLoad=s.TTL;const{"RELOAD-URI":a,"PATHWAY-CLONES":o,"PATHWAY-PRIORITY":A}=s;if(a)try{this.uri=new self.URL(a,r).href}catch(l){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest RELOAD-URI: ${a}`)}this.scheduleRefresh(this.uri||n.url),o&&this.clonePathways(o);const c={steeringManifest:s,url:r.toString()};this.hls.trigger(bp.STEERING_MANIFEST_LOADED,c),A&&this.updatePathwayPriority(A)},onError:(e,t,n,r)=>{if(this.log(`Error loading steering manifest: ${e.code} ${e.text} (${t.url})`),this.stopLoad(),410===e.code)return this.enabled=!1,void this.log(`Steering manifest ${t.url} no longer available`);let i=1e3*this.timeToLoad;if(429===e.code){const e=this.loader;if("function"==typeof(null==e?void 0:e.getResponseHeader)){const t=e.getResponseHeader("Retry-After");t&&(i=1e3*parseFloat(t))}return void this.log(`Steering manifest ${t.url} rate limited`)}this.scheduleRefresh(this.uri||t.url,i)},onTimeout:(e,t,n)=>{this.log(`Timeout loading steering manifest (${t.url})`),this.scheduleRefresh(this.uri||t.url)}};this.log(`Requesting steering manifest: ${r}`),this.loader.load(i,o,A)}scheduleRefresh(e,t=1e3*this.timeToLoad){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var t;const n=null==(t=this.hls)?void 0:t.media;!n||n.ended?this.scheduleRefresh(e,1e3*this.timeToLoad):this.loadSteeringManifest(e)},t)}},interstitialsController:class extends Pp{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const e=this.currentTime;if(void 0===e||this.playbackDisabled||!this.schedule)return;const t=e-this.timelinePos;if(Math.abs(t)<1/7056e5)return;const n=t<=-.01;this.timelinePos=e,this.bufferedPos=e;const r=this.playingItem;if(!r)return void this.checkBuffer();if(n){this.schedule.resetErrorsInRange(e,e-t)&&this.updateSchedule(!0)}if(this.checkBuffer(),n&&e<r.start||e>=r.end){var i;const t=this.findItemIndex(r);let s=this.schedule.findItemIndexAtTime(e);if(-1===s&&(s=t+(n?-1:1),this.log(`seeked ${n?"back ":""}to position not covered by schedule ${e} (resolving from ${t} to ${s})`)),!this.isInterstitial(r)&&null!=(i=this.media)&&i.paused&&(this.shouldPlay=!1),!n&&s>t){const e=this.schedule.findJumpRestrictedIndex(t+1,s);if(e>t)return void this.setSchedulePosition(e)}return void this.setSchedulePosition(s)}const s=this.playingAsset;if(!s){if(this.playingLastItem&&this.isInterstitial(r)){const t=r.event.assetList[0];t&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(e,t))}return}const a=s.timelineStart,o=s.duration||0;var A;(n&&e<a||e>=a+o)&&(null!=(A=r.event)&&A.appendInPlace&&(this.clearInterstitial(r.event,r),this.flushFrontBuffer(e)),this.setScheduleToAssetAtTime(e,s))},this.onTimeupdate=()=>{const e=this.currentTime;if(void 0===e||this.playbackDisabled)return;if(!(e>this.timelinePos))return;this.timelinePos=e,e>this.bufferedPos&&this.checkBuffer();const t=this.playingItem;if(!t||this.playingLastItem)return;if(e>=t.end){this.timelinePos=t.end;const e=this.findItemIndex(t);this.setSchedulePosition(e+1)}const n=this.playingAsset;if(!n)return;e>=n.timelineStart+(n.duration||0)&&this.setScheduleToAssetAtTime(e,n)},this.onScheduleUpdate=(e,t)=>{const n=this.schedule;if(!n)return;const r=this.playingItem,i=n.events||[],s=n.items||[],a=n.durations,o=e.map(e=>e.identifier),A=!(!i.length&&!o.length);(A||t)&&this.log(`INTERSTITIALS_UPDATED (${i.length}): ${i}\nSchedule: ${s.map(e=>JE(e))} pos: ${this.timelinePos}`),o.length&&this.log(`Removed events ${o}`);let l=null,c=null;r&&(l=this.updateItem(r,this.timelinePos),this.itemsMatch(r,l)?this.playingItem=l:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const u=this.bufferingItem;if(u&&(c=this.updateItem(u,this.bufferedPos),this.itemsMatch(u,c)?this.bufferingItem=c:u.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(u.event,null))),e.forEach(e=>{e.assetList.forEach(e=>{this.clearAssetPlayer(e.identifier,null)})}),this.playerQueue.forEach(e=>{if(e.interstitial.appendInPlace){const t=e.assetItem.timelineStart,n=e.timelineOffset-t;if(n)try{e.timelineOffset=t}catch(c$){Math.abs(n)>jE&&this.warn(`${c$} ("${e.assetId}" ${e.timelineOffset}->${t})`)}}}),A||t){if(this.hls.trigger(bp.INTERSTITIALS_UPDATED,{events:i.slice(0),schedule:s.slice(0),durations:a,removedIds:o}),this.isInterstitial(r)&&o.includes(r.event.identifier))return this.warn(`Interstitial "${r.event.identifier}" removed while playing`),void this.primaryFallback(r.event);r&&this.trimInPlace(l,r),u&&c!==l&&this.trimInPlace(c,u),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new ZE(e),this.schedule=new XE(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(bp.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(bp.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(bp.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.on(bp.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(bp.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(bp.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(bp.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(bp.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(bp.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(bp.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(bp.BUFFER_APPENDED,this.onBufferAppended,this),e.on(bp.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(bp.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(bp.MEDIA_ENDED,this.onMediaEnded,this),e.on(bp.ERROR,this.onError,this),e.on(bp.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(bp.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(bp.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(bp.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.off(bp.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(bp.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(bp.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(bp.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(bp.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(bp.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(bp.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(bp.BUFFER_CODECS,this.onBufferCodecs,this),e.off(bp.BUFFER_APPENDED,this.onBufferAppended,this),e.off(bp.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(bp.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(bp.MEDIA_ENDED,this.onMediaEnded,this),e.off(bp.ERROR,this.onError,this),e.off(bp.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;null==(e=this.getBufferingPlayer())||e.resumeBuffering()}pauseBuffering(){var e;null==(e=this.getBufferingPlayer())||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){_v(e,"play",this.onPlay),_v(e,"pause",this.onPause),_v(e,"seeking",this.onSeeking),_v(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const n=this.media=t.media;Dv(n,"seeking",this.onSeeking),Dv(n,"timeupdate",this.onTimeupdate),Dv(n,"play",this.onPlay),Dv(n,"pause",this.onPause)}onMediaAttached(e,t){const n=this.effectivePlayingItem,r=this.detachedData;if(this.detachedData=null,null===n)this.checkStart();else if(!r){this.clearScheduleState();const e=this.findItemIndex(n);this.setSchedulePosition(e)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const n=!!t.transferMedia,r=this.media;if(this.media=null,!n&&(r&&this.removeMediaListeners(r),this.detachedData)){const e=this.getBufferingPlayer();e&&(this.log(`Removing schedule state for detachedData and ${e}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,e.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,n=t=>t?e.getAssetPlayer(t.identifier):t,r=(t,r,s,a,o)=>{if(t){let A=t[r].start;const l=t.event;if(l){if("playout"===r||l.timelineOccupancy!==$E.Point){const e=n(s);(null==e?void 0:e.interstitial)===l&&(A+=e.assetItem.startOffset+e[o])}}else{A+=("bufferedPos"===a?i():e[a])-t.start}return A}return 0},i=()=>{const t=e.bufferedPos;return t===Number.MAX_VALUE?s("primary"):Math.max(t,0)},s=t=>{var n,r;return null!=(n=e.primaryDetails)&&n.live?e.primaryDetails.edge:(null==(r=e.schedule)?void 0:r.durations[t])||0},a=(t,i)=>{var s,a;const o=e.effectivePlayingItem;if(null!=o&&null!=(s=o.event)&&s.restrictions.skip||!e.schedule)return;e.log(`seek to ${t} "${i}"`);const A=e.effectivePlayingItem,l=e.schedule.findItemIndexAtTime(t,i),c=null==(a=e.schedule.items)?void 0:a[l],u=e.getBufferingPlayer(),d=null==u?void 0:u.interstitial,h=null==d?void 0:d.appendInPlace,f=A&&e.itemsMatch(A,c);if(A&&(h||f)){const s=n(e.playingAsset),a=(null==s?void 0:s.media)||e.primaryMedia;if(a){const n="primary"===i?a.currentTime:r(A,i,e.playingAsset,"timelinePos","currentTime"),o=t-n,l=(h?n:a.currentTime)+o;if(l>=0&&(!s||h||l<=s.duration))return void(a.currentTime=l)}}if(c){let n=t;if("primary"!==i){const e=t-c[i].start;n=c.start+e}const r=!e.isInterstitial(c);if(e.isInterstitial(A)&&!A.event.appendInPlace||!r&&!c.event.appendInPlace){if(A){const s=e.findItemIndex(A);if(l>s){const t=e.schedule.findJumpRestrictedIndex(s+1,l);if(t>s)return void e.setSchedulePosition(t)}let a=0;if(r)e.timelinePos=n,e.checkBuffer();else{const e=c.event.assetList,n=t-(c[i]||c).start;for(let t=e.length;t--;){const r=e[t];if(r.duration&&n>=r.startOffset&&n<r.startOffset+r.duration){a=t;break}}}e.setSchedulePosition(l,a)}}else{const t=e.media||(h?null==u?void 0:u.media:null);t&&(t.currentTime=n)}}},o=()=>{const n=e.effectivePlayingItem;if(e.isInterstitial(n))return n;const r=t();return e.isInterstitial(r)?r:null},A={get bufferedEnd(){const n=t(),i=e.bufferingItem;var s;return i&&i===n&&(r(i,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-i.playout.start||(null==(s=e.bufferingAsset)?void 0:s.startOffset))||0},get currentTime(){const t=o(),n=e.effectivePlayingItem;return n&&n===t?r(n,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-n.playout.start:0},set currentTime(t){const n=o(),r=e.effectivePlayingItem;r&&r===n&&a(t+r.playout.start,"playout")},get duration(){const e=o();return e?e.playout.end-e.playout.start:0},get assetPlayers(){var t;const n=null==(t=o())?void 0:t.event.assetList;return n?n.map(t=>e.getAssetPlayer(t.identifier)):[]},get playingIndex(){var t;const n=null==(t=o())?void 0:t.event;return n&&e.effectivePlayingAsset?n.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return o()}};return this.manager={get events(){var t;return(null==(t=e.schedule)||null==(t=t.events)?void 0:t.slice(0))||[]},get schedule(){var t;return(null==(t=e.schedule)||null==(t=t.items)?void 0:t.slice(0))||[]},get interstitialPlayer(){return o()?A:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const n=t();return e.findItemIndex(n)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const t=e.effectivePlayingItem;return e.findItemIndex(t)},primary:{get bufferedEnd(){return i()},get currentTime(){const t=e.timelinePos;return t>0?t:0},set currentTime(e){a(e,"primary")},get duration(){return s("primary")},get seekableStart(){var t;return(null==(t=e.primaryDetails)?void 0:t.fragmentStart)||0}},integrated:{get bufferedEnd(){return r(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return r(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(e){a(e,"integrated")},get duration(){return s("integrated")},get seekableStart(){var t;return((t,n)=>{var r;if(0!==t&&"primary"!==n&&null!=(r=e.schedule)&&r.length){var i;const r=e.schedule.findItemIndexAtTime(t),s=null==(i=e.schedule.items)?void 0:i[r];if(s)return t+(s[n].start-s.start)}return t})((null==(t=e.primaryDetails)?void 0:t.fragmentStart)||0,"integrated")}},skip:()=>{const t=e.effectivePlayingItem,n=null==t?void 0:t.event;if(n&&!n.restrictions.skip){const r=e.findItemIndex(t);if(n.appendInPlace){const e=t.playout.start+t.event.duration;a(e+.001,"playout")}else e.advanceAfterAssetEnded(n,r,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,n=null==(e=this.schedule)?void 0:e.items;return!!(this.playbackStarted&&t&&n)&&this.findItemIndex(t)===n.length-1}get playbackStarted(){return null!==this.effectivePlayingItem}get currentTime(){var e,t;if(null===this.mediaSelection)return;const n=this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&!n.event.appendInPlace)return;let r=this.media;!r&&null!=(e=this.bufferingItem)&&null!=(e=e.event)&&e.appendInPlace&&(r=this.primaryMedia);const i=null==(t=r)?void 0:t.currentTime;return void 0!==i&&gp(i)?i:void 0}get primaryMedia(){var e;return this.media||(null==(e=this.detachedData)?void 0:e.media)||null}isInterstitial(e){return!(null==e||!e.event)}retreiveMediaSource(e,t){const n=this.getAssetPlayer(e);n&&this.transferMediaFromPlayer(n,t)}transferMediaFromPlayer(e,t){const n=e.interstitial.appendInPlace,r=e.media;if(n&&r===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&r)return void(this.detachedData={media:r});const n=e.transferMedia();this.log(`transfer MediaSource from ${e} ${gm(n)}`),this.detachedData=n}else t&&r&&(this.shouldPlay||(this.shouldPlay=!r.paused))}transferMediaTo(e,t){var n,r;if(e.media===t)return;let i=null;const s=this.hls,a=e!==s,o=a&&e.interstitial.appendInPlace,A=null==(n=this.detachedData)?void 0:n.mediaSource;let l;if(s.media)o&&(i=s.transferMedia(),this.detachedData=i),l="Primary";else if(A){const e=this.getBufferingPlayer();e?(i=e.transferMedia(),l=`${e}`):l="detached MediaSource"}else l="detached media";if(!i)if(A)i=this.detachedData,this.log(`using detachedData: MediaSource ${gm(i)}`);else if(!this.detachedData||s.media===t){const e=this.playerQueue;e.length>1&&e.forEach(e=>{if(a&&e.interstitial.appendInPlace!==o){const t=e.interstitial;this.clearInterstitial(e.interstitial,null),t.appendInPlace=!1,t.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${t}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}const c=i&&"mediaSource"in i&&"closed"!==(null==(r=i.mediaSource)?void 0:r.readyState),u=c&&i?i:t;this.log(`${c?"transfering MediaSource":"attaching media"} to ${a?e:"Primary"} from ${l} (media.currentTime: ${t.currentTime})`);const d=this.schedule;if(u===i&&d){const t=a&&e.assetId===d.assetIdAtEnd;u.overrides={duration:d.duration,endOfStream:!a||t,cueRemoval:!a}}e.attachMedia(u)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=null==e?void 0:e.events;if(!t||this.playbackDisabled||!this.media)return;-1===this.bufferedPos&&(this.bufferedPos=0);const n=this.timelinePos,r=this.effectivePlayingItem;if(-1===n){const n=this.hls.startPosition;if(this.log(tB("checkStart",n)),this.timelinePos=n,t.length&&t[0].cue.pre){const n=e.findEventIndex(t[0].identifier);this.setSchedulePosition(n)}else if(n>=0||!this.primaryLive){const t=this.timelinePos=n>0?n:0,r=e.findItemIndexAtTime(t);this.setSchedulePosition(r)}}else if(r&&!this.playingItem){const t=e.findItemIndex(r);this.setSchedulePosition(t)}}advanceAssetBuffering(e,t){const n=e.event,r=n.findAssetIndex(t),i=zE(n,r);if(n.isAssetPastPlayoutLimit(i)){if(this.schedule){var s;const t=null==(s=this.schedule.items)?void 0:s[this.findItemIndex(e)+1];t&&this.bufferedToItem(t)}}else this.bufferedToEvent(e,i)}advanceAfterAssetEnded(e,t,n){const r=zE(e,n);if(e.isAssetPastPlayoutLimit(r)){if(this.schedule){const n=this.schedule.items;if(n){const r=t+1;if(r>=n.length)return void this.setSchedulePosition(-1);const i=e.resumeTime;this.timelinePos<i&&(this.log(tB("advanceAfterAssetEnded",i)),this.timelinePos=i,e.appendInPlace&&this.advanceInPlace(i),this.checkBuffer(this.bufferedPos<i)),this.setSchedulePosition(r)}}}else{if(e.appendInPlace){const t=e.assetList[r];t&&this.advanceInPlace(t.timelineStart)}this.setSchedulePosition(t,r)}}setScheduleToAssetAtTime(e,t){const n=this.schedule;if(!n)return;const r=t.parentIdentifier,i=n.getEvent(r);if(i){const t=n.findEventIndex(r),s=n.findAssetIndex(i,e);this.advanceAfterAssetEnded(i,t,s-1)}}setSchedulePosition(e,t){var n;const r=null==(n=this.schedule)?void 0:n.items;if(!r||this.playbackDisabled)return;const i=e>=0?r[e]:null;this.log(`setSchedulePosition ${e}, ${t} (${i?JE(i):i}) pos: ${this.timelinePos}`);const s=this.waitingItem||this.playingItem,a=this.playingLastItem;if(this.isInterstitial(s)){const n=s.event,l=this.playingAsset,c=null==l?void 0:l.identifier,u=c?this.getAssetPlayer(c):null;if(u&&c&&(!this.eventItemsMatch(s,i)||void 0!==t&&c!==n.assetList[t].identifier)){var o;const t=n.findAssetIndex(l);if(this.log(`INTERSTITIAL_ASSET_ENDED ${t+1}/${n.assetList.length} ${YE(l)}`),this.endedAsset=l,this.playingAsset=null,this.hls.trigger(bp.INTERSTITIAL_ASSET_ENDED,{asset:l,assetListIndex:t,event:n,schedule:r.slice(0),scheduleIndex:e,player:u}),s!==this.playingItem)return void(this.itemsMatch(s,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(n,this.findItemIndex(this.playingItem),t));this.retreiveMediaSource(c,i),!u.media||null!=(o=this.detachedData)&&o.mediaSource||u.detachMedia()}if(!this.eventItemsMatch(s,i)&&(this.endedItem=s,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${n} ${JE(s)}`),n.hasPlayed=!0,this.hls.trigger(bp.INTERSTITIAL_ENDED,{event:n,schedule:r.slice(0),scheduleIndex:e}),n.cue.once)){var A;this.updateSchedule();const e=null==(A=this.schedule)?void 0:A.items;if(i&&e){const n=this.findItemIndex(i);this.advanceSchedule(n,e,t,s,a)}return}}this.advanceSchedule(e,r,t,s,a)}advanceSchedule(e,t,n,r,i){const s=this.schedule;if(!s)return;const a=t[e]||null,o=this.primaryMedia,A=this.playerQueue;if(A.length&&A.forEach(t=>{const n=t.interstitial,r=s.findEventIndex(n.identifier);(r<e||r>e+1)&&this.clearInterstitial(n,a)}),this.isInterstitial(a)){this.timelinePos=Math.min(Math.max(this.timelinePos,a.start),a.end);const i=a.event;if(void 0===n){const t=zE(i,(n=s.findAssetIndex(i,this.timelinePos))-1);if(i.isAssetPastPlayoutLimit(t)||i.appendInPlace&&this.timelinePos===a.end)return void this.advanceAfterAssetEnded(i,e,n);n=t}const A=this.waitingItem;this.assetsBuffered(a,o)||this.setBufferingItem(a);let l=this.preloadAssets(i,n);if(this.eventItemsMatch(a,A||r)||(this.waitingItem=a,this.log(`INTERSTITIAL_STARTED ${JE(a)} ${i.appendInPlace?"append in place":""}`),this.hls.trigger(bp.INTERSTITIAL_STARTED,{event:i,schedule:t.slice(0),scheduleIndex:e})),!i.assetListLoaded)return void this.log(`Waiting for ASSET-LIST to complete loading ${i}`);if(i.assetListLoader&&(i.assetListLoader.destroy(),i.assetListLoader=void 0),!o)return void this.log(`Waiting for attachMedia to start Interstitial ${i}`);this.waitingItem=this.endedItem=null,this.playingItem=a;const c=i.assetList[n];if(!c)return void this.advanceAfterAssetEnded(i,e,n||0);if(l||(l=this.getAssetPlayer(c.identifier)),null===l||l.destroyed){const e=i.assetList.length;this.warn(`asset ${n+1}/${e} player destroyed ${i}`),l=this.createAssetPlayer(i,c,n),l.loadSource()}if(!this.eventItemsMatch(a,this.bufferingItem)&&i.appendInPlace&&this.isAssetBuffered(c))return;this.startAssetPlayer(l,n,t,e,o),this.shouldPlay&&eB(l.media)}else a?(this.resumePrimary(a,e,r),this.shouldPlay&&eB(this.hls.media)):i&&this.isInterstitial(r)&&(this.endedItem=null,this.playingItem=r,r.event.appendInPlace||this.attachPrimary(s.durations.primary,null))}get playbackDisabled(){return!1===this.hls.config.enableInterstitialPlayback}get primaryDetails(){var e;return null==(e=this.mediaSelection)?void 0:e.main.details}get primaryLive(){var e;return!(null==(e=this.primaryDetails)||!e.live)}resumePrimary(e,t,n){var r,i;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${JE(e)}`),null==(r=this.detachedData)||!r.mediaSource){let n=this.timelinePos;(n<e.start||n>=e.end)&&(n=this.getPrimaryResumption(e,t),this.log(tB("resumePrimary",n)),this.timelinePos=n),this.attachPrimary(n,e)}if(!n)return;const s=null==(i=this.schedule)?void 0:i.items;s&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${JE(e)}`),this.hls.trigger(bp.INTERSTITIALS_PRIMARY_RESUMED,{schedule:s.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const n=e.start;if(this.primaryLive){const e=this.primaryDetails;if(0===t)return this.hls.startPosition;if(e&&(n<e.fragmentStart||n>e.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);if(null!=t&&t.hls)return t.hls.bufferedToEnd;return py.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,n){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const r=this.primaryMedia;if(!r)return;const i=this.hls;i.media?this.checkBuffer():(this.transferMediaTo(i,r),n&&this.startLoadingPrimaryAt(e,n)),n||(this.log(tB("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,n))}startLoadingPrimaryAt(e,t){var n;const r=this.hls;!r.loadingEnabled||!r.media||Math.abs(((null==(n=r.mainForwardBufferInfo)?void 0:n.start)||r.media.currentTime)-e)>.5?r.startLoad(e,t):r.bufferingEnabled||r.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),null==(e=this.schedule)||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(bp.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(bp.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(-1===t.level||!this.schedule)return;const n=this.hls.levels[t.level];if(!n.details)return;const r=Up(Up({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=r,this.schedule.parseInterstitialDateRanges(r,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const n=this.hls.audioTracks[t.id],r=this.mediaSelection;if(!r)return void(this.altSelection=Up(Up({},this.altSelection),{},{audio:n}));const i=Up(Up({},r),{},{audio:n});this.mediaSelection=i}onSubtitleTrackUpdated(e,t){const n=this.hls.subtitleTracks[t.id],r=this.mediaSelection;if(!r)return void(this.altSelection=Up(Up({},this.altSelection),{},{subtitles:n}));const i=Up(Up({},r),{},{subtitles:n});this.mediaSelection=i}onAudioTrackSwitching(e,t){const n=vm(t);this.playerQueue.forEach(({hls:e})=>e&&(e.setAudioOption(t)||e.setAudioOption(n)))}onSubtitleTrackSwitch(e,t){const n=vm(t);this.playerQueue.forEach(({hls:e})=>e&&(e.setSubtitleOption(t)||-1!==t.id&&e.setSubtitleOption(n)))}onBufferCodecs(e,t){const n=t.tracks;n&&(this.requiredTracks=n)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const e=this.timelinePos;this.bufferedPos=e,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let e=0;e<t.length;e++){const r=t[e];if(r.cue.post){var n;const e=this.schedule.findEventIndex(r.identifier),t=null==(n=this.schedule.items)?void 0:n[e];this.isInterstitial(t)&&this.eventItemsMatch(t,this.bufferingItem)&&this.bufferedToItem(t,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const e=this.findItemIndex(t);this.setSchedulePosition(e+1)}else this.shouldPlay=!1}updateItem(e,t){var n;const r=null==(n=this.schedule)?void 0:n.items;if(e&&r){return r[this.findItemIndex(e,t)]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((t,n)=>{e.event.isAssetPastPlayoutLimit(n)&&this.clearAssetPlayer(t.identifier,null)});const n=e.end+.25,r=py.bufferInfo(this.primaryMedia,n,0);if(r.end>n||(r.nextStart||0)>n){this.log(`trim buffered interstitial ${JE(e)} (was ${JE(t)})`);const r=!0;this.attachPrimary(n,null,r),this.flushFrontBuffer(n)}}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var n;return!!t&&(e===t||e.event.identifier===(null==(n=t.event)?void 0:n.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(e=!1){var t;const n=this.mediaSelection;n&&(null==(t=this.schedule)||t.updateSchedule(n,[],e))}checkBuffer(e){var t;const n=null==(t=this.schedule)?void 0:t.items;if(!n)return;const r=py.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=r.len<1),this.updateBufferedPos(r.end,n,e)}updateBufferedPos(e,t,n){const r=this.schedule,i=this.bufferingItem;if(this.bufferedPos>e||!r)return;if(1===t.length&&this.itemsMatch(t[0],i))return void(this.bufferedPos=e);const s=this.playingItem,a=this.findItemIndex(s);let o=r.findItemIndexAtTime(e);if(this.bufferedPos<e){var A;const n=this.findItemIndex(i),r=Math.min(n+1,t.length-1),s=t[r];if((-1===o&&i&&e>=i.end||null!=(A=s.event)&&A.appendInPlace&&e+.01>=s.start)&&(o=r),this.isInterstitial(i)){const e=i.event;if(r-a>1&&!1===e.appendInPlace)return;if(0===e.assetList.length&&e.assetListLoader)return}if(this.bufferedPos=e,o>n&&o>a)this.bufferedToItem(s);else{const t=this.primaryDetails;this.primaryLive&&t&&e>t.edge-t.targetduration&&s.start<t.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(s)&&this.preloadAssets(s.event,0)}}else n&&s&&!this.itemsMatch(s,i)&&(o===a?this.bufferedToItem(s):o===a+1&&this.bufferedToItem(t[o]))}assetsBuffered(e,t){return 0!==e.event.assetList.length&&!e.event.assetList.some(e=>{const n=this.getAssetPlayer(e.identifier);return!(null!=n&&n.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,n=this.schedule;if(!this.itemsMatch(e,t)&&n){const{items:r,events:i}=n;if(!r||!i)return t;const s=this.isInterstitial(e),a=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const o=a?a.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${JE(e)}`+(t?` (${o.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(s){const t=n.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((e,n)=>{const r=this.getAssetPlayer(e.identifier);r&&(n===t&&r.loadSource(),r.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(e=>e.pauseBuffering());this.hls.trigger(bp.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:i.slice(0),schedule:r.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){const n=this.setBufferingItem(e);if(!this.playbackDisabled)if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(null!==n){this.bufferingAsset=null;const t=this.detachedData;if(t)if(t.mediaSource){const t=!0;this.attachPrimary(e.start,e,t)}else this.preloadPrimary(e);else this.preloadPrimary(e)}}preloadPrimary(e){const t=this.findItemIndex(e),n=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(n)}bufferedToEvent(e,t){const n=e.event,r=0===n.assetList.length&&!n.assetListLoader,i=n.cue.once;if(r||!i){const e=this.preloadAssets(n,t);if(null!=e&&e.interstitial.appendInPlace){const t=this.primaryMedia;t&&this.bufferAssetPlayer(e,t)}}}preloadAssets(e,t){const n=e.assetUrl,r=e.assetList.length,i=0===r&&!e.assetListLoader,s=e.cue.once;if(i){const i=e.timelineStart;if(e.appendInPlace){var a;const t=this.playingItem;this.isInterstitial(t)||(null==t||null==(a=t.nextEvent)?void 0:a.identifier)!==e.identifier||this.flushFrontBuffer(i+.25)}let s,o=0;if(!this.playingItem&&this.primaryLive&&(o=this.hls.startPosition,-1===o&&(o=this.hls.liveSyncPosition||0)),o&&!e.cue.pre&&!e.cue.post){const e=o-i;e>0&&(s=Math.round(1e3*e)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${n?1:r} ${e}${s?` live-start: ${o} start-offset: ${s}`:""}`),n)return this.createAsset(e,0,0,i,e.duration,n);const A=this.assetListLoader.loadAssetList(e,s);A&&(e.assetListLoader=A)}else if(!s&&r){for(let i=t;i<r;i++){const t=e.assetList[i],n=this.getAssetPlayerQueueIndex(t.identifier);-1!==n&&!this.playerQueue[n].destroyed||t.error||this.createAssetPlayer(e,t,i)}const n=e.assetList[t];if(n){const e=this.getAssetPlayer(n.identifier);return e&&e.loadSource(),e}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`);Object.keys(t).forEach(t=>{this.hls.trigger(bp.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:t})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let n=0;n<t.length;n++)if(e===t[n].assetId)return n;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t)for(let n=0;n<e.length;n++)if(e[n].media===t)return e[n];return null}createAsset(e,t,n,r,i,s){const a={parentIdentifier:e.identifier,identifier:KE(e,s,t),duration:i,startOffset:n,timelineStart:r,uri:s};return this.createAssetPlayer(e,a,t)}createAssetPlayer(e,t,n){const r=this.hls,i=r.userConfig;let s=i.videoPreference;const a=r.loadLevelObj||r.levels[r.currentLevel];(s||a)&&(s=Dp({},s),a.videoCodec&&(s.videoCodec=a.videoCodec),a.videoRange&&(s.allowedVideoRanges=[a.videoRange]));const o=r.audioTracks[r.audioTrack],A=r.subtitleTracks[r.subtitleTrack];let l=0;if(this.primaryLive||e.appendInPlace){const e=this.timelinePos-t.timelineStart;if(e>1){const n=t.duration;n&&e<n&&(l=e)}}const c=t.identifier,u=Up(Up({},i),{},{maxMaxBufferLength:Math.min(180,r.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:r.sessionId,assetPlayerId:c,abrEwmaDefaultEstimate:r.bandwidthEstimate,interstitialsController:void 0,startPosition:l,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:s,audioPreference:o||i.audioPreference,subtitlePreference:A||i.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(u.timelineOffset=t.timelineStart));const d=u.cmcd;null!=d&&d.sessionId&&d.contentId&&(u.cmcd=Dp({},d,{contentId:HE(t.uri)})),this.getAssetPlayer(c)&&this.warn(`Duplicate date range identifier ${e} and asset ${c}`);const h=new qE(this.HlsPlayerClass,u,e,t);this.playerQueue.push(h),e.assetList[n]=t;let f=!0;const p=r=>{if(r.live){var i;const t=new Error(`Interstitials MUST be VOD assets ${e}`),r={fatal:!0,type:vp.OTHER_ERROR,details:wp.INTERSTITIAL_ASSET_ITEM_ERROR,error:t},s=(null==(i=this.schedule)?void 0:i.findEventIndex(e.identifier))||-1;return void this.handleAssetItemError(r,e,s,n,t.message)}const s=r.edge-r.fragmentStart,a=t.duration;(f||null===a||s>a)&&(f=!1,this.log(`Interstitial asset "${c}" duration change ${a} > ${s}`),t.duration=s,this.updateSchedule())};h.on(bp.LEVEL_UPDATED,(e,{details:t})=>p(t)),h.on(bp.LEVEL_PTS_UPDATED,(e,{details:t})=>p(t)),h.on(bp.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const g=(e,t)=>{const n=this.getAssetPlayer(c);if(n&&t.tracks){n.off(bp.BUFFER_CODECS,g),n.tracks=t.tracks;const e=this.primaryMedia;this.bufferingAsset===n.assetItem&&e&&!n.media&&this.bufferAssetPlayer(n,e)}};h.on(bp.BUFFER_CODECS,g);h.on(bp.BUFFERED_TO_END,()=>{var n;const r=this.getAssetPlayer(c);if(this.log(`buffered to end of asset ${r}`),!r||!this.schedule)return;const i=this.schedule.findEventIndex(e.identifier),s=null==(n=this.schedule.items)?void 0:n[i];this.isInterstitial(s)&&this.advanceAssetBuffering(s,t)});const m=t=>()=>{if(!this.getAssetPlayer(c)||!this.schedule)return;this.shouldPlay=!0;const n=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,n,t)};return h.once(bp.MEDIA_ENDED,m(n)),h.once(bp.PLAYOUT_LIMIT_REACHED,m(1/0)),h.on(bp.ERROR,(t,r)=>{if(!this.schedule)return;const i=this.getAssetPlayer(c);if(r.details===wp.BUFFER_STALLED_ERROR)return null!=i&&i.appendInPlace?void this.handleInPlaceStall(e):(this.onTimeupdate(),void this.checkBuffer(!0));this.handleAssetItemError(r,e,this.schedule.findEventIndex(e.identifier),n,`Asset player error ${r.error} ${e}`)}),h.on(bp.DESTROYING,()=>{if(!this.getAssetPlayer(c)||!this.schedule)return;const t=new Error(`Asset player destroyed unexpectedly ${c}`),r={fatal:!0,type:vp.OTHER_ERROR,details:wp.INTERSTITIAL_ASSET_ITEM_ERROR,error:t};this.handleAssetItemError(r,e,this.schedule.findEventIndex(e.identifier),n,t.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${YE(t)}`),this.hls.trigger(bp.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:n,event:e,player:h}),h}clearInterstitial(e,t){e.assetList.forEach(e=>{this.clearAssetPlayer(e.identifier,t)}),e.reset()}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(-1!==t){this.log(`reset asset player "${e}" after error`);const n=this.playerQueue[t];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(e,t){const n=this.getAssetPlayerQueueIndex(e);if(-1!==n){const e=this.playerQueue[n];this.log(`clear ${e} toSegment: ${t?JE(t):t}`),this.transferMediaFromPlayer(e,t),this.playerQueue.splice(n,1),e.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,n,r,i){const{interstitial:s,assetItem:a,assetId:o}=e,A=s.assetList.length,l=this.playingAsset;this.endedAsset=null,this.playingAsset=a,l&&l.identifier===o||(l&&(this.clearAssetPlayer(l.identifier,n[r]),delete l.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${A} ${YE(a)}`),this.hls.trigger(bp.INTERSTITIAL_ASSET_STARTED,{asset:a,assetListIndex:t,event:s,schedule:n.slice(0),scheduleIndex:r,player:e})),this.bufferAssetPlayer(e,i)}bufferAssetPlayer(e,t){var n,r;if(!this.schedule)return;const{interstitial:i,assetItem:s}=e,a=this.schedule.findEventIndex(i.identifier),o=null==(n=this.schedule.items)?void 0:n[a];if(!o)return;e.loadSource(),this.setBufferingItem(o),this.bufferingAsset=s;const A=this.getBufferingPlayer();if(A===e)return;const l=i.appendInPlace;if(l&&!1===(null==A?void 0:A.interstitial.appendInPlace))return;const c=(null==A?void 0:A.tracks)||(null==(r=this.detachedData)?void 0:r.tracks)||this.requiredTracks;if(l&&s!==this.playingAsset){if(!e.tracks)return void this.log(`Waiting for track info before buffering ${e}`);if(c&&!$p(c,e.tracks)){const t=new Error(`Asset ${YE(s)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(c)}')`),n={fatal:!0,type:vp.OTHER_ERROR,details:wp.INTERSTITIAL_ASSET_ITEM_ERROR,error:t},r=i.findAssetIndex(s);return void this.handleAssetItemError(n,i,a,r,t.message)}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,n=this.primaryMedia;if(!t||!n)return;const r=n.currentTime,i=t.findAssetIndex(e,r),s=e.assetList[i];if(s){const a=this.getAssetPlayer(s.identifier);if(a){const o=a.currentTime||r-s.timelineStart,A=a.duration-o;if(this.warn(`Stalled at ${o} of ${o+A} in ${a} ${e} (media.currentTime: ${r})`),o&&(A/n.playbackRate<.5||a.bufferedInPlaceToEnd(n))&&a.hls){const n=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,n,i)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,n,r,i){if(e.details===wp.BUFFER_STALLED_ERROR)return;const s=t.assetList[r]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${s?YE(s):s} ${e.error}`),!this.schedule)return;const a=(null==s?void 0:s.identifier)||"",o=this.getAssetPlayerQueueIndex(a),A=this.playerQueue[o]||null,l=this.schedule.items,c=Dp({},e,{fatal:!1,errorAction:Gm(!0),asset:s,assetListIndex:r,event:t,schedule:l,scheduleIndex:n,player:A});if(this.hls.trigger(bp.INTERSTITIAL_ASSET_ERROR,c),!e.fatal)return;const u=this.playingAsset,d=this.bufferingAsset,h=new Error(i);if(s&&(this.clearAssetPlayer(a,null),s.error=h),t.assetList.some(e=>!e.error))for(let f=r;f<t.assetList.length;f++)this.resetAssetPlayer(t.assetList[f].identifier);else t.error=h;this.updateSchedule(!0),t.error?this.primaryFallback(t):u&&u.identifier===a?this.advanceAfterAssetEnded(t,n,r):d&&d.identifier===a&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,d)}primaryFallback(e){const t=e.timelineStart,n=this.effectivePlayingItem;if(n){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${this.timelinePos} playing: ${JE(n)} error: ${e.error}`);let r=this.timelinePos;-1===r&&(r=this.hls.startPosition);const i=this.updateItem(n,r);if(this.itemsMatch(n,i)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t)),!this.schedule)return;const s=this.schedule.findItemIndexAtTime(r);this.setSchedulePosition(s)}else this.checkStart()}onAssetListLoaded(e,t){var n,r;const i=t.event,s=i.identifier,a=t.assetListResponse.ASSETS;if(null==(n=this.schedule)||!n.hasEvent(s))return;const o=i.timelineStart,A=i.duration;let l=0;a.forEach((e,t)=>{const n=parseFloat(e.DURATION);this.createAsset(i,t,l,o+l,n,e.URI),l+=n}),i.duration=l,this.log(`Loaded asset-list with duration: ${l} (was: ${A}) ${i}`);const c=this.waitingItem,u=(null==c?void 0:c.event.identifier)===s;this.updateSchedule();const d=null==(r=this.bufferingItem)?void 0:r.event;if(u){var h;const e=this.schedule.findEventIndex(s),t=null==(h=this.schedule.items)?void 0:h[e];if(t){if(!this.playingItem&&this.timelinePos>t.end){if(this.schedule.findItemIndexAtTime(this.timelinePos)!==e)return i.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${i}`),this.updateSchedule(!0),void this.primaryFallback(i)}this.setBufferingItem(t)}this.setSchedulePosition(e)}else if((null==d?void 0:d.identifier)===s){const e=i.assetList[0];if(e){const t=this.getAssetPlayer(e.identifier);if(d.appendInPlace){const e=this.primaryMedia;t&&e&&this.bufferAssetPlayer(t,e)}else t&&t.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case wp.ASSET_LIST_PARSING_ERROR:case wp.ASSET_LIST_LOAD_ERROR:case wp.ASSET_LIST_LOAD_TIMEOUT:{const e=t.interstitial;e&&(this.updateSchedule(!0),this.primaryFallback(e));break}case wp.BUFFER_STALLED_ERROR:{const e=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(e)&&e.event.appendInPlace)return void this.handleInPlaceStall(e.event);this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}});function aC(e){return e&&"object"==typeof e?Array.isArray(e)?e.map(aC):Object.keys(e).reduce((t,n)=>(t[n]=aC(e[n]),t),{}):e}function oC(e,t){const n=e.loader;if(n!==eC&&n!==iC)t.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1;else{(function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(c$){}return!1})()&&(e.loader=eC,e.progressive=!0,e.enableSoftwareAES=!0,t.log("[config]: Progressive streaming enabled, using FetchLoader"))}}class AC extends dy{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var e;null!=(e=this.media)&&e.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{var e;this.hls&&(this.ended=(null==(e=this.media)?void 0:e.currentTime)||1,this.hls.trigger(bp.MEDIA_ENDED,{stalled:!1}))},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(bp.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(bp.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(bp.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(bp.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(bp.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(bp.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(100),this.mediaSource=t.mediaSource;const n=this.media=t.media;Dv(n,"playing",this.onMediaPlaying),Dv(n,"waiting",this.onMediaWaiting),Dv(n,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:n}=this;n&&(_v(n,"playing",this.onMediaPlaying),_v(n,"waiting",this.onMediaWaiting),_v(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(null==(e=this.media)||!e.readyState||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var n,r;const i=null==(n=this.hls)?void 0:n.config;if(!i)return;const s=this.media;if(!s)return;const{seeking:a}=s,o=this.seeking&&!a,A=!this.seeking&&a,l=s.paused&&!a||s.ended||0===s.playbackRate;if(this.seeking=a,e!==t)return t&&(this.ended=0),this.moved=!0,a||(this.nudgeRetry=0,i.nudgeOnVideoHole&&!l&&e>t&&this.nudgeOnVideoHole(e,t)),void(0===this.waiting&&this.stallResolved(e));if(A||o)return void(o&&this.stallResolved(e));if(l)return this.nudgeRetry=0,this.stallResolved(e),void(!this.ended&&s.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(bp.MEDIA_ENDED,{stalled:!1})));if(!py.getBuffered(s).length)return void(this.nudgeRetry=0);const c=py.bufferInfo(s,e,0),u=c.nextStart||0,d=this.fragmentTracker;if(a&&d&&this.hls){const t=lC(this.hls.inFlightFragments,e),n=c.len>2,r=!u||t||u-e>2&&!d.getPartialFragment(e);if(n||r)return;this.moved=!1}const h=null==(r=this.hls)?void 0:r.latestLevelDetails;if(!this.moved&&null!==this.stalled&&d){if(!(c.len>0)&&!u)return;const t=Math.max(u,c.start||0)-e,n=!(null==h||!h.live)?2*h.targetduration:2,r=uC(e,d);if(t>0&&(t<=n||r))return void(s.paused||this._trySkipBufferHole(r))}const f=i.detectStallWithCurrentTimeMs,p=self.performance.now(),g=this.waiting;let m=this.stalled;if(null===m){if(!(g>0&&p-g<f))return void(this.stalled=p);m=this.stalled=g}const y=p-m;if(!a&&(y>=f||g)&&this.hls){var v;if("ended"===(null==(v=this.mediaSource)?void 0:v.readyState)&&(null==h||!h.live)&&Math.abs(e-((null==h?void 0:h.edge)||0))<1){if(this.ended)return;return this.ended=e||1,void this.hls.trigger(bp.MEDIA_ENDED,{stalled:!0})}if(this._reportStall(c),!this.media||!this.hls)return}const w=py.bufferInfo(s,e,i.maxBufferHole);this._tryFixBufferStall(w,y,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const n=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(n)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(bp.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var n;const r=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&null!=(n=this.buffered.audio)&&n.length&&r&&r.length>1&&e>r.end(0)){const n=py.bufferedInfo(py.timeRangesToArray(this.buffered.audio),e,0);if(n.len>1&&t>=n.start){const n=py.timeRangesToArray(r),i=py.bufferedInfo(n,t,0).bufferedIndex;if(i>-1&&i<n.length-1){const t=py.bufferedInfo(n,e,0).bufferedIndex,r=n[i].end,s=n[i+1].start;if((-1===t||t>i)&&s-r<1&&e-r<2){const n=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${r} -> ${s} buffered index: ${t}`);this.warn(n.message),this.media.currentTime+=1e-6;let i=uC(e,this.fragmentTracker);i&&"fragment"in i?i=i.fragment:i||(i=void 0);const a=py.bufferInfo(this.media,e,0);this.hls.trigger(bp.ERROR,{type:vp.MEDIA_ERROR,details:wp.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:n,reason:n.message,frag:i,buffer:a.len,bufferInfo:a})}}}}}_tryFixBufferStall(e,t,n){var r,i;const{fragmentTracker:s,media:a}=this,o=null==(r=this.hls)?void 0:r.config;if(!a||!s||!o)return;const A=null==(i=this.hls)?void 0:i.latestLevelDetails,l=uC(n,s);if(l||null!=A&&A.live&&n<A.fragmentStart){if(this._trySkipBufferHole(l)||!this.media)return}const c=e.buffered,u=this.adjacentTraversal(e,n);(c&&c.length>1&&e.len>o.maxBufferHole||e.nextStart&&(e.nextStart-n<o.maxBufferHole||u))&&(t>1e3*o.highBufferWatchdogPeriod||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const n=this.fragmentTracker,r=e.nextStart;if(n&&r){const e=n.getFragAtPos(t,Tp),i=n.getFragAtPos(r,Tp);if(e&&i)return i.sn-e.sn<2}return!1}_reportStall(e){const{hls:t,media:n,stallReported:r,stalled:i}=this;if(!r&&null!==i&&n&&t){this.stallReported=!0;const r=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${gm(e)})`);this.warn(r.message),t.trigger(bp.ERROR,{type:vp.MEDIA_ERROR,details:wp.BUFFER_STALLED_ERROR,fatal:!1,error:r,buffer:e.len,bufferInfo:e,stalled:{start:i}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:n,media:r}=this,i=null==(t=this.hls)?void 0:t.config;if(!r||!n||!i)return 0;const s=r.currentTime,a=py.bufferInfo(r,s,0),o=s<a.start?a.start:a.nextStart;if(o&&this.hls){const t=a.len<=i.maxBufferHole,l=a.len>0&&a.len<1&&r.readyState<3,c=o-s;if(c>0&&(t||l)){if(c>i.maxBufferHole){let t=!1;if(0===s){const e=n.getAppendedFrag(0,Tp);e&&o<e.end&&(t=!0)}if(!t&&e){var A;if(null==(A=this.hls.loadLevelObj)||!A.details)return 0;if(lC(this.hls.inFlightFragments,o))return 0;let t=!1,r=e.end;for(;r<o;){const e=uC(r,n);if(!e){t=!0;break}r+=e.duration}if(t)return 0}}const t=Math.max(o+.05,s+.1);if(this.warn(`skipping hole, adjusting currentTime from ${s} to ${t}`),this.moved=!0,r.currentTime=t,null==e||!e.gap){const n=new Error(`fragment loaded with buffer holes, seeking from ${s} to ${t}`),r={type:vp.MEDIA_ERROR,details:wp.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:n,reason:n.message,buffer:a.len,bufferInfo:a};e&&("fragment"in e?r.part=e:r.frag=e),this.hls.trigger(bp.ERROR,r)}return t}}return 0}_tryNudgeBuffer(e){const{hls:t,media:n,nudgeRetry:r}=this,i=null==t?void 0:t.config;if(!n||!i)return 0;const s=n.currentTime;if(this.nudgeRetry++,r<i.nudgeMaxRetry){const a=s+(r+1)*i.nudgeOffset,o=new Error(`Nudging 'currentTime' from ${s} to ${a}`);this.warn(o.message),n.currentTime=a,t.trigger(bp.ERROR,{type:vp.MEDIA_ERROR,details:wp.BUFFER_NUDGE_ON_STALL,error:o,fatal:!1,buffer:e.len,bufferInfo:e})}else{const n=new Error(`Playhead still not moving while enough data buffered @${s} after ${i.nudgeMaxRetry} nudges`);this.error(n.message),t.trigger(bp.ERROR,{type:vp.MEDIA_ERROR,details:wp.BUFFER_STALLED_ERROR,error:n,fatal:!0,buffer:e.len,bufferInfo:e})}}}function lC(e,t){const n=cC(e.main);if(n&&n.start<=t)return n;const r=cC(e.audio);return r&&r.start<=t?r:null}function cC(e){if(!e)return null;switch(e.state){case Rv:case Pv:case $v:case Kv:return null}return e.frag}function uC(e,t){return t.getAppendedFrag(e,Tp)||t.getPartialFragment(e)}function dC(){if("undefined"!=typeof self)return self.VTTCue||self.TextTrackCue}function hC(e,t,n,r,i){let s=new e(t,n,"");try{s.value=r,i&&(s.type=i)}catch(c$){s=new e(t,n,gm(i?Up({type:i},r):r))}return s}const fC=(()=>{const e=dC();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(c$){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class pC{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(bp.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(bp.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(bp.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(bp.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.on(bp.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(bp.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(bp.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(bp.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(bp.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(bp.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(bp.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.off(bp.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(bp.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(bp.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(bp.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var n;this.media=t.media,!1===(null==(n=t.overrides)?void 0:n.cueRemoval)&&(this.removeCues=!1)}onMediaAttached(){var e;const t=null==(e=this.hls)?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null;!!t.transferMedia||(this.id3Track&&(this.removeCues&&QE(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if("metadata"===n.kind&&"id3"===n.label)return RE(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:n,enableID3MetadataCues:r}=this.hls.config;if(!n&&!r)return;const{samples:i}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const s=dC();if(s)for(let a=0;a<i.length;a++){const e=i[a].type;if(e===Bw.emsg&&!n||!r)continue;const t=vw(i[a].data),o=i[a].pts;let A=o+i[a].duration;A>fC&&(A=fC);A-o<=0&&(A=o+.25);for(let n=0;n<t.length;n++){const r=t[n];if(!ww(r)){this.updateId3CueEnds(o,e);const t=hC(s,o,A,r,e);t&&this.id3Track.addCue(t)}}}}updateId3CueEnds(e,t){var n;const r=null==(n=this.id3Track)?void 0:n.cues;if(r)for(let i=r.length;i--;){const n=r[i];n.type===t&&n.startTime<e&&n.endTime===fC&&(n.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:n,type:r}){const{id3Track:i,hls:s}=this;if(!s)return;const{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:o}}=s;if(i&&(a||o)){let e;e="audio"===r?e=>e.type===Bw.audioId3&&o:"video"===r?e=>e.type===Bw.emsg&&a:e=>e.type===Bw.audioId3&&o||e.type===Bw.emsg&&a,NE(i,t,n,e)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;const{assetPlayerId:n,timelineOffset:r,enableDateRangeMetadataCues:i,interstitialsController:s}=this.hls.config;if(!i)return;const a=dC();if(n&&r&&!s){const{fragmentStart:t,fragmentEnd:r}=e;let i=this.assetCue;i?(i.startTime=t,i.endTime=r):a&&(i=this.assetCue=hC(a,t,r,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),i&&(i.id=n,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(i),i.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:o}=this,{dateRanges:A}=e,l=Object.keys(A);let c=this.dateRangeCuesAppended;var u;if(o&&t)if(null!=(u=o.cues)&&u.length){const e=Object.keys(c).filter(e=>!l.includes(e));for(let t=e.length;t--;){var d;const n=e[t],r=null==(d=c[n])?void 0:d.cues;delete c[n],r&&Object.keys(r).forEach(e=>{const t=r[e];if(t){t.removeEventListener("enter",this.onEventCueEnter);try{o.removeCue(t)}catch(c$){}}})}}else c=this.dateRangeCuesAppended={};const h=e.fragments[e.fragments.length-1];if(0!==l.length&&gp(null==h?void 0:h.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let e=0;e<l.length;e++){const t=l[e],n=A[t],r=n.startTime,i=c[t],o=(null==i?void 0:i.cues)||{};let u=(null==i?void 0:i.durationKnown)||!1,d=fC;const{duration:h,endDate:f}=n;if(f&&null!==h)d=r+h,u=!0;else if(n.endOnNext&&!u){const e=l.reduce((e,t)=>{if(t!==n.id){const r=A[t];if(r.class===n.class&&r.startDate>n.startDate&&(!e||n.startDate<e.startDate))return r}return e},null);e&&(d=e.startTime,u=!0)}const p=Object.keys(n.attr);for(let e=0;e<p.length;e++){const A=p[e];if(!Cy(A))continue;const l=o[A];if(l)!u||null!=i&&i.durationKnown?Math.abs(l.startTime-r)>.01&&(l.startTime=r,l.endTime=d):l.endTime=d;else if(a){let e=n.attr[A];Sy(A)&&(e=Gp(e));const i=hC(a,r,d,{key:A,data:e},Bw.dateRange);i&&(i.id=t,this.id3Track.addCue(i),o[A]=i,s&&("X-ASSET-LIST"!==A&&"X-ASSET-URL"!==A||i.addEventListener("enter",this.onEventCueEnter)))}}c[t]={cues:o,dateRange:n,durationKnown:u}}}}}class gC{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:e}=this,t=this.levelDetails;if(!e||!t)return;this.currentTime=e.currentTime;const n=this.computeLatency();if(null===n)return;this._latency=n;const{lowLatencyMode:r,maxLiveSyncPlaybackRate:i}=this.config;if(!r||1===i||!t.live)return;const s=this.targetLatency;if(null===s)return;const a=n-s;if(a<Math.min(this.maxLatency,s+t.targetduration)&&a>.05&&this.forwardBufferLength>1){const t=Math.min(2,Math.max(1,i)),n=Math.round(2/(1+Math.exp(-.75*a-this.edgeStalled))*20)/20,r=Math.min(t,Math.max(1,n));this.changeMediaPlaybackRate(e,r)}else 1!==e.playbackRate&&0!==e.playbackRate&&this.changeMediaPlaybackRate(e,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return(null==(e=this.hls)?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(void 0!==e.liveMaxLatencyDuration)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(null===e||null===this.hls)return null;const{holdBack:t,partHoldBack:n,targetduration:r}=e,{liveSyncDuration:i,liveSyncDurationCount:s,lowLatencyMode:a}=this.config,o=this.hls.userConfig;let A=a&&n||t;(this._targetLatencyUpdated||o.liveSyncDuration||o.liveSyncDurationCount||0===A)&&(A=void 0!==i?i:s*r);const l=r;return A+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,l)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(null===e||null===t)return null;const n=this.levelDetails;if(null===n)return null;const r=n.edge,i=e-t-this.edgeStalled,s=r-n.totalduration,a=r-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(s,i),a)}get drift(){const e=this.levelDetails;return null===e?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(null===e)return 0;const t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(bp.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(bp.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.on(bp.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(bp.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(bp.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(bp.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.off(bp.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(bp.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var n;t.details===wp.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&null!=(n=this.levelDetails)&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var n,r;e.playbackRate!==t&&(null==(n=this.hls)||n.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${null==(r=this.targetLatency)?void 0:r.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return null===e?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return null===e?null:e-this.currentTime}}class mC extends Sb{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.on(bp.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(bp.LEVEL_LOADED,this.onLevelLoaded,this),e.on(bp.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(bp.FRAG_BUFFERED,this.onFragBuffered,this),e.on(bp.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.off(bp.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(bp.LEVEL_LOADED,this.onLevelLoaded,this),e.off(bp.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(bp.FRAG_BUFFERED,this.onFragBuffered,this),e.off(bp.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(e=>{e.loadError=0,e.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,r=[],i={},s={};let a=!1,o=!1,A=!1;t.levels.forEach(e=>{const t=e.attrs;let{audioCodec:l,videoCodec:c}=e;l&&(e.audioCodec=l=Wg(l,n)||void 0),c&&(c=e.videoCodec=function(e){const t=e.split(",");for(let n=0;n<t.length;n++){const e=t[n].split(".");e.length>2&&"avc1"===e[0]&&(t[n]=`avc1.${parseInt(e[1]).toString(16)}${("000"+parseInt(e[2]).toString(16)).slice(-4)}`)}return t.join(",")}(c));const{width:u,height:d,unknownCodecs:h}=e,f=(null==h?void 0:h.length)||0;if(a||(a=!(!u||!d)),o||(o=!!c),A||(A=!!l),f||l&&!this.isAudioSupported(l)||c&&!this.isVideoSupported(c))return void this.log(`Some or all CODECS not supported "${t.CODECS}"`);const{CODECS:p,"FRAME-RATE":g,"HDCP-LEVEL":m,"PATHWAY-ID":y,RESOLUTION:v,"VIDEO-RANGE":w}=t,b=`${`${y||"."}-`}${e.bitrate}-${v}-${g}-${p}-${w}-${m}`;if(i[b])if(i[b].uri===e.url||e.attrs["PATHWAY-ID"])i[b].addGroupId("audio",t.AUDIO),i[b].addGroupId("text",t.SUBTITLES);else{const t=s[b]+=1;e.attrs["PATHWAY-ID"]=new Array(t+1).join(".");const n=this.createLevel(e);i[b]=n,r.push(n)}else{const t=this.createLevel(e);i[b]=t,s[b]=1,r.push(t)}}),this.filterAndSortMediaOptions(r,t,a,o,A)}createLevel(e){const t=new hm(e),n=e.supplemental;if(null!=n&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){const e=new Error(`SUPPLEMENTAL-CODECS not supported "${n.videoCodec}"`);this.log(e.message),t.supportedResult=tm(e,[])}return t}isAudioSupported(e){return Mg(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return Mg(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,n,r,i){var s;let a=[],o=[],A=e;const l=(null==(s=t.stats)?void 0:s.parsing)||{};if((n||r)&&i&&(A=A.filter(({videoCodec:e,videoRange:t,width:n,height:r})=>{return(!!e||!(!n||!r))&&(!!(i=t)&&om.indexOf(i)>-1);var i})),0===A.length)return Promise.resolve().then(()=>{if(this.hls){let e="no level with compatible codecs found in manifest",n=e;t.levels.length&&(n=`one or more CODECS in variant not supported: ${gm(t.levels.map(e=>e.attrs.CODECS).filter((e,t,n)=>n.indexOf(e)===t))}`,this.warn(n),e+=` (${n})`);const r=new Error(e);this.hls.trigger(bp.ERROR,{type:vp.MEDIA_ERROR,details:wp.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:r,reason:n})}}),void(l.end=performance.now());t.audioTracks&&(a=t.audioTracks.filter(e=>!e.audioCodec||this.isAudioSupported(e.audioCodec)),yC(a)),t.subtitles&&(o=t.subtitles,yC(o));const c=A.slice(0);A.sort((e,t)=>{if(e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"])return(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&e.height!==t.height)return e.height-t.height;if(e.frameRate!==t.frameRate)return e.frameRate-t.frameRate;if(e.videoRange!==t.videoRange)return om.indexOf(e.videoRange)-om.indexOf(t.videoRange);if(e.videoCodec!==t.videoCodec){const n=$g(e.videoCodec),r=$g(t.videoCodec);if(n!==r)return r-n}if(e.uri===t.uri&&e.codecSet!==t.codecSet){const n=Kg(e.codecSet),r=Kg(t.codecSet);if(n!==r)return r-n}return e.averageBitrate!==t.averageBitrate?e.averageBitrate-t.averageBitrate:0});let u=c[0];if(this.steering&&(A=this.steering.filterParsedLevels(A),A.length!==c.length))for(let m=0;m<c.length;m++)if(c[m].pathwayId===A[0].pathwayId){u=c[m];break}this._levels=A;for(let m=0;m<A.length;m++)if(A[m]===u){var d;this._firstLevel=m;const e=u.bitrate,t=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${A.length} level(s) found, first bitrate: ${e}`),void 0===(null==(d=this.hls.userConfig)?void 0:d.abrEwmaDefaultEstimate)){const n=Math.min(e,this.hls.config.abrEwmaDefaultEstimateMax);n>t&&t===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=n)}break}const h=i&&!r,f=this.hls.config,p=!(!f.audioStreamController||!f.audioTrackController),g={levels:A,audioTracks:a,subtitleTracks:o,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:i,video:r,altAudio:p&&!h&&a.some(e=>!!e.url)};l.end=performance.now(),this.hls.trigger(bp.MANIFEST_PARSED,g)}get levels(){return 0===this._levels.length?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(0===t.length)return;if(e<0||e>=t.length){const n=new Error("invalid level idx"),r=e<0;if(this.hls.trigger(bp.ERROR,{type:vp.OTHER_ERROR,details:wp.LEVEL_SWITCH_ERROR,level:e,fatal:r,error:n,reason:n.message}),r)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,r=this.currentLevel,i=r?r.attrs["PATHWAY-ID"]:void 0,s=t[e],a=s.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=s,n===e&&r&&i===a)return;this.log(`Switching to level ${e} (${s.height?s.height+"p ":""}${s.videoRange?s.videoRange+" ":""}${s.codecSet?s.codecSet+" ":""}@${s.bitrate})${a?" with Pathway "+a:""} from level ${n}${i?" with Pathway "+i:""}`);const o={level:e,attrs:s.attrs,details:s.details,bitrate:s.bitrate,averageBitrate:s.averageBitrate,maxBitrate:s.maxBitrate,realBitrate:s.realBitrate,width:s.width,height:s.height,codecSet:s.codecSet,audioCodec:s.audioCodec,videoCodec:s.videoCodec,audioGroups:s.audioGroups,subtitleGroups:s.subtitleGroups,loaded:s.loaded,loadError:s.loadError,fragmentError:s.fragmentError,name:s.name,id:s.id,uri:s.uri,url:s.url,urlId:0,audioGroupIds:s.audioGroupIds,textGroupIds:s.textGroupIds};this.hls.trigger(bp.LEVEL_SWITCHING,o);const A=s.details;if(!A||A.live){const e=this.switchParams(s.uri,null==r?void 0:r.details,A);this.loadPlaylist(e)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(void 0===this._startLevel){const e=this.hls.config.startLevel;return void 0!==e?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),n=e.filter(e=>-1!==t.indexOf(e));if(e.length<1)return void this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);this.steering.pathwayPriority=n}}onError(e,t){!t.fatal&&t.context&&t.context.type===Bp&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(void 0!==t&&t.type===Tp){const e=t.elementaryStreams;if(!Object.keys(e).some(t=>!!e[t]))return;const n=this._levels[t.level];null!=n&&n.loadError&&(this.log(`Resetting level error count of ${n.loadError} on frag buffered`),n.loadError=0)}}onLevelLoaded(e,t){var n;const{level:r,details:i}=t,s=t.levelInfo;var a;if(!s)return this.warn(`Invalid level index ${r}`),void(null!=(a=t.deliveryDirectives)&&a.skip&&(i.deltaUpdateFailed=!0));if(s===this.currentLevel||t.withoutMultiVariant){0===s.fragmentError&&(s.loadError=0);let e=s.details;e===t.details&&e.advanced&&(e=void 0),this.playlistLoaded(r,t,e)}else null!=(n=t.deliveryDirectives)&&n.skip&&(i.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=this.getUrlWithDirectives(e.uri,t),r=this.currentLevelIndex,i=e.attrs["PATHWAY-ID"],s=e.details,a=null==s?void 0:s.age;this.log(`Loading level index ${r}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${i?" Pathway "+i:""}${a&&s.live?" age "+a.toFixed(1)+(s.type&&" "+s.type||""):""} ${n}`),this.hls.trigger(bp.LEVEL_LOADING,{url:n,level:r,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(1===this._levels.length)return;const n=this._levels.filter((t,n)=>n!==e||(this.steering&&this.steering.removeLevel(t),t===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,t.details&&t.details.fragments.forEach(e=>e.level=-1)),!1));Cv(n),this._levels=n,this.currentLevelIndex>-1&&null!=(t=this.currentLevel)&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const r=n.length-1;this._firstLevel=Math.min(this._firstLevel,r),this._startLevel&&(this._startLevel=Math.min(this._startLevel,r)),this.hls.trigger(bp.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(bp.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function yC(e){const t={};e.forEach(e=>{const n=e.groupId||"";e.id=t[n]=t[n]||0,t[n]++})}function vC(){return self.SourceBuffer||self.WebKitSourceBuffer}function wC(){if(!jp())return!1;const e=vC();return!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove}class bC extends Wv{constructor(e,t,n){super(e,t,n,"stream-controller",Tp),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const e=this.media,t=e?e.currentTime:null;if(null===t||!gp(t))return;if(this.log(`Media seeked to ${t.toFixed(3)}`),!this.getBufferedFrag(t))return;const n=this.getFwdBufferInfoAtPos(e,t,Tp,0);null!==n&&0!==n.len?this.tick():this.warn(`Main forward buffer length at ${t} on "seeked" event ${n?n.len:"empty"})`)},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(bp.MANIFEST_PARSED,this.onManifestParsed,this),e.on(bp.LEVEL_LOADING,this.onLevelLoading,this),e.on(bp.LEVEL_LOADED,this.onLevelLoaded,this),e.on(bp.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(bp.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(bp.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(bp.BUFFER_CREATED,this.onBufferCreated,this),e.on(bp.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(bp.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(bp.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(bp.MANIFEST_PARSED,this.onManifestParsed,this),e.off(bp.LEVEL_LOADED,this.onLevelLoaded,this),e.off(bp.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(bp.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(bp.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(bp.BUFFER_CREATED,this.onBufferCreated,this),e.off(bp.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(bp.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(bp.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:n,hls:r}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let e=r.startLevel;-1===e&&(r.config.testBandwidth&&this.levels.length>1?(e=0,this.bitrateTest=!0):e=r.firstAutoLevel),r.nextLoadLevel=e,this.level=r.loadLevel,this._hasEnoughToStart=!!t}n>0&&-1===e&&!t&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=Rv,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=Pv}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Gv:{const{levels:e,level:t}=this,n=null==e?void 0:e[t],r=null==n?void 0:n.details;if(r&&(!r.live||this.levelLastLoaded===n&&!this.waitForLive(n))){if(this.waitForCdnTuneIn(r))break;this.state=Rv;break}if(this.hls.nextLoadLevel!==this.level){this.state=Rv;break}break}case Nv:this.checkRetryDate()}this.state===Rv&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),null!=(e=this.media)&&e.readyState&&!1===this.media.seeking&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:r}=this;if(null===t||!r&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch))return;if(this.altAudio&&this.audioOnly)return;const i=this.buffering?e.nextLoadLevel:e.loadLevel;if(null==n||!n[i])return;const s=n[i],a=this.getMainFwdBufferInfo();if(null===a)return;const o=this.getLevelDetails();if(o&&this._streamEnded(a,o)){const e={};return 2===this.altAudio&&(e.type="video"),this.hls.trigger(bp.BUFFER_EOS,e),void(this.state=$v)}if(!this.buffering)return;e.loadLevel!==i&&-1===e.manualLevel&&this.log(`Adapting to level ${i} from level ${this.level}`),this.level=e.nextLoadLevel=i;const A=s.details;if(!A||this.state===Gv||this.waitForLive(s))return this.level=i,this.state=Gv,void(this.startFragRequested=!1);const l=a.len,c=this.getMaxBufferLength(s.maxBitrate);if(l>=c)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);const u=this.backtrackFragment?this.backtrackFragment.start:a.end;let d=this.getNextFragment(u,A);if(this.couldBacktrack&&!this.fragPrevious&&d&&og(d)&&this.fragmentTracker.getState(d)!==qm){var h;const e=(null!=(h=this.backtrackFragment)?h:d).sn-A.startSN,t=A.fragments[e-1];t&&d.cc===t.cc&&(d=t,this.fragmentTracker.removeFragment(t))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(d&&this.isLoopLoading(d,u)){if(!d.gap){const e=this.audioOnly&&!this.altAudio?rg:ig,t=(e===ig?this.videoBuffer:this.mediaBuffer)||this.media;t&&this.afterBufferFlushed(t,e,Tp)}d=this.getNextFragmentLoopLoading(d,A,a,Tp,c)}d&&(!d.initSegment||d.initSegment.data||this.bitrateTest||(d=d.initSegment),this.loadFragment(d,s,u))}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);r===Wm||r===Ym?og(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,n):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Tp)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(null!=t&&t.readyState){let n;const r=this.getAppendedFrag(t.currentTime);r&&r.start>1&&this.flushMainBuffer(0,r.start-1);const i=this.getLevelDetails();if(null!=i&&i.live){const e=this.getMainFwdBufferInfo();if(!e||e.len<2*i.targetduration)return}if(!t.paused&&e){const t=e[this.hls.nextLoadLevel],r=this.fragLastKbps;n=r&&this.fragCurrent?this.fragCurrent.duration*t.maxBitrate/(1e3*r)+1:0}else n=0;const s=this.getBufferedFrag(t.currentTime+n);if(s){const e=this.followingBufferedFrag(s);if(e){this.abortCurrentFrag();const t=e.maxStartPTS?e.maxStartPTS:e.start,n=e.duration,r=Math.max(s.end,t+Math.min(Math.max(n-this.config.maxFragLookUpTolerance,n*(this.couldBacktrack?.5:.125)),n*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(r,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Ov:case Qv:case Nv:case Hv:case jv:this.state=Rv}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,2===this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;Dv(n,"playing",this.onMediaPlaying),Dv(n,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:n}=this;n&&(_v(n,"playing",this.onMediaPlaying),_v(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t);!!t.transferMedia||(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(bp.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let n=!1,r=!1;for(let i=0;i<t.levels.length;i++){const e=t.levels[i].audioCodec;e&&(n=n||-1!==e.indexOf("mp4a.40.2"),r=r||-1!==e.indexOf("mp4a.40.5"))}this.audioCodecSwitch=n&&r&&!function(){var e;const t=vC();return"function"==typeof(null==t||null==(e=t.prototype)?void 0:e.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==Rv)return;const r=t.levelInfo;(!r.details||r.details.live&&(this.levelLastLoaded!==r||r.details.expired)||this.waitForCdnTuneIn(r.details))&&(this.state=Gv)}onLevelLoaded(e,t){var n;const{levels:r,startFragRequested:i}=this,s=t.level,a=t.details,o=a.totalduration;if(!r)return void this.warn(`Levels were reset while loading level ${s}`);this.log(`Level ${s} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""}, cc [${a.startCC}, ${a.endCC}] duration:${o}`);const A=t.levelInfo,l=this.fragCurrent;!l||this.state!==Qv&&this.state!==Nv||l.level!==t.level&&l.loader&&this.abortCurrentFrag();let c=0;if(a.live||null!=(n=A.details)&&n.live){var u;if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;c=this.alignPlaylists(a,A.details,null==(u=this.levelLastLoaded)?void 0:u.details)}if(A.details=a,this.levelLastLoaded=A,i||this.setStartPosition(a,c),this.hls.trigger(bp.LEVEL_UPDATED,{details:a,level:s}),this.state===Gv){if(this.waitForCdnTuneIn(a))return;this.state=Rv}i&&a.live&&this.synchronizeToLiveEdge(a),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const r=this.hls.liveSyncPosition,i=this.getLoadPosition(),s=e.fragmentStart,a=e.edge,o=i>=s-t.maxFragLookUpTolerance&&i<=a;if(null!==r&&n.duration>r&&(i<r||!o)){const s=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!o&&n.readyState<4||i<a-s)&&(this._hasEnoughToStart||(this.nextLoadPosition=r),n.readyState))if(this.warn(`Playback: ${i.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${r.toFixed(3)}`),"buffered"===this.config.liveSyncMode){var A;const e=py.bufferInfo(n,r,0);if(null==(A=e.buffered)||!A.length)return void(n.currentTime=r);if(e.start<=i)return void(n.currentTime=r);const{nextStart:t}=py.bufferedInfo(e.buffered,i,0);t&&(n.currentTime=t)}else n.currentTime=r}}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:r,payload:i}=e,{levels:s}=this;if(!s)return void this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);const a=s[n.level];if(!a)return void this.warn(`Level ${n.level} not found on progress`);const o=a.details;if(!o)return this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),void this.fragmentTracker.removeFragment(n);const A=a.videoCodec,l=o.PTSKnown||!o.live,c=null==(t=n.initSegment)?void 0:t.data,u=this._getAudioCodec(a),d=this.transmuxer=this.transmuxer||new Cb(this.hls,Tp,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),h=r?r.index:-1,f=-1!==h,p=new hy(n.level,n.sn,n.stats.chunkCount,i.byteLength,h,f),g=this.initPTS[n.cc];d.push(i,c,u,A,n,r,o.totalduration,l,p,g)}onAudioTrackSwitching(e,t){const n=this.hls,r=2===this.altAudio;if(Cm(t.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const e=this.fragCurrent;e&&(this.log("Switching to main audio track, cancel main fragment load"),e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(r)return this.fragmentTracker.removeAllFragments(),n.once(bp.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(bp.AUDIO_TRACK_SWITCHED,t)}),void n.trigger(bp.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});n.trigger(bp.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=Cm(t.url,this.hls);if(n){const e=this.videoBuffer;e&&this.mediaBuffer!==e&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=e)}this.altAudio=n?2:0,this.tick()}onBufferCreated(e,t){const n=t.tracks;let r,i,s=!1;for(const a in n){const e=n[a];if("main"===e.id){if(i=a,r=e,"video"===a){const e=n[a];e&&(this.videoBuffer=e.buffer)}}else s=!0}s&&r?(this.log(`Alternate track found, use ${i}.buffered to schedule main fragment loading`),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:r}=t,i=n.type===Tp;if(i){if(this.fragContextChanged(n))return this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),void(this.state===jv&&(this.state=Rv));const e=r?r.stats:n.stats;this.fragLastKbps=Math.round(8*e.total/(e.buffering.end-e.loading.first)),og(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,r)}const s=this.media;s&&(!this._hasEnoughToStart&&py.getBuffered(s).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),i&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var n;if(t.fatal)this.state=Kv;else switch(t.details){case wp.FRAG_GAP:case wp.FRAG_PARSING_ERROR:case wp.FRAG_DECRYPT_ERROR:case wp.FRAG_LOAD_ERROR:case wp.FRAG_LOAD_TIMEOUT:case wp.KEY_LOAD_ERROR:case wp.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Tp,t);break;case wp.LEVEL_LOAD_ERROR:case wp.LEVEL_LOAD_TIMEOUT:case wp.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==Gv||(null==(n=t.context)?void 0:n.type)!==Bp||(this.state=Rv);break;case wp.BUFFER_ADD_CODEC_ERROR:case wp.BUFFER_APPEND_ERROR:if("main"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case wp.BUFFER_FULL_ERROR:if("main"!==t.parent)return;if(this.reduceLengthAndFlushBuffer(t)){!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}break;case wp.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onFragLoadEmergencyAborted(){this.state=Rv,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==rg||!this.altAudio){const e=(t===ig?this.videoBuffer:this.mediaBuffer)||this.media;e&&(this.afterBufferFlushed(e,t,Tp),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,-1===this.level&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking)return void this.log(`could not seek to ${n}, already seeking at ${t}`);const r=this.timelineOffset;r&&n&&(n+=r);const i=this.getLevelDetails(),s=py.getBuffered(e),a=s.length?s.start(0):0,o=a-n,A=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||o>0&&(o<A||this.loadingParts&&o<2*((null==i?void 0:i.partTarget)||0)))&&(this.log(`adjusting start position by ${o} to match buffer start`),n+=o,this.startPosition=n),t<n&&(this.log(`seek to target start position ${n} from current time ${t} buffer start ${a}`),e.currentTime=n)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(e=>{const{hls:n}=this,r=null==e?void 0:e.frag;if(!r||this.fragContextChanged(r))return;t.fragmentError=0,this.state=Rv,this.startFragRequested=!1,this.bitrateTest=!1;const i=r.stats;i.parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),n.trigger(bp.FRAG_LOADED,e),r.bitrateTest=!1}).catch(t=>{this.state!==Pv&&this.state!==Kv&&(this.warn(t),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const t=this.playlistType,{hls:n}=this,{remuxResult:r,chunkMeta:i}=e,s=this.getCurrentContext(i);if(!s)return void this.resetWhenMissingContext(i);const{frag:a,part:o,level:A}=s,{video:l,text:c,id3:u,initSegment:d}=r,{details:h}=A,f=this.altAudio?void 0:r.audio;if(this.fragContextChanged(a))this.fragmentTracker.removeFragment(a);else{if(this.state=Hv,d){const e=d.tracks;if(e){const r=a.initSegment||a;if(this.unhandledEncryptionError(d,a))return;this._bufferInitSegment(A,e,r,i),n.trigger(bp.FRAG_PARSING_INIT_SEGMENT,{frag:r,id:t,tracks:e})}const r=d.initPTS,s=d.timescale,o=this.initPTS[a.cc];if(gp(r)&&(!o||o.baseTime!==r||o.timescale!==s)){const e=d.trackId;this.initPTS[a.cc]={baseTime:r,timescale:s,trackId:e},n.trigger(bp.INIT_PTS_FOUND,{frag:a,id:t,initPTS:r,timescale:s,trackId:e})}}if(l&&h){f&&"audiovideo"===l.type&&this.logMuxedErr(a);const e=h.fragments[a.sn-1-h.startSN],t=a.sn===h.startSN,n=!e||a.cc>e.cc;if(!1!==r.independent){const{startPTS:e,endPTS:r,startDTS:s,endDTS:A}=l;if(o)o.elementaryStreams[l.type]={startPTS:e,endPTS:r,startDTS:s,endDTS:A};else if(l.firstKeyFrame&&l.independent&&1===i.id&&!n&&(this.couldBacktrack=!0),l.dropped&&l.independent){const i=this.getMainFwdBufferInfo(),s=(i?i.end:this.getLoadPosition())+this.config.maxBufferHole,o=l.firstKeyFramePTS?l.firstKeyFramePTS:e;if(!t&&s<o-this.config.maxBufferHole&&!n)return void this.backtrack(a);n&&(a.gap=!0),a.setElementaryStreamInfo(l.type,a.start,r,a.start,A,!0)}else t&&e-(h.appliedTimelineOffset||0)>2&&(a.gap=!0);a.setElementaryStreamInfo(l.type,e,r,s,A),this.backtrackFragment&&(this.backtrackFragment=a),this.bufferFragmentData(l,a,o,i,t||n)}else{if(!t&&!n)return void this.backtrack(a);a.gap=!0}}if(f){const{startPTS:e,endPTS:t,startDTS:n,endDTS:r}=f;o&&(o.elementaryStreams[rg]={startPTS:e,endPTS:t,startDTS:n,endDTS:r}),a.setElementaryStreamInfo(rg,e,t,n,r),this.bufferFragmentData(f,a,o,i)}if(h&&null!=u&&u.samples.length){const e={id:t,frag:a,details:h,samples:u.samples};n.trigger(bp.FRAG_PARSING_METADATA,e)}if(h&&c){const e={id:t,frag:a,details:h,samples:c.samples};n.trigger(bp.FRAG_PARSING_USERDATA,e)}}}logMuxedErr(e){this.warn(`${og(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,n,r){if(this.state!==Hv)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(n));const{audio:i,video:s,audiovideo:a}=t;if(i){const n=e.audioCodec;let r=zg(i.codec,n);"mp4a"===r&&(r="mp4a.40.5");const s=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){r&&(r=-1!==r.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5");const e=i.metadata;e&&"channelCount"in e&&1!==(e.channelCount||1)&&-1===s.indexOf("firefox")&&(r="mp4a.40.5")}r&&-1!==r.indexOf("mp4a.40.5")&&-1!==s.indexOf("android")&&"audio/mpeg"!==i.container&&(r="mp4a.40.2",this.log(`Android: force audio codec to ${r}`)),n&&n!==r&&this.log(`Swapping manifest audio codec "${n}" for "${r}"`),i.levelCodec=r,i.id=Tp,this.log(`Init audio buffer, container:${i.container}, codecs[selected/level/parsed]=[${r||""}/${n||""}/${i.codec}]`),delete t.audiovideo}if(s){s.levelCodec=e.videoCodec,s.id=Tp;const n=s.codec;if(4===(null==n?void 0:n.length))switch(n){case"hvc1":case"hev1":s.codec="hvc1.1.6.L120.90";break;case"av01":s.codec="av01.0.04M.08";break;case"avc1":s.codec="avc1.42e01e"}this.log(`Init video buffer, container:${s.container}, codecs[level/parsed]=[${e.videoCodec||""}/${n}]${s.codec!==n?" parsed-corrected="+s.codec:""}${s.supplemental?" supplemental="+s.supplemental:""}`),delete t.audiovideo}a&&(this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${e.codecs}/${a.codec}]`),delete t.video,delete t.audio);const o=Object.keys(t);if(o.length){if(this.hls.trigger(bp.BUFFER_CODECS,t),!this.hls)return;o.forEach(e=>{const i=t[e].initSegment;null!=i&&i.byteLength&&this.hls.trigger(bp.BUFFER_APPENDING,{type:e,data:i,frag:n,part:null,chunkMeta:r,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&2===this.altAudio?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,Tp)}get maxBufferLength(){const{levels:e,level:t}=this,n=null==e?void 0:e[t];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Rv}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&!1===e.seeking){const n=e.currentTime;if(py.isBuffered(e,n)?t=this.getAppendedFrag(n):py.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const e=this.fragPlaying,n=t.level;e&&t.sn===e.sn&&e.level===n||(this.fragPlaying=t,this.hls.trigger(bp.FRAG_CHANGED,{frag:t}),e&&e.level===n||this.hls.trigger(bp.LEVEL_SWITCHED,{level:n}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=(null==(e=this.media)?void 0:e.currentTime)||this.lastCurrentTime;return gp(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=(null==(e=this.media)?void 0:e.currentTime)||this.lastCurrentTime;if(gp(t)){const e=this.getLevelDetails(),n=this.currentFrag||(e?Tm(null,e.fragments,t):null);if(n){const e=n.programDateTime;if(null!==e){const r=e+1e3*(t-n.start);return new Date(r)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class EC extends Pp{constructor(e,t){super("key-loader",t),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyIdToKeyInfo){const r=this.keyIdToKeyInfo[n].loader;if(r){var t;if(e&&e!==(null==(t=r.context)?void 0:t.frag.type))return;r.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e].loader;t&&t.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,t=wp.KEY_LOAD_ERROR,n,r,i){return new uy({type:vp.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:i,error:n,networkDetails:r})}loadClear(e,t,n){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let r=0,i=t.length;r<i;r++){const s=t[r];if(e.cc<=s.cc&&(!og(e)||!og(s)||e.sn<s.sn)||!n&&r==i-1)return this.emeController.selectKeySystemFormat(s).then(e=>{if(!this.emeController)return;s.setKeyFormat(e);const t=jy(e);return t?this.emeController.getKeySystemAccess([t]):void 0})}if(this.config.requireKeySystemAccessOnStart){const e=Ky(this.config);if(e.length)return this.emeController.getKeySystemAccess(e)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var n,r;t&&e.setKeyFormat(t);const i=e.decryptdata;if(!i){const n=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,wp.KEY_LOAD_ERROR,n))}const s=i.uri;if(!s)return Promise.reject(this.createKeyLoadError(e,wp.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${s}"`)));const a=BC(i);let o=this.keyIdToKeyInfo[a];if(null!=(n=o)&&n.decryptdata.key)return i.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});if(this.emeController&&null!=(r=o)&&r.keyLoadPromise){switch(this.emeController.getKeyStatus(o.decryptdata)){case"usable":case"usable-in-future":return o.keyLoadPromise.then(t=>{const{keyInfo:n}=t;return i.key=n.decryptdata.key,{frag:e,keyInfo:n}})}}switch(this.log(`${this.keyIdToKeyInfo[a]?"Rel":"L"}oading${i.keyId?" keyId: "+Vp(i.keyId):""} URI: ${i.uri} from ${e.type} ${e.level}`),o=this.keyIdToKeyInfo[a]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===i.keyFormat?this.loadKeyHTTP(o,e):this.loadKeyEME(o,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,wp.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${i.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var r;if(!e.decryptdata.keyId&&null!=(r=t.initSegment)&&r.data){const n=function(e){const t=[];return xg(e,e=>t.push(e.subarray(8,24))),t}(t.initSegment.data);if(n.length){const t=n[0];t.some(e=>0!==e)&&(this.log(`Using keyId found in init segment ${Vp(t)}`),e.decryptdata.keyId=t,Yy.setKeyIdForUri(e.decryptdata.uri,t))}}const i=this.emeController.loadKey(n);return(e.keyLoadPromise=i.then(t=>(e.mediaKeySessionContext=t,n))).catch(n=>{throw e.keyLoadPromise=null,"data"in n&&(n.data.frag=t),n})}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,r=new(0,n.loader)(n);return t.keyLoader=e.loader=r,e.keyLoadPromise=new Promise((i,s)=>{const a={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},o=n.keyLoadPolicy.default,A={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},l={onSuccess:(e,t,n,r)=>{const{frag:a,keyInfo:o}=n,A=BC(o.decryptdata);if(!a.decryptdata||o!==this.keyIdToKeyInfo[A])return s(this.createKeyLoadError(a,wp.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),r));o.decryptdata.key=a.decryptdata.key=new Uint8Array(e.data),a.keyLoader=null,o.loader=null,i({frag:a,keyInfo:o})},onError:(e,n,r,i)=>{this.resetLoader(n),s(this.createKeyLoadError(t,wp.KEY_LOAD_ERROR,new Error(`HTTP Error ${e.code} loading key ${e.text}`),r,Up({url:a.url,data:void 0},e)))},onTimeout:(e,n,r)=>{this.resetLoader(n),s(this.createKeyLoadError(t,wp.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),r))},onAbort:(e,n,r)=>{this.resetLoader(n),s(this.createKeyLoadError(t,wp.INTERNAL_ABORTED,new Error("key loading aborted"),r))}};r.load(a,A,l)})}resetLoader(e){const{frag:t,keyInfo:n,url:r}=e,i=n.loader;t.keyLoader===i&&(t.keyLoader=null,n.loader=null);const s=BC(n.decryptdata)||r;delete this.keyIdToKeyInfo[s],i&&i.destroy()}}function BC(e){if(e.keyFormat!==Ny){const t=e.keyId;if(t)return Vp(t)}return e.uri}function CC(e){const{type:t}=e;switch(t){case Cp:return xp;case Sp:return kp;default:return Tp}}function SC(e,t){let n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n}class TC{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.on(bp.LEVEL_LOADING,this.onLevelLoading,this),e.on(bp.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(bp.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(bp.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(bp.MANIFEST_LOADING,this.onManifestLoading,this),e.off(bp.LEVEL_LOADING,this.onLevelLoading,this),e.off(bp.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(bp.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(bp.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,r=t.loader,i=new(n||r)(t);return this.loaders[e.type]=i,i}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Ep,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:n,level:r,pathwayId:i,url:s,deliveryDirectives:a,levelInfo:o}=t;this.load({id:n,level:r,pathwayId:i,responseType:"text",type:Bp,url:s,deliveryDirectives:a,levelOrTrack:o})}onAudioTrackLoading(e,t){const{id:n,groupId:r,url:i,deliveryDirectives:s,track:a}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:Cp,url:i,deliveryDirectives:s,levelOrTrack:a})}onSubtitleTrackLoading(e,t){const{id:n,groupId:r,url:i,deliveryDirectives:s,track:a}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:Sp,url:i,deliveryDirectives:s,levelOrTrack:a})}onLevelsUpdated(e,t){const n=this.loaders[Bp];if(n){const e=n.context;e&&!t.levels.some(t=>t===e.levelOrTrack)&&(n.abort(),delete this.loaders[Bp])}}load(e){var t;const n=this.hls.config;let r,i=this.getInternalLoader(e);if(i){const t=this.hls.logger,n=i.context;if(n&&n.levelOrTrack===e.levelOrTrack&&(n.url===e.url||n.deliveryDirectives&&!e.deliveryDirectives))return void(n.url===e.url?t.log(`[playlist-loader]: ignore ${e.url} ongoing request`):t.log(`[playlist-loader]: ignore ${e.url} in favor of ${n.url}`));t.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}if(r=e.type===Ep?n.manifestLoadPolicy.default:Dp({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),gp(null==(t=e.deliveryDirectives)?void 0:t.part)){let t;if(e.type===Bp&&null!==e.level?t=this.hls.levels[e.level].details:e.type===Cp&&null!==e.id?t=this.hls.audioTracks[e.id].details:e.type===Sp&&null!==e.id&&(t=this.hls.subtitleTracks[e.id].details),t){const e=t.partTarget,n=t.targetduration;if(e&&n){const t=1e3*Math.max(3*e,.8*n);r=Dp({},r,{maxTimeToFirstByteMs:Math.min(t,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(t,r.maxTimeToFirstByteMs)})}}}const s=r.errorRetry||r.timeoutRetry||{},a={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0},o={onSuccess:(e,t,n,r)=>{const i=this.getInternalLoader(n);this.resetInternalLoader(n.type);const s=e.data;t.parsing.start=performance.now(),nv.isMediaPlaylist(s)||n.type!==Ep?this.handleTrackOrLevelPlaylist(e,t,n,r||null,i):this.handleMasterPlaylist(e,t,n,r)},onError:(e,t,n,r)=>{this.handleNetworkError(t,n,!1,e,r)},onTimeout:(e,t,n)=>{this.handleNetworkError(t,n,!0,void 0,e)}};i.load(e,a,o)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:n}=this.hls;(e||n)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,n,r){const i=this.hls,s=e.data,a=SC(e,n),o=nv.parseMasterPlaylist(s,a);if(o.playlistParsingError)return t.parsing.end=performance.now(),void this.handleManifestParsingError(e,n,o.playlistParsingError,r,t);const{contentSteering:A,levels:l,sessionData:c,sessionKeys:u,startTimeOffset:d,variableList:h}=o;this.variableList=h,l.forEach(e=>{const{unknownCodecs:t}=e;if(t){const{preferManagedMediaSource:n}=this.hls.config;let{audioCodec:r,videoCodec:i}=e;for(let s=t.length;s--;){const a=t[s];Mg(a,"audio",n)?(e.audioCodec=r=r?`${r},${a}`:a,Qg.audio[r.substring(0,4)]=2,t.splice(s,1)):Mg(a,"video",n)&&(e.videoCodec=i=i?`${i},${a}`:a,Qg.video[i.substring(0,4)]=2,t.splice(s,1))}}});const{AUDIO:f=[],SUBTITLES:p,"CLOSED-CAPTIONS":g}=nv.parseMasterPlaylistMedia(s,a,o);if(f.length){f.some(e=>!e.url)||!l[0].audioCodec||l[0].attrs.AUDIO||(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),f.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new By({}),bitrate:0,url:""}))}i.trigger(bp.MANIFEST_LOADED,{levels:l,audioTracks:f,subtitles:p,captions:g,contentSteering:A,url:a,stats:t,networkDetails:r,sessionData:c,sessionKeys:u,startTimeOffset:d,variableList:h})}handleTrackOrLevelPlaylist(e,t,n,r,i){const s=this.hls,{id:a,level:o,type:A}=n,l=SC(e,n),c=gp(o)?o:gp(a)?a:0,u=CC(n),d=nv.parseLevelPlaylist(e.data,l,c,u,0,this.variableList);if(A===Ep){const e={attrs:new By({}),bitrate:0,details:d,name:"",url:l};d.requestScheduled=t.loading.start+wv(d,0),s.trigger(bp.MANIFEST_LOADED,{levels:[e],audioTracks:[],url:l,stats:t,networkDetails:r,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=d,this.handlePlaylistLoaded(d,e,t,n,r,i)}handleManifestParsingError(e,t,n,r,i){this.hls.trigger(bp.ERROR,{type:vp.NETWORK_ERROR,details:wp.MANIFEST_PARSING_ERROR,fatal:t.type===Ep,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:r,stats:i})}handleNetworkError(e,t,n=!1,r,i){let s=`A network ${n?"timeout":"error"+(r?" (status "+r.code+")":"")} occurred while loading ${e.type}`;e.type===Bp?s+=`: ${e.level} id: ${e.id}`:e.type!==Cp&&e.type!==Sp||(s+=` id: ${e.id} group-id: "${e.groupId}"`);const a=new Error(s);this.hls.logger.warn(`[playlist-loader]: ${s}`);let o=wp.UNKNOWN,A=!1;const l=this.getInternalLoader(e);switch(e.type){case Ep:o=n?wp.MANIFEST_LOAD_TIMEOUT:wp.MANIFEST_LOAD_ERROR,A=!0;break;case Bp:o=n?wp.LEVEL_LOAD_TIMEOUT:wp.LEVEL_LOAD_ERROR,A=!1;break;case Cp:o=n?wp.AUDIO_TRACK_LOAD_TIMEOUT:wp.AUDIO_TRACK_LOAD_ERROR,A=!1;break;case Sp:o=n?wp.SUBTITLE_TRACK_LOAD_TIMEOUT:wp.SUBTITLE_LOAD_ERROR,A=!1}l&&this.resetInternalLoader(e.type);const c={type:vp.NETWORK_ERROR,details:o,fatal:A,url:e.url,loader:l,context:e,error:a,networkDetails:t,stats:i};if(r){const n=(null==t?void 0:t.url)||e.url;c.response=Up({url:n,data:void 0},r)}this.hls.trigger(bp.ERROR,c)}handlePlaylistLoaded(e,t,n,r,i,s){const a=this.hls,{type:o,level:A,levelOrTrack:l,id:c,groupId:u,deliveryDirectives:d}=r,h=SC(t,r),f=CC(r);let p="number"==typeof r.level&&f===Tp?A:void 0;const g=e.playlistParsingError;if(g){if(this.hls.logger.warn(`${g} ${e.url}`),!a.config.ignorePlaylistParsingErrors)return void a.trigger(bp.ERROR,{type:vp.NETWORK_ERROR,details:wp.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:g,reason:g.message,response:t,context:r,level:p,parent:f,networkDetails:i,stats:n});e.playlistParsingError=null}if(!e.fragments.length){const s=e.playlistParsingError=new Error("No Segments found in Playlist");return void a.trigger(bp.ERROR,{type:vp.NETWORK_ERROR,details:wp.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:s,reason:s.message,response:t,context:r,level:p,parent:f,networkDetails:i,stats:n})}switch(e.live&&s&&(s.getCacheAge&&(e.ageHeader=s.getCacheAge()||0),s.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),o){case Ep:case Bp:if(p)if(l){if(l!==a.levels[p]){const e=a.levels.indexOf(l);e>-1&&(p=e)}}else p=0;a.trigger(bp.LEVEL_LOADED,{details:e,levelInfo:l||a.levels[0],level:p||0,id:c||0,stats:n,networkDetails:i,deliveryDirectives:d,withoutMultiVariant:o===Ep});break;case Cp:a.trigger(bp.AUDIO_TRACK_LOADED,{details:e,track:l,id:c||0,groupId:u||"",stats:n,networkDetails:i,deliveryDirectives:d});break;case Sp:a.trigger(bp.SUBTITLE_TRACK_LOADED,{details:e,track:l,id:c||0,groupId:u||"",stats:n,networkDetails:i,deliveryDirectives:d})}}}class xC{static get version(){return ew}static isMSESupported(){return wC()}static isSupported(){return function(){if(!wC())return!1;const e=jp();return"function"==typeof(null==e?void 0:e.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(t=>e.isTypeSupported(jg(t,"video")))||["mp4a.40.2","fLaC"].some(t=>e.isTypeSupported(jg(t,"audio"))))}()}static getMediaSource(){return jp()}static get Events(){return bp}static get MetadataSchema(){return Bw}static get ErrorTypes(){return vp}static get ErrorDetails(){return wp}static get DefaultConfig(){return xC.defaultConfig?xC.defaultConfig:sC}static set DefaultConfig(e){xC.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Zv,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=function(e,t,n){const r=Qp();if("object"==typeof console&&!0===e||"object"==typeof e){const i=["debug","log","info","warn","error"];i.forEach(t=>{r[t]=Np(t,e,n)});try{r.log(`Debug logs enabled for "${t}" in hls.js version 1.6.14`)}catch(c$){return Qp()}i.forEach(t=>{Mp[t]=Np(t,e)})}else Dp(Mp,r);return r}(e.debug||!1,"Hls instance",e.assetPlayerId),n=this.config=function(e,t,n){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const r=aC(e),i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach(e=>{const s=`${"level"===e?"playlist":e}LoadPolicy`,a=void 0===t[s],o=[];i.forEach(n=>{const i=`${e}Loading${n}`,A=t[i];if(void 0!==A&&a){o.push(i);const e=r[s].default;switch(t[s]={default:e},n){case"TimeOut":e.maxLoadTimeMs=A,e.maxTimeToFirstByteMs=A;break;case"MaxRetry":e.errorRetry.maxNumRetry=A,e.timeoutRetry.maxNumRetry=A;break;case"RetryDelay":e.errorRetry.retryDelayMs=A,e.timeoutRetry.retryDelayMs=A;break;case"MaxRetryTimeout":e.errorRetry.maxRetryDelayMs=A,e.timeoutRetry.maxRetryDelayMs=A}}}),o.length&&n.warn(`hls.js config: "${o.join('", "')}" setting(s) are deprecated, use "${s}": ${gm(t[s])}`)}),Up(Up({},r),t)}(xC.DefaultConfig,e,t);this.userConfig=e,n.progressive&&oC(n,t);const{abrController:r,bufferController:i,capLevelController:s,errorController:a,fpsController:o}=n,A=new a(this),l=this.abrController=new r(this),c=new Xm(this),u=n.interstitialsController,d=u?this.interstitialsController=new u(this,xC):null,h=this.bufferController=new i(this,c),f=this.capLevelController=new s(this),p=new o(this),g=new TC(this),m=n.contentSteeringController,y=m?new m(this):null,v=this.levelController=new mC(this,y),w=new pC(this),b=new EC(this.config,this.logger),E=this.streamController=new bC(this,c,b),B=this.gapController=new AC(this,c);f.setStreamController(E),p.setStreamController(E);const C=[g,v,E];d&&C.splice(1,0,d),y&&C.splice(1,0,y),this.networkControllers=C;const S=[l,h,B,f,p,w,c];this.audioTrackController=this.createController(n.audioTrackController,C);const T=n.audioStreamController;T&&C.push(this.audioStreamController=new T(this,c,b)),this.subtitleTrackController=this.createController(n.subtitleTrackController,C);const x=n.subtitleStreamController;x&&C.push(this.subtititleStreamController=new x(this,c,b)),this.createController(n.timelineController,S),b.emeController=this.emeController=this.createController(n.emeController,S),this.cmcdController=this.createController(n.cmcdController,S),this.latencyController=this.createController(gC,S),this.coreComponents=S,C.push(A);const k=A.onErrorOut;"function"==typeof k&&this.on(bp.ERROR,k,A),this.on(bp.MANIFEST_LOADED,g.onManifestLoaded,g)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t,n=this){this._emitter.on(e,t,n)}once(e,t,n=this){this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,n=this,r){this._emitter.off(e,t,n,r)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(n){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const t=e===bp.ERROR;this.trigger(bp.ERROR,{type:vp.OTHER_ERROR,details:wp.INTERNAL_EXCEPTION,fatal:t,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(bp.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(e=>e.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(e=>e.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const t=new Error(`attachMedia failed: invalid argument (${e})`);return void this.trigger(bp.ERROR,{type:vp.OTHER_ERROR,details:wp.ATTACH_MEDIA_ERROR,fatal:!0,error:t})}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,n=t?e.media:e,r=t?e:{media:n};this._media=n,this.trigger(bp.MEDIA_ATTACHING,r)}detachMedia(){this.logger.log("detachMedia"),this.trigger(bp.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(bp.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,n=this._url,r=this._url=tg.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${r}`),t&&n&&(n!==r||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(bp.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e,t),this.started&&this.networkControllers);n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!this.started&&this.networkControllers);e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[Tp]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[xp]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[kp]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=null==e?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=function(){try{return crypto.randomUUID()}catch(e){try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch(t){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})}}}()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return-1===e&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){(function(e){return am.indexOf(e)>-1})(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let r=0;r<n;r++)if(e[r].maxBitrate>=t)return r;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let r;if(r=-1===t&&null!=e&&e.length?e.length-1:t,n)for(let i=r;i--;){const t=e[i].attrs["HDCP-LEVEL"];if(t&&t<=n)return i}return r}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return(null==(t=this.audioTrackController)?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return(null==(t=this.subtitleTrackController)?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return!!e&&e.subtitleDisplay}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!(null==(e=this.bufferController)||!e.bufferedToEnd)}get interstitialsManager(){var e;return(null==(e=this.interstitialsController)?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){return rm(e,ym(t),navigator.mediaCapabilities)}}xC.defaultConfig=void 0;const kC=({video:e,volume:t,currentTime:n})=>{if(e.current)return A.jsxs("div",{className:"player-nerd-container",children:[A.jsxs("div",{className:"player-nerd-element",children:["Frames: ",A.jsx("span",{className:"player-nerd-element",children:e.current.getVideoPlaybackQuality().totalVideoFrames})]}),A.jsxs("div",{className:"player-nerd-element",children:["Dropped Frames: ",A.jsx("span",{className:"player-nerd-element",children:e.current.getVideoPlaybackQuality().droppedVideoFrames})]}),A.jsxs("div",{className:"player-nerd-element",children:["Volume: ",A.jsxs("span",{className:"player-nerd-element",children:[t,"%"]})]}),A.jsxs("div",{className:"player-nerd-element",children:["CurrentTime: ",A.jsx("span",{className:"player-nerd-element",children:n})]}),A.jsxs("div",{className:"player-nerd-element",children:["Duration: ",A.jsx("span",{className:"player-nerd-element",children:e.current.duration})]})]})},IC=({sources:e,resolution:t,speed:n,disableSettings:r,current:i,subtitles:s,audioTrack:a,state:o})=>{const[l,c]=h.useState("settings");function u(e){e(),r(),c("settings")}const d={initial:{opacity:0,x:100,display:"none",position:"absolute"},visible:{opacity:1,x:0,display:"",position:""}};return A.jsxs($l.div,{initial:{opacity:0,display:"none"},animate:o?{opacity:1,display:""}:{opacity:0,display:"none"},transition:{duration:.2},className:"player-settings-container",children:[A.jsxs($l.div,{variants:d,initial:"initial",animate:"settings"===l?"visible":"initial",transition:{duration:.1},className:"player-settings-content",children:[A.jsxs("div",{tabIndex:-1,className:"player-settings-button",onClick:()=>e.length>1?c("source"):"",children:[A.jsxs("div",{tabIndex:-1,className:"player-settings-button-icon-container",children:[A.jsx("span",{className:"material-symbols-outlined",children:"web"}),A.jsx("span",{className:"player-settings-button-text",children:du("player.settings.source")})]}),A.jsx("span",{className:`player-settings-button-text ${e.length<=1&&"player-settings-button-text-gray"}`,children:i.currentHost})]}),A.jsxs("div",{tabIndex:-1,className:"player-settings-button",onClick:()=>t.length>1?c("res"):"",children:[A.jsxs("div",{tabIndex:-1,className:"player-settings-button-icon-container",children:[A.jsx("span",{className:"material-symbols-outlined",children:"instant_mix"}),A.jsx("span",{className:"player-settings-button-text",children:du("player.settings.resolution")})]}),A.jsx("span",{className:`player-settings-button-text ${t.length<=1&&"player-settings-button-text-gray"}`,children:Id(i.currentResolution)?i.currentResolution+"p":i.currentResolution})]}),A.jsxs("div",{tabIndex:-1,className:"player-settings-button",onClick:()=>a.length>1?c("track"):"",children:[A.jsxs("div",{tabIndex:-1,className:"player-settings-button-icon-container",children:[A.jsx("span",{className:"material-symbols-outlined",children:"music_note"}),A.jsx("span",{className:"player-settings-button-text",children:du("player.settings.audio")})]}),A.jsx("span",{className:`player-settings-button-text ${a.length<=1&&"player-settings-button-text-gray"}`,children:i.currentTrack})]}),A.jsxs("div",{tabIndex:-1,className:"player-settings-button",onClick:()=>s.length>=1?c("sub"):"",children:[A.jsxs("div",{tabIndex:-1,className:"player-settings-button-icon-container",children:[A.jsx("span",{className:"material-symbols-outlined",children:"subtitles"}),A.jsx("span",{className:"player-settings-button-text",children:du("player.settings.subtitles")})]}),A.jsx("span",{className:`player-settings-button-text ${s.length<=0&&"player-settings-button-text-gray"}`,children:i.currentSub})]}),A.jsxs("div",{tabIndex:-1,className:"player-settings-button",onClick:()=>c("speed"),children:[A.jsxs("div",{tabIndex:-1,className:"player-settings-button-icon-container",children:[A.jsx("span",{className:"material-symbols-outlined",children:"speed"}),A.jsx("span",{className:"player-settings-button-text",children:du("player.settings.speed")})]}),A.jsx("span",{className:"player-settings-button-text",children:i.currentSpeed+"x"})]})]}),A.jsxs($l.div,{variants:d,initial:"initial",animate:"source"===l?"visible":"initial",transition:{duration:.1},children:[A.jsxs("div",{tabIndex:-1,className:"player-settings-button-back",onClick:()=>c("settings"),children:[A.jsx("span",{tabIndex:-1,className:"material-symbols-outlined",children:"arrow_back"}),A.jsx("span",{children:du("player.settings.source")})]}),e.map(e=>A.jsx("div",{tabIndex:-1,className:"player-settings-button",onClick:()=>u(e.change),children:A.jsx("span",{tabIndex:-1,className:"player-settings-button-text",children:e.name})}))]}),A.jsxs($l.div,{variants:d,initial:"initial",animate:"res"===l?"visible":"initial",transition:{duration:.1},children:[A.jsxs("div",{tabIndex:-1,className:"player-settings-button-back",onClick:()=>c("settings"),children:[A.jsx("span",{tabIndex:-1,className:"material-symbols-outlined",children:"arrow_back"}),A.jsx("span",{children:du("player.settings.resolution")})]}),t.map(e=>A.jsx("div",{tabIndex:-1,className:"player-settings-button",onClick:()=>u(e.change),children:A.jsx("span",{tabIndex:-1,className:"player-settings-button-text",children:Id(e.res)?e.res+"p":e.res})}))]}),A.jsxs($l.div,{variants:d,initial:"initial",animate:"sub"===l?"visible":"initial",transition:{duration:.1},children:[A.jsxs("div",{tabIndex:-1,className:"player-settings-button-back",onClick:()=>c("settings"),children:[A.jsx("span",{tabIndex:-1,className:"material-symbols-outlined",children:"arrow_back"}),A.jsx("span",{children:du("player.settings.subtitles")})]}),s.map(e=>A.jsx("div",{tabIndex:-1,className:"player-settings-button",onClick:()=>u(e.change),children:A.jsx("span",{tabIndex:-1,className:"player-settings-button-text",children:e.sub})}))]}),A.jsxs($l.div,{variants:d,initial:"initial",animate:"track"===l?"visible":"initial",transition:{duration:.1},children:[A.jsxs("div",{tabIndex:-1,className:"player-settings-button-back",onClick:()=>c("settings"),children:[A.jsx("span",{tabIndex:-1,className:"material-symbols-outlined",children:"arrow_back"}),A.jsx("span",{children:du("player.settings.audio")})]}),a.map(e=>A.jsx("div",{tabIndex:-1,className:"player-settings-button",onClick:()=>u(e.change),children:A.jsx("span",{tabIndex:-1,className:"player-settings-button-text",children:e.track})}))]}),A.jsxs($l.div,{variants:d,initial:"initial",animate:"speed"===l?"visible":"initial",transition:{duration:.1},children:[A.jsxs("div",{tabIndex:-1,className:"player-settings-button-back",onClick:()=>c("settings"),children:[A.jsx("span",{tabIndex:-1,className:"material-symbols-outlined",children:"arrow_back"}),A.jsx("span",{children:du("player.settings.speed")})]}),n.map(e=>A.jsx("div",{tabIndex:-1,className:"player-settings-button",onClick:()=>{e.change(),c("settings")},children:A.jsx("span",{tabIndex:-1,className:"player-settings-button-text",children:e.speed.toString()+"x"})}))]})]})},FC=({icon:e,title:t,onClick:n,ButtonClass:r})=>{const i=h.useRef(null);return A.jsxs("div",{className:"player-button-up-text-container",onMouseOver:function(){if(!i.current)return;const e=i.current.getBoundingClientRect(),t=e.right>window.innerWidth,n=e.left<0;if(t){const t=e.right-window.innerWidth+10;i.current.style.transform=`translateX(calc(-10% - ${t}px))`}if(n){const t=0-e.left+10;i.current.style.transform=`translateX(calc(5% + ${t}px))`}},children:[t&&A.jsx("div",{className:"player-button-up-text",ref:i,children:t}),A.jsx(zt,{icon:e,ButtonClass:r,onClick:n})]})},LC=({episodes:e,animeTitle:t,currentEpisode:n,nextEpisode:r})=>A.jsx("div",{className:"player-episode-element-background",style:{backgroundImage:`url(${e.img})`},children:A.jsxs("div",{className:"player-episode-element-container",onClick:()=>r(e.ep),children:[A.jsx("span",{className:"material-symbols-outlined player-episode-element-icon",children:e.ep==n?"pause":"play_arrow"}),A.jsx("span",{className:"player-episode-element-title",children:t}),A.jsxs("span",{className:"player-epsisode-element-end",children:["Ep. ",e.ep]})]})});var DC,_C={exports:{}};function UC(){return DC?_C.exports:(DC=1,e=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=32)}([function(e,t,n){(function(e,r){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(17),a=n(15),o=n(37),A=n(16),l=n(18),c={};t.clone=function(n,r){if("object"!==(void 0===n?"undefined":i(n))||null===n)return n;var s=(r=r||new Map).get(n);if(s)return s;var a=void 0,o=!1;if(Array.isArray(n))a=[],o=!0;else if(e.isBuffer(n))a=e.from(n);else if(n instanceof Date)a=new Date(n.getTime());else if(n instanceof RegExp)a=new RegExp(n);else{var A=Object.getPrototypeOf(n);A&&A.isImmutable?a=n:(a=Object.create(A),o=!0)}if(r.set(n,a),o)for(var l=Object.getOwnPropertyNames(n),c=0;c<l.length;++c){var u=l[c],d=Object.getOwnPropertyDescriptor(n,u);d&&(d.get||d.set)?Object.defineProperty(a,u,d):a[u]=t.clone(n[u],r)}return a},t.merge=function(n,r,s,a){if(t.assert(n&&"object"===(void 0===n?"undefined":i(n)),"Invalid target value: must be an object"),t.assert(null==r||"object"===(void 0===r?"undefined":i(r)),"Invalid source value: must be null, undefined, or an object"),!r)return n;if(Array.isArray(r)){t.assert(Array.isArray(n),"Cannot merge array onto an object"),!1===a&&(n.length=0);for(var o=0;o<r.length;++o)n.push(t.clone(r[o]));return n}for(var A=Object.keys(r),l=0;l<A.length;++l){var c=A[l];if("__proto__"!==c){var u=r[c];u&&"object"===(void 0===u?"undefined":i(u))?!n[c]||"object"!==i(n[c])||Array.isArray(n[c])!==Array.isArray(u)||u instanceof Date||e.isBuffer(u)||u instanceof RegExp?n[c]=t.clone(u):t.merge(n[c],u,s,a):(null!=u||!1!==s)&&(n[c]=u)}}return n},t.applyToDefaults=function(e,n,r){if(t.assert(e&&"object"===(void 0===e?"undefined":i(e)),"Invalid defaults value: must be an object"),t.assert(!n||!0===n||"object"===(void 0===n?"undefined":i(n)),"Invalid options value: must be true, falsy or an object"),!n)return null;var s=t.clone(e);return!0===n?s:t.merge(s,n,!0===r,!1)},t.cloneWithShallow=function(e,n){if(!e||"object"!==(void 0===e?"undefined":i(e)))return e;var r=c.store(e,n),s=t.clone(e);return c.restore(s,e,r),s},c.store=function(e,n){for(var r={},i=0;i<n.length;++i){var s=n[i],a=t.reach(e,s);void 0!==a&&(r[s]=a,c.reachSet(e,s,void 0))}return r},c.restore=function(e,t,n){for(var r=Object.keys(n),i=0;i<r.length;++i){var s=r[i];c.reachSet(e,s,n[s]),c.reachSet(t,s,n[s])}},c.reachSet=function(e,t,n){for(var r=t.split("."),i=e,s=0;s<r.length;++s){var a=r[s];s+1===r.length&&(i[a]=n),i=i[a]}},t.applyToDefaultsWithShallow=function(e,n,r){if(t.assert(e&&"object"===(void 0===e?"undefined":i(e)),"Invalid defaults value: must be an object"),t.assert(!n||!0===n||"object"===(void 0===n?"undefined":i(n)),"Invalid options value: must be true, falsy or an object"),t.assert(r&&Array.isArray(r),"Invalid keys"),!n)return null;var s=t.cloneWithShallow(e,r);if(!0===n)return s;var a=c.store(n,r);return t.merge(s,n,!1,!1),c.restore(s,n,a),s},t.deepEqual=function(n,r,s,a){s=s||{prototype:!0};var o=void 0===n?"undefined":i(n);if(o!==(void 0===r?"undefined":i(r)))return!1;if("object"!==o||null===n||null===r)return n===r?0!==n||1/n==1/r:n!=n&&r!=r;if(-1!==(a=a||[]).indexOf(n))return!0;if(a.push(n),Array.isArray(n)){if(!Array.isArray(r))return!1;if(!s.part&&n.length!==r.length)return!1;for(var A=0;A<n.length;++A){if(s.part){for(var l=!1,c=0;c<r.length;++c)if(t.deepEqual(n[A],r[c],s)){l=!0;break}return l}if(!t.deepEqual(n[A],r[A],s))return!1}return!0}if(e.isBuffer(n)){if(!e.isBuffer(r))return!1;if(n.length!==r.length)return!1;for(var u=0;u<n.length;++u)if(n[u]!==r[u])return!1;return!0}if(n instanceof Date)return r instanceof Date&&n.getTime()===r.getTime();if(n instanceof RegExp)return r instanceof RegExp&&n.toString()===r.toString();if(s.prototype&&Object.getPrototypeOf(n)!==Object.getPrototypeOf(r))return!1;var d=Object.getOwnPropertyNames(n);if(!s.part&&d.length!==Object.getOwnPropertyNames(r).length)return!1;for(var h=0;h<d.length;++h){var f=d[h],p=Object.getOwnPropertyDescriptor(n,f);if(p.get){if(!t.deepEqual(p,Object.getOwnPropertyDescriptor(r,f),s,a))return!1}else if(!t.deepEqual(n[f],r[f],s,a))return!1}return!0},t.unique=function(e,t){var n=void 0;if(t){n=[];var r=new Set;e.forEach(function(e){var i=e[t];r.has(i)||(r.add(i),n.push(e))})}else n=Array.from(new Set(e));return n},t.mapToObject=function(e,t){if(!e)return null;for(var n={},r=0;r<e.length;++r)t?e[r][t]&&(n[e[r][t]]=!0):n[e[r]]=!0;return n},t.intersect=function(e,n,r){if(!e||!n)return[];for(var i=[],s=Array.isArray(e)?t.mapToObject(e):e,a={},o=0;o<n.length;++o)if(s[n[o]]&&!a[n[o]]){if(r)return n[o];i.push(n[o]),a[n[o]]=!0}return r?null:i},t.contain=function(e,n,r){var s=null;"object"!==(void 0===e?"undefined":i(e))||"object"!==(void 0===n?"undefined":i(n))||Array.isArray(e)||Array.isArray(n)?n=[].concat(n):(s=n,n=Object.keys(n)),r=r||{},t.assert("string"==typeof e||"object"===(void 0===e?"undefined":i(e)),"Reference must be string or an object"),t.assert(n.length,"Values array cannot be empty");var a=void 0,o=void 0;if(r.deep){a=t.deepEqual;var A=r.hasOwnProperty("only"),l=r.hasOwnProperty("part");o={prototype:A?r.only:!!l&&!r.part,part:A?!r.only:!l||r.part}}else a=function(e,t){return e===t};for(var c=!1,u=new Array(n.length),d=0;d<u.length;++d)u[d]=0;if("string"==typeof e){for(var h="(",f=0;f<n.length;++f){var p=n[f];t.assert("string"==typeof p,"Cannot compare string reference to non-string value"),h+=(f?"|":"")+t.escapeRegex(p)}var g=new RegExp(h+")","g");c=!!e.replace(g,function(e,t){var r=n.indexOf(t);return++u[r],""})}else if(Array.isArray(e))for(var m=0;m<e.length;++m){for(var y=!1,v=0;v<n.length&&!1===y;++v)y=a(n[v],e[m],o)&&v;!1!==y?++u[y]:c=!0}else for(var w=Object.getOwnPropertyNames(e),b=0;b<w.length;++b){var E=w[b],B=n.indexOf(E);if(-1!==B){if(s&&!a(s[E],e[E],o))return!1;++u[B]}else c=!0}for(var C=!1,S=0;S<u.length;++S)if(C=C||!!u[S],r.once&&u[S]>1||!r.part&&!u[S])return!1;return(!r.only||!c)&&C},t.flatten=function(e,n){for(var r=n||[],i=0;i<e.length;++i)Array.isArray(e[i])?t.flatten(e[i],r):r.push(e[i]);return r},t.reach=function(e,n,r){if(!1===n||null==n)return e;"string"==typeof(r=r||{})&&(r={separator:r});for(var s=n.split(r.separator||"."),a=e,o=0;o<s.length;++o){var A=s[o];if("-"===A[0]&&Array.isArray(a)&&(A=A.slice(1,A.length),A=a.length-A),!a||"object"!==(void 0===a?"undefined":i(a))&&"function"!=typeof a||!(A in a)||"object"!==(void 0===a?"undefined":i(a))&&!1===r.functions){t.assert(!r.strict||o+1===s.length,"Missing segment",A,"in reach path ",n),t.assert("object"===(void 0===a?"undefined":i(a))||!0===r.functions||"function"!=typeof a,"Invalid segment",A,"in reach path ",n),a=r.default;break}a=a[A]}return a},t.reachTemplate=function(e,n,r){return n.replace(/{([^}]+)}/g,function(n,i){var s=t.reach(e,i,r);return null==s?"":s})},t.formatStack=function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push([r.getFileName(),r.getLineNumber(),r.getColumnNumber(),r.getFunctionName(),r.isConstructor()])}return t},t.formatTrace=function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push((r[4]?"new ":"")+r[3]+" ("+r[0]+":"+r[1]+":"+r[2]+")")}return t},t.callStack=function(e){var n=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t};var r={};Error.captureStackTrace(r,this);var i=r.stack;return Error.prepareStackTrace=n,t.formatStack(i).slice(1+e)},t.displayStack=function(e){var n=t.callStack(void 0===e?1:e+1);return t.formatTrace(n)},t.abortThrow=!1,t.abort=function(e,n){if("test"===r.env.NODE_ENV||!0===t.abortThrow)throw new Error(e||"Unknown error");var i="";n||(i=t.displayStack(1).join("\n\t")),console.log("ABORT: "+e+"\n\t"+i),r.exit(1)},t.assert=function(e){if(!e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(1===r.length&&r[0]instanceof Error)throw r[0];var a=r.filter(function(e){return""!==e}).map(function(e){return"string"==typeof e?e:e instanceof Error?e.message:t.stringify(e)});throw new s.AssertionError({message:a.join(" ")||"Unknown error",actual:!1,expected:!0,operator:"==",stackStartFunction:t.assert})}},t.Bench=function(){this.ts=0,this.reset()},t.Bench.prototype.reset=function(){this.ts=t.Bench.now()},t.Bench.prototype.elapsed=function(){return t.Bench.now()-this.ts},t.Bench.now=function(){var e=r.hrtime();return 1e3*e[0]+e[1]/1e6},t.escapeRegex=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")},t.base64urlEncode=function(n,r){return t.assert("string"==typeof n||e.isBuffer(n),"value must be string or buffer"),(e.isBuffer(n)?n:e.from(n,r||"binary")).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")},t.base64urlDecode=function(t,n){if("string"!=typeof t)throw new Error("Value not a string");if(!/^[\w\-]*$/.test(t))throw new Error("Invalid character");var r=e.from(t,"base64");return"buffer"===n?r:r.toString(n||"binary")},t.escapeHeaderAttribute=function(e){return t.assert(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~\"\\]*$/.test(e),"Bad attribute value ("+e+")"),e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},t.escapeHtml=function(e){return l.escapeHtml(e)},t.escapeJavaScript=function(e){return l.escapeJavaScript(e)},t.escapeJson=function(e){return l.escapeJson(e)},t.once=function(e){if(e._hoekOnce)return e;var t=!1,n=function(){if(!t){t=!0;for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(null,r)}};return n._hoekOnce=!0,n},t.isInteger=Number.isSafeInteger,t.ignore=function(){},t.inherits=A.inherits,t.format=A.format,t.transform=function(e,n,r){t.assert(null==e||"object"===(void 0===e?"undefined":i(e))||Array.isArray(e),"Invalid source object: must be null, undefined, an object, or an array");var s="object"===(void 0===r?"undefined":i(r))&&null!==r&&r.separator||".";if(Array.isArray(e)){for(var a=[],o=0;o<e.length;++o)a.push(t.transform(e[o],n,r));return a}for(var A={},l=Object.keys(n),c=0;c<l.length;++c){var u=l[c],d=u.split(s),h=n[u];t.assert("string"==typeof h,'All mappings must be "." delineated strings');for(var f=void 0,p=A;d.length>1;)p[f=d.shift()]||(p[f]={}),p=p[f];p[f=d.shift()]=t.reach(e,h,r)}return A},t.uniqueFilename=function(e,t){t=t?"."!==t[0]?"."+t:t:"",e=o.resolve(e);var n=[Date.now(),r.pid,a.randomBytes(8).toString("hex")].join("-")+t;return o.join(e,n)},t.stringify=function(){try{for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return JSON.stringify.apply(null,t)}catch(u$){return"[Cannot display object: "+u$.message+"]"}},t.shallow=function(e){for(var t={},n=Object.keys(e),r=0;r<n.length;++r){var i=n[r];t[i]=e[i]}return t},t.wait=function(e){return new Promise(function(t){return setTimeout(t,e)})},t.block=function(){return new Promise(t.ignore)}}).call(t,n(3).Buffer,n(7))},function(e,t,n){var r=n(0);t.create=function(e,t){r.assert("string"==typeof e,"Invalid reference key:",e);var n=r.clone(t),i=function e(t,i){return r.reach(e.isContext?i.context:t,e.key,n)};return i.isContext=e[0]===(n&&n.contextPrefix||"$"),i.key=i.isContext?e.slice(1):e,i.path=i.key.split(n&&n.separator||"."),i.depth=i.path.length,i.root=i.path[0],i.isJoi=!0,i.toString=function(){return(i.isContext?"context:":"ref:")+i.key},i},t.isRef=function(e){return"function"==typeof e&&e.isJoi},t.push=function(e,n){t.isRef(n)&&!n.isContext&&e.push(n.root)}},function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),a=n(11),o=n(1),A=n(6),l=null,c=null,u={Set:n(9),defaults:{abortEarly:!0,convert:!0,allowUnknown:!1,skipFunctions:!1,stripUnknown:!1,language:{},presence:"optional",strip:!1,noDefaults:!1,escapeHtml:!1}};e.exports=u.Any=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c=c||n(4),this.isJoi=!0,this._type="any",this._settings=null,this._valids=new u.Set,this._invalids=new u.Set,this._tests=[],this._refs=[],this._flags={},this._description=null,this._unit=null,this._notes=[],this._tags=[],this._examples=[],this._meta=[],this._inner={}}return e.prototype._init=function(){return this},e.prototype.createError=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this._flags;return A.create(e,t,n,r,i)},e.prototype.createOverrideError=function(e,t,n,r,i,s){return A.create(e,t,n,r,this._flags,i,s)},e.prototype.checkOptions=function(e){var t=n(21).options.validate(e);if(t.error)throw new Error(t.error.details[0].message)},e.prototype.clone=function(){var e=Object.create(Object.getPrototypeOf(this));e.isJoi=!0,e._currentJoi=this._currentJoi,e._type=this._type,e._settings=this._settings,e._baseType=this._baseType,e._valids=this._valids.slice(),e._invalids=this._invalids.slice(),e._tests=this._tests.slice(),e._refs=this._refs.slice(),e._flags=s.clone(this._flags),e._description=this._description,e._unit=this._unit,e._notes=this._notes.slice(),e._tags=this._tags.slice(),e._examples=this._examples.slice(),e._meta=this._meta.slice(),e._inner={};for(var t=Object.keys(this._inner),n=0;n<t.length;++n){var r=t[n];e._inner[r]=this._inner[r]?this._inner[r].slice():null}return e},e.prototype.concat=function(e){s.assert(e instanceof u.Any,"Invalid schema object"),s.assert("any"===this._type||"any"===e._type||e._type===this._type,"Cannot merge type",this._type,"with another type:",e._type);var t=this.clone();if("any"===this._type&&"any"!==e._type){for(var n=e.clone(),r=["_settings","_valids","_invalids","_tests","_refs","_flags","_description","_unit","_notes","_tags","_examples","_meta","_inner"],i=0;i<r.length;++i)n[r[i]]=t[r[i]];t=n}t._settings=t._settings?a.concat(t._settings,e._settings):e._settings,t._valids.merge(e._valids,e._invalids),t._invalids.merge(e._invalids,e._valids),t._tests=t._tests.concat(e._tests),t._refs=t._refs.concat(e._refs),s.merge(t._flags,e._flags),t._description=e._description||t._description,t._unit=e._unit||t._unit,t._notes=t._notes.concat(e._notes),t._tags=t._tags.concat(e._tags),t._examples=t._examples.concat(e._examples),t._meta=t._meta.concat(e._meta);for(var o=Object.keys(e._inner),A="object"===t._type,l=0;l<o.length;++l){var c=o[l],d=e._inner[c];if(d){var h=t._inner[c];if(h)if(A&&"children"===c){for(var f={},p=0;p<h.length;++p)f[h[p].key]=p;for(var g=0;g<d.length;++g){var m=d[g].key;f[m]>=0?h[f[m]]={key:m,schema:h[f[m]].schema.concat(d[g].schema)}:h.push(d[g])}}else t._inner[c]=t._inner[c].concat(d);else t._inner[c]=d.slice()}}return t},e.prototype._test=function(e,t,n,r){var i=this.clone();return i._tests.push({func:n,name:e,arg:t,options:r}),i},e.prototype.options=function(e){s.assert(!e.context,"Cannot override context"),this.checkOptions(e);var t=this.clone();return t._settings=a.concat(t._settings,e),t},e.prototype.strict=function(e){var t=this.clone(),n=void 0!==e&&!e;return t._settings=a.concat(t._settings,{convert:n}),t},e.prototype.raw=function(e){var t=void 0===e||e;if(this._flags.raw===t)return this;var n=this.clone();return n._flags.raw=t,n},e.prototype.error=function(e){s.assert(e&&(e instanceof Error||"function"==typeof e),"Must provide a valid Error object or a function");var t=this.clone();return t._flags.error=e,t},e.prototype.allow=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this.clone();t=s.flatten(t);for(var i=0;i<t.length;++i){var a=t[i];s.assert(void 0!==a,"Cannot call allow/valid/invalid with undefined"),r._invalids.remove(a),r._valids.add(a,r._refs)}return r},e.prototype.valid=function(){var e=this.allow.apply(this,arguments);return e._flags.allowOnly=!0,e},e.prototype.invalid=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this.clone();t=s.flatten(t);for(var i=0;i<t.length;++i){var a=t[i];s.assert(void 0!==a,"Cannot call allow/valid/invalid with undefined"),r._valids.remove(a),r._invalids.add(a,r._refs)}return r},e.prototype.required=function(){if("required"===this._flags.presence)return this;var e=this.clone();return e._flags.presence="required",e},e.prototype.optional=function(){if("optional"===this._flags.presence)return this;var e=this.clone();return e._flags.presence="optional",e},e.prototype.forbidden=function(){if("forbidden"===this._flags.presence)return this;var e=this.clone();return e._flags.presence="forbidden",e},e.prototype.strip=function(){if(this._flags.strip)return this;var e=this.clone();return e._flags.strip=!0,e},e.prototype.applyFunctionToChildren=function(e,t,n,r){if(1!==(e=[].concat(e)).length||""!==e[0]){r=r?r+".":"";var i=(""===e[0]?e.slice(1):e).map(function(e){return r+e});throw new Error("unknown key(s) "+i.join(", "))}return this[t].apply(this,n)},e.prototype.default=function(e,t){"function"!=typeof e||o.isRef(e)||(!e.description&&t&&(e.description=t),this._flags.func||s.assert("string"==typeof e.description&&e.description.length>0,"description must be provided when default value is a function"));var n=this.clone();return n._flags.default=e,o.push(n._refs,e),n},e.prototype.empty=function(e){var t=this.clone();return void 0===e?delete t._flags.empty:t._flags.empty=c.schema(this._currentJoi,e),t},e.prototype.when=function(e,t){s.assert(t&&"object"===(void 0===t?"undefined":r(t)),"Invalid options"),s.assert(void 0!==t.then||void 0!==t.otherwise,'options must have at least one of "then" or "otherwise"');var i=t.hasOwnProperty("then")?this.concat(c.schema(this._currentJoi,t.then)):void 0,a=t.hasOwnProperty("otherwise")?this.concat(c.schema(this._currentJoi,t.otherwise)):void 0;l=l||n(10);var o={then:i,otherwise:a};Object.prototype.hasOwnProperty.call(t,"is")&&(o.is=t.is);var A=l.when(e,o);return A._flags.presence="ignore",A._baseType=this,A},e.prototype.description=function(e){s.assert(e&&"string"==typeof e,"Description must be a non-empty string");var t=this.clone();return t._description=e,t},e.prototype.notes=function(e){s.assert(e&&("string"==typeof e||Array.isArray(e)),"Notes must be a non-empty string or array");var t=this.clone();return t._notes=t._notes.concat(e),t},e.prototype.tags=function(e){s.assert(e&&("string"==typeof e||Array.isArray(e)),"Tags must be a non-empty string or array");var t=this.clone();return t._tags=t._tags.concat(e),t},e.prototype.meta=function(e){s.assert(void 0!==e,"Meta cannot be undefined");var t=this.clone();return t._meta=t._meta.concat(e),t},e.prototype.example=function(){s.assert(1===arguments.length,"Missing example");var e=arguments.length<=0?void 0:arguments[0],t=this.clone();return t._examples.push(e),t},e.prototype.unit=function(e){s.assert(e&&"string"==typeof e,"Unit name must be a non-empty string");var t=this.clone();return t._unit=e,t},e.prototype._prepareEmptyValue=function(e){return"string"==typeof e&&this._flags.trim?e.trim():e},e.prototype._validate=function(e,t,n,r){var i=this,l=e;t=t||{key:"",path:[],parent:null,reference:r},this._settings&&(n=a.concat(n,this._settings));var c=[],d=function(){var r=void 0;if(void 0!==e)r=i._flags.raw?l:e;else if(n.noDefaults)r=e;else if(o.isRef(i._flags.default))r=i._flags.default(t.parent,n);else if("function"!=typeof i._flags.default||i._flags.func&&!i._flags.default.description)r=s.clone(i._flags.default);else{var a=void 0;null!==t.parent&&i._flags.default.length>0&&(a=[s.clone(t.parent),n]);var A=u._try(i._flags.default,a);r=A.value,A.error&&c.push(i.createError("any.default",{error:A.error},t,n))}if(c.length&&"function"==typeof i._flags.error){var d=i._flags.error.call(i,c);c="string"==typeof d?[i.createOverrideError("override",{reason:c},t,n,d)]:[].concat(d).map(function(e){return e instanceof Error?e:i.createOverrideError(e.type||"override",e.context,t,n,e.message,e.template)})}return{value:i._flags.strip?void 0:r,finalValue:r,errors:c.length?c:null}};if(this._coerce){var h=this._coerce.call(this,e,t,n);if(h.errors)return e=h.value,c=c.concat(h.errors),d();e=h.value}this._flags.empty&&!this._flags.empty._validate(this._prepareEmptyValue(e),null,u.defaults).errors&&(e=void 0);var f=this._flags.presence||n.presence;if("optional"===f){if(void 0===e){if(!this._flags.hasOwnProperty("default")||void 0!==this._flags.default||"object"!==this._type)return d();e={}}}else{if("required"===f&&void 0===e)return c.push(this.createError("any.required",null,t,n)),d();if("forbidden"===f)return void 0===e||c.push(this.createError("any.unknown",null,t,n)),d()}if(this._valids.has(e,t,n,this._flags.insensitive))return d();if(this._invalids.has(e,t,n,this._flags.insensitive)&&(c.push(this.createError(""===e?"any.empty":"any.invalid",{value:e,invalids:this._invalids.values({stripUndefined:!0})},t,n)),n.abortEarly||void 0===e))return d();if(this._base){var p=this._base.call(this,e,t,n);if(p.errors)return e=p.value,c=c.concat(p.errors),d();if(p.value!==e){if(e=p.value,this._valids.has(e,t,n,this._flags.insensitive))return d();if(this._invalids.has(e,t,n,this._flags.insensitive)&&(c.push(this.createError(""===e?"any.empty":"any.invalid",{value:e,invalids:this._invalids.values({stripUndefined:!0})},t,n)),n.abortEarly))return d()}}if(this._flags.allowOnly&&(c.push(this.createError("any.allowOnly",{value:e,valids:this._valids.values({stripUndefined:!0})},t,n)),n.abortEarly))return d();for(var g=0;g<this._tests.length;++g){var m=this._tests[g].func.call(this,e,t,n);if(m instanceof A.Err){if(c.push(m),n.abortEarly)return d()}else e=m}return d()},e.prototype._validateWithOptions=function(e,t,n){t&&this.checkOptions(t);var r=a.concat(u.defaults,t),i=this._validate(e,null,r),s=A.process(i.errors,e);return n?n(s,i.value):{error:s,value:i.value,then:function(e,t){return s?Promise.reject(s).catch(t):Promise.resolve(i.value).then(e)},catch:function(e){return s?Promise.reject(s).catch(e):Promise.resolve(i.value)}}},e.prototype.validate=function(e,t,n){return"function"==typeof t?this._validateWithOptions(e,null,t):this._validateWithOptions(e,t,n)},e.prototype.describe=function(){var e=this,t={type:this._type},n=Object.keys(this._flags);if(n.length)if(["empty","default","lazy","label"].some(function(t){return e._flags.hasOwnProperty(t)})){t.flags={};for(var r=0;r<n.length;++r){var i=n[r];"empty"===i?t.flags[i]=this._flags[i].describe():"default"===i?o.isRef(this._flags[i])?t.flags[i]=this._flags[i].toString():"function"==typeof this._flags[i]?t.flags[i]={description:this._flags[i].description,function:this._flags[i]}:t.flags[i]=this._flags[i]:"lazy"===i||"label"===i||(t.flags[i]=this._flags[i])}}else t.flags=this._flags;this._settings&&(t.options=s.clone(this._settings)),this._baseType&&(t.base=this._baseType.describe()),this._description&&(t.description=this._description),this._notes.length&&(t.notes=this._notes),this._tags.length&&(t.tags=this._tags),this._meta.length&&(t.meta=this._meta),this._examples.length&&(t.examples=this._examples),this._unit&&(t.unit=this._unit);var a=this._valids.values();a.length&&(t.valids=a.map(function(e){return o.isRef(e)?e.toString():e}));var A=this._invalids.values();A.length&&(t.invalids=A.map(function(e){return o.isRef(e)?e.toString():e})),t.rules=[];for(var l=0;l<this._tests.length;++l){var c=this._tests[l],u={name:c.name};void 0!==c.arg&&(u.arg=o.isRef(c.arg)?c.arg.toString():c.arg);var d=c.options;if(d){if(d.hasRef){u.arg={};for(var h=Object.keys(c.arg),f=0;f<h.length;++f){var p=h[f],g=c.arg[p];u.arg[p]=o.isRef(g)?g.toString():g}}"string"==typeof d.description?u.description=d.description:"function"==typeof d.description&&(u.description=d.description(u.arg))}t.rules.push(u)}t.rules.length||delete t.rules;var m=this._getLabel();return m&&(t.label=m),t},e.prototype.label=function(e){s.assert(e&&"string"==typeof e,"Label name must be a non-empty string");var t=this.clone();return t._flags.label=e,t},e.prototype._getLabel=function(e){return this._flags.label||e},i(e,[{key:"schemaType",get:function(){return this._type}}]),e}(),u.Any.prototype.isImmutable=!0,u.Any.prototype.only=u.Any.prototype.equal=u.Any.prototype.valid,u.Any.prototype.disallow=u.Any.prototype.not=u.Any.prototype.invalid,u.Any.prototype.exist=u.Any.prototype.required,u._try=function(e,t){var n=void 0,r=void 0;try{r=e.apply(null,t)}catch(c$){n=c$}return{value:r,error:n}}},function(e,t,n){(function(e){
/*!
              * The buffer module from node.js, for the browser.
              *
              * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
              * @license  MIT
              */
var r=n(33),i=n(34),s=n(35);function a(){return A.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return A.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=A.prototype:(null===e&&(e=new A(t)),e.length=t),e}function A(e,t,n){if(!(A.TYPED_ARRAY_SUPPORT||this instanceof A))return new A(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),A.TYPED_ARRAY_SUPPORT?(e=t).__proto__=A.prototype:e=d(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!A.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(t,n),i=(e=o(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(A.isBuffer(t)){var n=0|h(t.length);return 0===(e=o(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?o(e,0):d(e,t);if("Buffer"===t.type&&s(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t){if(c(t),e=o(e,t<0?0:0|h(t)),!A.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|h(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function f(e,t){if(A.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(e).length;default:if(r)return H(e).length;t=(""+t).toLowerCase(),r=!0}}function p(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return F(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return k(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=A.from(t,r)),A.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,A.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var s,a=1,o=e.length,A=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,o/=2,A/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(s=n;s<o;s++)if(l(e,s)===l(t,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===A)return c*a}else-1!==c&&(s-=s-c),c=-1}else for(n+A>o&&(n=o-A),s=n;s>=0;s--){for(var u=!0,d=0;d<A;d++)if(l(e,s+d)!==l(t,d)){u=!1;break}if(u)return s}return-1}function v(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var a=0;a<r;++a){var o=parseInt(t.substr(2*a,2),16);if(isNaN(o))return a;e[n+a]=o}return a}function w(e,t,n,r){return $(H(t,e.length-n),e,n,r)}function b(e,t,n,r){return $(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return b(e,t,n,r)}function B(e,t,n,r){return $(j(t),e,n,r)}function C(e,t,n,r){return $(function(e,t){for(var n,r,i,s=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,s.push(i),s.push(r);return s}(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var s,a,o,A,l=e[i],c=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u<=n)switch(u){case 1:l<128&&(c=l);break;case 2:128==(192&(s=e[i+1]))&&(A=(31&l)<<6|63&s)>127&&(c=A);break;case 3:s=e[i+1],a=e[i+2],128==(192&s)&&128==(192&a)&&(A=(15&l)<<12|(63&s)<<6|63&a)>2047&&(A<55296||A>57343)&&(c=A);break;case 4:s=e[i+1],a=e[i+2],o=e[i+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&(A=(15&l)<<18|(63&s)<<12|(63&a)<<6|63&o)>65535&&A<1114112&&(c=A)}null===c?(c=65533,u=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=u}return function(e){var t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=x));return n}(r)}t.Buffer=A,t.SlowBuffer=function(e){return+e!=e&&(e=0),A.alloc(+e)},t.INSPECT_MAX_BYTES=50,A.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(c$){return!1}}(),t.kMaxLength=a(),A.poolSize=8192,A._augment=function(e){return e.__proto__=A.prototype,e},A.from=function(e,t,n){return l(null,e,t,n)},A.TYPED_ARRAY_SUPPORT&&(A.prototype.__proto__=Uint8Array.prototype,A.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&A[Symbol.species]===A&&Object.defineProperty(A,Symbol.species,{value:null,configurable:!0})),A.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}(null,e,t,n)},A.allocUnsafe=function(e){return u(null,e)},A.allocUnsafeSlow=function(e){return u(null,e)},A.isBuffer=function(e){return!(null==e||!e._isBuffer)},A.compare=function(e,t){if(!A.isBuffer(e)||!A.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},A.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},A.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return A.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=A.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!A.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},A.byteLength=f,A.prototype._isBuffer=!0,A.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},A.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},A.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},A.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):p.apply(this,arguments)},A.prototype.equals=function(e){if(!A.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===A.compare(this,e)},A.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},A.prototype.compare=function(e,t,n,r,i){if(!A.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),o=Math.min(s,a),l=this.slice(r,i),c=e.slice(t,n),u=0;u<o;++u)if(l[u]!==c[u]){s=l[u],a=c[u];break}return s<a?-1:a<s?1:0},A.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},A.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},A.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},A.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return B(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},A.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function F(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=t;s<n;++s)i+=M(e[s]);return i}function L(e,t,n){for(var r=e.slice(t,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function _(e,t,n,r,i,s){if(!A.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function U(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-n,2);i<s;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function P(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-n,4);i<s;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function R(e,t,n,r,i,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function O(e,t,n,r,s){return s||R(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function Q(e,t,n,r,s){return s||R(e,0,n,8),i.write(e,t,n,r,52,8),n+8}A.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),A.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=A.prototype;else{var i=t-e;n=new A(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+e]}return n},A.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r},A.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},A.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},A.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},A.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},A.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},A.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},A.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},A.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=t,i=1,s=this[e+--r];r>0&&(i*=256);)s+=this[e+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},A.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},A.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},A.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},A.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},A.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},A.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!0,23,4)},A.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!1,23,4)},A.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!0,52,8)},A.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!1,52,8)},A.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||_(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},A.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||_(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},A.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,1,255,0),A.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},A.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,2,65535,0),A.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},A.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,2,65535,0),A.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},A.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,4,4294967295,0),A.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):P(this,e,t,!0),t+4},A.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,4,4294967295,0),A.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},A.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);_(this,e,t,n,i-1,-i)}var s=0,a=1,o=0;for(this[t]=255&e;++s<n&&(a*=256);)e<0&&0===o&&0!==this[t+s-1]&&(o=1),this[t+s]=(e/a|0)-o&255;return t+n},A.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);_(this,e,t,n,i-1,-i)}var s=n-1,a=1,o=0;for(this[t+s]=255&e;--s>=0&&(a*=256);)e<0&&0===o&&0!==this[t+s+1]&&(o=1),this[t+s]=(e/a|0)-o&255;return t+n},A.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,1,127,-128),A.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},A.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,2,32767,-32768),A.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},A.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,2,32767,-32768),A.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},A.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,4,2147483647,-2147483648),A.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):P(this,e,t,!0),t+4},A.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),A.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},A.prototype.writeFloatLE=function(e,t,n){return O(this,e,t,!0,n)},A.prototype.writeFloatBE=function(e,t,n){return O(this,e,t,!1,n)},A.prototype.writeDoubleLE=function(e,t,n){return Q(this,e,t,!0,n)},A.prototype.writeDoubleBE=function(e,t,n){return Q(this,e,t,!1,n)},A.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,s=r-n;if(this===e&&n<t&&t<r)for(i=s-1;i>=0;--i)e[i+t]=this[i+n];else if(s<1e3||!A.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},A.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!A.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var a=A.isBuffer(e)?e:H(new A(e,r).toString()),o=a.length;for(s=0;s<n-t;++s)this[s+t]=a[s%o]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function M(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){var n;t=t||1/0;for(var r=e.length,i=null,s=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function j(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(t,n(5))},function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(0),s=n(1);t.schema=function(e,t){return null!=t&&"object"===(void 0===t?"undefined":r(t))?t.isJoi?t:Array.isArray(t)?e.alternatives().try(t):t instanceof RegExp?e.string().regex(t):t instanceof Date?e.date().valid(t):e.object().keys(t):"string"==typeof t?e.string().valid(t):"number"==typeof t?e.number().valid(t):"boolean"==typeof t?e.boolean().valid(t):s.isRef(t)?e.valid(t):(i.assert(null===t,"Invalid schema content:",t),e.valid(null))},t.ref=function(e){return s.isRef(e)?e:s.create(e)}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(c$){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(0),s=n(20),a={annotations:Symbol("joi-annotations"),stringify:function(e,n){var i=void 0===e?"undefined":r(e);if(null===e)return"null";if("string"===i)return e;if(e instanceof t.Err||"function"===i||"symbol"===i)return e.toString();if("object"===i){if(Array.isArray(e)){for(var s="",o=0;o<e.length;++o)s=s+(s.length?", ":"")+a.stringify(e[o],n);return n?"["+s+"]":s}return e.toString()}return JSON.stringify(e)}};t.Err=function(){function e(t,n,r,i,a,o,A){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isJoi=!0,this.type=t,this.context=n||{},this.context.key=r.path[r.path.length-1],this.context.label=r.key,this.path=r.path,this.options=i,this.flags=a,this.message=o,this.template=A;var l=this.options.language;this.flags.label?this.context.label=this.flags.label:!l||""!==this.context.label&&null!==this.context.label||(this.context.label=l.root||s.errors.root)}return e.prototype.toString=function(){var e=this;if(this.message)return this.message;var t=void 0;this.template&&(t=this.template);var n=this.options.language;if(void 0===(t=t||i.reach(n,this.type)||i.reach(s.errors,this.type)))return'Error code "'+this.type+'" is not defined, your custom type is missing the correct language definition';var r=i.reach(n,"messages.wrapArrays");if("boolean"!=typeof r&&(r=s.errors.messages.wrapArrays),null===t){var o=a.stringify(this.context.reason,r);return r?o.slice(1,-1):o}var A=/\{\{\!?label\}\}/.test(t),l=t.length>2&&"!"===t[0]&&"!"===t[1];if(l&&(t=t.slice(2)),!A&&!l){var c=i.reach(n,"key");t="string"==typeof c?c+t:i.reach(s.errors,"key")+t}return t.replace(/\{\{(\!?)([^}]+)\}\}/g,function(t,n,s){var o=i.reach(e.context,s),A=a.stringify(o,r);return n&&e.options.escapeHtml?i.escapeHtml(A):A})},e}(),t.create=function(e,n,r,i,s,a,o){return new t.Err(e,n,r,i,s,a,o)},t.process=function(e,t){if(!e||!e.length)return null;var n="",r=[],i=function e(t,i){for(var s=0;s<t.length;++s){var a=t[s];if(a instanceof Error)return a;if(a.flags.error&&"function"!=typeof a.flags.error)return a.flags.error;var o=void 0;if(void 0===i&&(o=a.toString(),n=n+(n?". ":"")+o),a.context.reason&&a.context.reason.length){var A=e(a.context.reason,a.path);if(A)return A}else r.push({message:o||a.toString(),path:a.path,type:a.type,context:a.context})}}(e);if(i)return i;var s=new Error(n);return s.isJoi=!0,s.name="ValidationError",s.details=r,s._object=t,s.annotate=a.annotate,s},a.safeStringify=function(e,t){return JSON.stringify(e,a.serializer(),t)},a.serializer=function(){var e=[],t=[],n=function(n,r){return t[0]===r?"[Circular ~]":"[Circular ~."+e.slice(0,t.indexOf(r)).join(".")+"]"};return function(i,s){if(t.length>0){var o=t.indexOf(this);~o?(t.length=o+1,e.length=o+1,e[o]=i):(t.push(this),e.push(i)),~t.indexOf(s)&&(s=n.call(this,i,s))}else t.push(s);if(s){var A=s[a.annotations];if(A){if(Array.isArray(s)){for(var l=[],c=0;c<s.length;++c)A.errors[c]&&l.push("_$idx$_"+A.errors[c].sort().join(", ")+"_$end$_"),l.push(s[c]);s=l}else{for(var u=Object.keys(A.errors),d=0;d<u.length;++d){var h=u[d];s[h+"_$key$_"+A.errors[h].sort().join(", ")+"_$end$_"]=s[h],s[h]=void 0}for(var f=Object.keys(A.missing),p=0;p<f.length;++p){var g=f[p];s["_$miss$_"+g+"|"+A.missing[g]+"_$end$_"]="__missing__"}}return s}}return s===1/0||s===-1/0||Number.isNaN(s)||"function"==typeof s||"symbol"===(void 0===s?"undefined":r(s))?"["+s.toString()+"]":s}},a.annotate=function(e){var t=e?"":"[31m",n=e?"":"[41m",s=e?"":"[0m";if("object"!==r(this._object))return this.details[0].message;for(var o=i.clone(this._object||{}),A=this.details.length-1;A>=0;--A)for(var l=A+1,c=this.details[A],u=c.path,d=o,h=0;;++h){var f=u[h];if(d.isImmutable&&(d=d.clone()),!(h+1<u.length&&d[f]&&"string"!=typeof d[f])){var p=d[a.annotations]=d[a.annotations]||{errors:{},missing:{}},g=d[f],m=f||c.context.label;void 0!==g?(p.errors[m]=p.errors[m]||[],p.errors[m].push(l)):p.missing[m]=l;break}d=d[f]}var y=/_\$key\$_([, \d]+)_\$end\$_\"/g,v=/\"_\$miss\$_([^\|]+)\|(\d+)_\$end\$_\"\: \"__missing__\"/g,w=/\s*\"_\$idx\$_([, \d]+)_\$end\$_\",?\n(.*)/g,b=/"\[(NaN|Symbol.*|-?Infinity|function.*|\(.*)\]"/g,E=a.safeStringify(o,2).replace(y,function(e,n){return'" '+t+"["+n+"]"+s}).replace(v,function(e,r,i){return n+'"'+r+'"'+s+t+" ["+i+"]: -- missing --"+s}).replace(w,function(e,n,r){return"\n"+r+" "+t+"["+n+"]"+s}).replace(b,function(e,t){return t});E=E+"\n"+t;for(var B=0;B<this.details.length;++B)E=E+"\n["+(B+1)+"] "+this.details[B].message;return E+=s}},function(e,t){var n,r,i=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(c$){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(c$){n=s}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(c$){r=a}}();var A,l=[],c=!1,u=-1;function d(){c&&A&&(c=!1,A.length?l=A.concat(l):u=-1,l.length&&h())}function h(){if(!c){var e=o(d);c=!0;for(var t=l.length;t;){for(A=l,l=[];++u<t;)A&&A[u].run();u=-1,t=l.length}A=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(c$){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||c||o(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],s=Object.getOwnPropertyDescriptor(t,i);s&&s.configurable&&void 0===e[i]&&Object.defineProperty(e,i,s)}}(e,t))}var s=n(0),a=n(2),o=n(4),A=n(6),l=n(26),c=n(1),u=n(11),d={alternatives:n(10),array:n(22),boolean:n(24),binary:n(23),date:n(12),func:n(25),number:n(27),object:n(13),string:n(28),callWithDefaults:function(e,t){var n;return s.assert(this,"Must be invoked on a Joi instance."),this._defaults&&(e=this._defaults(e)),e._currentJoi=this,(n=e)._init.apply(n,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))},root:function(){var e=new a,t=e.clone();return a.prototype._currentJoi=t,t._currentJoi=t,t.any=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return s.assert(0===n.length,"Joi.any() does not allow arguments."),d.callWithDefaults.call(this,e,n)},t.alternatives=t.alt=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.callWithDefaults.call(this,d.alternatives,t)},t.array=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.assert(0===t.length,"Joi.array() does not allow arguments."),d.callWithDefaults.call(this,d.array,t)},t.boolean=t.bool=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.assert(0===t.length,"Joi.boolean() does not allow arguments."),d.callWithDefaults.call(this,d.boolean,t)},t.binary=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.assert(0===t.length,"Joi.binary() does not allow arguments."),d.callWithDefaults.call(this,d.binary,t)},t.date=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.assert(0===t.length,"Joi.date() does not allow arguments."),d.callWithDefaults.call(this,d.date,t)},t.func=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.assert(0===t.length,"Joi.func() does not allow arguments."),d.callWithDefaults.call(this,d.func,t)},t.number=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.assert(0===t.length,"Joi.number() does not allow arguments."),d.callWithDefaults.call(this,d.number,t)},t.object=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.callWithDefaults.call(this,d.object,t)},t.string=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.assert(0===t.length,"Joi.string() does not allow arguments."),d.callWithDefaults.call(this,d.string,t)},t.ref=function(){return c.create.apply(c,arguments)},t.isRef=function(e){return c.isRef(e)},t.validate=function(n){var r,i=arguments.length<=(r=(arguments.length<=1?0:arguments.length-1)-1+1)?void 0:arguments[r],s="function"==typeof i?i:null,a=(arguments.length<=1?0:arguments.length-1)-(s?1:0);if(0===a)return e.validate(n,s);var o=2===a?arguments.length<=2?void 0:arguments[2]:{};return t.compile(arguments.length<=1?void 0:arguments[1])._validateWithOptions(n,o,s)},t.describe=function(){return(arguments.length?t.compile(arguments.length<=0?void 0:arguments[0]):e).describe()},t.compile=function(e){try{return o.schema(this,e)}catch(u$){throw u$.hasOwnProperty("path")&&(u$.message=u$.message+"("+u$.path+")"),u$}},t.assert=function(e,n,r){t.attempt(e,n,r)},t.attempt=function(e,n,r){var i=t.validate(e,n),s=i.error;if(s){if(!r)throw"function"==typeof s.annotate&&(s.message=s.annotate()),s;if(!(r instanceof Error))throw"function"==typeof s.annotate&&(s.message=r+" "+s.annotate()),s;throw r}return i.value},t.reach=function(e,t){return s.assert(e&&e instanceof a,"you must provide a joi schema"),s.assert(Array.isArray(t)||"string"==typeof t,"path must be a string or an array of strings"),function e(t,n){if(!n.length)return t;var r=t._inner.children;if(r)for(var i=n.shift(),s=0;s<r.length;++s){var a=r[s];if(a.key===i)return e(a.schema,n)}}(e,"string"==typeof t?t?t.split("."):[]:t.slice())},t.lazy=function(e){return l.set(e)},t.defaults=function(e){var t=this;s.assert("function"==typeof e,"Defaults must be a function");var n=Object.create(this.any());return n=e(n),s.assert(n&&n instanceof this.constructor,"defaults() must return a schema"),r(n,this,n.clone()),n._defaults=function(n){return t._defaults&&(n=t._defaults(n),s.assert(n instanceof t.constructor,"defaults() must return a schema")),n=e(n),s.assert(n instanceof t.constructor,"defaults() must return a schema"),n},n},t.extend=function(){for(var e=this,n=arguments.length,l=Array(n),h=0;h<n;h++)l[h]=arguments[h];var f=s.flatten(l);s.assert(f.length>0,"You need to provide at least one extension"),this.assert(f,t.extensionsSchema);var p=Object.create(this.any());r(p,this);for(var g=function(n){var l=f[n];"function"==typeof l&&(l=l(p)),e.assert(l,t.extensionSchema);var h=(l.base||e.any()).clone(),g=h.constructor,m=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n,i,s,a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return l.base&&r(a,h),a._type=l.name,l.language&&(a._settings=u.concat(a._settings,{language:(n={},i=l.name,s=l.language,i in n?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s,n)})),a}return i(t,e),t}(g);if(l.coerce&&(m.prototype._coerce=function(e,t,n){if(g.prototype._coerce){var r=g.prototype._coerce.call(this,e,t,n);if(r.errors)return r;e=r.value}var i=l.coerce.call(this,e,t,n);return i instanceof A.Err?{value:e,errors:i}:{value:i}}),l.pre&&(m.prototype._base=function(e,t,n){if(g.prototype._base){var r=g.prototype._base.call(this,e,t,n);if(r.errors)return r;e=r.value}var i=l.pre.call(this,e,t,n);return i instanceof A.Err?{value:e,errors:i}:{value:i}}),l.rules)for(var y=function(t){var n=l.rules[t],r=n.params?n.params instanceof a?n.params._inner.children.map(function(e){return e.key}):Object.keys(n.params):[],i=n.params?o.schema(e,n.params):null;m.prototype[n.name]=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];if(t.length>r.length)throw new Error("Unexpected number of arguments");for(var A=!1,l={},u=0;u<r.length;++u)l[r[u]]=t[u],!A&&c.isRef(t[u])&&(A=!0);i&&(l=p.attempt(l,i));var d=void 0;if(d=n.validate?this._test(n.name,l,function(e,t,r){return n.validate.call(this,l,e,t,r)},{description:n.description,hasRef:A}):this.clone(),n.setup){var h=n.setup.call(d,l);void 0!==h&&(s.assert(h instanceof a,"Setup of extension Joi."+this._type+"()."+n.name+"() must return undefined or a Joi object"),d=h)}return d}},v=0;v<l.rules.length;++v)y(v);l.describe&&(m.prototype.describe=function(){var e=g.prototype.describe.call(this);return l.describe.call(this,e)});var w=new m;p[l.name]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.callWithDefaults.call(this,w,t)}},m=0;m<f.length;++m)g(m);return p},t.extensionSchema=d.object.keys({base:d.object.type(a,"Joi object"),name:d.string.required(),coerce:d.func.arity(3),pre:d.func.arity(3),language:d.object,describe:d.func.arity(1),rules:d.array.items(d.object.keys({name:d.string.required(),setup:d.func.arity(1),validate:d.func.arity(4),params:[d.object.pattern(/.*/,d.object.type(a,"Joi object")),d.object.type(d.object.constructor,"Joi object")],description:[d.string,d.func.arity(1)]}).or("setup","validate"))}).strict(),t.extensionsSchema=d.array.items([d.object,d.func.arity(1)]).strict(),t.version=n(36).version,t}};e.exports=d.root()},function(e,t,n){(function(t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var s=n(1),a={extendedCheckForValue:function(e,n){var i=void 0===e?"undefined":r(e);if("object"===i){if(e instanceof Date)return function(t){return t instanceof Date&&e.getTime()===t.getTime()};if(t.isBuffer(e))return function(n){return t.isBuffer(n)&&e.length===n.length&&e.toString("binary")===n.toString("binary")}}else if(n&&"string"===i){var s=e.toLowerCase();return function(e){return"string"==typeof e&&s===e.toLowerCase()}}return null}};e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._set=new Set(t),this._hasRef=!1}return e.prototype.add=function(e,t){var n=s.isRef(e);return!n&&this.has(e,null,null,!1)||(void 0!==t&&s.push(t,e),this._set.add(e),this._hasRef|=n),this},e.prototype.merge=function(e,t){var n=!0,r=!1,i=void 0;try{for(var s,a=e._set[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var o=s.value;this.add(o)}}catch(u$){r=!0,i=u$}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}var A=!0,l=!1,c=void 0;try{for(var u,d=t._set[Symbol.iterator]();!(A=(u=d.next()).done);A=!0){var h=u.value;this.remove(h)}}catch(u$){l=!0,c=u$}finally{try{!A&&d.return&&d.return()}finally{if(l)throw c}}return this},e.prototype.remove=function(e){return this._set.delete(e),this},e.prototype.has=function(e,t,n,r){if(!this._set.size)return!1;var i=this._set.has(e);if(i)return i;var o=a.extendedCheckForValue(e,r);if(!o){if(t&&this._hasRef){var A=!0,l=!1,c=void 0;try{for(var u,d=this._set[Symbol.iterator]();!(A=(u=d.next()).done);A=!0){var h=u.value;if(s.isRef(h)&&(e===(h=h(t.reference||t.parent,n))||Array.isArray(h)&&h.includes(e)))return!0}}catch(u$){l=!0,c=u$}finally{try{!A&&d.return&&d.return()}finally{if(l)throw c}}}return!1}return this._has(e,t,n,o)},e.prototype._has=function(e,t,n,r){var i=!(!t||!this._hasRef),a=function(t){return e===t||r(t)},o=!0,A=!1,l=void 0;try{for(var c,u=this._set[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;if(i&&s.isRef(d)&&(d=d(t.reference||t.parent,n),Array.isArray(d))){if(d.find(a))return!0}else if(a(d))return!0}}catch(u$){A=!0,l=u$}finally{try{!o&&u.return&&u.return()}finally{if(A)throw l}}return!1},e.prototype.values=function(e){if(e&&e.stripUndefined){var t=[],n=!0,r=!1,i=void 0;try{for(var s,a=this._set[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var o=s.value;void 0!==o&&t.push(o)}}catch(u$){r=!0,i=u$}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return t}return Array.from(this._set)},e.prototype.slice=function(){var t=new e(this._set);return t._hasRef=this._hasRef,t},e.prototype.concat=function(t){var n=new e([].concat(i(this._set),i(t._set)));return n._hasRef=!!(this._hasRef|t._hasRef),n},e}()}).call(t,n(3).Buffer)},function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],s=Object.getOwnPropertyDescriptor(t,i);s&&s.configurable&&void 0===e[i]&&Object.defineProperty(e,i,s)}}(e,t))}var s=n(0),a=n(2),o=n(4),A=n(1),l={};l.Alternatives=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return n._type="alternatives",n._invalids.remove(null),n._inner.matches=[],n}return i(t,e),t.prototype._init=function(){return arguments.length?this.try.apply(this,arguments):this},t.prototype._base=function(e,t,n){for(var r=[],i=this._inner.matches.length,s=this._baseType,a=0;a<i;++a){var o=this._inner.matches[a];if(o.schema){var A=o.schema._validate(e,t,n);if(!A.errors)return A;r=r.concat(A.errors)}else{var l=o.peek||o.is,c=o.is?o.ref(t.reference||t.parent,n):e;if(l._validate(c,null,n,t.parent).errors){if(o.otherwise)return o.otherwise._validate(e,t,n)}else if(o.then)return o.then._validate(e,t,n);if(a===i-1&&s)return s._validate(e,t,n)}}return r.length?{errors:this.createError("alternatives.child",{reason:r},t,n)}:{errors:this.createError("alternatives.base",null,t,n)}},t.prototype.try=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t=s.flatten(t),s.assert(t.length,"Cannot add other alternatives without at least one schema");for(var r=this.clone(),i=0;i<t.length;++i){var a=o.schema(this._currentJoi,t[i]);a._refs.length&&(r._refs=r._refs.concat(a._refs)),r._inner.matches.push({schema:a})}return r},t.prototype.when=function(e,t){var n=!1;s.assert(A.isRef(e)||"string"==typeof e||(n=e instanceof a),"Invalid condition:",e),s.assert(t,"Missing options"),s.assert("object"===(void 0===t?"undefined":r(t)),"Invalid options"),n?s.assert(!t.hasOwnProperty("is"),'"is" can not be used with a schema condition'):s.assert(t.hasOwnProperty("is"),'Missing "is" directive'),s.assert(void 0!==t.then||void 0!==t.otherwise,'options must have at least one of "then" or "otherwise"');var i=this.clone(),l=void 0;n||(l=o.schema(this._currentJoi,t.is),null!==t.is&&(A.isRef(t.is)||t.is instanceof a)||(l=l.required()));var c={ref:n?null:o.ref(e),peek:n?e:null,is:l,then:void 0!==t.then?o.schema(this._currentJoi,t.then):void 0,otherwise:void 0!==t.otherwise?o.schema(this._currentJoi,t.otherwise):void 0};return i._baseType&&(c.then=c.then&&i._baseType.concat(c.then),c.otherwise=c.otherwise&&i._baseType.concat(c.otherwise)),n||(A.push(i._refs,c.ref),i._refs=i._refs.concat(c.is._refs)),c.then&&c.then._refs&&(i._refs=i._refs.concat(c.then._refs)),c.otherwise&&c.otherwise._refs&&(i._refs=i._refs.concat(c.otherwise._refs)),i._inner.matches.push(c),i},t.prototype.describe=function(){for(var e=a.prototype.describe.call(this),t=[],n=0;n<this._inner.matches.length;++n){var r=this._inner.matches[n];if(r.schema)t.push(r.schema.describe());else{var i=r.is?{ref:r.ref.toString(),is:r.is.describe()}:{peek:r.peek.describe()};r.then&&(i.then=r.then.describe()),r.otherwise&&(i.otherwise=r.otherwise.describe()),t.push(i)}}return e.alternatives=t,e},t}(a),e.exports=new l.Alternatives},function(e,t,n){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0);t.concat=function(e,t){if(!t)return e;for(var n=r({},e),s=Object.keys(t),a=0;a<s.length;++a){var o=s[a];"language"===o&&n.hasOwnProperty(o)?n[o]=i.applyToDefaults(n[o],t[o]):n[o]=t[o]}return n}},function(e,t,n){function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],s=Object.getOwnPropertyDescriptor(t,i);s&&s.configurable&&void 0===e[i]&&Object.defineProperty(e,i,s)}}(e,t))}var i,s=n(2),a=n(1),o=n(0),A={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};A.invalidDate=new Date(""),A.isIsoDate=(i=A.isoDate.toString(),function(e){return e&&e.toString()===i}),A.Date=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return n._type="date",n}return r(t,e),t.prototype._base=function(e,t,n){var r={value:n.convert&&A.Date.toDate(e,this._flags.format,this._flags.timestamp,this._flags.multiplier)||e};if(r.value instanceof Date&&!isNaN(r.value.getTime()))r.errors=null;else if(n.convert){var i=void 0;i=A.isIsoDate(this._flags.format)?"isoDate":this._flags.timestamp?"timestamp."+this._flags.timestamp:"base",r.errors=this.createError("date."+i,null,t,n)}else r.errors=this.createError("date.strict",null,t,n);return r},t.toDate=function(e,t,n,r){if(e instanceof Date)return e;if("string"==typeof e||"number"==typeof e&&!isNaN(e)&&isFinite(e)){"string"==typeof e&&/^[+-]?\d+(\.\d+)?$/.test(e)&&(e=parseFloat(e));var i=void 0;if(i=t&&A.isIsoDate(t)?t.test(e)?new Date(e):A.invalidDate:n&&r?/^\s*$/.test(e)?A.invalidDate:new Date(e*r):new Date(e),!isNaN(i.getTime()))return i}return null},t.prototype.iso=function(){if(this._flags.format===A.isoDate)return this;var e=this.clone();return e._flags.format=A.isoDate,e},t.prototype.timestamp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript",t=["javascript","unix"];if(o.assert(t.includes(e),'"type" must be one of "'+t.join('", "')+'"'),this._flags.timestamp===e)return this;var n=this.clone();return n._flags.timestamp=e,n._flags.multiplier="unix"===e?1e3:1,n},t.prototype._isIsoDate=function(e){return A.isoDate.test(e)},t}(s),A.compare=function(e,t){return function(n){var r="now"===n,i=a.isRef(n);return r||i||(n=A.Date.toDate(n)),o.assert(n,"Invalid date format"),this._test(e,n,function(s,a,o){var l=void 0;if(r)l=Date.now();else if(i){if(!(l=A.Date.toDate(n(a.reference||a.parent,o))))return this.createError("date.ref",{ref:n.key},a,o);l=l.getTime()}else l=n.getTime();return t(s.getTime(),l)?s:this.createError("date."+e,{limit:new Date(l)},a,o)})}},A.Date.prototype.min=A.compare("min",function(e,t){return e>=t}),A.Date.prototype.max=A.compare("max",function(e,t){return e<=t}),A.Date.prototype.greater=A.compare("greater",function(e,t){return e>t}),A.Date.prototype.less=A.compare("less",function(e,t){return e<t}),e.exports=new A.Date},function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],s=Object.getOwnPropertyDescriptor(t,i);s&&s.configurable&&void 0===e[i]&&Object.defineProperty(e,i,s)}}(e,t))}var s=n(0),a=n(31),o=n(2),A=n(6),l=n(4),c={};c.Object=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return n._type="object",n._inner.children=null,n._inner.renames=[],n._inner.dependencies=[],n._inner.patterns=[],n}return i(t,e),t.prototype._init=function(){return arguments.length?this.keys.apply(this,arguments):this},t.prototype._base=function(e,t,n){var i=e,a=[],o=function(){return{value:i,errors:a.length?a:null}};"string"==typeof e&&n.convert&&(e=c.safeParse(e));var l=this._flags.func?"function":"object";if(!e||(void 0===e?"undefined":r(e))!==l||Array.isArray(e))return a.push(this.createError(l+".base",null,t,n)),o();if(!(this._inner.renames.length||this._inner.dependencies.length||this._inner.children||this._inner.patterns.length))return i=e,o();if(i===e){"object"===l?i=Object.create(Object.getPrototypeOf(e)):(i=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(this,n)},i.prototype=s.clone(e.prototype));for(var u=Object.keys(e),d=0;d<u.length;++d)i[u[d]]=e[u[d]]}else i=e;for(var h={},f=0;f<this._inner.renames.length;++f){var p=this._inner.renames[f];if(p.isRegExp){for(var g=Object.keys(i),m=[],y=0;y<g.length;++y)p.from.test(g[y])&&m.push(g[y]);var v=m.every(function(e){return void 0===i[e]});if(p.options.ignoreUndefined&&v)continue;if(!p.options.multiple&&h[p.to]&&(a.push(this.createError("object.rename.regex.multiple",{from:m,to:p.to},t,n)),n.abortEarly))return o();if(Object.prototype.hasOwnProperty.call(i,p.to)&&!p.options.override&&!h[p.to]&&(a.push(this.createError("object.rename.regex.override",{from:m,to:p.to},t,n)),n.abortEarly))return o();if(v?delete i[p.to]:i[p.to]=i[m[m.length-1]],h[p.to]=!0,!p.options.alias)for(var w=0;w<m.length;++w)delete i[m[w]]}else{if(p.options.ignoreUndefined&&void 0===i[p.from])continue;if(!p.options.multiple&&h[p.to]&&(a.push(this.createError("object.rename.multiple",{from:p.from,to:p.to},t,n)),n.abortEarly))return o();if(Object.prototype.hasOwnProperty.call(i,p.to)&&!p.options.override&&!h[p.to]&&(a.push(this.createError("object.rename.override",{from:p.from,to:p.to},t,n)),n.abortEarly))return o();void 0===i[p.from]?delete i[p.to]:i[p.to]=i[p.from],h[p.to]=!0,p.options.alias||delete i[p.from]}}if(!this._inner.children&&!this._inner.patterns.length&&!this._inner.dependencies.length)return o();var b=new Set(Object.keys(i));if(this._inner.children){for(var E=[],B=0;B<this._inner.children.length;++B){var C=this._inner.children[B],S=C.key,T=i[S];b.delete(S);var x={key:S,path:t.path.concat(S),parent:i,reference:t.reference},k=C.schema._validate(T,x,n);if(k.errors){if(a.push(this.createError("object.child",{key:S,child:C.schema._getLabel(S),reason:k.errors},x,n)),n.abortEarly)return o()}else C.schema._flags.strip||void 0===k.value&&k.value!==T?(E.push(S),i[S]=k.finalValue):void 0!==k.value&&(i[S]=k.value)}for(var I=0;I<E.length;++I)delete i[E[I]]}if(b.size&&this._inner.patterns.length){var F=!0,L=!1,D=void 0;try{for(var _,U=b[Symbol.iterator]();!(F=(_=U.next()).done);F=!0)for(var P=_.value,R={key:P,path:t.path.concat(P),parent:i,reference:t.reference},O=i[P],Q=0;Q<this._inner.patterns.length;++Q){var N=this._inner.patterns[Q];if(N.regex?N.regex.test(P):!N.schema.validate(P).error){b.delete(P);var M=N.rule._validate(O,R,n);if(M.errors&&(a.push(this.createError("object.child",{key:P,child:N.rule._getLabel(P),reason:M.errors},R,n)),n.abortEarly))return o();i[P]=M.value}}}catch(re){L=!0,D=re}finally{try{!F&&U.return&&U.return()}finally{if(L)throw D}}}if(b.size&&(this._inner.children||this._inner.patterns.length)){if(n.stripUnknown&&!0!==this._flags.allowUnknown||n.skipFunctions){var H=!(!n.stripUnknown||!0!==n.stripUnknown&&!n.stripUnknown.objects),j=!0,$=!1,K=void 0;try{for(var V,G=b[Symbol.iterator]();!(j=(V=G.next()).done);j=!0){var W=V.value;H?(delete i[W],b.delete(W)):"function"==typeof i[W]&&b.delete(W)}}catch(re){$=!0,K=re}finally{try{!j&&G.return&&G.return()}finally{if($)throw K}}}if(void 0!==this._flags.allowUnknown?!this._flags.allowUnknown:!n.allowUnknown){var z=!0,Y=!1,q=void 0;try{for(var X,J=b[Symbol.iterator]();!(z=(X=J.next()).done);z=!0){var Z=X.value;a.push(this.createError("object.allowUnknown",{child:Z},{key:Z,path:t.path.concat(Z)},n,{}))}}catch(re){Y=!0,q=re}finally{try{!z&&J.return&&J.return()}finally{if(Y)throw q}}}}for(var ee=0;ee<this._inner.dependencies.length;++ee){var te=this._inner.dependencies[ee],ne=c[te.type].call(this,null!==te.key&&i[te.key],te.peers,i,{key:te.key,path:null===te.key?t.path:t.path.concat(te.key)},n);if(ne instanceof A.Err&&(a.push(ne),n.abortEarly))return o()}return o()},t.prototype.keys=function(e){s.assert(null==e||"object"===(void 0===e?"undefined":r(e)),"Object schema must be a valid object"),s.assert(!(e&&e instanceof o),"Object schema cannot be a joi schema");var t=this.clone();if(!e)return t._inner.children=null,t;var n=Object.keys(e);if(!n.length)return t._inner.children=[],t;var i=new a;if(t._inner.children)for(var A=0;A<t._inner.children.length;++A){var c=t._inner.children[A];n.includes(c.key)||i.add(c,{after:c._refs,group:c.key})}for(var u=0;u<n.length;++u){var d=n[u],h=e[d];try{var f=l.schema(this._currentJoi,h);i.add({key:d,schema:f},{after:f._refs,group:d})}catch(p){throw p.hasOwnProperty("path")?p.path=d+"."+p.path:p.path=d,p}}return t._inner.children=i.nodes,t},t.prototype.append=function(e){return null==e||0===Object.keys(e).length?this:this.keys(e)},t.prototype.unknown=function(e){var t=!1!==e;if(this._flags.allowUnknown===t)return this;var n=this.clone();return n._flags.allowUnknown=t,n},t.prototype.length=function(e){return s.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("length",e,function(t,n,r){return Object.keys(t).length===e?t:this.createError("object.length",{limit:e},n,r)})},t.prototype.min=function(e){return s.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("min",e,function(t,n,r){return Object.keys(t).length>=e?t:this.createError("object.min",{limit:e},n,r)})},t.prototype.max=function(e){return s.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("max",e,function(t,n,r){return Object.keys(t).length<=e?t:this.createError("object.max",{limit:e},n,r)})},t.prototype.pattern=function(e,t){var n=e instanceof RegExp;s.assert(n||e instanceof o,"pattern must be a regex or schema"),s.assert(void 0!==t,"Invalid rule"),n&&(e=new RegExp(e.source,e.ignoreCase?"i":void 0));try{t=l.schema(this._currentJoi,t)}catch(i){throw i.hasOwnProperty("path")&&(i.message=i.message+"("+i.path+")"),i}var r=this.clone();return n?r._inner.patterns.push({regex:e,rule:t}):r._inner.patterns.push({schema:e,rule:t}),r},t.prototype.schema=function(){return this._test("schema",null,function(e,t,n){return e instanceof o?e:this.createError("object.schema",null,t,n)})},t.prototype.with=function(e,t){return s.assert(2===arguments.length,"Invalid number of arguments, expected 2."),this._dependency("with",e,t)},t.prototype.without=function(e,t){return s.assert(2===arguments.length,"Invalid number of arguments, expected 2."),this._dependency("without",e,t)},t.prototype.xor=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=s.flatten(t),this._dependency("xor",null,t)},t.prototype.or=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=s.flatten(t),this._dependency("or",null,t)},t.prototype.and=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=s.flatten(t),this._dependency("and",null,t)},t.prototype.nand=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=s.flatten(t),this._dependency("nand",null,t)},t.prototype.requiredKeys=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=s.flatten(t),this.applyFunctionToChildren(t,"required")},t.prototype.optionalKeys=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=s.flatten(t),this.applyFunctionToChildren(t,"optional")},t.prototype.forbiddenKeys=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=s.flatten(t),this.applyFunctionToChildren(t,"forbidden")},t.prototype.rename=function(e,t,n){s.assert("string"==typeof e||e instanceof RegExp,"Rename missing the from argument"),s.assert("string"==typeof t,"Rename missing the to argument"),s.assert(t!==e,"Cannot rename key to same name:",e);for(var r=0;r<this._inner.renames.length;++r)s.assert(this._inner.renames[r].from!==e,"Cannot rename the same key multiple times");var i=this.clone();return i._inner.renames.push({from:e,to:t,options:s.applyToDefaults(c.renameDefaults,n||{}),isRegExp:e instanceof RegExp}),i},t.prototype.applyFunctionToChildren=function(e,t,n,r){e=[].concat(e),s.assert(e.length>0,"expected at least one children");var i=c.groupChildren(e),a=void 0;if(""in i?(a=this[t].apply(this,n),delete i[""]):a=this.clone(),a._inner.children){r=r?r+".":"";for(var o=0;o<a._inner.children.length;++o){var A=a._inner.children[o],l=i[A.key];l&&(a._inner.children[o]={key:A.key,_refs:A._refs,schema:A.schema.applyFunctionToChildren(l,t,n,r+A.key)},delete i[A.key])}}var u=Object.keys(i);return s.assert(0===u.length,"unknown key(s)",u.join(", ")),a},t.prototype._dependency=function(e,t,n){n=[].concat(n);for(var r=0;r<n.length;++r)s.assert("string"==typeof n[r],e,"peers must be a string or array of strings");var i=this.clone();return i._inner.dependencies.push({type:e,key:t,peers:n}),i},t.prototype.describe=function(e){var t=o.prototype.describe.call(this);if(t.rules)for(var n=0;n<t.rules.length;++n){var i=t.rules[n];i.arg&&"object"===r(i.arg)&&i.arg.schema&&i.arg.ref&&(i.arg={schema:i.arg.schema.describe(),ref:i.arg.ref.toString()})}if(this._inner.children&&!e){t.children={};for(var a=0;a<this._inner.children.length;++a){var A=this._inner.children[a];t.children[A.key]=A.schema.describe()}}if(this._inner.dependencies.length&&(t.dependencies=s.clone(this._inner.dependencies)),this._inner.patterns.length){t.patterns=[];for(var l=0;l<this._inner.patterns.length;++l){var c=this._inner.patterns[l];c.regex?t.patterns.push({regex:c.regex.toString(),rule:c.rule.describe()}):t.patterns.push({schema:c.schema.describe(),rule:c.rule.describe()})}}return this._inner.renames.length>0&&(t.renames=s.clone(this._inner.renames)),t},t.prototype.assert=function(e,t,n){e=l.ref(e),s.assert(e.isContext||e.depth>1,"Cannot use assertions for root level references - use direct key rules instead"),n=n||"pass the assertion test";try{t=l.schema(this._currentJoi,t)}catch(a){throw a.hasOwnProperty("path")&&(a.message=a.message+"("+a.path+")"),a}var r=e.path[e.path.length-1],i=e.path.join(".");return this._test("assert",{schema:t,ref:e},function(a,o,A){if(!t._validate(e(a),null,A,a).errors)return a;var l=s.merge({},o);return l.key=r,l.path=e.path,this.createError("object.assert",{ref:i,message:n},l,A)})},t.prototype.type=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.name;s.assert("function"==typeof e,"type must be a constructor function");var n={name:t,ctor:e};return this._test("type",n,function(t,r,i){return t instanceof e?t:this.createError("object.type",{type:n.name},r,i)})},t}(o),c.safeParse=function(e){try{return JSON.parse(e)}catch(t){}return e},c.renameDefaults={alias:!1,multiple:!1,override:!1},c.groupChildren=function(e){e.sort();for(var t={},n=0;n<e.length;++n){var r=e[n];s.assert("string"==typeof r,"children must be strings");var i=r.split(".")[0];(t[i]=t[i]||[]).push(r.substring(i.length+1))}return t},c.keysToLabels=function(e,t){var n=e._inner.children;if(!n)return t;var r=function(e){var t=n.find(function(t){return t.key===e});return t?t.schema._getLabel(e):e};return Array.isArray(t)?t.map(r):r(t)},c.with=function(e,t,n,r,i){if(void 0===e)return e;for(var s=0;s<t.length;++s){var a=t[s];if(!Object.prototype.hasOwnProperty.call(n,a)||void 0===n[a])return this.createError("object.with",{main:r.key,mainWithLabel:c.keysToLabels(this,r.key),peer:a,peerWithLabel:c.keysToLabels(this,a)},r,i)}return e},c.without=function(e,t,n,r,i){if(void 0===e)return e;for(var s=0;s<t.length;++s){var a=t[s];if(Object.prototype.hasOwnProperty.call(n,a)&&void 0!==n[a])return this.createError("object.without",{main:r.key,mainWithLabel:c.keysToLabels(this,r.key),peer:a,peerWithLabel:c.keysToLabels(this,a)},r,i)}return e},c.xor=function(e,t,n,r,i){for(var s=[],a=0;a<t.length;++a){var o=t[a];Object.prototype.hasOwnProperty.call(n,o)&&void 0!==n[o]&&s.push(o)}if(1===s.length)return e;var A={peers:t,peersWithLabels:c.keysToLabels(this,t)};return 0===s.length?this.createError("object.missing",A,r,i):this.createError("object.xor",A,r,i)},c.or=function(e,t,n,r,i){for(var s=0;s<t.length;++s){var a=t[s];if(Object.prototype.hasOwnProperty.call(n,a)&&void 0!==n[a])return e}return this.createError("object.missing",{peers:t,peersWithLabels:c.keysToLabels(this,t)},r,i)},c.and=function(e,t,n,r,i){for(var s=[],a=[],o=t.length,A=0;A<o;++A){var l=t[A];Object.prototype.hasOwnProperty.call(n,l)&&void 0!==n[l]?a.push(l):s.push(l)}if(s.length!==o&&a.length!==o)return this.createError("object.and",{present:a,presentWithLabels:c.keysToLabels(this,a),missing:s,missingWithLabels:c.keysToLabels(this,s)},r,i)},c.nand=function(e,t,n,r,i){for(var a=[],o=0;o<t.length;++o){var A=t[o];Object.prototype.hasOwnProperty.call(n,A)&&void 0!==n[A]&&a.push(A)}var l=s.clone(t),u=l.splice(0,1)[0];return a.length===t.length?this.createError("object.nand",{main:u,mainWithLabel:c.keysToLabels(this,u),peers:l,peersWithLabels:c.keysToLabels(this,l)},r,i):null},e.exports=new c.Object},function(e,t,n){var r={rfc3986:{},generate:function(){var e="|",t="0-9",n="[0-9]",i="a-zA-Z",s="["+i+"]";r.rfc3986.ipv4Cidr=n+e+"[1-2]"+n+"|3[0-2]",r.rfc3986.ipv6Cidr="(?:0?0?[0-9]|0?[1-9][0-9]|1[01][0-9]|12[0-8])";var a=t+"A-Fa-f",o="["+a+"]",A=i+t+"-\\._~",l="!\\$&'\\(\\)\\*\\+,;=",c="%"+a,u=A+c+l+":@",d="["+u+"]",h="(?:0?0?[0-9]|0?[1-9][0-9]|1"+n+n+"|2[0-4]"+n+"|25[0-5])";r.rfc3986.IPv4address="(?:"+h+"\\.){3}"+h;var f=o+"{1,4}",p="(?:"+f+":"+f+"|"+r.rfc3986.IPv4address+")",g="(?:"+f+":){6}"+p,m="::(?:"+f+":){5}"+p,y="(?:"+f+")?::(?:"+f+":){4}"+p,v="(?:(?:"+f+":){0,1}"+f+")?::(?:"+f+":){3}"+p,w="(?:(?:"+f+":){0,2}"+f+")?::(?:"+f+":){2}"+p,b="(?:(?:"+f+":){0,3}"+f+")?::"+f+":"+p,E="(?:(?:"+f+":){0,4}"+f+")?::"+p,B="(?:(?:"+f+":){0,5}"+f+")?::"+f,C="(?:(?:"+f+":){0,6}"+f+")?::";r.rfc3986.IPv6address="(?:"+g+e+m+e+y+e+v+e+w+e+b+e+E+e+B+e+C+")",r.rfc3986.IPvFuture="v"+o+"+\\.["+A+l+":]+",r.rfc3986.scheme=s+"["+i+t+"+-\\.]*";var S="["+A+c+l+"]{0,255}",T="(?:["+A+c+l+":]*@)?(?:\\[(?:"+r.rfc3986.IPv6address+e+r.rfc3986.IPvFuture+")\\]"+e+r.rfc3986.IPv4address+e+S+")(?::"+n+"*)?",x=d+"+",k="(?:\\/"+d+"*)*",I="\\/(?:"+x+k+")?",F=x+k,L="["+A+c+l+"@]+"+k;r.rfc3986.hierPart="(?:(?:\\/\\/"+T+k+")"+e+I+e+F+")",r.rfc3986.relativeRef="(?:(?:\\/\\/"+T+k+")"+e+I+e+L+"|)",r.rfc3986.query="["+u+"\\/\\?]*(?=#|$)",r.rfc3986.fragment="["+u+"\\/\\?]*"}};r.generate(),e.exports=r.rfc3986},function(e,t){},function(e,t,n){(function(e,r){var i=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,s=r.length,a=String(e).replace(i,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),A=r[n];n<s;A=r[++n])p(A)||!w(A)?a+=" "+A:a+=" "+o(A);return a},t.deprecate=function(n,i){if(y(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var s=!1;return function(){if(!s){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),s=!0}return n.apply(this,arguments)}};var s,a={};function o(e,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(n)?r.showHidden=n:n&&t._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=A),c(r,e,r.depth)}function A(e,t){var n=o.styles[t];return n?"["+o.colors[n][0]+"m"+e+"["+o.colors[n][1]+"m":e}function l(e,t){return e}function c(e,n,r){if(e.customInspect&&n&&B(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return m(i)||(i=c(e,i,r)),i}var s=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(m(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return g(t)?e.stylize(""+t,"number"):f(t)?e.stylize(""+t,"boolean"):p(t)?e.stylize("null","null"):void 0}(e,n);if(s)return s;var a=Object.keys(n),o=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),E(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return u(n);if(0===a.length){if(B(n)){var A=n.name?": "+n.name:"";return e.stylize("[Function"+A+"]","special")}if(v(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(b(n))return e.stylize(Date.prototype.toString.call(n),"date");if(E(n))return u(n)}var l,w="",C=!1,S=["{","}"];return h(n)&&(C=!0,S=["[","]"]),B(n)&&(w=" [Function"+(n.name?": "+n.name:"")+"]"),v(n)&&(w=" "+RegExp.prototype.toString.call(n)),b(n)&&(w=" "+Date.prototype.toUTCString.call(n)),E(n)&&(w=" "+u(n)),0!==a.length||C&&0!=n.length?r<0?v(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=C?function(e,t,n,r,i){for(var s=[],a=0,o=t.length;a<o;++a)x(t,String(a))?s.push(d(e,t,n,r,String(a),!0)):s.push("");return i.forEach(function(i){i.match(/^\d+$/)||s.push(d(e,t,n,r,i,!0))}),s}(e,n,r,o,a):a.map(function(t){return d(e,n,r,o,t,C)}),e.seen.pop(),function(e,t,n){var r=e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(l,w,S)):S[0]+w+S[1]}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i,s){var a,o,A;if((A=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?o=A.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):A.set&&(o=e.stylize("[Setter]","special")),x(r,i)||(a="["+i+"]"),o||(e.seen.indexOf(A.value)<0?(o=p(n)?c(e,A.value,null):c(e,A.value,n-1)).indexOf("\n")>-1&&(o=s?o.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+o.split("\n").map(function(e){return"   "+e}).join("\n")):o=e.stylize("[Circular]","special")),y(a)){if(s&&i.match(/^\d+$/))return o;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+o}function h(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function p(e){return null===e}function g(e){return"number"==typeof e}function m(e){return"string"==typeof e}function y(e){return void 0===e}function v(e){return w(e)&&"[object RegExp]"===C(e)}function w(e){return"object"==typeof e&&null!==e}function b(e){return w(e)&&"[object Date]"===C(e)}function E(e){return w(e)&&("[object Error]"===C(e)||e instanceof Error)}function B(e){return"function"==typeof e}function C(e){return Object.prototype.toString.call(e)}function S(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(y(s)&&(s=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(s)){var n=r.pid;a[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else a[e]=function(){};return a[e]},t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=f,t.isNull=p,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=m,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=y,t.isRegExp=v,t.isObject=w,t.isDate=b,t.isError=E,t.isFunction=B,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(40);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function x(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(n=[S((e=new Date).getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":"),[e.getDate(),T[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n(39),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,n(5),n(7))},function(e,t,n){(function(t){
/*!
               * The buffer module from node.js, for the browser.
               *
               * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
               * @license  MIT
               */
function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function i(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var s=n(16),a=Object.prototype.hasOwnProperty,o=Array.prototype.slice,A="foo"===function(){}.name;function l(e){return Object.prototype.toString.call(e)}function c(e){return!i(e)&&"function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}var u=e.exports=m,d=/\s*function\s+([^\(\s]*)\s*/;function h(e){if(s.isFunction(e)){if(A)return e.name;var t=e.toString().match(d);return t&&t[1]}}function f(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function p(e){if(A||!s.isFunction(e))return s.inspect(e);var t=h(e);return"[Function"+(t?": "+t:"")+"]"}function g(e,t,n,r,i){throw new u.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function m(e,t){e||g(e,!0,t,"==",u.ok)}function y(e,t,n,a){if(e===t)return!0;if(i(e)&&i(t))return 0===r(e,t);if(s.isDate(e)&&s.isDate(t))return e.getTime()===t.getTime();if(s.isRegExp(e)&&s.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(c(e)&&c(t)&&l(e)===l(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;var A=(a=a||{actual:[],expected:[]}).actual.indexOf(e);return-1!==A&&A===a.expected.indexOf(t)||(a.actual.push(e),a.expected.push(t),function(e,t,n,r){if(null==e||null==t)return!1;if(s.isPrimitive(e)||s.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=v(e),a=v(t);if(i&&!a||!i&&a)return!1;if(i)return y(e=o.call(e),t=o.call(t),n);var A,l,c=E(e),u=E(t);if(c.length!==u.length)return!1;for(c.sort(),u.sort(),l=c.length-1;l>=0;l--)if(c[l]!==u[l])return!1;for(l=c.length-1;l>=0;l--)if(!y(e[A=c[l]],t[A],n,r))return!1;return!0}(e,t,n,a))}return n?e===t:e==t}function v(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function w(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(c$){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function b(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(c$){t=c$}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&g(i,n,"Missing expected exception"+r);var a="string"==typeof r,o=!e&&i&&!n;if((!e&&s.isError(i)&&a&&w(i,n)||o)&&g(i,n,"Got unwanted exception"+r),e&&i&&n&&!w(i,n)||!e&&i)throw i}u.AssertionError=function(e){var t;this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=f(p((t=this).actual),128)+" "+t.operator+" "+f(p(t.expected),128),this.generatedMessage=!0);var n=e.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var i=r.stack,s=h(n),a=i.indexOf("\n"+s);if(a>=0){var o=i.indexOf("\n",a+1);i=i.substring(o+1)}this.stack=i}}},s.inherits(u.AssertionError,Error),u.fail=g,u.ok=m,u.equal=function(e,t,n){e!=t&&g(e,t,n,"==",u.equal)},u.notEqual=function(e,t,n){e==t&&g(e,t,n,"!=",u.notEqual)},u.deepEqual=function(e,t,n){y(e,t,!1)||g(e,t,n,"deepEqual",u.deepEqual)},u.deepStrictEqual=function(e,t,n){y(e,t,!0)||g(e,t,n,"deepStrictEqual",u.deepStrictEqual)},u.notDeepEqual=function(e,t,n){y(e,t,!1)&&g(e,t,n,"notDeepEqual",u.notDeepEqual)},u.notDeepStrictEqual=function e(t,n,r){y(t,n,!0)&&g(t,n,r,"notDeepStrictEqual",e)},u.strictEqual=function(e,t,n){e!==t&&g(e,t,n,"===",u.strictEqual)},u.notStrictEqual=function(e,t,n){e===t&&g(e,t,n,"!==",u.notStrictEqual)},u.throws=function(e,t,n){b(!0,e,t,n)},u.doesNotThrow=function(e,t,n){b(!1,e,t,n)},u.ifError=function(e){if(e)throw e};var E=Object.keys||function(e){var t=[];for(var n in e)a.call(e,n)&&t.push(n);return t}}).call(t,n(5))},function(e,t,n){(function(e){var n={};t.escapeJavaScript=function(e){if(!e)return"";for(var t="",r=0;r<e.length;++r){var i=e.charCodeAt(r);n.isSafe(i)?t+=e[r]:t+=n.escapeJavaScriptChar(i)}return t},t.escapeHtml=function(e){if(!e)return"";for(var t="",r=0;r<e.length;++r){var i=e.charCodeAt(r);n.isSafe(i)?t+=e[r]:t+=n.escapeHtmlChar(i)}return t},t.escapeJson=function(e){if(!e)return"";var t=void 0;return e.replace(/[<>&\u2028\u2029]/g,function(e){return 60===(t=e.charCodeAt(0))?"\\u003c":62===t?"\\u003e":38===t?"\\u0026":8232===t?"\\u2028":"\\u2029"})},n.escapeJavaScriptChar=function(t){if(t>=256)return"\\u"+n.padLeft(""+t,4);var r=e.from(String.fromCharCode(t),"ascii").toString("hex");return"\\x"+n.padLeft(r,2)},n.escapeHtmlChar=function(t){var r=n.namedHtml[t];if(void 0!==r)return r;if(t>=256)return"&#"+t+";";var i=e.from(String.fromCharCode(t),"ascii").toString("hex");return"&#x"+n.padLeft(i,2)+";"},n.padLeft=function(e,t){for(;e.length<t;)e="0"+e;return e},n.isSafe=function(e){return void 0!==n.safeCharCodes[e]},n.namedHtml={38:"&amp;",60:"&lt;",62:"&gt;",34:"&quot;",160:"&nbsp;",162:"&cent;",163:"&pound;",164:"&curren;",169:"&copy;",174:"&reg;"},n.safeCharCodes=function(){for(var e={},t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&(e[t]=null);return e}()}).call(t,n(3).Buffer)},function(e,t,n){(function(e){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(38),s={hasOwn:Object.prototype.hasOwnProperty,indexOf:Array.prototype.indexOf,defaultThreshold:16,maxIPv6Groups:8,categories:{valid:1,dnsWarn:7,rfc5321:15,cfws:31,deprecated:63,rfc5322:127,error:255},diagnoses:{valid:0,rfc5321TLD:9,rfc5321TLDNumeric:10,rfc5321QuotedString:11,rfc5321AddressLiteral:12,cfwsComment:17,cfwsFWS:18,undesiredNonAscii:25,deprecatedLocalPart:33,deprecatedFWS:34,deprecatedQTEXT:35,deprecatedQP:36,deprecatedComment:37,deprecatedCTEXT:38,deprecatedIPv6:39,deprecatedCFWSNearAt:49,rfc5322Domain:65,rfc5322TooLong:66,rfc5322LocalTooLong:67,rfc5322DomainTooLong:68,rfc5322LabelTooLong:69,rfc5322DomainLiteral:70,rfc5322DomainLiteralOBSDText:71,rfc5322IPv6GroupCount:72,rfc5322IPv62x2xColon:73,rfc5322IPv6BadCharacter:74,rfc5322IPv6MaxGroups:75,rfc5322IPv6ColonStart:76,rfc5322IPv6ColonEnd:77,errExpectingDTEXT:129,errNoLocalPart:130,errNoDomain:131,errConsecutiveDots:132,errATEXTAfterCFWS:133,errATEXTAfterQS:134,errATEXTAfterDomainLiteral:135,errExpectingQPair:136,errExpectingATEXT:137,errExpectingQTEXT:138,errExpectingCTEXT:139,errBackslashEnd:140,errDotStart:141,errDotEnd:142,errDomainHyphenStart:143,errDomainHyphenEnd:144,errUnclosedQuotedString:145,errUnclosedComment:146,errUnclosedDomainLiteral:147,errFWSCRLFx2:148,errFWSCRLFEnd:149,errCRNoLF:150,errUnknownTLD:160,errDomainTooShort:161},components:{localpart:0,domain:1,literal:2,contextComment:3,contextFWS:4,contextQuotedString:5,contextQuotedPair:6}};s.specials=function(){var e='()<>[]:;@\\,."',t=new Array(256);t.fill(!1);for(var n=0;n<13;++n)t[e.codePointAt(n)]=!0;return function(e){return t[e]}}(),s.c0Controls=function(){var e=new Array(256);e.fill(!1);for(var t=0;t<33;++t)e[t]=!0;return function(t){return e[t]}}(),s.c1Controls=function(){var e=new Array(256);e.fill(!1);for(var t=127;t<160;++t)e[t]=!0;return function(t){return e[t]}}(),s.regex={ipV4:/\b(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipV6:/^[a-fA-F\d]{0,4}$/},s.normalizeSupportsNul="\0"==="\0".normalize("NFC"),s.nulNormalize=function(e){return e.split("\0").map(function(e){return e.normalize("NFC")}).join("\0")},s.normalize=function(e){return!s.normalizeSupportsNul&&e.indexOf("\0")>=0?s.nulNormalize(e):e.normalize("NFC")},s.checkIpV6=function(e){return e.every(function(e){return s.regex.ipV6.test(e)})},s.validDomain=function(e,t){return t.tldBlacklist?Array.isArray(t.tldBlacklist)?-1===s.indexOf.call(t.tldBlacklist,e):!s.hasOwn.call(t.tldBlacklist,e):Array.isArray(t.tldWhitelist)?-1!==s.indexOf.call(t.tldWhitelist,e):s.hasOwn.call(t.tldWhitelist,e)},t.validate=s.validate=function(t,n,a){n=n||{},t=s.normalize(t),"function"==typeof n&&(a=n,n={}),"function"!=typeof a&&(a=null);var o=void 0,A=void 0;if("number"==typeof n.errorLevel?(o=!0,A=n.errorLevel):(o=!!n.errorLevel,A=s.diagnoses.valid),n.tldWhitelist)if("string"==typeof n.tldWhitelist)n.tldWhitelist=[n.tldWhitelist];else if("object"!==r(n.tldWhitelist))throw new TypeError("expected array or object tldWhitelist");if(n.tldBlacklist)if("string"==typeof n.tldBlacklist)n.tldBlacklist=[n.tldBlacklist];else if("object"!==r(n.tldBlacklist))throw new TypeError("expected array or object tldBlacklist");if(n.minDomainAtoms&&(n.minDomainAtoms!==(0|+n.minDomainAtoms)||n.minDomainAtoms<0))throw new TypeError("expected positive integer minDomainAtoms");var l=s.diagnoses.valid,c=function(e){e>l&&(l=e)};void 0!==n.allowUnicode&&!n.allowUnicode&&/[^\x00-\x7f]/.test(t)&&c(s.diagnoses.undesiredNonAscii);for(var u={now:s.components.localpart,prev:s.components.localpart,stack:[s.components.localpart]},d="",h={local:"",domain:""},f={locals:[""],domains:[""]},p=0,g=0,m=0,y=void 0,v=!1,w=!1,b=t.length,E=void 0,B=0;B<b;B+=E.length){switch(E=String.fromCodePoint(t.codePointAt(B)),u.now){case s.components.localpart:switch(E){case"(":0===g?c(0===p?s.diagnoses.cfwsComment:s.diagnoses.deprecatedComment):(c(s.diagnoses.cfwsComment),w=!0),u.stack.push(u.now),u.now=s.components.contextComment;break;case".":0===g?c(0===p?s.diagnoses.errDotStart:s.diagnoses.errConsecutiveDots):(w&&c(s.diagnoses.deprecatedLocalPart),w=!1,g=0,++p,h.local+=E,f.locals[p]="");break;case'"':0===g?(c(0===p?s.diagnoses.rfc5321QuotedString:s.diagnoses.deprecatedLocalPart),h.local+=E,f.locals[p]+=E,g+=e.byteLength(E,"utf8"),w=!0,u.stack.push(u.now),u.now=s.components.contextQuotedString):c(s.diagnoses.errExpectingATEXT);break;case"\r":if(b===++B||"\n"!==t[B]){c(s.diagnoses.errCRNoLF);break}case" ":case"\t":0===g?c(0===p?s.diagnoses.cfwsFWS:s.diagnoses.deprecatedFWS):w=!0,u.stack.push(u.now),u.now=s.components.contextFWS,d=E;break;case"@":if(1!==u.stack.length)throw new Error("unexpected item on context stack");0===h.local.length?c(s.diagnoses.errNoLocalPart):0===g?c(s.diagnoses.errDotEnd):e.byteLength(h.local,"utf8")>64?c(s.diagnoses.rfc5322LocalTooLong):u.prev!==s.components.contextComment&&u.prev!==s.components.contextFWS||c(s.diagnoses.deprecatedCFWSNearAt),u.now=s.components.domain,u.stack[0]=s.components.domain,p=0,g=0,w=!1;break;default:if(w)switch(u.prev){case s.components.contextComment:case s.components.contextFWS:c(s.diagnoses.errATEXTAfterCFWS);break;case s.components.contextQuotedString:c(s.diagnoses.errATEXTAfterQS);break;default:throw new Error("more atext found where none is allowed, but unrecognized prev context: "+u.prev)}else u.prev=u.now,y=E.codePointAt(0),(s.specials(y)||s.c0Controls(y)||s.c1Controls(y))&&c(s.diagnoses.errExpectingATEXT),h.local+=E,f.locals[p]+=E,g+=e.byteLength(E,"utf8")}break;case s.components.domain:switch(E){case"(":0===g?c(0===p?s.diagnoses.deprecatedCFWSNearAt:s.diagnoses.deprecatedComment):(w=!0,c(s.diagnoses.cfwsComment)),u.stack.push(u.now),u.now=s.components.contextComment;break;case".":var C=i.encode(f.domains[p]).length;0===g?c(0===p?s.diagnoses.errDotStart:s.diagnoses.errConsecutiveDots):v?c(s.diagnoses.errDomainHyphenEnd):C>63&&c(s.diagnoses.rfc5322LabelTooLong),w=!1,g=0,++p,f.domains[p]="",h.domain+=E;break;case"[":0===h.domain.length?(w=!0,g+=e.byteLength(E,"utf8"),u.stack.push(u.now),u.now=s.components.literal,h.domain+=E,f.domains[p]+=E,h.literal=""):c(s.diagnoses.errExpectingATEXT);break;case"\r":if(b===++B||"\n"!==t[B]){c(s.diagnoses.errCRNoLF);break}case" ":case"\t":0===g?c(0===p?s.diagnoses.deprecatedCFWSNearAt:s.diagnoses.deprecatedFWS):(c(s.diagnoses.cfwsFWS),w=!0),u.stack.push(u.now),u.now=s.components.contextFWS,d=E;break;default:if(w)switch(u.prev){case s.components.contextComment:case s.components.contextFWS:c(s.diagnoses.errATEXTAfterCFWS);break;case s.components.literal:c(s.diagnoses.errATEXTAfterDomainLiteral);break;default:throw new Error("more atext found where none is allowed, but unrecognized prev context: "+u.prev)}y=E.codePointAt(0),v=!1,s.specials(y)||s.c0Controls(y)||s.c1Controls(y)?c(s.diagnoses.errExpectingATEXT):"-"===E?(0===g&&c(s.diagnoses.errDomainHyphenStart),v=!0):(y<48||y>122&&y<192||y>57&&y<65||y>90&&y<97)&&c(s.diagnoses.rfc5322Domain),h.domain+=E,f.domains[p]+=E,g+=e.byteLength(E,"utf8")}break;case s.components.literal:switch(E){case"]":if(l<s.categories.deprecated){var S=-1,T=h.literal,x=s.regex.ipV4.exec(T);if(x&&0!==(S=x.index)&&(T=T.slice(0,S)+"0:0"),0===S)c(s.diagnoses.rfc5321AddressLiteral);else if("ipv6:"!==T.slice(0,5).toLowerCase())c(s.diagnoses.rfc5322DomainLiteral);else{var k=T.slice(5),I=s.maxIPv6Groups,F=k.split(":");~(S=k.indexOf("::"))?S!==k.lastIndexOf("::")?c(s.diagnoses.rfc5322IPv62x2xColon):(0!==S&&S!==k.length-2||++I,F.length>I?c(s.diagnoses.rfc5322IPv6MaxGroups):F.length===I&&c(s.diagnoses.deprecatedIPv6)):F.length!==I&&c(s.diagnoses.rfc5322IPv6GroupCount),":"===k[0]&&":"!==k[1]?c(s.diagnoses.rfc5322IPv6ColonStart):":"===k[k.length-1]&&":"!==k[k.length-2]?c(s.diagnoses.rfc5322IPv6ColonEnd):s.checkIpV6(F)?c(s.diagnoses.rfc5321AddressLiteral):c(s.diagnoses.rfc5322IPv6BadCharacter)}}else c(s.diagnoses.rfc5322DomainLiteral);h.domain+=E,f.domains[p]+=E,g+=e.byteLength(E,"utf8"),u.prev=u.now,u.now=u.stack.pop();break;case"\\":c(s.diagnoses.rfc5322DomainLiteralOBSDText),u.stack.push(u.now),u.now=s.components.contextQuotedPair;break;case"\r":if(b===++B||"\n"!==t[B]){c(s.diagnoses.errCRNoLF);break}case" ":case"\t":c(s.diagnoses.cfwsFWS),u.stack.push(u.now),u.now=s.components.contextFWS,d=E;break;default:if(127!==(y=E.codePointAt(0))&&s.c1Controls(y)||0===y||"["===E){c(s.diagnoses.errExpectingDTEXT);break}(s.c0Controls(y)||127===y)&&c(s.diagnoses.rfc5322DomainLiteralOBSDText),h.literal+=E,h.domain+=E,f.domains[p]+=E,g+=e.byteLength(E,"utf8")}break;case s.components.contextQuotedString:switch(E){case"\\":u.stack.push(u.now),u.now=s.components.contextQuotedPair;break;case"\r":if(b===++B||"\n"!==t[B]){c(s.diagnoses.errCRNoLF);break}case"\t":h.local+=" ",f.locals[p]+=" ",g+=e.byteLength(E,"utf8"),c(s.diagnoses.cfwsFWS),u.stack.push(u.now),u.now=s.components.contextFWS,d=E;break;case'"':h.local+=E,f.locals[p]+=E,g+=e.byteLength(E,"utf8"),u.prev=u.now,u.now=u.stack.pop();break;default:127!==(y=E.codePointAt(0))&&s.c1Controls(y)||0===y||10===y?c(s.diagnoses.errExpectingQTEXT):(s.c0Controls(y)||127===y)&&c(s.diagnoses.deprecatedQTEXT),h.local+=E,f.locals[p]+=E,g+=e.byteLength(E,"utf8")}break;case s.components.contextQuotedPair:127!==(y=E.codePointAt(0))&&s.c1Controls(y)?c(s.diagnoses.errExpectingQPair):(y<31&&9!==y||127===y)&&c(s.diagnoses.deprecatedQP),u.prev=u.now,u.now=u.stack.pop();var L="\\"+E;switch(u.now){case s.components.contextComment:break;case s.components.contextQuotedString:h.local+=L,f.locals[p]+=L,g+=2;break;case s.components.literal:h.domain+=L,f.domains[p]+=L,g+=2;break;default:throw new Error("quoted pair logic invoked in an invalid context: "+u.now)}break;case s.components.contextComment:switch(E){case"(":u.stack.push(u.now),u.now=s.components.contextComment;break;case")":u.prev=u.now,u.now=u.stack.pop();break;case"\\":u.stack.push(u.now),u.now=s.components.contextQuotedPair;break;case"\r":if(b===++B||"\n"!==t[B]){c(s.diagnoses.errCRNoLF);break}case" ":case"\t":c(s.diagnoses.cfwsFWS),u.stack.push(u.now),u.now=s.components.contextFWS,d=E;break;default:if(0===(y=E.codePointAt(0))||10===y||127!==y&&s.c1Controls(y)){c(s.diagnoses.errExpectingCTEXT);break}(s.c0Controls(y)||127===y)&&c(s.diagnoses.deprecatedCTEXT)}break;case s.components.contextFWS:if("\r"===d){if("\r"===E){c(s.diagnoses.errFWSCRLFx2);break}++m>1?c(s.diagnoses.deprecatedFWS):m=1}switch(E){case"\r":b!==++B&&"\n"===t[B]||c(s.diagnoses.errCRNoLF);break;case" ":case"\t":break;default:"\r"===d&&c(s.diagnoses.errFWSCRLFEnd),m=0,u.prev=u.now,u.now=u.stack.pop(),--B}d=E;break;default:throw new Error("unknown context: "+u.now)}if(l>s.categories.rfc5322)break}if(l<s.categories.rfc5322){var D=i.encode(h.domain).length;if(u.now===s.components.contextQuotedString)c(s.diagnoses.errUnclosedQuotedString);else if(u.now===s.components.contextQuotedPair)c(s.diagnoses.errBackslashEnd);else if(u.now===s.components.contextComment)c(s.diagnoses.errUnclosedComment);else if(u.now===s.components.literal)c(s.diagnoses.errUnclosedDomainLiteral);else if("\r"===E)c(s.diagnoses.errFWSCRLFEnd);else if(0===h.domain.length)c(s.diagnoses.errNoDomain);else if(0===g)c(s.diagnoses.errDotEnd);else if(v)c(s.diagnoses.errDomainHyphenEnd);else if(D>255)c(s.diagnoses.rfc5322DomainTooLong);else if(e.byteLength(h.local,"utf8")+D+1>254)c(s.diagnoses.rfc5322TooLong);else if(g>63)c(s.diagnoses.rfc5322LabelTooLong);else if(n.minDomainAtoms&&f.domains.length<n.minDomainAtoms)c(s.diagnoses.errDomainTooShort);else if(n.tldWhitelist||n.tldBlacklist){var _=f.domains[p];s.validDomain(_,n)||c(s.diagnoses.errUnknownTLD)}}l<s.categories.dnsWarn&&f.domains[p].codePointAt(0)<=57&&c(s.diagnoses.rfc5321TLDNumeric),l<A&&(l=s.diagnoses.valid);var U=o?l:l<s.defaultThreshold;return a&&a(U),U},t.diagnoses=s.validate.diagnoses=function(){for(var e={},t=Object.keys(s.diagnoses),n=0;n<t.length;++n){var r=t[n];e[r]=s.diagnoses[r]}return e}(),t.normalize=s.normalize}).call(t,n(3).Buffer)},function(e,t,n){t.errors={root:"value",key:'"{{!label}}" ',messages:{wrapArrays:!0},any:{unknown:"is not allowed",invalid:"contains an invalid value",empty:"is not allowed to be empty",required:"is required",allowOnly:"must be one of {{valids}}",default:"threw an error when running default method"},alternatives:{base:"not matching any of the allowed alternatives",child:null},array:{base:"must be an array",includes:"at position {{pos}} does not match any of the allowed types",includesSingle:'single value of "{{!label}}" does not match any of the allowed types',includesOne:"at position {{pos}} fails because {{reason}}",includesOneSingle:'single value of "{{!label}}" fails because {{reason}}',includesRequiredUnknowns:"does not contain {{unknownMisses}} required value(s)",includesRequiredKnowns:"does not contain {{knownMisses}}",includesRequiredBoth:"does not contain {{knownMisses}} and {{unknownMisses}} other required value(s)",excludes:"at position {{pos}} contains an excluded value",excludesSingle:'single value of "{{!label}}" contains an excluded value',min:"must contain at least {{limit}} items",max:"must contain less than or equal to {{limit}} items",length:"must contain {{limit}} items",ordered:"at position {{pos}} fails because {{reason}}",orderedLength:"at position {{pos}} fails because array must contain at most {{limit}} items",ref:'references "{{ref}}" which is not a positive integer',sparse:"must not be a sparse array",unique:"position {{pos}} contains a duplicate value"},boolean:{base:"must be a boolean"},binary:{base:"must be a buffer or a string",min:"must be at least {{limit}} bytes",max:"must be less than or equal to {{limit}} bytes",length:"must be {{limit}} bytes"},date:{base:"must be a number of milliseconds or valid date string",format:"must be a string with one of the following formats {{format}}",strict:"must be a valid date",min:'must be larger than or equal to "{{limit}}"',max:'must be less than or equal to "{{limit}}"',less:'must be less than "{{limit}}"',greater:'must be greater than "{{limit}}"',isoDate:"must be a valid ISO 8601 date",timestamp:{javascript:"must be a valid timestamp or number of milliseconds",unix:"must be a valid timestamp or number of seconds"},ref:'references "{{ref}}" which is not a date'},function:{base:"must be a Function",arity:"must have an arity of {{n}}",minArity:"must have an arity greater or equal to {{n}}",maxArity:"must have an arity lesser or equal to {{n}}",ref:"must be a Joi reference",class:"must be a class"},lazy:{base:"!!schema error: lazy schema must be set",schema:"!!schema error: lazy schema function must return a schema"},object:{base:"must be an object",child:'!!child "{{!child}}" fails because {{reason}}',min:"must have at least {{limit}} children",max:"must have less than or equal to {{limit}} children",length:"must have {{limit}} children",allowUnknown:'!!"{{!child}}" is not allowed',with:'!!"{{mainWithLabel}}" missing required peer "{{peerWithLabel}}"',without:'!!"{{mainWithLabel}}" conflict with forbidden peer "{{peerWithLabel}}"',missing:"must contain at least one of {{peersWithLabels}}",xor:"contains a conflict between exclusive peers {{peersWithLabels}}",or:"must contain at least one of {{peersWithLabels}}",and:"contains {{presentWithLabels}} without its required peers {{missingWithLabels}}",nand:'!!"{{mainWithLabel}}" must not exist simultaneously with {{peersWithLabels}}',assert:'!!"{{ref}}" validation failed because "{{ref}}" failed to {{message}}',rename:{multiple:'cannot rename child "{{from}}" because multiple renames are disabled and another key was already renamed to "{{to}}"',override:'cannot rename child "{{from}}" because override is disabled and target "{{to}}" exists',regex:{multiple:'cannot rename children {{from}} because multiple renames are disabled and another key was already renamed to "{{to}}"',override:'cannot rename children {{from}} because override is disabled and target "{{to}}" exists'}},type:'must be an instance of "{{type}}"',schema:"must be a Joi instance"},number:{base:"must be a number",min:"must be larger than or equal to {{limit}}",max:"must be less than or equal to {{limit}}",less:"must be less than {{limit}}",greater:"must be greater than {{limit}}",float:"must be a float or double",integer:"must be an integer",negative:"must be a negative number",positive:"must be a positive number",precision:"must have no more than {{limit}} decimal places",ref:'references "{{ref}}" which is not a number',multiple:"must be a multiple of {{multiple}}",port:"must be a valid port"},string:{base:"must be a string",min:"length must be at least {{limit}} characters long",max:"length must be less than or equal to {{limit}} characters long",length:"length must be {{limit}} characters long",alphanum:"must only contain alpha-numeric characters",token:"must only contain alpha-numeric and underscore characters",regex:{base:'with value "{{!value}}" fails to match the required pattern: {{pattern}}',name:'with value "{{!value}}" fails to match the {{name}} pattern',invert:{base:'with value "{{!value}}" matches the inverted pattern: {{pattern}}',name:'with value "{{!value}}" matches the inverted {{name}} pattern'}},email:"must be a valid email",uri:"must be a valid uri",uriRelativeOnly:"must be a valid relative uri",uriCustomScheme:"must be a valid uri with a scheme matching the {{scheme}} pattern",isoDate:"must be a valid ISO 8601 date",guid:"must be a valid GUID",hex:"must only contain hexadecimal characters",hexAlign:"hex decoded representation must be byte aligned",base64:"must be a valid base64 string",hostname:"must be a valid hostname",normalize:"must be unicode normalized in the {{form}} form",lowercase:"must only contain lowercase characters",uppercase:"must only contain uppercase characters",trim:"must not have leading or trailing whitespace",creditCard:"must be a credit card",ref:'references "{{ref}}" which is not a number',ip:"must be a valid ip address with a {{cidr}} CIDR",ipVersion:"must be a valid ip address of one of the following versions {{version}} with a {{cidr}} CIDR"}}},function(e,t,n){var r=n(8);t.options=r.object({abortEarly:r.boolean(),convert:r.boolean(),allowUnknown:r.boolean(),skipFunctions:r.boolean(),stripUnknown:[r.boolean(),r.object({arrays:r.boolean(),objects:r.boolean()}).or("arrays","objects")],language:r.object(),presence:r.string().only("required","optional","forbidden","ignore"),raw:r.boolean(),context:r.object(),strip:r.boolean(),noDefaults:r.boolean(),escapeHtml:r.boolean()}).strict()},function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],s=Object.getOwnPropertyDescriptor(t,i);s&&s.configurable&&void 0===e[i]&&Object.defineProperty(e,i,s)}}(e,t))}var s=n(2),a=n(4),o=n(1),A=n(0),l={fastSplice:function(e,t){for(var n=t;n<e.length;)e[n++]=e[n];--e.length}};l.Array=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return n._type="array",n._inner.items=[],n._inner.ordereds=[],n._inner.inclusions=[],n._inner.exclusions=[],n._inner.requireds=[],n._flags.sparse=!1,n}return i(t,e),t.prototype._base=function(e,t,n){var r={value:e};"string"==typeof e&&n.convert&&l.safeParse(e,r);var i=Array.isArray(r.value),s=i;if(n.convert&&this._flags.single&&!i&&(r.value=[r.value],i=!0),!i)return r.errors=this.createError("array.base",null,t,n),r;if((this._inner.inclusions.length||this._inner.exclusions.length||this._inner.requireds.length||this._inner.ordereds.length||!this._flags.sparse)&&(s&&(r.value=r.value.slice(0)),r.errors=this._checkItems.call(this,r.value,s,t,n),r.errors&&s&&n.convert&&this._flags.single)){var a=r.errors;r.value=[r.value],r.errors=this._checkItems.call(this,r.value,s,t,n),r.errors&&(r.errors=a,r.value=r.value[0])}return r},t.prototype._checkItems=function(e,t,n,r){for(var i=[],s=void 0,a=this._inner.requireds.slice(),o=this._inner.ordereds.slice(),A=this._inner.inclusions.concat(a),c=e.length,u=0;u<c;++u){s=!1;var d=e[u],h=!1,f={key:t?u:n.key,path:t?n.path.concat(u):n.path,parent:n.parent,reference:n.reference},p=void 0;if(this._flags.sparse||void 0!==d){for(var g=0;g<this._inner.exclusions.length;++g)if(!(p=this._inner.exclusions[g]._validate(d,f,{})).errors){if(i.push(this.createError(t?"array.excludes":"array.excludesSingle",{pos:u,value:d},{key:n.key,path:f.path},r)),s=!0,r.abortEarly)return i;o.shift();break}if(!s){if(this._inner.ordereds.length){if(o.length>0){var m=o.shift();if((p=m._validate(d,f,r)).errors){if(i.push(this.createError("array.ordered",{pos:u,reason:p.errors,value:d},{key:n.key,path:f.path},r)),r.abortEarly)return i}else if(m._flags.strip)l.fastSplice(e,u),--u,--c;else{if(!this._flags.sparse&&void 0===p.value){if(i.push(this.createError("array.sparse",null,{key:n.key,path:f.path,pos:u},r)),r.abortEarly)return i;continue}e[u]=p.value}continue}if(!this._inner.items.length){if(i.push(this.createError("array.orderedLength",{pos:u,limit:this._inner.ordereds.length},{key:n.key,path:f.path},r)),r.abortEarly)return i;continue}}for(var y=[],v=a.length,w=0;w<v;++w)if(!(p=y[w]=a[w]._validate(d,f,r)).errors){if(e[u]=p.value,h=!0,l.fastSplice(a,w),--w,--v,!this._flags.sparse&&void 0===p.value&&(i.push(this.createError("array.sparse",null,{key:n.key,path:f.path,pos:u},r)),r.abortEarly))return i;break}if(!h){var b=!(!r.stripUnknown||!0!==r.stripUnknown&&!r.stripUnknown.arrays);v=A.length;for(var E=0;E<v;++E){var B=A[E],C=a.indexOf(B);if(-1!==C)p=y[C];else if(!(p=B._validate(d,f,r)).errors){B._flags.strip?(l.fastSplice(e,u),--u,--c):this._flags.sparse||void 0!==p.value?e[u]=p.value:(i.push(this.createError("array.sparse",null,{key:n.key,path:f.path,pos:u},r)),s=!0),h=!0;break}if(1===v){if(b){l.fastSplice(e,u),--u,--c,h=!0;break}if(i.push(this.createError(t?"array.includesOne":"array.includesOneSingle",{pos:u,reason:p.errors,value:d},{key:n.key,path:f.path},r)),s=!0,r.abortEarly)return i;break}}if(!s&&this._inner.inclusions.length&&!h){if(b){l.fastSplice(e,u),--u,--c;continue}if(i.push(this.createError(t?"array.includes":"array.includesSingle",{pos:u,value:d},{key:n.key,path:f.path},r)),r.abortEarly)return i}}}}else{if(i.push(this.createError("array.sparse",null,{key:n.key,path:f.path,pos:u},r)),r.abortEarly)return i;o.shift()}}return a.length&&this._fillMissedErrors.call(this,i,a,n,r),o.length&&this._fillOrderedErrors.call(this,i,o,n,r),i.length?i:null},t.prototype.describe=function(){var e=s.prototype.describe.call(this);if(this._inner.ordereds.length){e.orderedItems=[];for(var t=0;t<this._inner.ordereds.length;++t)e.orderedItems.push(this._inner.ordereds[t].describe())}if(this._inner.items.length){e.items=[];for(var n=0;n<this._inner.items.length;++n)e.items.push(this._inner.items[n].describe())}return e},t.prototype.items=function(){for(var e=this,t=this.clone(),n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return A.flatten(r).forEach(function(n,r){try{n=a.schema(e._currentJoi,n)}catch(i){throw i.hasOwnProperty("path")?i.path=r+"."+i.path:i.path=r,i.message=i.message+"("+i.path+")",i}t._inner.items.push(n),"required"===n._flags.presence?t._inner.requireds.push(n):"forbidden"===n._flags.presence?t._inner.exclusions.push(n.optional()):t._inner.inclusions.push(n)}),t},t.prototype.ordered=function(){for(var e=this,t=this.clone(),n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return A.flatten(r).forEach(function(n,r){try{n=a.schema(e._currentJoi,n)}catch(i){throw i.hasOwnProperty("path")?i.path=r+"."+i.path:i.path=r,i.message=i.message+"("+i.path+")",i}t._inner.ordereds.push(n)}),t},t.prototype.min=function(e){var t=o.isRef(e);return A.assert(Number.isSafeInteger(e)&&e>=0||t,"limit must be a positive integer or reference"),this._test("min",e,function(n,r,i){var s=void 0;if(t){if(s=e(r.reference||r.parent,i),!(Number.isSafeInteger(s)&&s>=0))return this.createError("array.ref",{ref:e.key},r,i)}else s=e;return n.length>=s?n:this.createError("array.min",{limit:e,value:n},r,i)})},t.prototype.max=function(e){var t=o.isRef(e);return A.assert(Number.isSafeInteger(e)&&e>=0||t,"limit must be a positive integer or reference"),this._test("max",e,function(n,r,i){var s=void 0;if(t){if(s=e(r.reference||r.parent,i),!(Number.isSafeInteger(s)&&s>=0))return this.createError("array.ref",{ref:e.key},r,i)}else s=e;return n.length<=s?n:this.createError("array.max",{limit:e,value:n},r,i)})},t.prototype.length=function(e){var t=o.isRef(e);return A.assert(Number.isSafeInteger(e)&&e>=0||t,"limit must be a positive integer or reference"),this._test("length",e,function(n,r,i){var s=void 0;if(t){if(s=e(r.reference||r.parent,i),!(Number.isSafeInteger(s)&&s>=0))return this.createError("array.ref",{ref:e.key},r,i)}else s=e;return n.length===s?n:this.createError("array.length",{limit:e,value:n},r,i)})},t.prototype.unique=function(e){A.assert(void 0===e||"function"==typeof e||"string"==typeof e,"comparator must be a function or a string");var t={};return"string"==typeof e?t.path=e:"function"==typeof e&&(t.comparator=e),this._test("unique",t,function(e,n,i){for(var s={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),object:new Map,function:new Map,custom:new Map},a=t.comparator||A.deepEqual,o=0;o<e.length;++o){var l=t.path?A.reach(e[o],t.path):e[o],c=t.comparator?s.custom:s[void 0===l?"undefined":r(l)];if(c)if(c instanceof Map){for(var u=c.entries(),d=void 0;!(d=u.next()).done;)if(a(d.value[0],l)){var h={key:n.key,path:n.path.concat(o),parent:n.parent,reference:n.reference},f={pos:o,value:e[o],dupePos:d.value[1],dupeValue:e[d.value[1]]};return t.path&&(f.path=t.path),this.createError("array.unique",f,h,i)}c.set(l,o)}else{if(void 0!==c[l]){var p={key:n.key,path:n.path.concat(o),parent:n.parent,reference:n.reference},g={pos:o,value:e[o],dupePos:c[l],dupeValue:e[c[l]]};return t.path&&(g.path=t.path),this.createError("array.unique",g,p,i)}c[l]=o}}return e})},t.prototype.sparse=function(e){var t=void 0===e||!!e;if(this._flags.sparse===t)return this;var n=this.clone();return n._flags.sparse=t,n},t.prototype.single=function(e){var t=void 0===e||!!e;if(this._flags.single===t)return this;var n=this.clone();return n._flags.single=t,n},t.prototype._fillMissedErrors=function(e,t,n,r){for(var i=[],s=0,a=0;a<t.length;++a){var o=t[a]._getLabel();o?i.push(o):++s}i.length?s?e.push(this.createError("array.includesRequiredBoth",{knownMisses:i,unknownMisses:s},{key:n.key,path:n.path},r)):e.push(this.createError("array.includesRequiredKnowns",{knownMisses:i},{key:n.key,path:n.path},r)):e.push(this.createError("array.includesRequiredUnknowns",{unknownMisses:s},{key:n.key,path:n.path},r))},t.prototype._fillOrderedErrors=function(e,t,n,r){for(var i=[],s=0;s<t.length;++s)"required"===A.reach(t[s],"_flags.presence")&&i.push(t[s]);i.length&&this._fillMissedErrors.call(this,e,i,n,r)},t}(s),l.safeParse=function(e,t){try{var n=JSON.parse(e);Array.isArray(n)&&(t.value=n)}catch(c$){}},e.exports=new l.Array},function(e,t,n){(function(t){function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],s=Object.getOwnPropertyDescriptor(t,i);s&&s.configurable&&void 0===e[i]&&Object.defineProperty(e,i,s)}}(e,t))}var i=n(2),s=n(0),a={};a.Binary=function(e){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return t._type="binary",t}return r(n,e),n.prototype._base=function(e,n,r){var i={value:e};if("string"==typeof e&&r.convert)try{i.value=t.from(e,this._flags.encoding)}catch(c$){}return i.errors=t.isBuffer(i.value)?null:this.createError("binary.base",null,n,r),i},n.prototype.encoding=function(e){if(s.assert(t.isEncoding(e),"Invalid encoding:",e),this._flags.encoding===e)return this;var n=this.clone();return n._flags.encoding=e,n},n.prototype.min=function(e){return s.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("min",e,function(t,n,r){return t.length>=e?t:this.createError("binary.min",{limit:e,value:t},n,r)})},n.prototype.max=function(e){return s.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("max",e,function(t,n,r){return t.length<=e?t:this.createError("binary.max",{limit:e,value:t},n,r)})},n.prototype.length=function(e){return s.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("length",e,function(t,n,r){return t.length===e?t:this.createError("binary.length",{limit:e,value:t},n,r)})},n}(i),e.exports=new a.Binary}).call(t,n(3).Buffer)},function(e,t,n){function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],s=Object.getOwnPropertyDescriptor(t,i);s&&s.configurable&&void 0===e[i]&&Object.defineProperty(e,i,s)}}(e,t))}var i=n(2),s=n(0),a={Set:n(9)};a.Boolean=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return n._type="boolean",n._flags.insensitive=!0,n._inner.truthySet=new a.Set,n._inner.falsySet=new a.Set,n}return r(t,e),t.prototype._base=function(e,t,n){var r={value:e};if("string"==typeof e&&n.convert){var i=this._flags.insensitive?e.toLowerCase():e;r.value="true"===i||"false"!==i&&e}return"boolean"!=typeof r.value&&(r.value=!!this._inner.truthySet.has(e,null,null,this._flags.insensitive)||!this._inner.falsySet.has(e,null,null,this._flags.insensitive)&&e),r.errors="boolean"==typeof r.value?null:this.createError("boolean.base",null,t,n),r},t.prototype.truthy=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this.clone();t=s.flatten(t);for(var i=0;i<t.length;++i){var a=t[i];s.assert(void 0!==a,"Cannot call truthy with undefined"),r._inner.truthySet.add(a)}return r},t.prototype.falsy=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this.clone();t=s.flatten(t);for(var i=0;i<t.length;++i){var a=t[i];s.assert(void 0!==a,"Cannot call falsy with undefined"),r._inner.falsySet.add(a)}return r},t.prototype.insensitive=function(e){var t=void 0===e||!!e;if(this._flags.insensitive===t)return this;var n=this.clone();return n._flags.insensitive=t,n},t.prototype.describe=function(){var e=i.prototype.describe.call(this);return e.truthy=[!0].concat(this._inner.truthySet.values()),e.falsy=[!1].concat(this._inner.falsySet.values()),e},t}(i),e.exports=new a.Boolean},function(e,t,n){function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],s=Object.getOwnPropertyDescriptor(t,i);s&&s.configurable&&void 0===e[i]&&Object.defineProperty(e,i,s)}}(e,t))}var i=n(0),s=n(13),a=n(1),o={};o.Func=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return n._flags.func=!0,n}return r(t,e),t.prototype.arity=function(e){return i.assert(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this._test("arity",e,function(t,n,r){return t.length===e?t:this.createError("function.arity",{n:e},n,r)})},t.prototype.minArity=function(e){return i.assert(Number.isSafeInteger(e)&&e>0,"n must be a strict positive integer"),this._test("minArity",e,function(t,n,r){return t.length>=e?t:this.createError("function.minArity",{n:e},n,r)})},t.prototype.maxArity=function(e){return i.assert(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this._test("maxArity",e,function(t,n,r){return t.length<=e?t:this.createError("function.maxArity",{n:e},n,r)})},t.prototype.ref=function(){return this._test("ref",null,function(e,t,n){return a.isRef(e)?e:this.createError("function.ref",null,t,n)})},t.prototype.class=function(){return this._test("class",null,function(e,t,n){return/^\s*class\s/.test(e.toString())?e:this.createError("function.class",null,t,n)})},t}(s.constructor),e.exports=new o.Func},function(e,t,n){function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],s=Object.getOwnPropertyDescriptor(t,i);s&&s.configurable&&void 0===e[i]&&Object.defineProperty(e,i,s)}}(e,t))}var i=n(2),s=n(0),a={};a.Lazy=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return n._type="lazy",n}return r(t,e),t.prototype._base=function(e,t,n){var r={value:e},s=this._flags.lazy;if(!s)return r.errors=this.createError("lazy.base",null,t,n),r;var a=s();return a instanceof i?a._validate(e,t,n):(r.errors=this.createError("lazy.schema",null,t,n),r)},t.prototype.set=function(e){s.assert("function"==typeof e,"You must provide a function as first argument");var t=this.clone();return t._flags.lazy=e,t},t}(i),e.exports=new a.Lazy},function(e,t,n){function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],s=Object.getOwnPropertyDescriptor(t,i);s&&s.configurable&&void 0===e[i]&&Object.defineProperty(e,i,s)}}(e,t))}var i=n(2),s=n(1),a=n(0),o={precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/};o.Number=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return n._type="number",n._invalids.add(1/0),n._invalids.add(-1/0),n}return r(t,e),t.prototype._base=function(e,t,n){var r={errors:null,value:e};if("string"==typeof e&&n.convert){var i=parseFloat(e);r.value=isNaN(i)||!isFinite(e)?NaN:i}var s="number"==typeof r.value&&!isNaN(r.value);if(n.convert&&"precision"in this._flags&&s){var a=Math.pow(10,this._flags.precision);r.value=Math.round(r.value*a)/a}return r.errors=s?null:this.createError("number.base",null,t,n),r},t.prototype.multiple=function(e){var t=s.isRef(e);return t||(a.assert("number"==typeof e&&isFinite(e),"multiple must be a number"),a.assert(e>0,"multiple must be greater than 0")),this._test("multiple",e,function(n,r,i){var s=t?e(r.reference||r.parent,i):e;return!t||"number"==typeof s&&isFinite(s)?n%s===0?n:this.createError("number.multiple",{multiple:e,value:n},r,i):this.createError("number.ref",{ref:e.key},r,i)})},t.prototype.integer=function(){return this._test("integer",void 0,function(e,t,n){return Number.isSafeInteger(e)?e:this.createError("number.integer",{value:e},t,n)})},t.prototype.negative=function(){return this._test("negative",void 0,function(e,t,n){return e<0?e:this.createError("number.negative",{value:e},t,n)})},t.prototype.positive=function(){return this._test("positive",void 0,function(e,t,n){return e>0?e:this.createError("number.positive",{value:e},t,n)})},t.prototype.precision=function(e){a.assert(Number.isSafeInteger(e),"limit must be an integer"),a.assert(!("precision"in this._flags),"precision already set");var t=this._test("precision",e,function(t,n,r){var i=t.toString().match(o.precisionRx);return Math.max((i[1]?i[1].length:0)-(i[2]?parseInt(i[2],10):0),0)<=e?t:this.createError("number.precision",{limit:e,value:t},n,r)});return t._flags.precision=e,t},t.prototype.port=function(){return this._test("port",void 0,function(e,t,n){return!Number.isSafeInteger(e)||e<0||e>65535?this.createError("number.port",{value:e},t,n):e})},t}(i),o.compare=function(e,t){return function(n){var r=s.isRef(n),i="number"==typeof n&&!isNaN(n);return a.assert(i||r,"limit must be a number or reference"),this._test(e,n,function(i,s,a){var o=void 0;if(r){if("number"!=typeof(o=n(s.reference||s.parent,a))||isNaN(o))return this.createError("number.ref",{ref:n.key},s,a)}else o=n;return t(i,o)?i:this.createError("number."+e,{limit:o,value:i},s,a)})}},o.Number.prototype.min=o.compare("min",function(e,t){return e>=t}),o.Number.prototype.max=o.compare("max",function(e,t){return e<=t}),o.Number.prototype.greater=o.compare("greater",function(e,t){return e>t}),o.Number.prototype.less=o.compare("less",function(e,t){return e<t}),e.exports=new o.Number},function(e,t,n){(function(t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],s=Object.getOwnPropertyDescriptor(t,i);s&&s.configurable&&void 0===e[i]&&Object.defineProperty(e,i,s)}}(e,t))}var s=n(15),a=n(0),o=void 0,A=n(2),l=n(1),c=n(12),u=n(30),d=n(29),h={uriRegex:u.createUriRegex(),ipRegex:d.createIpRegex(["ipv4","ipv6","ipvfuture"],"optional"),guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5"},cidrPresences:["required","optional","forbidden"],normalizationForms:["NFC","NFD","NFKC","NFKD"]};h.String=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return n._type="string",n._invalids.add(""),n}return i(t,e),t.prototype._base=function(e,t,n){if("string"==typeof e&&n.convert){if(this._flags.normalize&&(e=e.normalize(this._flags.normalize)),this._flags.case&&(e="upper"===this._flags.case?e.toLocaleUpperCase():e.toLocaleLowerCase()),this._flags.trim&&(e=e.trim()),this._inner.replacements)for(var r=0;r<this._inner.replacements.length;++r){var i=this._inner.replacements[r];e=e.replace(i.pattern,i.replacement)}if(this._flags.truncate)for(var s=0;s<this._tests.length;++s){var a=this._tests[s];if("max"===a.name){e=e.slice(0,a.arg);break}}this._flags.byteAligned&&e.length%2!=0&&(e="0"+e)}return{value:e,errors:"string"==typeof e?null:this.createError("string.base",{value:e},t,n)}},t.prototype.insensitive=function(){if(this._flags.insensitive)return this;var e=this.clone();return e._flags.insensitive=!0,e},t.prototype.creditCard=function(){return this._test("creditCard",void 0,function(e,t,n){for(var r=e.length,i=0,s=1;r--;){var a=e.charAt(r)*s;i+=a-9*(a>9),s^=3}return i%10==0&&i>0?e:this.createError("string.creditCard",{value:e},t,n)})},t.prototype.regex=function(e,t){a.assert(e instanceof RegExp,"pattern must be a RegExp");var n={pattern:new RegExp(e.source,e.ignoreCase?"i":void 0)};"string"==typeof t?n.name=t:"object"===(void 0===t?"undefined":r(t))&&(n.invert=!!t.invert,t.name&&(n.name=t.name));var i=["string.regex",n.invert?".invert":"",n.name?".name":".base"].join("");return this._test("regex",n,function(e,t,r){return n.pattern.test(e)^n.invert?e:this.createError(i,{name:n.name,pattern:n.pattern,value:e},t,r)})},t.prototype.alphanum=function(){return this._test("alphanum",void 0,function(e,t,n){return/^[a-zA-Z0-9]+$/.test(e)?e:this.createError("string.alphanum",{value:e},t,n)})},t.prototype.token=function(){return this._test("token",void 0,function(e,t,n){return/^\w+$/.test(e)?e:this.createError("string.token",{value:e},t,n)})},t.prototype.email=function(e){return e&&(a.assert("object"===(void 0===e?"undefined":r(e)),"email options must be an object"),a.assert(void 0===e.checkDNS,"checkDNS option is not supported"),a.assert(void 0===e.tldWhitelist||"object"===r(e.tldWhitelist),"tldWhitelist must be an array or object"),a.assert(void 0===e.minDomainAtoms||Number.isSafeInteger(e.minDomainAtoms)&&e.minDomainAtoms>0,"minDomainAtoms must be a positive integer"),a.assert(void 0===e.errorLevel||"boolean"==typeof e.errorLevel||Number.isSafeInteger(e.errorLevel)&&e.errorLevel>=0,"errorLevel must be a non-negative integer or boolean")),this._test("email",e,function(t,r,i){o=o||n(19);try{var s=o.validate(t,e);if(!0===s||0===s)return t}catch(c$){}return this.createError("string.email",{value:t},r,i)})},t.prototype.ip=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=h.ipRegex;a.assert("object"===(void 0===e?"undefined":r(e)),"options must be an object"),e.cidr?(a.assert("string"==typeof e.cidr,"cidr must be a string"),e.cidr=e.cidr.toLowerCase(),a.assert(a.contain(h.cidrPresences,e.cidr),"cidr must be one of "+h.cidrPresences.join(", ")),e.version||"optional"===e.cidr||(t=d.createIpRegex(["ipv4","ipv6","ipvfuture"],e.cidr))):e.cidr="optional";var n=void 0;if(e.version){Array.isArray(e.version)||(e.version=[e.version]),a.assert(e.version.length>=1,"version must have at least 1 version specified"),n=[];for(var i=0;i<e.version.length;++i){var s=e.version[i];a.assert("string"==typeof s,"version at position "+i+" must be a string"),s=s.toLowerCase(),a.assert(d.versions[s],"version at position "+i+" must be one of "+Object.keys(d.versions).join(", ")),n.push(s)}n=a.unique(n),t=d.createIpRegex(n,e.cidr)}return this._test("ip",e,function(r,i,s){return t.test(r)?r:n?this.createError("string.ipVersion",{value:r,cidr:e.cidr,version:n},i,s):this.createError("string.ip",{value:r,cidr:e.cidr},i,s)})},t.prototype.uri=function(e){var t="",n=!1,i=!1,s=h.uriRegex;if(e){if(a.assert("object"===(void 0===e?"undefined":r(e)),"options must be an object"),e.scheme){a.assert(e.scheme instanceof RegExp||"string"==typeof e.scheme||Array.isArray(e.scheme),"scheme must be a RegExp, String, or Array"),Array.isArray(e.scheme)||(e.scheme=[e.scheme]),a.assert(e.scheme.length>=1,"scheme must have at least 1 scheme specified");for(var o=0;o<e.scheme.length;++o){var A=e.scheme[o];a.assert(A instanceof RegExp||"string"==typeof A,"scheme at position "+o+" must be a RegExp or String"),t+=t?"|":"",A instanceof RegExp?t+=A.source:(a.assert(/[a-zA-Z][a-zA-Z0-9+-\.]*/.test(A),"scheme at position "+o+" must be a valid scheme"),t+=a.escapeRegex(A))}}e.allowRelative&&(n=!0),e.relativeOnly&&(i=!0)}return(t||n||i)&&(s=u.createUriRegex(t,n,i)),this._test("uri",e,function(e,n,r){return s.test(e)?e:i?this.createError("string.uriRelativeOnly",{value:e},n,r):t?this.createError("string.uriCustomScheme",{scheme:t,value:e},n,r):this.createError("string.uri",{value:e},n,r)})},t.prototype.isoDate=function(){return this._test("isoDate",void 0,function(e,t,n){if(c._isIsoDate(e)){if(!n.convert)return e;var r=new Date(e);if(!isNaN(r.getTime()))return r.toISOString()}return this.createError("string.isoDate",{value:e},t,n)})},t.prototype.guid=function(e){var t="";if(e&&e.version){Array.isArray(e.version)||(e.version=[e.version]),a.assert(e.version.length>=1,"version must have at least 1 valid version specified");for(var n=new Set,r=0;r<e.version.length;++r){var i=e.version[r];a.assert("string"==typeof i,"version at position "+r+" must be a string"),i=i.toLowerCase();var s=h.guidVersions[i];a.assert(s,"version at position "+r+" must be one of "+Object.keys(h.guidVersions).join(", ")),a.assert(!n.has(s),"version at position "+r+" must not be a duplicate."),t+=s,n.add(s)}}var o=new RegExp("^([\\[{\\(]?)[0-9A-F]{8}([:-]?)[0-9A-F]{4}\\2?["+(t||"0-9A-F")+"][0-9A-F]{3}\\2?["+(t?"89AB":"0-9A-F")+"][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$","i");return this._test("guid",e,function(e,t,n){var r=o.exec(e);return r?h.guidBrackets[r[1]]!==r[r.length-1]?this.createError("string.guid",{value:e},t,n):e:this.createError("string.guid",{value:e},t,n)})},t.prototype.hex=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.assert("object"===(void 0===e?"undefined":r(e)),"hex options must be an object"),a.assert(void 0===e.byteAligned||"boolean"==typeof e.byteAligned,"byteAligned must be boolean");var t=!0===e.byteAligned,n=/^[a-f0-9]+$/i,i=this._test("hex",n,function(e,r,i){return n.test(e)?t&&e.length%2!=0?this.createError("string.hexAlign",{value:e},r,i):e:this.createError("string.hex",{value:e},r,i)});return t&&(i._flags.byteAligned=!0),i},t.prototype.base64=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.assert("object"===(void 0===e?"undefined":r(e)),"base64 options must be an object"),a.assert(void 0===e.paddingRequired||"boolean"==typeof e.paddingRequired,"paddingRequired must be boolean");var t=(!1===e.paddingRequired?e.paddingRequired:(e.paddingRequired,1))?/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/:/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/;return this._test("base64",t,function(e,n,r){return t.test(e)?e:this.createError("string.base64",{value:e},n,r)})},t.prototype.hostname=function(){var e=/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/;return this._test("hostname",void 0,function(t,n,r){return t.length<=255&&e.test(t)||s.isIPv6(t)?t:this.createError("string.hostname",{value:t},n,r)})},t.prototype.normalize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NFC";a.assert(a.contain(h.normalizationForms,e),"normalization form must be one of "+h.normalizationForms.join(", "));var t=this._test("normalize",e,function(t,n,r){return r.convert||t===t.normalize(e)?t:this.createError("string.normalize",{value:t,form:e},n,r)});return t._flags.normalize=e,t},t.prototype.lowercase=function(){var e=this._test("lowercase",void 0,function(e,t,n){return n.convert||e===e.toLocaleLowerCase()?e:this.createError("string.lowercase",{value:e},t,n)});return e._flags.case="lower",e},t.prototype.uppercase=function(){var e=this._test("uppercase",void 0,function(e,t,n){return n.convert||e===e.toLocaleUpperCase()?e:this.createError("string.uppercase",{value:e},t,n)});return e._flags.case="upper",e},t.prototype.trim=function(){var e=this._test("trim",void 0,function(e,t,n){return n.convert||e===e.trim()?e:this.createError("string.trim",{value:e},t,n)});return e._flags.trim=!0,e},t.prototype.replace=function(e,t){"string"==typeof e&&(e=new RegExp(a.escapeRegex(e),"g")),a.assert(e instanceof RegExp,"pattern must be a RegExp"),a.assert("string"==typeof t,"replacement must be a String");var n=this.clone();return n._inner.replacements||(n._inner.replacements=[]),n._inner.replacements.push({pattern:e,replacement:t}),n},t.prototype.truncate=function(e){var t=void 0===e||!!e;if(this._flags.truncate===t)return this;var n=this.clone();return n._flags.truncate=t,n},t}(A),h.compare=function(e,n){return function(r,i){var s=l.isRef(r);return a.assert(Number.isSafeInteger(r)&&r>=0||s,"limit must be a positive integer or reference"),a.assert(!i||t.isEncoding(i),"Invalid encoding:",i),this._test(e,r,function(t,a,o){var A=void 0;if(s){if(A=r(a.reference||a.parent,o),!Number.isSafeInteger(A))return this.createError("string.ref",{ref:r.key},a,o)}else A=r;return n(t,A,i)?t:this.createError("string."+e,{limit:A,value:t,encoding:i},a,o)})}},h.String.prototype.min=h.compare("min",function(e,n,r){return(r?t.byteLength(e,r):e.length)>=n}),h.String.prototype.max=h.compare("max",function(e,n,r){return(r?t.byteLength(e,r):e.length)<=n}),h.String.prototype.length=h.compare("length",function(e,n,r){return(r?t.byteLength(e,r):e.length)===n}),h.String.prototype.uuid=h.String.prototype.guid,e.exports=new h.String}).call(t,n(3).Buffer)},function(e,t,n){var r=n(14),i={Ip:{cidrs:{ipv4:{required:"\\/(?:"+r.ipv4Cidr+")",optional:"(?:\\/(?:"+r.ipv4Cidr+"))?",forbidden:""},ipv6:{required:"\\/"+r.ipv6Cidr,optional:"(?:\\/"+r.ipv6Cidr+")?",forbidden:""},ipvfuture:{required:"\\/"+r.ipv6Cidr,optional:"(?:\\/"+r.ipv6Cidr+")?",forbidden:""}},versions:{ipv4:r.IPv4address,ipv6:r.IPv6address,ipvfuture:r.IPvFuture}}};i.Ip.createIpRegex=function(e,t){for(var n=void 0,r=0;r<e.length;++r){var s=e[r];n?n+="|"+i.Ip.versions[s]+i.Ip.cidrs[s][t]:n="^(?:"+i.Ip.versions[s]+i.Ip.cidrs[s][t]}return new RegExp(n+")$")},e.exports=i.Ip},function(e,t,n){var r=n(14),i={Uri:{createUriRegex:function(e,t,n){var i=r.scheme,s=void 0;if(n)s="(?:"+r.relativeRef+")";else{e&&(i="(?:"+e+")");var a="(?:"+i+":"+r.hierPart+")";s=t?"(?:"+a+"|"+r.relativeRef+")":a}return new RegExp("^"+s+"(?:\\?"+r.query+")?(?:#"+r.fragment+")?$")}}};e.exports=i.Uri},function(e,t,n){var r=n(0),i={};e.exports=i.Topo=function(){this._items=[],this.nodes=[]},i.Topo.prototype.add=function(e,t){var n=this,i=[].concat((t=t||{}).before||[]),s=[].concat(t.after||[]),a=t.group||"?",o=t.sort||0;r.assert(-1===i.indexOf(a),"Item cannot come before itself:",a),r.assert(-1===i.indexOf("?"),"Item cannot come before unassociated items"),r.assert(-1===s.indexOf(a),"Item cannot come after itself:",a),r.assert(-1===s.indexOf("?"),"Item cannot come after unassociated items"),[].concat(e).forEach(function(e,t){var r={seq:n._items.length,sort:o,before:i,after:s,group:a,node:e};n._items.push(r)});var A=this._sort();return r.assert(!A,"item","?"!==a?"added into group "+a:"","created a dependencies error"),this.nodes},i.Topo.prototype.merge=function(e){e=[].concat(e);for(var t=0;t<e.length;++t){var n=e[t];if(n)for(var s=0;s<n._items.length;++s){var a=r.shallow(n._items[s]);this._items.push(a)}}this._items.sort(i.mergeSort);for(var o=0;o<this._items.length;++o)this._items[o].seq=o;var A=this._sort();return r.assert(!A,"merge created a dependencies error"),this.nodes},i.mergeSort=function(e,t){return e.sort===t.sort?0:e.sort<t.sort?-1:1},i.Topo.prototype._sort=function(){for(var e={},t=Object.create(null),n=Object.create(null),r=0;r<this._items.length;++r){var i=this._items[r],s=i.seq,a=i.group;n[a]=n[a]||[],n[a].push(s),e[s]=i.before;for(var o=i.after,A=0;A<o.length;++A)t[o[A]]=(t[o[A]]||[]).concat(s)}for(var l=Object.keys(e),c=0;c<l.length;++c){for(var u=l[c],d=[],h=Object.keys(e[u]),f=0;f<h.length;++f){var p=e[u][h[f]];n[p]=n[p]||[];for(var g=0;g<n[p].length;++g)d.push(n[p][g])}e[u]=d}for(var m=Object.keys(t),y=0;y<m.length;++y){var v=m[y];if(n[v])for(var w=0;w<n[v].length;++w){var b=n[v][w];e[b]=e[b].concat(t[v])}}var E=void 0,B={};l=Object.keys(e);for(var C=0;C<l.length;++C){var S=l[C];E=e[S];for(var T=0;T<E.length;++T)B[E[T]]=(B[E[T]]||[]).concat(S)}for(var x={},k=[],I=0;I<this._items.length;++I){var F=I;if(B[I]){F=null;for(var L=0;L<this._items.length;++L)if(!0!==x[L]){B[L]||(B[L]=[]);for(var D=B[L].length,_=0,U=0;U<D;++U)x[B[L][U]]&&++_;if(_===D){F=L;break}}}null!==F&&(x[F]=!0,k.push(F))}if(k.length!==this._items.length)return new Error("Invalid dependencies");for(var P={},R=0;R<this._items.length;++R){var O=this._items[R];P[O.seq]=O}var Q=[];this._items=k.map(function(e){var t=P[e];return Q.push(t.node),t}),this.nodes=Q}},function(e,t,n){var r=n(8);e.exports=r},function(e,t,n){t.byteLength=function(e){return 3*e.length/4-A(e)},t.toByteArray=function(e){var t,n,r,a,o,l=e.length;a=A(e),o=new s(3*l/4-a),n=a>0?l-4:l;var c=0;for(t=0;t<n;t+=4)r=i[e.charCodeAt(t)]<<18|i[e.charCodeAt(t+1)]<<12|i[e.charCodeAt(t+2)]<<6|i[e.charCodeAt(t+3)],o[c++]=r>>16&255,o[c++]=r>>8&255,o[c++]=255&r;return 2===a?(r=i[e.charCodeAt(t)]<<2|i[e.charCodeAt(t+1)]>>4,o[c++]=255&r):1===a&&(r=i[e.charCodeAt(t)]<<10|i[e.charCodeAt(t+1)]<<4|i[e.charCodeAt(t+2)]>>2,o[c++]=r>>8&255,o[c++]=255&r),o},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s="",a=[],o=16383,A=0,l=n-i;A<l;A+=o)a.push(c(e,A,A+o>l?l:A+o));return 1===i?(t=e[n-1],s+=r[t>>2],s+=r[t<<4&63],s+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],s+=r[t>>10],s+=r[t>>4&63],s+=r[t<<2&63],s+="="),a.push(s),a.join("")};for(var r=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)r[o]=a[o],i[a.charCodeAt(o)]=o;function A(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function l(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function c(e,t,n){for(var r,i=[],s=t;s<n;s+=3)r=(e[s]<<16)+(e[s+1]<<8)+e[s+2],i.push(l(r));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var s,a,o=8*i-r-1,A=(1<<o)-1,l=A>>1,c=-7,u=n?i-1:0,d=n?-1:1,h=e[t+u];for(u+=d,s=h&(1<<-c)-1,h>>=-c,c+=o;c>0;s=256*s+e[t+u],u+=d,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=r;c>0;a=256*a+e[t+u],u+=d,c-=8);if(0===s)s=1-l;else{if(s===A)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),s-=l}return(h?-1:1)*a*Math.pow(2,s-r)},t.write=function(e,t,n,r,i,s){var a,o,A,l=8*s-i-1,c=(1<<l)-1,u=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:s-1,f=r?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(A=Math.pow(2,-a))<1&&(a--,A*=2),(t+=a+u>=1?d/A:d*Math.pow(2,1-u))*A>=2&&(a++,A/=2),a+u>=c?(o=0,a=c):a+u>=1?(o=(t*A-1)*Math.pow(2,i),a+=u):(o=t*Math.pow(2,u-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&o,h+=f,o/=256,i-=8);for(a=a<<i|o,l+=i;l>0;e[n+h]=255&a,h+=f,a/=256,l-=8);e[n+h-f]|=128*p}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){e.exports={_args:[["joi@13.4.0","/Users/jeff/projects/joi-browser"]],_development:!0,_from:"joi@13.4.0",_id:"joi@13.4.0",_inBundle:!1,_integrity:"sha512-JuK4GjEu6j7zr9FuVe2MAseZ6si/8/HaY0qMAejfDFHp7jcH4OKE937mIHM5VT4xDS0q7lpQbszbxKV9rm0yUg==",_location:"/joi",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"joi@13.4.0",name:"joi",escapedName:"joi",rawSpec:"13.4.0",saveSpec:null,fetchSpec:"13.4.0"},_requiredBy:["#DEV:/"],_resolved:"https://registry.npmjs.org/joi/-/joi-13.4.0.tgz",_spec:"13.4.0",_where:"/Users/jeff/projects/joi-browser",bugs:{url:"https://github.com/hapijs/joi/issues"},dependencies:{hoek:"5.x.x",isemail:"3.x.x",topo:"3.x.x"},description:"Object schema validation",devDependencies:{code:"5.x.x",hapitoc:"1.x.x",lab:"15.x.x"},engines:{node:">=8.9.0"},homepage:"https://github.com/hapijs/joi",keywords:["hapi","schema","validation"],license:"BSD-3-Clause",main:"lib/index.js",name:"joi",repository:{type:"git",url:"git://github.com/hapijs/joi.git"},scripts:{test:"lab -t 100 -a code -L","test-cov-html":"lab -r html -o coverage.html -a code","test-debug":"lab -a code",toc:"hapitoc",version:"npm run toc && git add API.md README.md"},version:"13.4.0"}},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return r.exec(e).slice(1)};function s(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var a=i>=0?arguments[i]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,r="/"===a.charAt(0))}return(r?"/":"")+(t=n(s(t.split("/"),function(e){return!!e}),!r).join("/"))||"."},t.normalize=function(e){var r=t.isAbsolute(e),i="/"===a(e,-1);return(e=n(s(e.split("/"),function(e){return!!e}),!r).join("/"))||r||(e="."),e&&i&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(s(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),s=r(n.split("/")),a=Math.min(i.length,s.length),o=a,A=0;A<a;A++)if(i[A]!==s[A]){o=A;break}var l=[];for(A=o;A<i.length;A++)l.push("..");return(l=l.concat(s.slice(o))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=i(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=i(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return i(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(t,n(7))},function(e,t,n){(function(e,r){var i;!function(){"object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType;var s="object"==typeof r&&r;s.global===s||s.window===s||s.self;var a,o=2147483647,A=36,l=/^xn--/,c=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,f=String.fromCharCode;function p(e){throw new RangeError(d[e])}function g(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function m(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+g((e=e.replace(u,".")).split("."),t).join(".")}function y(e){for(var t,n,r=[],i=0,s=e.length;i<s;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<s?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function v(e){return g(e,function(e){var t="";return e>65535&&(t+=f((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=f(e)}).join("")}function w(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:A}function b(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function E(e,t,n){var r=0;for(e=n?h(e/700):e>>1,e+=h(e/t);e>455;r+=A)e=h(e/35);return h(r+36*e/(e+38))}function B(e){var t,n,r,i,s,a,l,c,u,d,f=[],g=e.length,m=0,y=128,b=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&p("not-basic"),f.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<g;){for(s=m,a=1,l=A;i>=g&&p("invalid-input"),((c=w(e.charCodeAt(i++)))>=A||c>h((o-m)/a))&&p("overflow"),m+=c*a,!(c<(u=l<=b?1:l>=b+26?26:l-b));l+=A)a>h(o/(d=A-u))&&p("overflow"),a*=d;b=E(m-s,t=f.length+1,0==s),h(m/t)>o-y&&p("overflow"),y+=h(m/t),m%=t,f.splice(m++,0,y)}return v(f)}function C(e){var t,n,r,i,s,a,l,c,u,d,g,m,v,w,B,C=[];for(m=(e=y(e)).length,t=128,n=0,s=72,a=0;a<m;++a)(g=e[a])<128&&C.push(f(g));for(r=i=C.length,i&&C.push("-");r<m;){for(l=o,a=0;a<m;++a)(g=e[a])>=t&&g<l&&(l=g);for(l-t>h((o-n)/(v=r+1))&&p("overflow"),n+=(l-t)*v,t=l,a=0;a<m;++a)if((g=e[a])<t&&++n>o&&p("overflow"),g==t){for(c=n,u=A;!(c<(d=u<=s?1:u>=s+26?26:u-s));u+=A)B=c-d,w=A-d,C.push(f(b(d+B%w,0))),c=h(B/w);C.push(f(b(c,0))),s=E(n,v,r==i),n=0,++r}++n,++t}return C.join("")}a={version:"1.4.1",ucs2:{decode:y,encode:v},decode:B,encode:C,toASCII:function(e){return m(e,function(e){return c.test(e)?"xn--"+C(e):e})},toUnicode:function(e){return m(e,function(e){return l.test(e)?B(e.slice(4).toLowerCase()):e})}},void 0===(i=function(){return a}.call(t,n,t,e))||(e.exports=i)}()}).call(t,n(41)(e),n(5))},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}}])},_C.exports=e());var e}function PC(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function RC(e){return function t(n){return 0===arguments.length||PC(n)?t:e.apply(this,arguments)}}var OC=RC(function(e){return function(){return e}}),QC=OC(!1),NC=OC(!0);function MC(e){return function t(n,r){switch(arguments.length){case 0:return t;case 1:return PC(n)?t:RC(function(t){return e(n,t)});default:return PC(n)&&PC(r)?t:PC(n)?RC(function(t){return e(t,r)}):PC(r)?RC(function(t){return e(n,t)}):e(n,r)}}}var HC=MC(function(e,t){return Number(e)+Number(t)});function jC(e,t){var n;t=t||[];var r=(e=e||[]).length,i=t.length,s=[];for(n=0;n<r;)s[s.length]=e[n],n+=1;for(n=0;n<i;)s[s.length]=t[n],n+=1;return s}function $C(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,r){return t.apply(this,arguments)};case 4:return function(e,n,r,i){return t.apply(this,arguments)};case 5:return function(e,n,r,i,s){return t.apply(this,arguments)};case 6:return function(e,n,r,i,s,a){return t.apply(this,arguments)};case 7:return function(e,n,r,i,s,a,o){return t.apply(this,arguments)};case 8:return function(e,n,r,i,s,a,o,A){return t.apply(this,arguments)};case 9:return function(e,n,r,i,s,a,o,A,l){return t.apply(this,arguments)};case 10:return function(e,n,r,i,s,a,o,A,l,c){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function KC(e,t,n){return function(){for(var r=[],i=0,s=e,a=0;a<t.length||i<arguments.length;){var o;a<t.length&&(!PC(t[a])||i>=arguments.length)?o=t[a]:(o=arguments[i],i+=1),r[a]=o,PC(o)||(s-=1),a+=1}return s<=0?n.apply(this,r):$C(s,KC(e,r,n))}}var VC=MC(function(e,t){return 1===e?RC(t):$C(e,KC(e,[],t))}),GC=RC(function(e){return VC(e.length,function(){var t=0,n=arguments[0],r=arguments[arguments.length-1],i=Array.prototype.slice.call(arguments,0);return i[0]=function(){var e=n.apply(this,jC(arguments,[t,r]));return t+=1,e},e.apply(this,i)})});function WC(e){return function t(n,r,i){switch(arguments.length){case 0:return t;case 1:return PC(n)?t:MC(function(t,r){return e(n,t,r)});case 2:return PC(n)&&PC(r)?t:PC(n)?MC(function(t,n){return e(t,r,n)}):PC(r)?MC(function(t,r){return e(n,t,r)}):RC(function(t){return e(n,r,t)});default:return PC(n)&&PC(r)&&PC(i)?t:PC(n)&&PC(r)?MC(function(t,n){return e(t,n,i)}):PC(n)&&PC(i)?MC(function(t,n){return e(t,r,n)}):PC(r)&&PC(i)?MC(function(t,r){return e(n,t,r)}):PC(n)?RC(function(t){return e(t,r,i)}):PC(r)?RC(function(t){return e(n,t,i)}):PC(i)?RC(function(t){return e(n,r,t)}):e(n,r,i)}}}var zC=WC(function(e,t,n){if(t>=n.length||t<-n.length)return n;var r=(t<0?n.length:0)+t,i=jC(n);return i[r]=e(n[r]),i});const YC=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};function qC(e){return"function"==typeof e["@@transducer/step"]}function XC(e,t,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),i=r.pop();if(!YC(i)){for(var s=0;s<e.length;){if("function"==typeof i[e[s]])return i[e[s]].apply(i,r);s+=1}if(qC(i))return t.apply(null,r)(i)}return n.apply(this,arguments)}}function JC(e){return e&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}}const ZC={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}};var eS=function(){function e(e,t){this.xf=t,this.f=e,this.all=!0}return e.prototype["@@transducer/init"]=ZC.init,e.prototype["@@transducer/result"]=function(e){return this.all&&(e=this.xf["@@transducer/step"](e,!0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)||(this.all=!1,e=JC(this.xf["@@transducer/step"](e,!1))),e},e}(),tS=MC(XC(["all"],MC(function(e,t){return new eS(e,t)}),function(e,t){for(var n=0;n<t.length;){if(!e(t[n]))return!1;n+=1}return!0})),nS=MC(function(e,t){return t>e?t:e});function rS(e,t){for(var n=0,r=t.length,i=Array(r);n<r;)i[n]=e(t[n]),n+=1;return i}function iS(e){return"[object String]"===Object.prototype.toString.call(e)}var sS=RC(function(e){return!!YC(e)||!!e&&("object"==typeof e&&(!iS(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&(e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1)))))}),aS=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}();function oS(e){return new aS(e)}var AS=MC(function(e,t){return $C(e.length,function(){return e.apply(t,arguments)})});function lS(e,t,n){for(var r=n.next();!r.done;){if((t=e["@@transducer/step"](t,r.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=n.next()}return e["@@transducer/result"](t)}function cS(e,t,n,r){return e["@@transducer/result"](n[r](AS(e["@@transducer/step"],e),t))}var uS="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function dS(e,t,n){if("function"==typeof e&&(e=oS(e)),sS(n))return function(e,t,n){for(var r=0,i=n.length;r<i;){if((t=e["@@transducer/step"](t,n[r]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return e["@@transducer/result"](t)}(e,t,n);if("function"==typeof n["fantasy-land/reduce"])return cS(e,t,n,"fantasy-land/reduce");if(null!=n[uS])return lS(e,t,n[uS]());if("function"==typeof n.next)return lS(e,t,n);if("function"==typeof n.reduce)return cS(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var hS=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=ZC.init,e.prototype["@@transducer/result"]=ZC.result,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},e}(),fS=MC(function(e,t){return new hS(e,t)});function pS(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var gS=Object.prototype.toString,mS=function(){return"[object Arguments]"===gS.call(arguments)?function(e){return"[object Arguments]"===gS.call(e)}:function(e){return pS("callee",e)}},yS=!{toString:null}.propertyIsEnumerable("toString"),vS=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],wS=function(){return arguments.propertyIsEnumerable("length")}(),bS=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},ES=RC("function"!=typeof Object.keys||wS?function(e){if(Object(e)!==e)return[];var t,n,r=[],i=wS&&mS(e);for(t in e)!pS(t,e)||i&&"length"===t||(r[r.length]=t);if(yS)for(n=vS.length-1;n>=0;)pS(t=vS[n],e)&&!bS(r,t)&&(r[r.length]=t),n-=1;return r}:function(e){return Object(e)!==e?[]:Object.keys(e)}),BS=MC(XC(["fantasy-land/map","map"],fS,function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return VC(t.length,function(){return e.call(this,t.apply(this,arguments))});case"[object Object]":return dS(function(n,r){return n[r]=e(t[r]),n},{},ES(t));default:return rS(e,t)}})),CS=MC(function(e,t){for(var n=t,r=0;r<e.length;){if(null==n)return;n=n[e[r]],r+=1}return n}),SS=MC(function(e,t){return CS([e],t)}),TS=MC(function(e,t){return BS(SS(e),t)}),xS=WC(dS),kS=RC(function(e){return VC(xS(nS,0,TS("length",e)),function(){for(var t=0,n=e.length;t<n;){if(!e[t].apply(this,arguments))return!1;t+=1}return!0})}),IS=MC(function(e,t){return e&&t}),FS=function(){function e(e,t){this.xf=t,this.f=e,this.any=!1}return e.prototype["@@transducer/init"]=ZC.init,e.prototype["@@transducer/result"]=function(e){return this.any||(e=this.xf["@@transducer/step"](e,!1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.any=!0,e=JC(this.xf["@@transducer/step"](e,!0))),e},e}(),LS=MC(function(e,t){return new FS(e,t)}),DS=MC(XC(["any"],LS,function(e,t){for(var n=0;n<t.length;){if(e(t[n]))return!0;n+=1}return!1})),_S=RC(function(e){return VC(xS(nS,0,TS("length",e)),function(){for(var t=0,n=e.length;t<n;){if(e[t].apply(this,arguments))return!0;t+=1}return!1})}),US=MC(function(e,t){return"function"==typeof t["fantasy-land/ap"]?t["fantasy-land/ap"](e):"function"==typeof e.ap?e.ap(t):"function"==typeof e?function(n){return e(n)(t(n))}:dS(function(e,n){return jC(e,BS(n,t))},[],e)});function PS(e,t){for(var n=0,r=t.length-(e-1),i=new Array(r>=0?r:0);n<r;)i[n]=Array.prototype.slice.call(t,n,n+e),n+=1;return i}var RS=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=new Array(e)}return e.prototype["@@transducer/init"]=ZC.init,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.store(t),this.full?this.xf["@@transducer/step"](e,this.getCopy()):e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e.prototype.getCopy=function(){return jC(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},e}(),OS=MC(XC([],MC(function(e,t){return new RS(e,t)}),PS)),QS=MC(function(e,t){return jC(t,[e])}),NS=MC(function(e,t){return e.apply(this,t)}),MS=RC(function(e){for(var t=ES(e),n=t.length,r=[],i=0;i<n;)r[i]=e[t[i]],i+=1;return r}),HS=RC(function e(t){return t=BS(function(t){return"function"==typeof t?t:e(t)},t),VC(xS(nS,0,TS("length",MS(t))),function(){var e=arguments;return BS(function(t){return NS(t,e)},t)})}),jS=MC(function(e,t){return t(e)}),$S=WC(function(e,t,n){var r=e(t),i=e(n);return r<i?-1:r>i?1:0}),KS=WC(function(e,t,n){var r={};for(var i in n)r[i]=n[i];return r[e]=t,r});const VS=Number.isInteger||function(e){return(e|0)===e};var GS=RC(function(e){return null==e}),WS=WC(function e(t,n,r){if(0===t.length)return n;var i=t[0];if(t.length>1){var s=!GS(r)&&pS(i,r)?r[i]:VS(t[1])?[]:{};n=e(Array.prototype.slice.call(t,1),n,s)}if(VS(i)&&YC(r)){var a=[].concat(r);return a[i]=n,a}return KS(i,n,r)}),zS=MC(function(e,t){switch(e){case 0:return function(){return t.call(this)};case 1:return function(e){return t.call(this,e)};case 2:return function(e,n){return t.call(this,e,n)};case 3:return function(e,n,r){return t.call(this,e,n,r)};case 4:return function(e,n,r,i){return t.call(this,e,n,r,i)};case 5:return function(e,n,r,i,s){return t.call(this,e,n,r,i,s)};case 6:return function(e,n,r,i,s,a){return t.call(this,e,n,r,i,s,a)};case 7:return function(e,n,r,i,s,a,o){return t.call(this,e,n,r,i,s,a,o)};case 8:return function(e,n,r,i,s,a,o,A){return t.call(this,e,n,r,i,s,a,o,A)};case 9:return function(e,n,r,i,s,a,o,A,l){return t.call(this,e,n,r,i,s,a,o,A,l)};case 10:return function(e,n,r,i,s,a,o,A,l,c){return t.call(this,e,n,r,i,s,a,o,A,l,c)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}}),YS=RC(function(e){return zS(2,e)});function qS(e){return"[object Function]"===Object.prototype.toString.call(e)}var XS=MC(function(e,t){var n=VC(e,t);return VC(e,function(){return dS(US,BS(n,arguments[0]),Array.prototype.slice.call(arguments,1))})}),JS=RC(function(e){return XS(e.length,e)}),ZS=MC(function(e,t){return qS(e)?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:JS(IS)(e,t)}),eT=RC(function(e){return VC(e.length,e)}),tT=eT(function(e){return e.apply(this,Array.prototype.slice.call(arguments,1))});function nT(e){return function t(n){for(var r,i,s,a=[],o=0,A=n.length;o<A;){if(sS(n[o]))for(s=0,i=(r=e?t(n[o]):n[o]).length;s<i;)a[a.length]=r[s],s+=1;else a[a.length]=n[o];o+=1}return a}}var rT=function(e){var t=function(e){return{"@@transducer/init":ZC.init,"@@transducer/result":function(t){return e["@@transducer/result"](t)},"@@transducer/step":function(t,n){var r=e["@@transducer/step"](t,n);return r["@@transducer/reduced"]?{"@@transducer/value":r,"@@transducer/reduced":!0}:r}}}(e);return{"@@transducer/init":ZC.init,"@@transducer/result":function(e){return t["@@transducer/result"](e)},"@@transducer/step":function(e,n){return sS(n)?dS(t,e,n):dS(t,e,[n])}}},iT=MC(XC(["fantasy-land/chain","chain"],MC(function(e,t){return BS(e,rT(t))}),function(e,t){return"function"==typeof t?function(n){return e(t(n))(n)}:nT(!1)(BS(e,t))})),sT=WC(function(e,t,n){if(e>t)throw new Error("min must not be greater than max in clamp(min, max, value)");return n<e?e:n>t?t:n});function aT(e){return new RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":""))}var oT=RC(function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)});function AT(e,t,n,r){var i=function(i){for(var s=t.length,a=0;a<s;){if(e===t[a])return n[a];a+=1}for(var o in t[a+1]=e,n[a+1]=i,e)i[o]=r?AT(e[o],t,n,!0):e[o];return i};switch(oT(e)){case"Object":return i({});case"Array":return i([]);case"Date":return new Date(e.valueOf());case"RegExp":return aT(e);default:return e}}var lT=RC(function(e){return null!=e&&"function"==typeof e.clone?e.clone():AT(e,[],[],!0)}),cT=RC(function(e){return function(t,n){return e(t,n)?-1:e(n,t)?1:0}}),uT=RC(function(e){return!e}),dT=JS(uT);function hT(e,t){return function(){return t.call(this,e.apply(this,arguments))}}function fT(e,t){return function(){var n=arguments.length;if(0===n)return t();var r=arguments[n-1];return YC(r)||"function"!=typeof r[e]?t.apply(this,arguments):r[e].apply(r,Array.prototype.slice.call(arguments,0,n-1))}}var pT=WC(fT("slice",function(e,t,n){return Array.prototype.slice.call(n,e,t)})),gT=RC(fT("tail",pT(1,1/0)));function mT(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return $C(arguments[0].length,xS(hT,arguments[0],gT(arguments)))}var yT=RC(function(e){return iS(e)?e.split("").reverse().join(""):Array.prototype.slice.call(e,0).reverse()});function vT(){if(0===arguments.length)throw new Error("compose requires at least one argument");return mT.apply(this,yT(arguments))}function wT(){if(0===arguments.length)throw new Error("composeK requires at least one argument");var e=Array.prototype.slice.call(arguments),t=e.pop();return vT(vT.apply(this,BS(iT,e)),t)}function bT(e,t){return function(){var n=this;return e.apply(n,arguments).then(function(e){return t.call(n,e)})}}function ET(){if(0===arguments.length)throw new Error("pipeP requires at least one argument");return $C(arguments[0].length,xS(bT,arguments[0],gT(arguments)))}function BT(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function CT(e,t,n){for(var r=0,i=n.length;r<i;){if(e(t,n[r]))return!0;r+=1}return!1}var ST=MC(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t});function TT(e,t,n,r){var i=BT(e);function s(e,t){return xT(e,t,n.slice(),r.slice())}return!CT(function(e,t){return!CT(s,t,e)},BT(t),i)}function xT(e,t,n,r){if(ST(e,t))return!0;var i,s,a=oT(e);if(a!==oT(t))return!1;if(null==e||null==t)return!1;if("function"==typeof e["fantasy-land/equals"]||"function"==typeof t["fantasy-land/equals"])return"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t)&&"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e);if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(a){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===(i=e.constructor,null==(s=String(i).match(/^function (\w*)/))?"":s[1]))return e===t;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof t||!ST(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!ST(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1}for(var o=n.length-1;o>=0;){if(n[o]===e)return r[o]===t;o-=1}switch(a){case"Map":return e.size===t.size&&TT(e.entries(),t.entries(),n.concat([e]),r.concat([t]));case"Set":return e.size===t.size&&TT(e.values(),t.values(),n.concat([e]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var A=ES(e);if(A.length!==ES(t).length)return!1;var l=n.concat([e]),c=r.concat([t]);for(o=A.length-1;o>=0;){var u=A[o];if(!pS(u,t)||!xT(t[u],e[u],l,c))return!1;o-=1}return!0}var kT=MC(function(e,t){return xT(e,t,[],[])});function IT(e,t,n){var r,i;if("function"==typeof e.indexOf)switch(typeof t){case"number":if(0===t){for(r=1/t;n<e.length;){if(0===(i=e[n])&&1/i===r)return n;n+=1}return-1}if(t!=t){for(;n<e.length;){if("number"==typeof(i=e[n])&&i!=i)return n;n+=1}return-1}return e.indexOf(t,n);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,n);case"object":if(null===t)return e.indexOf(t,n)}for(;n<e.length;){if(kT(e[n],t))return n;n+=1}return-1}function FT(e,t){return IT(t,e,0)>=0}function LT(e){return'"'+e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var DT=function(e){return(e<10?"0":"")+e},_T="function"==typeof Date.prototype.toISOString?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+DT(e.getUTCMonth()+1)+"-"+DT(e.getUTCDate())+"T"+DT(e.getUTCHours())+":"+DT(e.getUTCMinutes())+":"+DT(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function UT(e){return function(){return!e.apply(this,arguments)}}function PT(e,t){for(var n=0,r=t.length,i=[];n<r;)e(t[n])&&(i[i.length]=t[n]),n+=1;return i}function RT(e){return"[object Object]"===Object.prototype.toString.call(e)}var OT=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=ZC.init,e.prototype["@@transducer/result"]=ZC.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},e}(),QT=MC(XC(["filter"],MC(function(e,t){return new OT(e,t)}),function(e,t){return RT(t)?dS(function(n,r){return e(t[r])&&(n[r]=t[r]),n},{},ES(t)):PT(e,t)})),NT=MC(function(e,t){return QT(UT(e),t)});function MT(e,t){var n=function(n){var r=t.concat([e]);return FT(n,r)?"<Circular>":MT(n,r)},r=function(e,t){return rS(function(t){return LT(t)+": "+n(e[t])},t.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+rS(n,e).join(", ")+"))";case"[object Array]":return"["+rS(n,e).concat(r(e,NT(function(e){return/^\d+$/.test(e)},ES(e)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof e?"new Boolean("+n(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?n(NaN):LT(_T(e)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof e?"new Number("+n(e.valueOf())+")":1/e==-1/0?"-0":e.toString(10);case"[object String]":return"object"==typeof e?"new String("+n(e.valueOf())+")":LT(e);case"[object Undefined]":return"undefined";default:if("function"==typeof e.toString){var i=e.toString();if("[object Object]"!==i)return i}return"{"+r(e,ES(e)).join(", ")+"}"}}var HT=RC(function(e){return MT(e,[])}),jT=MC(function(e,t){if(YC(e)){if(YC(t))return e.concat(t);throw new TypeError(HT(t)+" is not an array")}if(iS(e)){if(iS(t))return e+t;throw new TypeError(HT(t)+" is not a string")}if(null!=e&&qS(e["fantasy-land/concat"]))return e["fantasy-land/concat"](t);if(null!=e&&qS(e.concat))return e.concat(t);throw new TypeError(HT(e)+' does not have a method named "concat" or "fantasy-land/concat"')}),$T=RC(function(e){return $C(xS(nS,0,BS(function(e){return e[0].length},e)),function(){for(var t=0;t<e.length;){if(e[t][0].apply(this,arguments))return e[t][1].apply(this,arguments);t+=1}})}),KT=MC(function(e,t){if(e>10)throw new Error("Constructor with greater than ten arguments");return 0===e?function(){return new t}:eT(zS(e,function(e,n,r,i,s,a,o,A,l,c){switch(arguments.length){case 1:return new t(e);case 2:return new t(e,n);case 3:return new t(e,n,r);case 4:return new t(e,n,r,i);case 5:return new t(e,n,r,i,s);case 6:return new t(e,n,r,i,s,a);case 7:return new t(e,n,r,i,s,a,o);case 8:return new t(e,n,r,i,s,a,o,A);case 9:return new t(e,n,r,i,s,a,o,A,l);case 10:return new t(e,n,r,i,s,a,o,A,l,c)}}))}),VT=RC(function(e){return KT(e.length,e)}),GT=MC(FT),WT=MC(function(e,t){return VC(xS(nS,0,TS("length",t)),function(){var n=arguments,r=this;return e.apply(r,rS(function(e){return e.apply(r,n)},t))})}),zT=function(){function e(e,t,n,r){this.valueFn=e,this.valueAcc=t,this.keyFn=n,this.xf=r,this.inputs={}}return e.prototype["@@transducer/init"]=ZC.init,e.prototype["@@transducer/result"]=function(e){var t;for(t in this.inputs)if(pS(t,this.inputs)&&(e=this.xf["@@transducer/step"](e,this.inputs[t]))["@@transducer/reduced"]){e=e["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){var n=this.keyFn(t);return this.inputs[n]=this.inputs[n]||[n,this.valueAcc],this.inputs[n][1]=this.valueFn(this.inputs[n][1],t),e},e}(),YT=KC(4,[],XC([],KC(4,[],function(e,t,n,r){return new zT(e,t,n,r)}),function(e,t,n,r){return dS(function(r,i){var s=n(i);return r[s]=e(pS(s,r)?r[s]:t,i),r},{},r)})),qT=YT(function(e,t){return e+1},0),XT=HC(-1),JT=MC(function(e,t){return null==t||t!=t?e:t}),ZT=WC(function(e,t,n){var r=e(t),i=e(n);return r>i?-1:r<i?1:0}),ex=MC(function(e,t){for(var n=[],r=0,i=e.length;r<i;)FT(e[r],t)||FT(e[r],n)||(n[n.length]=e[r]),r+=1;return n}),tx=WC(function(e,t,n){for(var r=[],i=0,s=t.length;i<s;)CT(e,t[i],n)||CT(e,t[i],r)||r.push(t[i]),i+=1;return r}),nx=MC(function(e,t){var n={};for(var r in t)n[r]=t[r];return delete n[e],n}),rx=WC(function(e,t,n){var r=Array.prototype.slice.call(n,0);return r.splice(e,t),r}),ix=WC(function(e,t,n){return zC(OC(t),e,n)}),sx=MC(function e(t,n){switch(t.length){case 0:return n;case 1:return VS(t[0])?rx(t[0],1,n):nx(t[0],n);default:var r=t[0],i=Array.prototype.slice.call(t,1);return null==n[r]?n:VS(t[0])?ix(r,e(i,n[r]),n):KS(r,e(i,n[r]),n)}}),ax=MC(function(e,t){return e/t}),ox=function(){function e(e,t){this.xf=t,this.n=e}return e.prototype["@@transducer/init"]=ZC.init,e.prototype["@@transducer/result"]=ZC.result,e.prototype["@@transducer/step"]=function(e,t){return this.n>0?(this.n-=1,e):this.xf["@@transducer/step"](e,t)},e}(),Ax=MC(XC(["drop"],MC(function(e,t){return new ox(e,t)}),function(e,t){return pT(Math.max(0,e),1/0,t)})),lx=function(){function e(e,t){this.xf=t,this.n=e,this.i=0}return e.prototype["@@transducer/init"]=ZC.init,e.prototype["@@transducer/result"]=ZC.result,e.prototype["@@transducer/step"]=function(e,t){this.i+=1;var n=0===this.n?e:this.xf["@@transducer/step"](e,t);return this.n>=0&&this.i>=this.n?JC(n):n},e}(),cx=MC(XC(["take"],MC(function(e,t){return new lx(e,t)}),function(e,t){return pT(0,e<0?1/0:e,t)}));function ux(e,t){return cx(e<t.length?t.length-e:0,t)}var dx=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=new Array(e)}return e.prototype["@@transducer/init"]=ZC.init,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.full&&(e=this.xf["@@transducer/step"](e,this.acc[this.pos])),this.store(t),e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e}(),hx=MC(XC([],MC(function(e,t){return new dx(e,t)}),ux));function fx(e,t){for(var n=t.length-1;n>=0&&e(t[n]);)n-=1;return pT(0,n+1,t)}var px=function(){function e(e,t){this.f=e,this.retained=[],this.xf=t}return e.prototype["@@transducer/init"]=ZC.init,e.prototype["@@transducer/result"]=function(e){return this.retained=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.retain(e,t):this.flush(e,t)},e.prototype.flush=function(e,t){return e=dS(this.xf["@@transducer/step"],e,this.retained),this.retained=[],this.xf["@@transducer/step"](e,t)},e.prototype.retain=function(e,t){return this.retained.push(t),e},e}(),gx=MC(XC([],MC(function(e,t){return new px(e,t)}),fx)),mx=function(){function e(e,t){this.xf=t,this.pred=e,this.lastValue=void 0,this.seenFirstValue=!1}return e.prototype["@@transducer/init"]=ZC.init,e.prototype["@@transducer/result"]=ZC.result,e.prototype["@@transducer/step"]=function(e,t){var n=!1;return this.seenFirstValue?this.pred(this.lastValue,t)&&(n=!0):this.seenFirstValue=!0,this.lastValue=t,n?e:this.xf["@@transducer/step"](e,t)},e}(),yx=MC(function(e,t){return new mx(e,t)}),vx=MC(function(e,t){var n=e<0?t.length+e:e;return iS(t)?t.charAt(n):t[n]}),wx=vx(-1),bx=MC(XC([],yx,function(e,t){var n=[],r=1,i=t.length;if(0!==i)for(n[0]=t[0];r<i;)e(wx(n),t[r])||(n[n.length]=t[r]),r+=1;return n})),Ex=RC(XC([],yx(kT),bx(kT))),Bx=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=ZC.init,e.prototype["@@transducer/result"]=ZC.result,e.prototype["@@transducer/step"]=function(e,t){if(this.f){if(this.f(t))return e;this.f=null}return this.xf["@@transducer/step"](e,t)},e}(),Cx=MC(XC(["dropWhile"],MC(function(e,t){return new Bx(e,t)}),function(e,t){for(var n=0,r=t.length;n<r&&e(t[n]);)n+=1;return pT(n,1/0,t)})),Sx=MC(function(e,t){return e||t}),Tx=MC(function(e,t){return qS(e)?function(){return e.apply(this,arguments)||t.apply(this,arguments)}:JS(Sx)(e,t)}),xx=RC(function(e){return null!=e&&"function"==typeof e["fantasy-land/empty"]?e["fantasy-land/empty"]():null!=e&&null!=e.constructor&&"function"==typeof e.constructor["fantasy-land/empty"]?e.constructor["fantasy-land/empty"]():null!=e&&"function"==typeof e.empty?e.empty():null!=e&&null!=e.constructor&&"function"==typeof e.constructor.empty?e.constructor.empty():YC(e)?[]:iS(e)?"":RT(e)?{}:mS(e)?function(){return arguments}():void 0}),kx=MC(function(e,t){return Ax(e>=0?t.length-e:0,t)}),Ix=MC(function(e,t){return kT(kx(e.length,t),e)}),Fx=WC(function(e,t,n){return kT(e(t),e(n))}),Lx=WC(function(e,t,n){return kT(t[e],n[e])}),Dx=MC(function e(t,n){var r,i,s,a={};for(i in n)s=typeof(r=t[i]),a[i]="function"===s?r(n[i]):r&&"object"===s?e(r,n[i]):n[i];return a}),_x=function(){function e(e,t){this.xf=t,this.f=e,this.found=!1}return e.prototype["@@transducer/init"]=ZC.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.found=!0,e=JC(this.xf["@@transducer/step"](e,t))),e},e}(),Ux=MC(XC(["find"],MC(function(e,t){return new _x(e,t)}),function(e,t){for(var n=0,r=t.length;n<r;){if(e(t[n]))return t[n];n+=1}})),Px=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.found=!1}return e.prototype["@@transducer/init"]=ZC.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,-1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.found=!0,e=JC(this.xf["@@transducer/step"](e,this.idx))),e},e}(),Rx=MC(XC([],MC(function(e,t){return new Px(e,t)}),function(e,t){for(var n=0,r=t.length;n<r;){if(e(t[n]))return n;n+=1}return-1})),Ox=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=ZC.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.last))},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.last=t),e},e}(),Qx=MC(XC([],MC(function(e,t){return new Ox(e,t)}),function(e,t){for(var n=t.length-1;n>=0;){if(e(t[n]))return t[n];n-=1}})),Nx=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.lastIdx=-1}return e.prototype["@@transducer/init"]=ZC.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.lastIdx))},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.lastIdx=this.idx),e},e}(),Mx=MC(XC([],MC(function(e,t){return new Nx(e,t)}),function(e,t){for(var n=t.length-1;n>=0;){if(e(t[n]))return n;n-=1}return-1})),Hx=RC(nT(!0)),jx=RC(function(e){return VC(e.length,function(t,n){var r=Array.prototype.slice.call(arguments,0);return r[0]=n,r[1]=t,e.apply(this,r)})}),$x=MC(fT("forEach",function(e,t){for(var n=t.length,r=0;r<n;)e(t[r]),r+=1;return t})),Kx=MC(function(e,t){for(var n=ES(t),r=0;r<n.length;){var i=n[r];e(t[i],i,t),r+=1}return t}),Vx=RC(function(e){for(var t={},n=0;n<e.length;)t[e[n][0]]=e[n][1],n+=1;return t}),Gx=MC(fT("groupBy",YT(function(e,t){return null==e&&(e=[]),e.push(t),e},null))),Wx=MC(function(e,t){for(var n=[],r=0,i=t.length;r<i;){for(var s=r+1;s<i&&e(t[s-1],t[s]);)s+=1;n.push(t.slice(r,s)),r=s}return n}),zx=MC(function(e,t){return e>t}),Yx=MC(function(e,t){return e>=t}),qx=MC(pS),Xx=MC(function(e,t){return e in t}),Jx=vx(0);function Zx(e){return e}var ek=RC(Zx),tk=WC(function(e,t,n){return VC(Math.max(e.length,t.length,n.length),function(){return e.apply(this,arguments)?t.apply(this,arguments):n.apply(this,arguments)})}),nk=HC(1),rk=YT(function(e,t){return t},null),ik=MC(function(e,t){return"function"!=typeof t.indexOf||YC(t)?IT(t,e,0):t.indexOf(e)}),sk=pT(0,-1),ak=WC(function(e,t,n){return PT(function(t){return CT(e,t,n)},t)}),ok=WC(function(e,t,n){e=e<n.length&&e>=0?e:n.length;var r=Array.prototype.slice.call(n,0);return r.splice(e,0,t),r}),Ak=WC(function(e,t,n){return e=e<n.length&&e>=0?e:n.length,[].concat(Array.prototype.slice.call(n,0,e),t,Array.prototype.slice.call(n,e))}),lk=function(){function e(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return e.prototype.add=function(e){return!ck(e,!0,this)},e.prototype.has=function(e){return ck(e,!1,this)},e}();function ck(e,t,n){var r,i=typeof e;switch(i){case"string":case"number":return 0===e&&1/e==-1/0?!!n._items["-0"]||(t&&(n._items["-0"]=!0),!1):null!==n._nativeSet?t?(r=n._nativeSet.size,n._nativeSet.add(e),n._nativeSet.size===r):n._nativeSet.has(e):i in n._items?e in n._items[i]||(t&&(n._items[i][e]=!0),!1):(t&&(n._items[i]={},n._items[i][e]=!0),!1);case"boolean":if(i in n._items){var s=e?1:0;return!!n._items[i][s]||(t&&(n._items[i][s]=!0),!1)}return t&&(n._items[i]=e?[!1,!0]:[!0,!1]),!1;case"function":return null!==n._nativeSet?t?(r=n._nativeSet.size,n._nativeSet.add(e),n._nativeSet.size===r):n._nativeSet.has(e):i in n._items?!!FT(e,n._items[i])||(t&&n._items[i].push(e),!1):(t&&(n._items[i]=[e]),!1);case"undefined":return!!n._items[i]||(t&&(n._items[i]=!0),!1);case"object":if(null===e)return!!n._items.null||(t&&(n._items.null=!0),!1);default:return(i=Object.prototype.toString.call(e))in n._items?!!FT(e,n._items[i])||(t&&n._items[i].push(e),!1):(t&&(n._items[i]=[e]),!1)}}var uk=MC(function(e,t){for(var n,r,i=new lk,s=[],a=0;a<t.length;)n=e(r=t[a]),i.add(n)&&s.push(r),a+=1;return s}),dk=uk(ek),hk=MC(function(e,t){var n,r;return e.length>t.length?(n=e,r=t):(n=t,r=e),dk(PT(jx(FT)(n),r))}),fk=MC(fT("intersperse",function(e,t){for(var n=[],r=0,i=t.length;r<i;)r===i-1?n.push(t[r]):n.push(t[r],e),r+=1;return n}));const pk="function"==typeof Object.assign?Object.assign:function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,r=arguments.length;n<r;){var i=arguments[n];if(null!=i)for(var s in i)pS(s,i)&&(t[s]=i[s]);n+=1}return t};var gk=MC(function(e,t){var n={};return n[e]=t,n}),mk={"@@transducer/init":Array,"@@transducer/step":function(e,t){return e.push(t),e},"@@transducer/result":Zx},yk={"@@transducer/init":String,"@@transducer/step":function(e,t){return e+t},"@@transducer/result":Zx},vk={"@@transducer/init":Object,"@@transducer/step":function(e,t){return pk(e,sS(t)?gk(t[0],t[1]):t)},"@@transducer/result":Zx};var wk=WC(function(e,t,n){return qC(e)?dS(t(e),e["@@transducer/init"](),n):dS(t(function(e){if(qC(e))return e;if(sS(e))return mk;if("string"==typeof e)return yk;if("object"==typeof e)return vk;throw new Error("Cannot create transformer for "+e)}(e)),AT(e,[],[],!1),n)}),bk=RC(function(e){for(var t=ES(e),n=t.length,r=0,i={};r<n;){var s=t[r],a=e[s],o=pS(a,i)?i[a]:i[a]=[];o[o.length]=s,r+=1}return i}),Ek=RC(function(e){for(var t=ES(e),n=t.length,r=0,i={};r<n;){var s=t[r];i[e[s]]=s,r+=1}return i}),Bk=MC(function(e,t){return VC(e+1,function(){var n=arguments[e];if(null!=n&&qS(n[t]))return n[t].apply(n,Array.prototype.slice.call(arguments,0,e));throw new TypeError(HT(n)+' does not have a method named "'+t+'"')})}),Ck=MC(function(e,t){return null!=t&&t.constructor===e||t instanceof e}),Sk=RC(function(e){return null!=e&&kT(e,xx(e))}),Tk=Bk(1,"join"),xk=RC(function(e){return WT(function(){return Array.prototype.slice.call(arguments,0)},e)}),kk=RC(function(e){var t,n=[];for(t in e)n[n.length]=t;return n}),Ik=MC(function(e,t){if("function"!=typeof t.lastIndexOf||YC(t)){for(var n=t.length-1;n>=0;){if(kT(t[n],e))return n;n-=1}return-1}return t.lastIndexOf(e)});function Fk(e){return"[object Number]"===Object.prototype.toString.call(e)}var Lk=RC(function(e){return null!=e&&Fk(e.length)?e.length:NaN}),Dk=MC(function(e,t){return function(n){return function(r){return BS(function(e){return t(e,r)},n(e(r)))}}}),_k=RC(function(e){return Dk(vx(e),ix(e))}),Uk=RC(function(e){return Dk(CS(e),WS(e))}),Pk=RC(function(e){return Dk(SS(e),KS(e))}),Rk=MC(function(e,t){return e<t}),Ok=MC(function(e,t){return e<=t}),Qk=WC(function(e,t,n){for(var r=0,i=n.length,s=[],a=[t];r<i;)a=e(a[0],n[r]),s[r]=a[1],r+=1;return[a[0],s]}),Nk=WC(function(e,t,n){for(var r=n.length-1,i=[],s=[t];r>=0;)s=e(n[r],s[0]),i[r]=s[1],r-=1;return[i,s[0]]}),Mk=MC(function(e,t){return dS(function(n,r){return n[r]=e(t[r],r,t),n},{},ES(t))}),Hk=MC(function(e,t){return t.match(e)||[]}),jk=MC(function(e,t){return VS(e)?!VS(t)||t<1?NaN:(e%t+t)%t:NaN}),$k=WC(function(e,t,n){return e(n)>e(t)?n:t}),Kk=xS(HC,0),Vk=RC(function(e){return Kk(e)/e.length}),Gk=RC(function(e){var t=e.length;if(0===t)return NaN;var n=2-t%2,r=(t-n)/2;return Vk(Array.prototype.slice.call(e,0).sort(function(e,t){return e<t?-1:e>t?1:0}).slice(r,r+n))}),Wk=MC(function(e,t){var n={};return $C(t.length,function(){var r=e.apply(this,arguments);return pS(r,n)||(n[r]=t.apply(this,arguments)),n[r]})}),zk=Wk(function(){return HT(arguments)}),Yk=MC(function(e,t){return pk({},e,t)}),qk=RC(function(e){return pk.apply(null,[{}].concat(e))}),Xk=WC(function(e,t,n){var r,i={};for(r in t)pS(r,t)&&(i[r]=pS(r,n)?e(r,t[r],n[r]):t[r]);for(r in n)pS(r,n)&&!pS(r,i)&&(i[r]=n[r]);return i}),Jk=WC(function e(t,n,r){return Xk(function(n,r,i){return RT(r)&&RT(i)?e(t,r,i):t(n,r,i)},n,r)}),Zk=MC(function(e,t){return Jk(function(e,t,n){return t},e,t)}),eI=MC(function(e,t){return Jk(function(e,t,n){return n},e,t)}),tI=WC(function(e,t,n){return Jk(function(t,n,r){return e(n,r)},t,n)}),nI=WC(function(e,t,n){return Xk(function(t,n,r){return e(n,r)},t,n)}),rI=MC(function(e,t){return t<e?t:e}),iI=WC(function(e,t,n){return e(n)<e(t)?n:t}),sI=MC(function(e,t){return e%t}),aI=MC(function(e,t){return e*t}),oI=RC(function(e){return-e}),AI=MC(UT(XC(["any"],LS,DS))),lI=RC(function(e){return VC(e<0?1:e+1,function(){return vx(e,arguments)})}),cI=WC(function(e,t,n){return e(t(n))});function uI(e){return[e]}var dI=RC(uI),hI=MC(function(e,t){for(var n={},r={},i=0,s=e.length;i<s;)r[e[i]]=1,i+=1;for(var a in t)r.hasOwnProperty(a)||(n[a]=t[a]);return n}),fI=RC(function(e){var t,n=!1;return $C(e.length,function(){return n?t:(n=!0,t=e.apply(this,arguments))})}),pI=function(e){return{value:e,map:function(t){return pI(t(e))}}},gI=WC(function(e,t,n){return e(function(e){return pI(t(e))})(n).value}),mI=MC(function(e,t){return[e,t]});function yI(e){return MC(function(t,n){return $C(Math.max(0,t.length-n.length),function(){return t.apply(this,e(n,arguments))})})}var vI=yI(jC),wI=yI(jx(jC)),bI=xk([QT,NT]),EI=WC(function(e,t,n){return kT(CS(e,n),t)}),BI=WC(function(e,t,n){return JT(e,CS(t,n))}),CI=WC(function(e,t,n){return t.length>0&&e(CS(t,n))}),SI=MC(function(e,t){for(var n={},r=0;r<e.length;)e[r]in t&&(n[e[r]]=t[e[r]]),r+=1;return n}),TI=MC(function(e,t){for(var n={},r=0,i=e.length;r<i;){var s=e[r];n[s]=t[s],r+=1}return n}),xI=MC(function(e,t){var n={};for(var r in t)e(t[r],r,t)&&(n[r]=t[r]);return n});var kI=MC(function(e,t){return jC([e],t)}),II=xS(aI,1),FI=MC(function(e,t){return VC(t.length,function(){for(var n=[],r=0;r<t.length;)n.push(t[r].call(this,arguments[r])),r+=1;return e.apply(this,n.concat(Array.prototype.slice.call(arguments,t.length)))})}),LI=FI(rS,[TI,ek]),DI=WC(function(e,t,n){return kT(t,n[e])}),_I=WC(function(e,t,n){return Ck(e,n[t])}),UI=WC(function(e,t,n){return null!=n&&pS(t,n)?n[t]:e}),PI=WC(function(e,t,n){return e(n[t])}),RI=MC(function(e,t){for(var n=e.length,r=[],i=0;i<n;)r[i]=t[e[i]],i+=1;return r}),OI=MC(function(e,t){if(!Fk(e)||!Fk(t))throw new TypeError("Both arguments to range must be numbers");for(var n=[],r=e;r<t;)n.push(r),r+=1;return n}),QI=WC(function(e,t,n){for(var r=n.length-1;r>=0;)t=e(n[r],t),r-=1;return t}),NI=KC(4,[],function(e,t,n,r){return dS(function(n,r){return e(n,r)?t(n,r):JC(n)},n,r)}),MI=RC(JC),HI=MC(function(e,t){var n,r=Number(t),i=0;if(r<0||isNaN(r))throw new RangeError("n must be a non-negative number");for(n=new Array(r);i<r;)n[i]=e(i),i+=1;return n}),jI=MC(function(e,t){return HI(OC(e),t)}),$I=WC(function(e,t,n){return n.replace(e,t)}),KI=WC(function(e,t,n){for(var r=0,i=n.length,s=[t];r<i;)t=e(t,n[r]),s[r+1]=t,r+=1;return s}),VI=MC(function(e,t){return"function"==typeof t.sequence?t.sequence(e):QI(function(e,t){return US(BS(kI,e),t)},e([]),t)}),GI=WC(function(e,t,n){return gI(e,OC(t),n)}),WI=MC(function(e,t){return Array.prototype.slice.call(t,0).sort(e)}),zI=MC(function(e,t){return Array.prototype.slice.call(t,0).sort(function(t,n){var r=e(t),i=e(n);return r<i?-1:r>i?1:0})}),YI=MC(function(e,t){return Array.prototype.slice.call(t,0).sort(function(t,n){for(var r=0,i=0;0===r&&i<e.length;)r=e[i](t,n),i+=1;return r})}),qI=Bk(1,"split"),XI=MC(function(e,t){return[pT(0,e,t),pT(e,Lk(t),t)]}),JI=MC(function(e,t){if(e<=0)throw new Error("First argument to splitEvery must be a positive integer");for(var n=[],r=0;r<t.length;)n.push(pT(r,r+=e,t));return n}),ZI=MC(function(e,t){for(var n=0,r=t.length,i=[];n<r&&!e(t[n]);)i.push(t[n]),n+=1;return[i,Array.prototype.slice.call(t,n)]}),eF=MC(function(e,t){return kT(cx(e.length,t),e)}),tF=MC(function(e,t){return Number(e)-Number(t)}),nF=MC(function(e,t){return jT(ex(e,t),ex(t,e))}),rF=WC(function(e,t,n){return jT(tx(e,t,n),tx(e,n,t))}),iF=MC(function(e,t){for(var n=t.length-1;n>=0&&e(t[n]);)n-=1;return pT(n+1,1/0,t)}),sF=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=ZC.init,e.prototype["@@transducer/result"]=ZC.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):JC(e)},e}(),aF=MC(XC(["takeWhile"],MC(function(e,t){return new sF(e,t)}),function(e,t){for(var n=0,r=t.length;n<r&&e(t[n]);)n+=1;return pT(0,n,t)})),oF=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=ZC.init,e.prototype["@@transducer/result"]=ZC.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t),this.xf["@@transducer/step"](e,t)},e}(),AF=MC(XC([],MC(function(e,t){return new oF(e,t)}),function(e,t){return e(t),t}));var lF=MC(function(e,t){if(n=e,"[object RegExp]"!==Object.prototype.toString.call(n))throw new TypeError("test requires a value of type RegExp as its first argument; received "+HT(e));var n;return aT(e).test(t)}),cF=Bk(0,"toLowerCase"),uF=RC(function(e){var t=[];for(var n in e)pS(n,e)&&(t[t.length]=[n,e[n]]);return t}),dF=RC(function(e){var t=[];for(var n in e)t[t.length]=[n,e[n]];return t}),hF=Bk(0,"toUpperCase"),fF=VC(4,function(e,t,n,r){return dS(e("function"==typeof t?oS(t):t),n,r)}),pF=RC(function(e){for(var t=0,n=[];t<e.length;){for(var r=e[t],i=0;i<r.length;)void 0===n[i]&&(n[i]=[]),n[i].push(r[i]),i+=1;t+=1}return n}),gF=WC(function(e,t,n){return"function"==typeof n["fantasy-land/traverse"]?n["fantasy-land/traverse"](t,e):VI(e,BS(t,n))}),mF="\t\n\v\f\r \u2028\u2029\ufeff",yF=RC("function"==typeof String.prototype.trim&&!mF.trim()&&"".trim()?function(e){return e.trim()}:function(e){var t=new RegExp("^["+mF+"]["+mF+"]*"),n=new RegExp("["+mF+"]["+mF+"]*$");return e.replace(t,"").replace(n,"")}),vF=MC(function(e,t){return $C(e.length,function(){try{return e.apply(this,arguments)}catch(c$){return t.apply(this,jC([c$],arguments))}})}),wF=RC(function(e){return function(){return e(Array.prototype.slice.call(arguments,0))}}),bF=RC(function(e){return zS(1,e)}),EF=MC(function(e,t){return VC(e,function(){for(var n,r=1,i=t,s=0;r<=e&&"function"==typeof i;)n=r===e?arguments.length:s+i.length,i=i.apply(this,Array.prototype.slice.call(arguments,s,n)),r+=1,s=n;return i})}),BF=MC(function(e,t){for(var n=e(t),r=[];n&&n.length;)r[r.length]=n[0],n=e(n[1]);return r}),CF=MC(vT(dk,jC)),SF=MC(function(e,t){for(var n,r=0,i=t.length,s=[];r<i;)CT(e,n=t[r],s)||(s[s.length]=n),r+=1;return s}),TF=WC(function(e,t,n){return SF(e,jC(t,n))}),xF=WC(function(e,t,n){return e(n)?n:t(n)}),kF=iT(Zx),IF=WC(function(e,t,n){for(var r=n;!e(r);)r=t(r);return r}),FF=RC(function(e){var t,n=[];for(t in e)n[n.length]=e[t];return n}),LF=function(e){return{value:e,"fantasy-land/map":function(){return this}}},DF=MC(function(e,t){return e(LF)(t).value}),_F=WC(function(e,t,n){return e(n)?t(n):n}),UF=MC(function(e,t){for(var n in e)if(pS(n,e)&&!e[n](t[n]))return!1;return!0}),PF=MC(function(e,t){return UF(BS(kT,e),t)}),RF=MC(function(e,t){return NT(jx(FT)(e),t)}),OF=MC(function(e,t){for(var n,r=0,i=e.length,s=t.length,a=[];r<i;){for(n=0;n<s;)a[a.length]=[e[r],t[n]],n+=1;r+=1}return a}),QF=MC(function(e,t){for(var n=[],r=0,i=Math.min(e.length,t.length);r<i;)n[r]=[e[r],t[r]],r+=1;return n}),NF=MC(function(e,t){for(var n=0,r=Math.min(e.length,t.length),i={};n<r;)i[e[n]]=t[n],n+=1;return i}),MF=WC(function(e,t,n){for(var r=[],i=0,s=Math.min(t.length,n.length);i<s;)r[i]=e(t[i],n[i]),i+=1;return r});const HF=t(Object.freeze(Object.defineProperty({__proto__:null,F:QC,T:NC,__:{"@@functional/placeholder":!0},add:HC,addIndex:GC,adjust:zC,all:tS,allPass:kS,always:OC,and:IS,any:DS,anyPass:_S,ap:US,aperture:OS,append:QS,apply:NS,applySpec:HS,applyTo:jS,ascend:$S,assoc:KS,assocPath:WS,binary:YS,bind:AS,both:ZS,call:tT,chain:iT,clamp:sT,clone:lT,comparator:cT,complement:dT,compose:vT,composeK:wT,composeP:function(){if(0===arguments.length)throw new Error("composeP requires at least one argument");return ET.apply(this,yT(arguments))},concat:jT,cond:$T,construct:VT,constructN:KT,contains:GT,converge:WT,countBy:qT,curry:eT,curryN:VC,dec:XT,defaultTo:JT,descend:ZT,difference:ex,differenceWith:tx,dissoc:nx,dissocPath:sx,divide:ax,drop:Ax,dropLast:hx,dropLastWhile:gx,dropRepeats:Ex,dropRepeatsWith:bx,dropWhile:Cx,either:Tx,empty:xx,endsWith:Ix,eqBy:Fx,eqProps:Lx,equals:kT,evolve:Dx,filter:QT,find:Ux,findIndex:Rx,findLast:Qx,findLastIndex:Mx,flatten:Hx,flip:jx,forEach:$x,forEachObjIndexed:Kx,fromPairs:Vx,groupBy:Gx,groupWith:Wx,gt:zx,gte:Yx,has:qx,hasIn:Xx,head:Jx,identical:ST,identity:ek,ifElse:tk,inc:nk,indexBy:rk,indexOf:ik,init:sk,innerJoin:ak,insert:ok,insertAll:Ak,intersection:hk,intersperse:fk,into:wk,invert:bk,invertObj:Ek,invoker:Bk,is:Ck,isEmpty:Sk,isNil:GS,join:Tk,juxt:xk,keys:ES,keysIn:kk,last:wx,lastIndexOf:Ik,length:Lk,lens:Dk,lensIndex:_k,lensPath:Uk,lensProp:Pk,lift:JS,liftN:XS,lt:Rk,lte:Ok,map:BS,mapAccum:Qk,mapAccumRight:Nk,mapObjIndexed:Mk,match:Hk,mathMod:jk,max:nS,maxBy:$k,mean:Vk,median:Gk,memoize:zk,memoizeWith:Wk,merge:Yk,mergeAll:qk,mergeDeepLeft:Zk,mergeDeepRight:eI,mergeDeepWith:tI,mergeDeepWithKey:Jk,mergeWith:nI,mergeWithKey:Xk,min:rI,minBy:iI,modulo:sI,multiply:aI,nAry:zS,negate:oI,none:AI,not:uT,nth:vx,nthArg:lI,o:cI,objOf:gk,of:dI,omit:hI,once:fI,or:Sx,over:gI,pair:mI,partial:vI,partialRight:wI,partition:bI,path:CS,pathEq:EI,pathOr:BI,pathSatisfies:CI,pick:SI,pickAll:TI,pickBy:xI,pipe:mT,pipeK:function(){if(0===arguments.length)throw new Error("pipeK requires at least one argument");return wT.apply(this,yT(arguments))},pipeP:ET,pluck:TS,prepend:kI,product:II,project:LI,prop:SS,propEq:DI,propIs:_I,propOr:UI,propSatisfies:PI,props:RI,range:OI,reduce:xS,reduceBy:YT,reduceRight:QI,reduceWhile:NI,reduced:MI,reject:NT,remove:rx,repeat:jI,replace:$I,reverse:yT,scan:KI,sequence:VI,set:GI,slice:pT,sort:WI,sortBy:zI,sortWith:YI,split:qI,splitAt:XI,splitEvery:JI,splitWhen:ZI,startsWith:eF,subtract:tF,sum:Kk,symmetricDifference:nF,symmetricDifferenceWith:rF,tail:gT,take:cx,takeLast:kx,takeLastWhile:iF,takeWhile:aF,tap:AF,test:lF,times:HI,toLower:cF,toPairs:uF,toPairsIn:dF,toString:HT,toUpper:hF,transduce:fF,transpose:pF,traverse:gF,trim:yF,tryCatch:vF,type:oT,unapply:wF,unary:bF,uncurryN:EF,unfold:BF,union:CF,unionWith:TF,uniq:dk,uniqBy:uk,uniqWith:SF,unless:xF,unnest:kF,until:IF,update:ix,useWith:FI,values:MS,valuesIn:FF,view:DF,when:_F,where:UF,whereEq:PF,without:RF,xprod:OF,zip:QF,zipObj:NF,zipWith:MF},Symbol.toStringTag,{value:"Module"})));var jF,$F,KF,VF,GF,WF;function zF(){if($F)return jF;$F=1;const e="^\\s*WEBVTT[^]*?(?:\\r\\n|\\n|\\r){2,}",t="\\d{2}:\\d{2}:\\d{2}[;:]\\d{2}(?:(\\s)[a-fA-F0-9]{4})+[ ]?",n="^([^]+?)?<tt.*?>",r="^([^]+?)?\\[Script Info\\]",i=new RegExp(`(${e}|${t}|${n}|${r}|--\x3e)`),s=[{extension:".vtt",regex:new RegExp(e)},{extension:".scc",regex:new RegExp(t)},{extension:".ttml",regex:new RegExp(n)},{extension:".ass",regex:new RegExp(r)},{extension:".srt",regex:new RegExp("--\x3e")}];return jF={ALL_VALID_EXT_REGEX:i,VALID_EXT_REGEX_ARRAY:s}}function YF(){if(VF)return KF;VF=1;const e=UC(),{ALL_VALID_EXT_REGEX:t}=zF(),n=e.object().keys({global:e.object().keys({language:e.string(),color:e.string(),textAlign:e.string()}),body:e.array().items(e.object().keys({id:e.string(),timecode:e.string(),startMicro:e.number().unit("microseconds"),endMicro:e.number().unit("microseconds"),captions:{frames:e.number().integer(),popOn:e.boolean(),paintOn:e.boolean(),rollUpRows:e.number().integer(),commands:e.string()},styles:e.object().keys({align:e.string(),line:e.string(),position:e.string(),size:e.string()}),text:e.string()})),source:e.any()}),r=e.object().keys({subtitleText:e.string().regex(t).required().error(()=>"Input file type is not supported."),outputExtension:e.string().required(),options:e.object().keys({shiftTimecode:e.number(),sourceFps:e.number().positive(),outputFps:e.number().positive(),removeTextFormatting:e.boolean(),timecodeOverlapLimiter:e.alternatives().try(e.number().positive().allow(0),e.boolean()),combineOverlapping:e.boolean(),startAtZeroHour:e.boolean()})});return KF={SUBTITLE_SCHEMA:n,PARAM_SCHEMA:r}}function qF(){if(WF)return GF;WF=1;const{VALID_EXT_REGEX_ARRAY:e}=zF();function t(e){return e/1e3}function n(e){return 1e3*e}function r(e){return n(1e3*e)}function i(e){return r(60*e)}function s(e){return i(60*e)}return GF={timecodeToMicroseconds:function(e,t){const[a,o,A,l]=e.replace(",",".").split(":"),c=A.split(".")[0]||0,u=A.split(".")[1]||0,d=c.split(";")[1]||l;if(d&&!t)throw Error(`Timecode (${e}) contains frames, but no fps was specified.`);return s(parseInt(a))+i(parseInt(o))+r(parseInt(c))+n(parseInt(u))+function(e,t){return e&&t?r(e/t):0}(parseInt(d),parseFloat(t))},secondsToMicroseconds:r,millisecondsToMicroseconds:n,microsecondsToMilliseconds:t,microsecondsToSeconds:function(e){return t(e/1e3)},hoursToMicroseconds:s,cleanUpText:function(e,t=!1){let n=e.replace(/[\n]+/g,"\n").trim();return t&&(n=function(e){return[{regex:/^<br>/m,value:""},{regex:/<br>/g,value:"\n"},{regex:/<.*?>/g,value:""},{regex:/{.*?}/g,value:" "},{regex:/(>|<|{|})/g,value:""},{regex:/ {2,}/g,value:" "},{regex:/^\s+|\s+$/gm,value:""}].reduce((e,{regex:t,value:n})=>e.replace(t,n),e)}(n)),n},getExtension:function(t){let n;return e.some(e=>(e.regex.test(t)&&(n=e.extension),!!n)),n}}}var XF,JF,ZF,eL,tL,nL,rL,iL,sL,aL={exports:{}};function oL(){if(ZF)return JF;ZF=1;const e=UC(),{SUBTITLE_SCHEMA:t}=YF(),{cleanUpText:n}=qF(),{toJSON:r}=(XF||(XF=1,function(e){const t={COMMANDS:{1020:"",1023:"",1025:"",1026:"",1029:"","102a":"","102c":"","102f":"",1040:"{break}",1042:"",1043:"{break}",1044:"",1045:"{break}",1046:"{break}",1048:"",1049:"{break}","104a":"{break}","104c":"{break}","104e":"{italic}","104f":"{break}{italic}",1051:"{break}",1052:"{break}",1054:"{break}",1057:"{break}",1058:"{break}","105b":"{break}","105d":"{break}","105e":"{break}","10a1":"","10a2":"","10a4":"","10a7":"","10a8":"","10ab":"","10ad":"","10ae":"","10c1":"{break}","10c2":"{break}","10c4":"{break}","10c7":"{break}","10c8":"{break}","10cb":"{break}","10cd":"{break}","10ce":"{break}{italic}","10d0":"{break}","10d3":"{break}","10d5":"{break}","10d6":"{break}","10d9":"{break}","10da":"{break}","10dc":"{break}","10df":"{break}",1142:"",1144:"",1146:"",1148:"","114a":"","114c":"","114e":"{italic}","114f":"",1160:"",1162:"",1164:"",1166:"",1168:"","116a":"","116c":"","116e":"{italic}","116f":"",1240:"",1242:"",1244:"",1246:"",1248:"","124a":"","124c":"","124e":"{italic}","124f":"",1260:"",1262:"",1264:"",1266:"",1268:"","126a":"","126c":"","126e":"{italic}","126f":"",1340:"{break}",1342:"",1343:"{break}",1344:"",1345:"{break}",1346:"{break}",1348:"",1349:"{break}","134a":"{break}","134c":"{break}","134e":"{italic}","134f":"{break}{italic}",1351:"{break}",1352:"{break}",1354:"{break}",1357:"{break}",1358:"{break}","135b":"{break}","135d":"{break}","135e":"{break}",1360:"",1361:"{break}",1362:"",1364:"{break}",1366:"",1367:"{break}",1368:"{break}","136a":"","136b":"{break}","136c":"","136d":"{break}","136e":"{break}{italic}","136f":"",1370:"{break}",1373:"{break}",1375:"{break}",1376:"{break}",1379:"{break}","137a":"{break}","137c":"","137f":"{break}","13c1":"{break}","13c2":"{break}","13c4":"{break}","13c7":"{break}","13c8":"{break}","13cb":"{break}","13cd":"{break}","13ce":"{break}{italic}","13d0":"{break}","13d3":"{break}","13d5":"{break}","13d6":"{break}","13d9":"{break}","13da":"{break}","13dc":"{break}","13df":"{break}","13e0":"{break}","13e3":"{break}","13e5":"{break}","13e6":"{break}","13e9":"{break}","13ea":"{break}","13ec":"{break}","13ef":"{break}{italic}","13f1":"{break}","13f2":"{break}","13f4":"{break}","13f7":"{break}","13f8":"{break}","13fb":"{break}","13fc":"{break}","13fd":"{break}","13fe":"{break}",1440:"",1442:"",1444:"",1446:"",1448:"","144a":"","144c":"","144e":"{italic}","144f":"",1460:"",1462:"",1464:"",1466:"",1468:"","146a":"","146c":"","146e":"{italic}","146f":"",1540:"{break}",1542:"",1543:"{break}",1544:"",1545:"{break}",1546:"{break}",15462:"{break}",1548:"",1549:"{break}","154a":"{break}","154c":"{break}","154e":"{italic}","154f":"{break}{italic}",1551:"{break}",1552:"{break}",1554:"{break}",1557:"{break}",1558:"{break}","155b":"{break}","155d":"{break}","155e":"{break}",1560:"",1561:"{break}",1562:"",1564:"{break}",1566:"",1567:"{break}",1568:"{break}","156a":"","156b":"{break}","156c":"","156d":"{break}","156e":"{break}{italic}","156f":"",1570:"{break}",1573:"{break}",1575:"{break}",1576:"{break}",1579:"{break}","157a":"{break}","157c":"","157f":"{break}","15c1":"{break}","15c2":"{break}","15c4":"{break}","15c7":"{break}","15c8":"{break}","15cb":"{break}","15cd":"{break}","15ce":"{break}{italic}","15d0":"{break}","15d3":"{break}","15d5":"{break}","15d6":"{break}","15d9":"{break}","15da":"{break}","15dc":"{break}","15df":"{break}","15e0":"{break}","15e3":"{break}","15e5":"{break}","15e6":"{break}","15e9":"{break}","15ea":"{break}","15ec":"{break}","15ef":"{break}{italic}","15f1":"{break}","15f2":"{break}","15f4":"{break}","15f7":"{break}","15f8":"{break}","15fb":"{break}","15fc":"{break}","15fd":"{break}","15fe":"{break}",1640:"{break}",1642:"",1643:"{break}",1644:"",1645:"{break}",1646:"{break}",1648:"",1649:"{break}","164a":"{break}","164c":"{break}","164e":"{italic}","164f":"{break}{italic}",1651:"{break}",1652:"{break}",1654:"{break}",1657:"{break}",1658:"{break}","165b":"{break}","165d":"{break}","165e":"{break}",1660:"",1661:"{break}",1662:"",1664:"{break}",1666:"",1667:"{break}",1668:"{break}","166a":"","166b":"{break}","166c":"","166d":"{break}","166e":"{break}{italic}","166f":"",1670:"{break}",1673:"{break}",1675:"{break}",1676:"{break}",1679:"{break}","167a":"{break}","167c":"","167f":"{break}","16c1":"{break}","16c2":"{break}","16c4":"{break}","16c7":"{break}","16c8":"{break}","16cb":"{break}","16cd":"{break}","16ce":"{break}{italic}","16d0":"{break}","16d3":"{break}","16d5":"{break}","16d6":"{break}","16d9":"{break}","16da":"{break}","16dc":"{break}","16df":"{break}","16e0":"{break}","16e3":"{break}","16e5":"{break}","16e6":"{break}","16e9":"{break}","16ea":"{break}","16ec":"{break}","16ef":"{break}{italic}","16f1":"{break}","16f2":"{break}","16f4":"{break}","16f7":"{break}","16f8":"{break}","16fb":"{break}","16fc":"{break}","16fd":"{break}","16fe":"{break}",1740:"",1742:"",1744:"",1746:"",1748:"","174a":"","174c":"","174f":"","174e":"{italic}",1760:"",1762:"",1764:"",1766:"",1768:"","176a":"","176c":"","176e":"{italic}","176f":"",9120:"{end-italic}",9123:"",9125:"",9126:"",9129:"","912a":"","912c":"","912f":"{italic}",9140:"{break}",9143:"{break}",9145:"{break}",9146:"{break}",9149:"{break}","914a":"{break}","914c":"{break}","914f":"{break}{italic}",9151:"{break}",9152:"{break}",9154:"{break}",9157:"{break}",9158:"{break}","915b":"{break}","915d":"{break}","915e":"{break}",9161:"{break}",9162:"{break}",9164:"{break}",9167:"{break}",9168:"{break}","916b":"{break}","916d":"{break}","916e":"{break}{italic}",9170:"{break}",9173:"{break}",9175:"{break}",9176:"{break}",9179:"{break}","917a":"{break}","917c":"","917f":"{break}","91a1":"","91a2":"","91a4":"","91a7":"","91a8":"","91ab":"","91ad":"","91ae":"{italic}","91c1":"{break}","91c2":"{break}","91c4":"{break}","91c7":"{break}","91c8":"{break}","91cb":"{break}","91cd":"{break}","91ce":"{break}{italic}","91d0":"{break}","91d3":"{break}","91d5":"{break}","91d6":"{break}","91d9":"{break}","91da":"{break}","91dc":"{break}","91df":"{break}","91e0":"{break}","91e3":"{break}","91e5":"{break}","91e6":"{break}","91e9":"{break}","91ea":"{break}","91ec":"{break}","91ef":"{break}{italic}","91f1":"{break}","91f2":"{break}","91f4":"{break}","91f7":"{break}","91f8":"{break}","91fb":"{break}","91fc":"{break}","91fd":"{break}","91fe":"{break}",9240:"{break}",9243:"{break}",9245:"{break}",9246:"{break}",9249:"{break}","924a":"{break}","924c":"{break}","924f":"{break}{italic}",9251:"{break}",9252:"{break}",9254:"{break}",9257:"{break}",9258:"{break}","925b":"{break}","925d":"{break}","925e":"{break}",9261:"{break}",9262:"{break}",9264:"{break}",9267:"{break}",9268:"{break}","926b":"{break}","926d":"{break}","926e":"{break}{italic}",9270:"{break}",9273:"{break}",9275:"{break}",9276:"{break}",9279:"{break}","927a":"{break}","927c":"","927f":"{break}","92c1":"{break}","92c2":"{break}","92c4":"{break}","92c7":"{break}","92c8":"{break}","92cb":"{break}","92cd":"{break}","92ce":"{break}{italic}","92d0":"{break}","92d3":"{break}","92d5":"{break}","92d6":"{break}","92d9":"{break}","92da":"{break}","92dc":"{break}","92df":"{break}","92e0":"{break}","92e3":"{break}","92e5":"{break}","92e6":"{break}","92e9":"{break}","92ea":"{break}","92ec":"{break}","92ef":"{break}{italic}","92f1":"{break}","92f2":"{break}","92f4":"{break}","92f7":"{break}","92f8":"{break}","92fb":"{break}","92fc":"{break}","92fd":"{break}","92fe":"{break}",9420:"",9423:"",9425:"",9426:"",9429:"","942a":"","942c":"","942f":"",9440:"{break}",9443:"{break}",9445:"{break}",9446:"{break}",9449:"{break}","944a":"{break}","944c":"{break}","944f":"{break}{italic}",9451:"{break}",9452:"{break}",9454:"{break}",9457:"{break}",9458:"{break}","945b":"{break}","945d":"{break}","945e":"{break}",9461:"{break}",9462:"{break}",9464:"{break}",9467:"{break}",9468:"{break}","946b":"{break}","946d":"{break}","946e":"{break}{italic}",9470:"{break}",9473:"{break}",9475:"{break}",9476:"{break}",9479:"{break}","947a":"{break}","947c":"{end-italic}","947f":"{break}","94a1":"","94a2":"","94a4":"","94a7":"","94a8":"","94ab":"","94ad":"","94ae":"","94c1":"{break}","94c2":"{break}","94c4":"{break}","94c7":"{break}","94c8":"{break}","94cb":"{break}","94cd":"{break}","94ce":"{break}{italic}","94d0":"{break}","94d3":"{break}","94d5":"{break}","94d6":"{break}","94d9":"{break}","94da":"{break}","94dc":"{break}","94df":"{break}","94e0":"{break}","94e3":"{break}","94e5":"{break}","94e6":"{break}","94e9":"{break}","94ea":"{break}","94ec":"{break}","94ef":"{break}{italic}","94f1":"{break}","94f2":"{break}","94f4":"{break}","94f7":"{break}","94f8":"{break}","94fb":"{break}","94fc":"{break}","94fd":"{break}","94fe":"{break}",9723:"",9725:"",9726:"",9729:"","972a":"","972f":"",9740:"{break}",9743:"{break}",9745:"{break}",9746:"{break}",9749:"{break}","974a":"{break}","974c":"{break}","974f":"{break}{italic}",9751:"{break}",9752:"{break}",9754:"{break}",9757:"{break}",9758:"{break}","975b":"{break}","975d":"{break}","975e":"{break}",9761:"{break}",9762:"{break}",9764:"{break}",9767:"{break}",9768:"{break}","976b":"{break}","976d":"{break}","976e":"{break}{italic}",9770:"{break}",9773:"{break}",9775:"{break}",9776:"{break}",9779:"{break}","977a":"{break}","977c":"","977f":"{break}","97a1":"","97a2":"","97a4":"","97a7":"","97a8":"","97ad":"","97ae":"","97c1":"{break}","97c2":"{break}","97c4":"{break}","97c7":"{break}","97c8":"{break}","97cb":"{break}","97cd":"{break}","97ce":"{break}{italic}","97d0":"{break}","97d3":"{break}","97d5":"{break}","97d6":"{break}","97d9":"{break}","97da":"{break}","97dc":"{break}","97df":"{break}","97e0":"{break}","97e3":"{break}","97e5":"{break}","97e6":"{break}","97e9":"{break}","97ea":"{break}","97ec":"{break}","97ef":"{break}{italic}","97f1":"{break}","97f2":"{break}","97f4":"{break}","97f7":"{break}","97f8":"{break}","97fb":"{break}","97fc":"{break}","97fd":"{break}","97fe":"{break}",1140:""},CHARACTERS:{20:" ",a1:"!",a2:'"',23:"#",a4:"$",25:"%",26:"&",a7:"'",a8:"(",29:")","2a":"",ab:"+","2c":",",ad:"-",ae:".","2f":"/",b0:"0",31:"1",32:"2",b3:"3",34:"4",b5:"5",b6:"6",37:"7",38:"8",b9:"9",ba:":","3b":";",bc:"<","3d":"=","3e":">",bf:"?",40:"@",c1:"A",c2:"B",43:"C",c4:"D",45:"E",46:"F",c7:"G",c8:"H",49:"I","4a":"J",cb:"K","4c":"L",cd:"M",ce:"N","4f":"O",d0:"P",51:"Q",52:"R",d3:"S",54:"T",d5:"U",d6:"V",57:"W",58:"X",d9:"Y",da:"Z","5b":"[",dc:"","5d":"]","5e":"",df:"",e0:"",61:"a",62:"b",e3:"c",64:"d",e5:"e",e6:"f",67:"g",68:"h",e9:"i",ea:"j","6b":"k",ec:"l","6d":"m","6e":"n",ef:"o",70:"p",f1:"q",f2:"r",73:"s",f4:"t",75:"u",76:"v",f7:"w",f8:"x",79:"y","7a":"z",fb:"","7c":"",fd:"",fe:"","7f":"",80:""},SPECIAL_CHARS:{"91b0":"",9131:"",9132:"","91b3":"","91b4":"","91b5":"","91b6":"",9137:"",9138:"","91b9":" ","91ba":"","913b":"","91bc":"","913d":"","913e":"","91bf":""},EXTENDED_CHARS:{9220:"","92a1":"","92a2":"",9223:"","92a4":"",9225:"",9226:"","92a7":"","92a8":"*",9229:"","922a":"","92ab":"","922c":"","92ad":"","92ae":"","922f":"","92b0":"",9231:"",9232:"","92b3":"",9234:"","92b5":"","92b6":"",9237:"",9238:"","92b9":"","92ba":"","923b":"","92bc":"","923d":"","923e":"","92bf":"",1320:"","13a1":"","13a2":"",1323:"","13a4":"",1325:"",1326:"","13a7":"","13a8":"",1329:"{","132a":"}","13ab":"\\","132c":"^","13ad":"_","13ae":"","132f":"~","13b0":"",1331:"",1332:"","13b3":"",1334:"","13b5":"","13b6":"",1337:"|",1338:"","13b9":"","13ba":"","133b":"","13bc":"","133d":"","133e":"","13bf":""}},n=new RegExp("Scenarist_SCC V1.0"),r=new RegExp("([0-9:;]*)([\t]*)((.)*)");let i,s,a,o="",A="",l=[],c="",u="";const d=["9425","9426","94a7"];let h,f,p=0,g=[],m=[];function y(e,t,n){const r={startTimeMicro:t,endTimeMicro:void 0,frames:n,popOn:s,paintOn:a,rollUpRows:p,commands:l.join(" "),text:e};l=[],e="",m.push(r)}function v(e){g.length>=p?g.shift():g.push(A),void 0!==m[m.length-1]&&void 0===m[m.length-1].endTimeMicro&&(m[m.length-1].endTimeMicro=c),A=g.join(" "),y(A,c,f),A="",g=[],g.length===p&&(void 0!==m[m.length-1]&&void 0===m[m.length-1].endTimeMicro&&(m[m.length-1].endTimeMicro=c),A=g.join(" "),y(A,c,f),A="",g=[])}function w(e){return e===h?(h="",!0):(h=e,!1)}e.exports={verify:e=>n.test(e.trim()),toJSON(t){let n=0;for(m=[],n=0;n<t.length;n+=1)e.exports.verify(t[n])||e.exports.translateLine(t[n].toLowerCase());if(A.length>0&&v(),!m[m.length-1])throw Error("Failed to convert SCC data");return void 0===m[m.length-1].endTimeMicro&&(m[m.length-1].endTimeMicro=m[m.length-1].startTimeMicro),m},translateLine(t){if(0===t.length)return;let n;const s=t.match(r),a=s[3].split(" ");for(i=s[1],f=0,n=0;n<a.length;n+=1)l.push(a[n]),e.exports.translateWord(a[n])},translateWord(n){f+=1,t.COMMANDS.hasOwnProperty(n)?e.exports.translateCommand(n):t.SPECIAL_CHARS.hasOwnProperty(n)?e.exports.translateSpecialChars(n):t.EXTENDED_CHARS.hasOwnProperty(n)&&e.exports.translateExtendedChars(n),e.exports.translateCharacters(n)},translateCommand:function(n){const r=n;w(r)||("9420"===r?(s=!0,a=!1):d.indexOf(r)>-1?(a=!0,s=!1,"9429"===r?p=1:"9425"===r?p=2:"9426"===r?p=3:"94a7"===r&&(p=4),A.length>0&&(v(),A=""),c=e.exports.processTimeStamp(i,f)):"94ae"===r?o="":"942f"===r&&o.length>0?(u=e.exports.processTimeStamp(i,f),void 0!==m[m.length-1]&&void 0===m[m.length-1].endTimeMicro&&(m[m.length-1].endTimeMicro=u),y(o,u,f),o=""):"94ad"===r?A.length>0&&v():"942c"===r?(g=[],A.length>0&&v(),void 0!==m[m.length-1]&&void 0===m[m.length-1].endTimeMicro&&(m[m.length-1].endTimeMicro=e.exports.processTimeStamp(i,f))):a?A+=t.COMMANDS[r]:o+=t.COMMANDS[r])},translateSpecialChars:function(e){w(e)||(a?A+=t.SPECIAL_CHARS[e]:o+=t.SPECIAL_CHARS[e])},translateExtendedChars:function(e){w(e)||(a?(A.length>0&&(A=A.substring(0,A.length-1)),A+=t.EXTENDED_CHARS[e]):(o.length>0&&(o=o.substring(0,o.length-1)),o+=t.EXTENDED_CHARS[e]))},translateCharacters:function(e){if(e.length>0){const n=e.match(/.{1,2}/gi);if(void 0===t.CHARACTERS[n[0]])return;if(void 0===t.CHARACTERS[n[1]])return;a?(A+=t.CHARACTERS[n[0]],A+=t.CHARACTERS[n[1]]):(o+=t.CHARACTERS[n[0]],o+=t.CHARACTERS[n[1]])}},processTimeStamp(t,n){let r;const i=/;/.test(t),s=t.replace(/;/g,":").split(":"),a=parseInt(s[s.length-1],10);return r=a+n<=9?`0${a+n}`:a+n,s[s.length-1]=r,e.exports.translateTime(s.join(":"),i)},translateTime(e,t){const n=t?1:1.001,r=e.split(":"),i=(3600*parseInt(r[0],10)+60*parseInt(r[1],10)+parseInt(r[2],10)+parseInt(r[3],10)/30)*n*1e3*1e3;return i>0?i:0}}}(aL)),aL.exports);return JF=function(i,s){const a={success:!0,invalidEntries:[]},o=i.split(/\r\n|\n|\r/),A=r(o),{error:l,value:c}=e.validate(function(e,t){const{removeTextFormatting:r}=t;return{global:{},body:e.map(e=>({id:e.id,startMicro:e.startTimeMicro,endMicro:e.endTimeMicro,captions:{frames:e.frames,popOn:e.popOn,paintOn:e.paintOn,rollUpRows:e.rollUpRows,commands:e.commands},text:n(e.text,r)})).filter(e=>e.text).map((e,t)=>(e.id=(t+1).toString(),e)),source:e}}(A,s),t,{abortEarly:!1});if(l)throw Error(l);return a.invalidEntries.length&&(a.success=!1),{data:c,status:a}}}function AL(){if(rL)return nL;rL=1;const{timecodeToMicroseconds:e}=qF(),{potentialIndexRegex:t,potentialTimecodeRegex:n,potentialSrtBlockRegex:r,untilFirstTimecodeRegex:i,validTimecodeRegex:s,noTextEntryRegex:a,validEntryRegexGroups:o,strictTimestampRegex:A}=function(){if(tL)return eL;tL=1;const e=".*\\d.*--\x3e.*\\d.*",t=`(?=(?:\\n(?:\\n.+\\n||\\n)${e}|$))`,n="\\d{2}",r="[0-5]\\d",i="[0-5]\\d",s="\\d{3}",a="[^\\n\\d]+?",o=`${n}${a}${r}${a}${i}${a}${s}`,A=`${o}[^\\n\\d]+?${o}(?=(\\n|$))`,l=`(${o})`,c=`(${o})`,u=new RegExp(`^\\n*?.+(?=\\n${e})`,"g"),d=new RegExp(e,"g"),h=new RegExp(`(\\n*)(?:.+\\n)?${e}[^]+?${t}`,"g"),f=new RegExp(`^[^]+?(?=${e})`,"g"),p=new RegExp(A),g=new RegExp(`${l}[^\\n\\d]+?${c}[^\\n\\d]*?\\n([^]+)`),m=new RegExp(`${A}\\s*$`),y=new RegExp(`${n}:${r}:${i},${s}`);return eL={potentialIndexRegex:u,potentialTimecodeRegex:d,potentialSrtBlockRegex:h,strictTimestampRegex:y,validEntryRegexGroups:g,noTextEntryRegex:m,validTimecodeRegex:p,untilFirstTimecodeRegex:f}}();function l(e){return A.test(e)?e:e.replace(/[^\d]+/g,":").replace(/:(?=\d{3})/,",")}return nL=function(A,c={invalidEntries:!0,invalidTimecodes:!0,invalidIndices:!0}){const u={validEntries:[],status:{success:!0,invalidEntries:[],invalidTimecodes:[],invalidIndices:[]}},d=(A=A.replace(/(\r\n|\r)/g,"\n")).match(r);if(!d)return u.validEntries.push("No entries found."),u.status.success=!1,u;const h=A.match(i)[0];!/^(\n*(.+\n)?|0)$/.test(h)&&(u.status.success=!1,u.status.invalidEntries.push({id:"0",timecode:"00:00:00:000",text:h}));const{validEntries:f,status:p}=d.reduce((r,i)=>{const A=(i=i.replace(/\n{2,}/g,"\n").trim()).match(t),u=A&&!/^\d+$/.test(A),d=!i.match(s);return d||u?function(e,r,i,s,a){e.status.success=!1;const o=r.match(t)?r.match(t)[0]:void 0,A=r.match(n)[0],l={id:o,timecode:A,text:r.split(n)[1]};return i.invalidEntries&&e.status.invalidEntries.push(l),i.invalidIndices&&a&&e.status.invalidIndices.push({id:o}),i.invalidTimecodes&&s&&e.status.invalidTimecodes.push({id:o,timecode:A}),e}(r,i,c,d,u):a.test(i)?r:function(t,n){const r=n.match(o),i=l(r[1]),s=l(r[2]),a=r[3];return t.validEntries.push({id:t.currentIndex.toString(),timecode:`${i} --\x3e ${s}`,startMicro:e(i),endMicro:e(s),text:a}),t.currentIndex+=1,t}(r,i)},{currentIndex:1,...u});return{validEntries:f,status:p}}}function lL(){if(sL)return iL;sL=1;const e=UC(),{SUBTITLE_SCHEMA:t}=YF(),n=AL(),{cleanUpText:r}=qF();return iL=function(i,s){const{validEntries:a,status:o}=n(i),{error:A,value:l}=e.validate(function(e,t){const{removeTextFormatting:n}=t;return{global:{},body:e.map(e=>({id:e.id,timecode:e.timecode,startMicro:e.startMicro,endMicro:e.endMicro,text:r(e.text,n)})).filter(e=>e.text).map((e,t)=>(e.id=(t+1).toString(),e)),source:e}}(a,s),t,{abortEarly:!1});if(A)throw Error(A);return{data:l,status:o}}}var cL,uL={},dL={};function hL(){return cL||(cL=1,function(){dL.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}.call(dL)),dL}var fL,pL={},gL={},mL={};function yL(){return fL||(fL=1,function(){var e,t,n,r,i,s,a,o=[].slice,A={}.hasOwnProperty;e=function(){var e,t,n,r,s,a;if(a=arguments[0],s=2<=arguments.length?o.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(e=0,n=s.length;e<n;e++)if(null!=(r=s[e]))for(t in r)A.call(r,t)&&(a[t]=r[t]);return a},i=function(e){return!!e&&"[object Function]"===Object.prototype.toString.call(e)},s=function(e){var t;return!!e&&("function"==(t=typeof e)||"object"===t)},n=function(e){return i(Array.isArray)?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},r=function(e){var t;if(n(e))return!e.length;for(t in e)if(A.call(e,t))return!1;return!0},a=function(e){var t,n;return s(e)&&(n=Object.getPrototypeOf(e))&&(t=n.constructor)&&"function"==typeof t&&t instanceof t&&Function.prototype.toString.call(t)===Function.prototype.toString.call(Object)},t=function(e){return i(e.valueOf)?e.valueOf():e},mL.assign=e,mL.isFunction=i,mL.isObject=s,mL.isArray=n,mL.isEmpty=r,mL.isPlainObject=a,mL.getValue=t}.call(mL)),mL}var vL,wL={exports:{}},bL=wL.exports;function EL(){return vL||(vL=1,function(){wL.exports=function(){function e(){}return e.prototype.hasFeature=function(e,t){return!0},e.prototype.createDocumentType=function(e,t,n){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(e,t,n){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(e){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(e,t){throw new Error("This DOM method is not implemented.")},e}()}.call(bL)),wL.exports}var BL,CL={exports:{}},SL={exports:{}},TL={exports:{}},xL=TL.exports;var kL,IL={exports:{}},FL=IL.exports;var LL,DL=SL.exports;function _L(){return LL||(LL=1,function(){var e,t;BL||(BL=1,function(){TL.exports=function(){function e(){}return e.prototype.handleError=function(e){throw new Error(e)},e}()}.call(xL)),e=TL.exports,kL||(kL=1,function(){IL.exports=function(){function e(e){this.arr=e||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(e){return this.arr[e]||null},e.prototype.contains=function(e){return-1!==this.arr.indexOf(e)},e}()}.call(FL)),t=IL.exports,SL.exports=function(){function n(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(n.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),n.prototype.getParameter=function(e){return this.params.hasOwnProperty(e)?this.params[e]:null},n.prototype.canSetParameter=function(e,t){return!0},n.prototype.setParameter=function(e,t){return null!=t?this.params[e]=t:delete this.params[e]},n}()}.call(DL)),SL.exports}var UL,PL={exports:{}},RL={exports:{}},OL={exports:{}},QL=OL.exports;function NL(){return UL||(UL=1,function(){OL.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}.call(QL)),OL.exports}var ML,HL={exports:{}},jL=HL.exports;function $L(){return ML||(ML=1,function(){var e;e=NL(),r_(),HL.exports=function(){function t(t,n,r){if(this.parent=t,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==n)throw new Error("Missing attribute name. "+this.debugInfo(n));this.name=this.stringify.name(n),this.value=this.stringify.attValue(r),this.type=e.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(t.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(t.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(t.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"specified",{get:function(){return!0}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(e){return this.options.writer.attribute(this,this.options.writer.filterOptions(e))},t.prototype.debugInfo=function(e){return null==(e=e||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"},t.prototype.isEqualNode=function(e){return e.namespaceURI===this.namespaceURI&&(e.prefix===this.prefix&&(e.localName===this.localName&&e.value===this.value))},t}()}.call(jL)),HL.exports}var KL,VL={exports:{}},GL=VL.exports;function WL(){return KL||(KL=1,function(){VL.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(e){return this.nodes[e]},e.prototype.setNamedItem=function(e){var t;return t=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,t||null},e.prototype.removeNamedItem=function(e){var t;return t=this.nodes[e],delete this.nodes[e],t||null},e.prototype.item=function(e){return this.nodes[Object.keys(this.nodes)[e]]||null},e.prototype.getNamedItemNS=function(e,t){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(e){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(e,t){throw new Error("This DOM method is not implemented.")},e}()}.call(GL)),VL.exports}var zL,YL=RL.exports;function qL(){return zL||(zL=1,function(){var e,t,n,r,i,s,a,o,A={}.hasOwnProperty;o=yL(),a=o.isObject,s=o.isFunction,i=o.getValue,r=r_(),e=NL(),t=$L(),n=WL(),RL.exports=function(r){function o(t,n,r){var i,s,a,A;if(o.__super__.constructor.call(this,t),null==n)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(n),this.type=e.Element,this.attribs={},this.schemaTypeInfo=null,null!=r&&this.attribute(r),t.type===e.Document&&(this.isRoot=!0,this.documentObject=t,t.rootObject=this,t.children))for(s=0,a=(A=t.children).length;s<a;s++)if((i=A[s]).type===e.DocType){i.name=this.name;break}}return function(e,t){for(var n in t)A.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(o,r),Object.defineProperty(o.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(o.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(o.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(o.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(o.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(o.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(o.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(o.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new n(this.attribs)),this.attributeMap}}),o.prototype.clone=function(){var e,t,n,r;for(t in(n=Object.create(this)).isRoot&&(n.documentObject=null),n.attribs={},r=this.attribs)A.call(r,t)&&(e=r[t],n.attribs[t]=e.clone());return n.children=[],this.children.forEach(function(e){var t;return(t=e.clone()).parent=n,n.children.push(t)}),n},o.prototype.attribute=function(e,n){var r,o;if(null!=e&&(e=i(e)),a(e))for(r in e)A.call(e,r)&&(o=e[r],this.attribute(r,o));else s(n)&&(n=n.apply()),this.options.keepNullAttributes&&null==n?this.attribs[e]=new t(this,e,""):null!=n&&(this.attribs[e]=new t(this,e,n));return this},o.prototype.removeAttribute=function(e){var t,n,r;if(null==e)throw new Error("Missing attribute name. "+this.debugInfo());if(e=i(e),Array.isArray(e))for(n=0,r=e.length;n<r;n++)t=e[n],delete this.attribs[t];else delete this.attribs[e];return this},o.prototype.toString=function(e){return this.options.writer.element(this,this.options.writer.filterOptions(e))},o.prototype.att=function(e,t){return this.attribute(e,t)},o.prototype.a=function(e,t){return this.attribute(e,t)},o.prototype.getAttribute=function(e){return this.attribs.hasOwnProperty(e)?this.attribs[e].value:null},o.prototype.setAttribute=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.getAttributeNode=function(e){return this.attribs.hasOwnProperty(e)?this.attribs[e]:null},o.prototype.setAttributeNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.removeAttributeNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.getAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.setAttributeNS=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.removeAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.getAttributeNodeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.setAttributeNodeNS=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.hasAttribute=function(e){return this.attribs.hasOwnProperty(e)},o.prototype.hasAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.setIdAttribute=function(e,t){return this.attribs.hasOwnProperty(e)?this.attribs[e].isId:t},o.prototype.setIdAttributeNS=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.setIdAttributeNode=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.getElementsByClassName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.isEqualNode=function(e){var t,n,r;if(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(e))return!1;if(e.namespaceURI!==this.namespaceURI)return!1;if(e.prefix!==this.prefix)return!1;if(e.localName!==this.localName)return!1;if(e.attribs.length!==this.attribs.length)return!1;for(t=n=0,r=this.attribs.length-1;0<=r?n<=r:n>=r;t=0<=r?++n:--n)if(!this.attribs[t].isEqualNode(e.attribs[t]))return!1;return!0},o}(r)}.call(YL)),RL.exports}var XL,JL={exports:{}},ZL={exports:{}},eD=ZL.exports;function tD(){return XL||(XL=1,function(){var e,t={}.hasOwnProperty;e=r_(),ZL.exports=function(e){function n(e){n.__super__.constructor.call(this,e),this.value=""}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(n,e),Object.defineProperty(n.prototype,"data",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(n.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(n.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.substringData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.appendData=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.insertData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.deleteData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.replaceData=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.isEqualNode=function(e){return!!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.data===this.data},n}(e)}.call(eD)),ZL.exports}var nD,rD=JL.exports;function iD(){return nD||(nD=1,function(){var e,t,n={}.hasOwnProperty;e=NL(),t=tD(),JL.exports=function(t){function r(t,n){if(r.__super__.constructor.call(this,t),null==n)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=e.CData,this.value=this.stringify.cdata(n)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,t),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.cdata(this,this.options.writer.filterOptions(e))},r}(t)}.call(rD)),JL.exports}var sD,aD={exports:{}},oD=aD.exports;function AD(){return sD||(sD=1,function(){var e,t,n={}.hasOwnProperty;e=NL(),t=tD(),aD.exports=function(t){function r(t,n){if(r.__super__.constructor.call(this,t),null==n)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=e.Comment,this.value=this.stringify.comment(n)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,t),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.comment(this,this.options.writer.filterOptions(e))},r}(t)}.call(oD)),aD.exports}var lD,cD={exports:{}},uD=cD.exports;function dD(){return lD||(lD=1,function(){var e,t,n,r={}.hasOwnProperty;n=yL().isObject,t=r_(),e=NL(),cD.exports=function(t){function i(t,r,s,a){var o;i.__super__.constructor.call(this,t),n(r)&&(r=(o=r).version,s=o.encoding,a=o.standalone),r||(r="1.0"),this.type=e.Declaration,this.version=this.stringify.xmlVersion(r),null!=s&&(this.encoding=this.stringify.xmlEncoding(s)),null!=a&&(this.standalone=this.stringify.xmlStandalone(a))}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(i,t),i.prototype.toString=function(e){return this.options.writer.declaration(this,this.options.writer.filterOptions(e))},i}(t)}.call(uD)),cD.exports}var hD,fD={exports:{}},pD={exports:{}},gD=pD.exports;function mD(){return hD||(hD=1,function(){var e,t,n={}.hasOwnProperty;t=r_(),e=NL(),pD.exports=function(t){function r(t,n,i,s,a,o){if(r.__super__.constructor.call(this,t),null==n)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==i)throw new Error("Missing DTD attribute name. "+this.debugInfo(n));if(!s)throw new Error("Missing DTD attribute type. "+this.debugInfo(n));if(!a)throw new Error("Missing DTD attribute default. "+this.debugInfo(n));if(0!==a.indexOf("#")&&(a="#"+a),!a.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(n));if(o&&!a.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(n));this.elementName=this.stringify.name(n),this.type=e.AttributeDeclaration,this.attributeName=this.stringify.name(i),this.attributeType=this.stringify.dtdAttType(s),o&&(this.defaultValue=this.stringify.dtdAttDefault(o)),this.defaultValueType=a}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,t),r.prototype.toString=function(e){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(e))},r}(t)}.call(gD)),pD.exports}var yD,vD={exports:{}},wD=vD.exports;function bD(){return yD||(yD=1,function(){var e,t,n,r={}.hasOwnProperty;n=yL().isObject,t=r_(),e=NL(),vD.exports=function(t){function i(t,r,s,a){if(i.__super__.constructor.call(this,t),null==s)throw new Error("Missing DTD entity name. "+this.debugInfo(s));if(null==a)throw new Error("Missing DTD entity value. "+this.debugInfo(s));if(this.pe=!!r,this.name=this.stringify.name(s),this.type=e.EntityDeclaration,n(a)){if(!a.pubID&&!a.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(s));if(a.pubID&&!a.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(s));if(this.internal=!1,null!=a.pubID&&(this.pubID=this.stringify.dtdPubID(a.pubID)),null!=a.sysID&&(this.sysID=this.stringify.dtdSysID(a.sysID)),null!=a.nData&&(this.nData=this.stringify.dtdNData(a.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(s))}else this.value=this.stringify.dtdEntityValue(a),this.internal=!0}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(i,t),Object.defineProperty(i.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(i.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(i.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(i.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(i.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(i.prototype,"xmlVersion",{get:function(){return null}}),i.prototype.toString=function(e){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(e))},i}(t)}.call(wD)),vD.exports}var ED,BD={exports:{}},CD=BD.exports;function SD(){return ED||(ED=1,function(){var e,t,n={}.hasOwnProperty;t=r_(),e=NL(),BD.exports=function(t){function r(t,n,i){if(r.__super__.constructor.call(this,t),null==n)throw new Error("Missing DTD element name. "+this.debugInfo());i||(i="(#PCDATA)"),Array.isArray(i)&&(i="("+i.join(",")+")"),this.name=this.stringify.name(n),this.type=e.ElementDeclaration,this.value=this.stringify.dtdElementValue(i)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,t),r.prototype.toString=function(e){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(e))},r}(t)}.call(CD)),BD.exports}var TD,xD={exports:{}},kD=xD.exports;function ID(){return TD||(TD=1,function(){var e,t,n={}.hasOwnProperty;t=r_(),e=NL(),xD.exports=function(t){function r(t,n,i){if(r.__super__.constructor.call(this,t),null==n)throw new Error("Missing DTD notation name. "+this.debugInfo(n));if(!i.pubID&&!i.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(n));this.name=this.stringify.name(n),this.type=e.NotationDeclaration,null!=i.pubID&&(this.pubID=this.stringify.dtdPubID(i.pubID)),null!=i.sysID&&(this.sysID=this.stringify.dtdSysID(i.sysID))}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,t),Object.defineProperty(r.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(r.prototype,"systemId",{get:function(){return this.sysID}}),r.prototype.toString=function(e){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(e))},r}(t)}.call(kD)),xD.exports}var FD,LD=fD.exports;function DD(){return FD||(FD=1,function(){var e,t,n,r,i,s,a,o,A={}.hasOwnProperty;o=yL().isObject,a=r_(),e=NL(),t=mD(),r=bD(),n=SD(),i=ID(),s=WL(),fD.exports=function(a){function l(t,n,r){var i,s,a,A,c,u;if(l.__super__.constructor.call(this,t),this.type=e.DocType,t.children)for(s=0,a=(A=t.children).length;s<a;s++)if((i=A[s]).type===e.Element){this.name=i.name;break}this.documentObject=t,o(n)&&(n=(c=n).pubID,r=c.sysID),null==r&&(r=(u=[n,r])[0],n=u[1]),null!=n&&(this.pubID=this.stringify.dtdPubID(n)),null!=r&&(this.sysID=this.stringify.dtdSysID(r))}return function(e,t){for(var n in t)A.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(l,a),Object.defineProperty(l.prototype,"entities",{get:function(){var t,n,r,i,a;for(i={},n=0,r=(a=this.children).length;n<r;n++)(t=a[n]).type!==e.EntityDeclaration||t.pe||(i[t.name]=t);return new s(i)}}),Object.defineProperty(l.prototype,"notations",{get:function(){var t,n,r,i,a;for(i={},n=0,r=(a=this.children).length;n<r;n++)(t=a[n]).type===e.NotationDeclaration&&(i[t.name]=t);return new s(i)}}),Object.defineProperty(l.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(l.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(l.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),l.prototype.element=function(e,t){var r;return r=new n(this,e,t),this.children.push(r),this},l.prototype.attList=function(e,n,r,i,s){var a;return a=new t(this,e,n,r,i,s),this.children.push(a),this},l.prototype.entity=function(e,t){var n;return n=new r(this,!1,e,t),this.children.push(n),this},l.prototype.pEntity=function(e,t){var n;return n=new r(this,!0,e,t),this.children.push(n),this},l.prototype.notation=function(e,t){var n;return n=new i(this,e,t),this.children.push(n),this},l.prototype.toString=function(e){return this.options.writer.docType(this,this.options.writer.filterOptions(e))},l.prototype.ele=function(e,t){return this.element(e,t)},l.prototype.att=function(e,t,n,r,i){return this.attList(e,t,n,r,i)},l.prototype.ent=function(e,t){return this.entity(e,t)},l.prototype.pent=function(e,t){return this.pEntity(e,t)},l.prototype.not=function(e,t){return this.notation(e,t)},l.prototype.up=function(){return this.root()||this.documentObject},l.prototype.isEqualNode=function(e){return!!l.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&(e.name===this.name&&(e.publicId===this.publicId&&e.systemId===this.systemId))},l}(a)}.call(LD)),fD.exports}var _D,UD={exports:{}},PD=UD.exports;function RD(){return _D||(_D=1,function(){var e,t,n={}.hasOwnProperty;e=NL(),t=r_(),UD.exports=function(t){function r(t,n){if(r.__super__.constructor.call(this,t),null==n)throw new Error("Missing raw text. "+this.debugInfo());this.type=e.Raw,this.value=this.stringify.raw(n)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,t),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.raw(this,this.options.writer.filterOptions(e))},r}(t)}.call(PD)),UD.exports}var OD,QD={exports:{}},ND=QD.exports;function MD(){return OD||(OD=1,function(){var e,t,n={}.hasOwnProperty;e=NL(),t=tD(),QD.exports=function(t){function r(t,n){if(r.__super__.constructor.call(this,t),null==n)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=e.Text,this.value=this.stringify.text(n)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,t),Object.defineProperty(r.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(r.prototype,"wholeText",{get:function(){var e,t,n;for(n="",t=this.previousSibling;t;)n=t.data+n,t=t.previousSibling;for(n+=this.data,e=this.nextSibling;e;)n+=e.data,e=e.nextSibling;return n}}),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.text(this,this.options.writer.filterOptions(e))},r.prototype.splitText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.replaceWholeText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r}(t)}.call(ND)),QD.exports}var HD,jD={exports:{}},$D=jD.exports;function KD(){return HD||(HD=1,function(){var e,t,n={}.hasOwnProperty;e=NL(),t=tD(),jD.exports=function(t){function r(t,n,i){if(r.__super__.constructor.call(this,t),null==n)throw new Error("Missing instruction target. "+this.debugInfo());this.type=e.ProcessingInstruction,this.target=this.stringify.insTarget(n),this.name=this.target,i&&(this.value=this.stringify.insValue(i))}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,t),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(e))},r.prototype.isEqualNode=function(e){return!!r.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.target===this.target},r}(t)}.call($D)),jD.exports}var VD,GD={exports:{}},WD=GD.exports;function zD(){return VD||(VD=1,function(){var e,t,n={}.hasOwnProperty;t=r_(),e=NL(),GD.exports=function(t){function r(t){r.__super__.constructor.call(this,t),this.type=e.Dummy}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,t),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return""},r}(t)}.call(WD)),GD.exports}var YD,qD={exports:{}},XD=qD.exports;var JD,ZD={exports:{}},e_=ZD.exports;var t_,n_=PL.exports;function r_(){return t_||(t_=1,function(){var e,t,n,r,i,s,a,o,A,l,c,u,d,h,f,p,g,m={}.hasOwnProperty;g=yL(),p=g.isObject,f=g.isFunction,h=g.isEmpty,d=g.getValue,o=null,n=null,r=null,i=null,s=null,c=null,u=null,l=null,a=null,t=null,A=null,e=null,PL.exports=function(){function g(d){this.parent=d,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,o||(o=qL(),n=iD(),r=AD(),i=dD(),s=DD(),c=RD(),u=MD(),l=KD(),a=zD(),t=NL(),YD||(YD=1,function(){qD.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(e){return this.nodes[e]||null},e}()}.call(XD)),A=qD.exports,WL(),JD||(JD=1,function(){ZD.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}.call(e_)),e=ZD.exports)}return Object.defineProperty(g.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(g.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(g.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(g.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(g.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new A(this.children)),this.childNodeList}}),Object.defineProperty(g.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(g.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(g.prototype,"previousSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e-1]||null}}),Object.defineProperty(g.prototype,"nextSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e+1]||null}}),Object.defineProperty(g.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(g.prototype,"textContent",{get:function(){var e,n,r,i,s;if(this.nodeType===t.Element||this.nodeType===t.DocumentFragment){for(s="",n=0,r=(i=this.children).length;n<r;n++)(e=i[n]).textContent&&(s+=e.textContent);return s}return null},set:function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),g.prototype.setParent=function(e){var t,n,r,i,s;for(this.parent=e,e&&(this.options=e.options,this.stringify=e.stringify),s=[],n=0,r=(i=this.children).length;n<r;n++)t=i[n],s.push(t.setParent(this));return s},g.prototype.element=function(e,t,n){var r,i,s,a,o,A,l,c,u,g,y;if(A=null,null===t&&null==n&&(t=(u=[{},null])[0],n=u[1]),null==t&&(t={}),t=d(t),p(t)||(n=(g=[t,n])[0],t=g[1]),null!=e&&(e=d(e)),Array.isArray(e))for(s=0,l=e.length;s<l;s++)i=e[s],A=this.element(i);else if(f(e))A=this.element(e.apply());else if(p(e)){for(o in e)if(m.call(e,o))if(y=e[o],f(y)&&(y=y.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===o.indexOf(this.stringify.convertAttKey))A=this.attribute(o.substr(this.stringify.convertAttKey.length),y);else if(!this.options.separateArrayItems&&Array.isArray(y)&&h(y))A=this.dummy();else if(p(y)&&h(y))A=this.element(o);else if(this.options.keepNullNodes||null!=y)if(!this.options.separateArrayItems&&Array.isArray(y))for(a=0,c=y.length;a<c;a++)i=y[a],(r={})[o]=i,A=this.element(r);else p(y)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===o.indexOf(this.stringify.convertTextKey)?A=this.element(y):(A=this.element(o)).element(y):A=this.element(o,y);else A=this.dummy()}else A=this.options.keepNullNodes||null!==n?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===e.indexOf(this.stringify.convertTextKey)?this.text(n):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===e.indexOf(this.stringify.convertCDataKey)?this.cdata(n):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===e.indexOf(this.stringify.convertCommentKey)?this.comment(n):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===e.indexOf(this.stringify.convertRawKey)?this.raw(n):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===e.indexOf(this.stringify.convertPIKey)?this.instruction(e.substr(this.stringify.convertPIKey.length),n):this.node(e,t,n):this.dummy();if(null==A)throw new Error("Could not create any elements with: "+e+". "+this.debugInfo());return A},g.prototype.insertBefore=function(e,t,n){var r,i,s,a,o;if(null!=e?e.type:void 0)return a=t,(s=e).setParent(this),a?(i=children.indexOf(a),o=children.splice(i),children.push(s),Array.prototype.push.apply(children,o)):children.push(s),s;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i),r=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,o),r},g.prototype.insertAfter=function(e,t,n){var r,i,s;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return i=this.parent.children.indexOf(this),s=this.parent.children.splice(i+1),r=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,s),r},g.prototype.remove=function(){var e;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return e=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[e,e-e+1].concat([])),this.parent},g.prototype.node=function(e,t,n){var r,i;return null!=e&&(e=d(e)),t||(t={}),t=d(t),p(t)||(n=(i=[t,n])[0],t=i[1]),r=new o(this,e,t),null!=n&&r.text(n),this.children.push(r),r},g.prototype.text=function(e){var t;return p(e)&&this.element(e),t=new u(this,e),this.children.push(t),this},g.prototype.cdata=function(e){var t;return t=new n(this,e),this.children.push(t),this},g.prototype.comment=function(e){var t;return t=new r(this,e),this.children.push(t),this},g.prototype.commentBefore=function(e){var t,n;return t=this.parent.children.indexOf(this),n=this.parent.children.splice(t),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,n),this},g.prototype.commentAfter=function(e){var t,n;return t=this.parent.children.indexOf(this),n=this.parent.children.splice(t+1),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,n),this},g.prototype.raw=function(e){var t;return t=new c(this,e),this.children.push(t),this},g.prototype.dummy=function(){return new a(this)},g.prototype.instruction=function(e,t){var n,r,i,s,a;if(null!=e&&(e=d(e)),null!=t&&(t=d(t)),Array.isArray(e))for(s=0,a=e.length;s<a;s++)n=e[s],this.instruction(n);else if(p(e))for(n in e)m.call(e,n)&&(r=e[n],this.instruction(n,r));else f(t)&&(t=t.apply()),i=new l(this,e,t),this.children.push(i);return this},g.prototype.instructionBefore=function(e,t){var n,r;return n=this.parent.children.indexOf(this),r=this.parent.children.splice(n),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,r),this},g.prototype.instructionAfter=function(e,t){var n,r;return n=this.parent.children.indexOf(this),r=this.parent.children.splice(n+1),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,r),this},g.prototype.declaration=function(e,n,r){var s,a;return s=this.document(),a=new i(s,e,n,r),0===s.children.length?s.children.unshift(a):s.children[0].type===t.Declaration?s.children[0]=a:s.children.unshift(a),s.root()||s},g.prototype.dtd=function(e,n){var r,i,a,o,A,l,c,u,d;for(r=this.document(),i=new s(r,e,n),a=o=0,l=(u=r.children).length;o<l;a=++o)if(u[a].type===t.DocType)return r.children[a]=i,i;for(a=A=0,c=(d=r.children).length;A<c;a=++A)if(d[a].isRoot)return r.children.splice(a,0,i),i;return r.children.push(i),i},g.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},g.prototype.root=function(){var e;for(e=this;e;){if(e.type===t.Document)return e.rootObject;if(e.isRoot)return e;e=e.parent}},g.prototype.document=function(){var e;for(e=this;e;){if(e.type===t.Document)return e;e=e.parent}},g.prototype.end=function(e){return this.document().end(e)},g.prototype.prev=function(){var e;if((e=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[e-1]},g.prototype.next=function(){var e;if(-1===(e=this.parent.children.indexOf(this))||e===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[e+1]},g.prototype.importDocument=function(e){var t;return(t=e.root().clone()).parent=this,t.isRoot=!1,this.children.push(t),this},g.prototype.debugInfo=function(e){var t,n;return null!=(e=e||this.name)||(null!=(t=this.parent)?t.name:void 0)?null==e?"parent: <"+this.parent.name+">":(null!=(n=this.parent)?n.name:void 0)?"node: <"+e+">, parent: <"+this.parent.name+">":"node: <"+e+">":""},g.prototype.ele=function(e,t,n){return this.element(e,t,n)},g.prototype.nod=function(e,t,n){return this.node(e,t,n)},g.prototype.txt=function(e){return this.text(e)},g.prototype.dat=function(e){return this.cdata(e)},g.prototype.com=function(e){return this.comment(e)},g.prototype.ins=function(e,t){return this.instruction(e,t)},g.prototype.doc=function(){return this.document()},g.prototype.dec=function(e,t,n){return this.declaration(e,t,n)},g.prototype.e=function(e,t,n){return this.element(e,t,n)},g.prototype.n=function(e,t,n){return this.node(e,t,n)},g.prototype.t=function(e){return this.text(e)},g.prototype.d=function(e){return this.cdata(e)},g.prototype.c=function(e){return this.comment(e)},g.prototype.r=function(e){return this.raw(e)},g.prototype.i=function(e,t){return this.instruction(e,t)},g.prototype.u=function(){return this.up()},g.prototype.importXMLBuilder=function(e){return this.importDocument(e)},g.prototype.replaceChild=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.removeChild=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.appendChild=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.hasChildNodes=function(){return 0!==this.children.length},g.prototype.cloneNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.isSupported=function(e,t){return!0},g.prototype.hasAttributes=function(){return 0!==this.attribs.length},g.prototype.compareDocumentPosition=function(t){var n,r;return(n=this)===t?0:this.document()!==t.document()?(r=e.Disconnected|e.ImplementationSpecific,Math.random()<.5?r|=e.Preceding:r|=e.Following,r):n.isAncestor(t)?e.Contains|e.Preceding:n.isDescendant(t)?e.Contains|e.Following:n.isPreceding(t)?e.Preceding:e.Following},g.prototype.isSameNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.lookupPrefix=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.isDefaultNamespace=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.lookupNamespaceURI=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.isEqualNode=function(e){var t,n,r;if(e.nodeType!==this.nodeType)return!1;if(e.children.length!==this.children.length)return!1;for(t=n=0,r=this.children.length-1;0<=r?n<=r:n>=r;t=0<=r?++n:--n)if(!this.children[t].isEqualNode(e.children[t]))return!1;return!0},g.prototype.getFeature=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setUserData=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getUserData=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.contains=function(e){return!!e&&(e===this||this.isDescendant(e))},g.prototype.isDescendant=function(e){var t,n,r,i;for(n=0,r=(i=this.children).length;n<r;n++){if(e===(t=i[n]))return!0;if(t.isDescendant(e))return!0}return!1},g.prototype.isAncestor=function(e){return e.isDescendant(this)},g.prototype.isPreceding=function(e){var t,n;return t=this.treePosition(e),n=this.treePosition(this),-1!==t&&-1!==n&&t<n},g.prototype.isFollowing=function(e){var t,n;return t=this.treePosition(e),n=this.treePosition(this),-1!==t&&-1!==n&&t>n},g.prototype.treePosition=function(e){var t,n;return n=0,t=!1,this.foreachTreeNode(this.document(),function(r){if(n++,!t&&r===e)return t=!0}),t?n:-1},g.prototype.foreachTreeNode=function(e,t){var n,r,i,s,a;for(e||(e=this.document()),r=0,i=(s=e.children).length;r<i;r++){if(a=t(n=s[r]))return a;if(a=this.foreachTreeNode(n,t))return a}},g}()}.call(n_)),PL.exports}var i_,s_={exports:{}},a_=s_.exports;function o_(){return i_||(i_=1,function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty;s_.exports=function(){function n(n){var r,i,s;for(r in this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this),n||(n={}),this.options=n,this.options.version||(this.options.version="1.0"),i=n.stringify||{})t.call(i,r)&&(s=i[r],this[r]=s)}return n.prototype.name=function(e){return this.options.noValidation?e:this.assertLegalName(""+e||"")},n.prototype.text=function(e){return this.options.noValidation?e:this.assertLegalChar(this.textEscape(""+e||""))},n.prototype.cdata=function(e){return this.options.noValidation?e:(e=(e=""+e||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(e))},n.prototype.comment=function(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+e);return this.assertLegalChar(e)},n.prototype.raw=function(e){return this.options.noValidation?e:""+e||""},n.prototype.attValue=function(e){return this.options.noValidation?e:this.assertLegalChar(this.attEscape(e=""+e||""))},n.prototype.insTarget=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},n.prototype.insValue=function(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+e);return this.assertLegalChar(e)},n.prototype.xmlVersion=function(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+e);return e},n.prototype.xmlEncoding=function(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+e);return this.assertLegalChar(e)},n.prototype.xmlStandalone=function(e){return this.options.noValidation?e:e?"yes":"no"},n.prototype.dtdPubID=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},n.prototype.dtdSysID=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},n.prototype.dtdElementValue=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},n.prototype.dtdAttType=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},n.prototype.dtdAttDefault=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},n.prototype.dtdEntityValue=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},n.prototype.dtdNData=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},n.prototype.convertAttKey="@",n.prototype.convertPIKey="?",n.prototype.convertTextKey="#text",n.prototype.convertCDataKey="#cdata",n.prototype.convertCommentKey="#comment",n.prototype.convertRawKey="#raw",n.prototype.assertLegalChar=function(e){var t,n;if(this.options.noValidation)return e;if(t="","1.0"===this.options.version){if(t=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=e.match(t))throw new Error("Invalid character in string: "+e+" at index "+n.index)}else if("1.1"===this.options.version&&(t=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=e.match(t)))throw new Error("Invalid character in string: "+e+" at index "+n.index);return e},n.prototype.assertLegalName=function(e){var t;if(this.options.noValidation)return e;if(this.assertLegalChar(e),t=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!e.match(t))throw new Error("Invalid character in name");return e},n.prototype.textEscape=function(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},n.prototype.attEscape=function(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},n}()}.call(a_)),s_.exports}var A_,l_={exports:{}},c_={exports:{}},u_={exports:{}},d_=u_.exports;function h_(){return A_||(A_=1,function(){u_.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}.call(d_)),u_.exports}var f_,p_=c_.exports;function g_(){return f_||(f_=1,function(){var e,t,n,r={}.hasOwnProperty;n=yL().assign,e=NL(),dD(),DD(),iD(),AD(),qL(),RD(),MD(),KD(),zD(),mD(),SD(),bD(),ID(),t=h_(),c_.exports=function(){function i(e){var t,n,i;for(t in e||(e={}),this.options=e,n=e.writer||{})r.call(n,t)&&(i=n[t],this["_"+t]=this[t],this[t]=i)}return i.prototype.filterOptions=function(e){var r,i,s,a,o,A,l,c;return e||(e={}),e=n({},this.options,e),(r={writer:this}).pretty=e.pretty||!1,r.allowEmpty=e.allowEmpty||!1,r.indent=null!=(i=e.indent)?i:"  ",r.newline=null!=(s=e.newline)?s:"\n",r.offset=null!=(a=e.offset)?a:0,r.dontPrettyTextNodes=null!=(o=null!=(A=e.dontPrettyTextNodes)?A:e.dontprettytextnodes)?o:0,r.spaceBeforeSlash=null!=(l=null!=(c=e.spaceBeforeSlash)?c:e.spacebeforeslash)?l:"",!0===r.spaceBeforeSlash&&(r.spaceBeforeSlash=" "),r.suppressPrettyCount=0,r.user={},r.state=t.None,r},i.prototype.indent=function(e,t,n){var r;return!t.pretty||t.suppressPrettyCount?"":t.pretty&&(r=(n||0)+t.offset+1)>0?new Array(r).join(t.indent):""},i.prototype.endline=function(e,t,n){return!t.pretty||t.suppressPrettyCount?"":t.newline},i.prototype.attribute=function(e,t,n){var r;return this.openAttribute(e,t,n),r=" "+e.name+'="'+e.value+'"',this.closeAttribute(e,t,n),r},i.prototype.cdata=function(e,n,r){var i;return this.openNode(e,n,r),n.state=t.OpenTag,i=this.indent(e,n,r)+"<![CDATA[",n.state=t.InsideTag,i+=e.value,n.state=t.CloseTag,i+="]]>"+this.endline(e,n,r),n.state=t.None,this.closeNode(e,n,r),i},i.prototype.comment=function(e,n,r){var i;return this.openNode(e,n,r),n.state=t.OpenTag,i=this.indent(e,n,r)+"\x3c!-- ",n.state=t.InsideTag,i+=e.value,n.state=t.CloseTag,i+=" --\x3e"+this.endline(e,n,r),n.state=t.None,this.closeNode(e,n,r),i},i.prototype.declaration=function(e,n,r){var i;return this.openNode(e,n,r),n.state=t.OpenTag,i=this.indent(e,n,r)+"<?xml",n.state=t.InsideTag,i+=' version="'+e.version+'"',null!=e.encoding&&(i+=' encoding="'+e.encoding+'"'),null!=e.standalone&&(i+=' standalone="'+e.standalone+'"'),n.state=t.CloseTag,i+=n.spaceBeforeSlash+"?>",i+=this.endline(e,n,r),n.state=t.None,this.closeNode(e,n,r),i},i.prototype.docType=function(e,n,r){var i,s,a,o,A;if(r||(r=0),this.openNode(e,n,r),n.state=t.OpenTag,o=this.indent(e,n,r),o+="<!DOCTYPE "+e.root().name,e.pubID&&e.sysID?o+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(o+=' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(o+=" [",o+=this.endline(e,n,r),n.state=t.InsideTag,s=0,a=(A=e.children).length;s<a;s++)i=A[s],o+=this.writeChildNode(i,n,r+1);n.state=t.CloseTag,o+="]"}return n.state=t.CloseTag,o+=n.spaceBeforeSlash+">",o+=this.endline(e,n,r),n.state=t.None,this.closeNode(e,n,r),o},i.prototype.element=function(n,i,s){var a,o,A,l,c,u,d,h,f,p,g,m,y,v;for(f in s||(s=0),p=!1,g="",this.openNode(n,i,s),i.state=t.OpenTag,g+=this.indent(n,i,s)+"<"+n.name,m=n.attribs)r.call(m,f)&&(a=m[f],g+=this.attribute(a,i,s));if(l=0===(A=n.children.length)?null:n.children[0],0===A||n.children.every(function(t){return(t.type===e.Text||t.type===e.Raw)&&""===t.value}))i.allowEmpty?(g+=">",i.state=t.CloseTag,g+="</"+n.name+">"+this.endline(n,i,s)):(i.state=t.CloseTag,g+=i.spaceBeforeSlash+"/>"+this.endline(n,i,s));else if(!i.pretty||1!==A||l.type!==e.Text&&l.type!==e.Raw||null==l.value){if(i.dontPrettyTextNodes)for(c=0,d=(y=n.children).length;c<d;c++)if(((o=y[c]).type===e.Text||o.type===e.Raw)&&null!=o.value){i.suppressPrettyCount++,p=!0;break}for(g+=">"+this.endline(n,i,s),i.state=t.InsideTag,u=0,h=(v=n.children).length;u<h;u++)o=v[u],g+=this.writeChildNode(o,i,s+1);i.state=t.CloseTag,g+=this.indent(n,i,s)+"</"+n.name+">",p&&i.suppressPrettyCount--,g+=this.endline(n,i,s),i.state=t.None}else g+=">",i.state=t.InsideTag,i.suppressPrettyCount++,p=!0,g+=this.writeChildNode(l,i,s+1),i.suppressPrettyCount--,p=!1,i.state=t.CloseTag,g+="</"+n.name+">"+this.endline(n,i,s);return this.closeNode(n,i,s),g},i.prototype.writeChildNode=function(t,n,r){switch(t.type){case e.CData:return this.cdata(t,n,r);case e.Comment:return this.comment(t,n,r);case e.Element:return this.element(t,n,r);case e.Raw:return this.raw(t,n,r);case e.Text:return this.text(t,n,r);case e.ProcessingInstruction:return this.processingInstruction(t,n,r);case e.Dummy:return"";case e.Declaration:return this.declaration(t,n,r);case e.DocType:return this.docType(t,n,r);case e.AttributeDeclaration:return this.dtdAttList(t,n,r);case e.ElementDeclaration:return this.dtdElement(t,n,r);case e.EntityDeclaration:return this.dtdEntity(t,n,r);case e.NotationDeclaration:return this.dtdNotation(t,n,r);default:throw new Error("Unknown XML node type: "+t.constructor.name)}},i.prototype.processingInstruction=function(e,n,r){var i;return this.openNode(e,n,r),n.state=t.OpenTag,i=this.indent(e,n,r)+"<?",n.state=t.InsideTag,i+=e.target,e.value&&(i+=" "+e.value),n.state=t.CloseTag,i+=n.spaceBeforeSlash+"?>",i+=this.endline(e,n,r),n.state=t.None,this.closeNode(e,n,r),i},i.prototype.raw=function(e,n,r){var i;return this.openNode(e,n,r),n.state=t.OpenTag,i=this.indent(e,n,r),n.state=t.InsideTag,i+=e.value,n.state=t.CloseTag,i+=this.endline(e,n,r),n.state=t.None,this.closeNode(e,n,r),i},i.prototype.text=function(e,n,r){var i;return this.openNode(e,n,r),n.state=t.OpenTag,i=this.indent(e,n,r),n.state=t.InsideTag,i+=e.value,n.state=t.CloseTag,i+=this.endline(e,n,r),n.state=t.None,this.closeNode(e,n,r),i},i.prototype.dtdAttList=function(e,n,r){var i;return this.openNode(e,n,r),n.state=t.OpenTag,i=this.indent(e,n,r)+"<!ATTLIST",n.state=t.InsideTag,i+=" "+e.elementName+" "+e.attributeName+" "+e.attributeType,"#DEFAULT"!==e.defaultValueType&&(i+=" "+e.defaultValueType),e.defaultValue&&(i+=' "'+e.defaultValue+'"'),n.state=t.CloseTag,i+=n.spaceBeforeSlash+">"+this.endline(e,n,r),n.state=t.None,this.closeNode(e,n,r),i},i.prototype.dtdElement=function(e,n,r){var i;return this.openNode(e,n,r),n.state=t.OpenTag,i=this.indent(e,n,r)+"<!ELEMENT",n.state=t.InsideTag,i+=" "+e.name+" "+e.value,n.state=t.CloseTag,i+=n.spaceBeforeSlash+">"+this.endline(e,n,r),n.state=t.None,this.closeNode(e,n,r),i},i.prototype.dtdEntity=function(e,n,r){var i;return this.openNode(e,n,r),n.state=t.OpenTag,i=this.indent(e,n,r)+"<!ENTITY",n.state=t.InsideTag,e.pe&&(i+=" %"),i+=" "+e.name,e.value?i+=' "'+e.value+'"':(e.pubID&&e.sysID?i+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(i+=' SYSTEM "'+e.sysID+'"'),e.nData&&(i+=" NDATA "+e.nData)),n.state=t.CloseTag,i+=n.spaceBeforeSlash+">"+this.endline(e,n,r),n.state=t.None,this.closeNode(e,n,r),i},i.prototype.dtdNotation=function(e,n,r){var i;return this.openNode(e,n,r),n.state=t.OpenTag,i=this.indent(e,n,r)+"<!NOTATION",n.state=t.InsideTag,i+=" "+e.name,e.pubID&&e.sysID?i+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.pubID?i+=' PUBLIC "'+e.pubID+'"':e.sysID&&(i+=' SYSTEM "'+e.sysID+'"'),n.state=t.CloseTag,i+=n.spaceBeforeSlash+">"+this.endline(e,n,r),n.state=t.None,this.closeNode(e,n,r),i},i.prototype.openNode=function(e,t,n){},i.prototype.closeNode=function(e,t,n){},i.prototype.openAttribute=function(e,t,n){},i.prototype.closeAttribute=function(e,t,n){},i}()}.call(p_)),c_.exports}var m_,y_=l_.exports;function v_(){return m_||(m_=1,function(){var e,t={}.hasOwnProperty;e=g_(),l_.exports=function(e){function n(e){n.__super__.constructor.call(this,e)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(n,e),n.prototype.document=function(e,t){var n,r,i,s,a;for(t=this.filterOptions(t),s="",r=0,i=(a=e.children).length;r<i;r++)n=a[r],s+=this.writeChildNode(n,t,0);return t.pretty&&s.slice(-t.newline.length)===t.newline&&(s=s.slice(0,-t.newline.length)),s},n}(e)}.call(y_)),l_.exports}var w_,b_=CL.exports;function E_(){return w_||(w_=1,function(){var e,t,n,r,i,s,a,o={}.hasOwnProperty;a=yL().isPlainObject,n=EL(),t=_L(),r=r_(),e=NL(),s=o_(),i=v_(),CL.exports=function(r){function A(n){A.__super__.constructor.call(this,null),this.name="#document",this.type=e.Document,this.documentURI=null,this.domConfig=new t,n||(n={}),n.writer||(n.writer=new i),this.options=n,this.stringify=new s(n)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(A,r),Object.defineProperty(A.prototype,"implementation",{value:new n}),Object.defineProperty(A.prototype,"doctype",{get:function(){var t,n,r,i;for(n=0,r=(i=this.children).length;n<r;n++)if((t=i[n]).type===e.DocType)return t;return null}}),Object.defineProperty(A.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(A.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(A.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(A.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration?this.children[0].encoding:null}}),Object.defineProperty(A.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(A.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(A.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(A.prototype,"origin",{get:function(){return null}}),Object.defineProperty(A.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(A.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(A.prototype,"contentType",{get:function(){return null}}),A.prototype.end=function(e){var t;return t={},e?a(e)&&(t=e,e=this.options.writer):e=this.options.writer,e.document(this,e.filterOptions(t))},A.prototype.toString=function(e){return this.options.writer.document(this,this.options.writer.filterOptions(e))},A.prototype.createElement=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.createTextNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.createComment=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.createCDATASection=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.createProcessingInstruction=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.createAttribute=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.createEntityReference=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.importNode=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.createElementNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.createAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.getElementById=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.adoptNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.renameNode=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.getElementsByClassName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.createEvent=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.createNodeIterator=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},A.prototype.createTreeWalker=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},A}(r)}.call(b_)),CL.exports}var B_,C_={exports:{}},S_=C_.exports;var T_,x_,k_,I_={exports:{}},F_=I_.exports;function L_(){return T_||(T_=1,function(){var e,t,n,r={}.hasOwnProperty;e=NL(),n=g_(),t=h_(),I_.exports=function(n){function i(e,t){this.stream=e,i.__super__.constructor.call(this,t)}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(i,n),i.prototype.endline=function(e,n,r){return e.isLastRootNode&&n.state===t.CloseTag?"":i.__super__.endline.call(this,e,n,r)},i.prototype.document=function(e,t){var n,r,i,s,a,o,A,l,c;for(r=i=0,a=(A=e.children).length;i<a;r=++i)(n=A[r]).isLastRootNode=r===e.children.length-1;for(t=this.filterOptions(t),c=[],s=0,o=(l=e.children).length;s<o;s++)n=l[s],c.push(this.writeChildNode(n,t,0));return c},i.prototype.attribute=function(e,t,n){return this.stream.write(i.__super__.attribute.call(this,e,t,n))},i.prototype.cdata=function(e,t,n){return this.stream.write(i.__super__.cdata.call(this,e,t,n))},i.prototype.comment=function(e,t,n){return this.stream.write(i.__super__.comment.call(this,e,t,n))},i.prototype.declaration=function(e,t,n){return this.stream.write(i.__super__.declaration.call(this,e,t,n))},i.prototype.docType=function(e,n,r){var i,s,a,o;if(r||(r=0),this.openNode(e,n,r),n.state=t.OpenTag,this.stream.write(this.indent(e,n,r)),this.stream.write("<!DOCTYPE "+e.root().name),e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(e,n,r)),n.state=t.InsideTag,s=0,a=(o=e.children).length;s<a;s++)i=o[s],this.writeChildNode(i,n,r+1);n.state=t.CloseTag,this.stream.write("]")}return n.state=t.CloseTag,this.stream.write(n.spaceBeforeSlash+">"),this.stream.write(this.endline(e,n,r)),n.state=t.None,this.closeNode(e,n,r)},i.prototype.element=function(n,i,s){var a,o,A,l,c,u,d,h,f;for(d in s||(s=0),this.openNode(n,i,s),i.state=t.OpenTag,this.stream.write(this.indent(n,i,s)+"<"+n.name),h=n.attribs)r.call(h,d)&&(a=h[d],this.attribute(a,i,s));if(l=0===(A=n.children.length)?null:n.children[0],0===A||n.children.every(function(t){return(t.type===e.Text||t.type===e.Raw)&&""===t.value}))i.allowEmpty?(this.stream.write(">"),i.state=t.CloseTag,this.stream.write("</"+n.name+">")):(i.state=t.CloseTag,this.stream.write(i.spaceBeforeSlash+"/>"));else if(!i.pretty||1!==A||l.type!==e.Text&&l.type!==e.Raw||null==l.value){for(this.stream.write(">"+this.endline(n,i,s)),i.state=t.InsideTag,c=0,u=(f=n.children).length;c<u;c++)o=f[c],this.writeChildNode(o,i,s+1);i.state=t.CloseTag,this.stream.write(this.indent(n,i,s)+"</"+n.name+">")}else this.stream.write(">"),i.state=t.InsideTag,i.suppressPrettyCount++,this.writeChildNode(l,i,s+1),i.suppressPrettyCount--,i.state=t.CloseTag,this.stream.write("</"+n.name+">");return this.stream.write(this.endline(n,i,s)),i.state=t.None,this.closeNode(n,i,s)},i.prototype.processingInstruction=function(e,t,n){return this.stream.write(i.__super__.processingInstruction.call(this,e,t,n))},i.prototype.raw=function(e,t,n){return this.stream.write(i.__super__.raw.call(this,e,t,n))},i.prototype.text=function(e,t,n){return this.stream.write(i.__super__.text.call(this,e,t,n))},i.prototype.dtdAttList=function(e,t,n){return this.stream.write(i.__super__.dtdAttList.call(this,e,t,n))},i.prototype.dtdElement=function(e,t,n){return this.stream.write(i.__super__.dtdElement.call(this,e,t,n))},i.prototype.dtdEntity=function(e,t,n){return this.stream.write(i.__super__.dtdEntity.call(this,e,t,n))},i.prototype.dtdNotation=function(e,t,n){return this.stream.write(i.__super__.dtdNotation.call(this,e,t,n))},i}(n)}.call(F_)),I_.exports}function D_(){return x_||(x_=1,function(){var e,t,n,r,i,s,a,o,A,l;l=yL(),o=l.assign,A=l.isFunction,n=EL(),r=E_(),B_||(B_=1,function(){var e,t,n,r,i,s,a,o,A,l,c,u,d,h,f,p,g,m,y,v,w,b,E,B={}.hasOwnProperty;E=yL(),w=E.isObject,v=E.isFunction,b=E.isPlainObject,y=E.getValue,e=NL(),u=E_(),d=qL(),r=iD(),i=AD(),f=RD(),m=MD(),h=KD(),l=dD(),c=DD(),s=mD(),o=bD(),a=SD(),A=ID(),n=$L(),g=o_(),p=v_(),t=h_(),C_.exports=function(){function E(t,n,r){var i;this.name="?xml",this.type=e.Document,t||(t={}),i={},t.writer?b(t.writer)&&(i=t.writer,t.writer=new p):t.writer=new p,this.options=t,this.writer=t.writer,this.writerOptions=this.writer.filterOptions(i),this.stringify=new g(t),this.onDataCallback=n||function(){},this.onEndCallback=r||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return E.prototype.createChildNode=function(t){var n,r,i,s,a,o,A,l;switch(t.type){case e.CData:this.cdata(t.value);break;case e.Comment:this.comment(t.value);break;case e.Element:for(r in i={},A=t.attribs)B.call(A,r)&&(n=A[r],i[r]=n.value);this.node(t.name,i);break;case e.Dummy:this.dummy();break;case e.Raw:this.raw(t.value);break;case e.Text:this.text(t.value);break;case e.ProcessingInstruction:this.instruction(t.target,t.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+t.constructor.name)}for(a=0,o=(l=t.children).length;a<o;a++)s=l[a],this.createChildNode(s),s.type===e.Element&&this.up();return this},E.prototype.dummy=function(){return this},E.prototype.node=function(e,t,n){var r;if(null==e)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(e));return this.openCurrent(),e=y(e),null==t&&(t={}),t=y(t),w(t)||(n=(r=[t,n])[0],t=r[1]),this.currentNode=new d(this,e,t),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=n&&this.text(n),this},E.prototype.element=function(t,n,r){var i,s,a,o,A,l;if(this.currentNode&&this.currentNode.type===e.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(t)||w(t)||v(t))for(o=this.options.noValidation,this.options.noValidation=!0,(l=new u(this.options).element("TEMP_ROOT")).element(t),this.options.noValidation=o,s=0,a=(A=l.children).length;s<a;s++)i=A[s],this.createChildNode(i),i.type===e.Element&&this.up();else this.node(t,n,r);return this},E.prototype.attribute=function(e,t){var r,i;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(e));if(null!=e&&(e=y(e)),w(e))for(r in e)B.call(e,r)&&(i=e[r],this.attribute(r,i));else v(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.currentNode.attribs[e]=new n(this,e,""):null!=t&&(this.currentNode.attribs[e]=new n(this,e,t));return this},E.prototype.text=function(e){var t;return this.openCurrent(),t=new m(this,e),this.onData(this.writer.text(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.cdata=function(e){var t;return this.openCurrent(),t=new r(this,e),this.onData(this.writer.cdata(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.comment=function(e){var t;return this.openCurrent(),t=new i(this,e),this.onData(this.writer.comment(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.raw=function(e){var t;return this.openCurrent(),t=new f(this,e),this.onData(this.writer.raw(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.instruction=function(e,t){var n,r,i,s,a;if(this.openCurrent(),null!=e&&(e=y(e)),null!=t&&(t=y(t)),Array.isArray(e))for(n=0,s=e.length;n<s;n++)r=e[n],this.instruction(r);else if(w(e))for(r in e)B.call(e,r)&&(i=e[r],this.instruction(r,i));else v(t)&&(t=t.apply()),a=new h(this,e,t),this.onData(this.writer.processingInstruction(a,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},E.prototype.declaration=function(e,t,n){var r;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return r=new l(this,e,t,n),this.onData(this.writer.declaration(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.doctype=function(e,t,n){if(this.openCurrent(),null==e)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new c(this,t,n),this.currentNode.rootNodeName=e,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},E.prototype.dtdElement=function(e,t){var n;return this.openCurrent(),n=new a(this,e,t),this.onData(this.writer.dtdElement(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.attList=function(e,t,n,r,i){var a;return this.openCurrent(),a=new s(this,e,t,n,r,i),this.onData(this.writer.dtdAttList(a,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.entity=function(e,t){var n;return this.openCurrent(),n=new o(this,!1,e,t),this.onData(this.writer.dtdEntity(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.pEntity=function(e,t){var n;return this.openCurrent(),n=new o(this,!0,e,t),this.onData(this.writer.dtdEntity(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.notation=function(e,t){var n;return this.openCurrent(),n=new A(this,e,t),this.onData(this.writer.dtdNotation(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},E.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},E.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},E.prototype.openNode=function(n){var r,i,s,a;if(!n.isOpen){if(this.root||0!==this.currentLevel||n.type!==e.Element||(this.root=n),i="",n.type===e.Element){for(s in this.writerOptions.state=t.OpenTag,i=this.writer.indent(n,this.writerOptions,this.currentLevel)+"<"+n.name,a=n.attribs)B.call(a,s)&&(r=a[s],i+=this.writer.attribute(r,this.writerOptions,this.currentLevel));i+=(n.children?">":"/>")+this.writer.endline(n,this.writerOptions,this.currentLevel),this.writerOptions.state=t.InsideTag}else this.writerOptions.state=t.OpenTag,i=this.writer.indent(n,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+n.rootNodeName,n.pubID&&n.sysID?i+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.sysID&&(i+=' SYSTEM "'+n.sysID+'"'),n.children?(i+=" [",this.writerOptions.state=t.InsideTag):(this.writerOptions.state=t.CloseTag,i+=">"),i+=this.writer.endline(n,this.writerOptions,this.currentLevel);return this.onData(i,this.currentLevel),n.isOpen=!0}},E.prototype.closeNode=function(n){var r;if(!n.isClosed)return r="",this.writerOptions.state=t.CloseTag,r=n.type===e.Element?this.writer.indent(n,this.writerOptions,this.currentLevel)+"</"+n.name+">"+this.writer.endline(n,this.writerOptions,this.currentLevel):this.writer.indent(n,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(n,this.writerOptions,this.currentLevel),this.writerOptions.state=t.None,this.onData(r,this.currentLevel),n.isClosed=!0},E.prototype.onData=function(e,t){return this.documentStarted=!0,this.onDataCallback(e,t+1)},E.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},E.prototype.debugInfo=function(e){return null==e?"":"node: <"+e+">"},E.prototype.ele=function(){return this.element.apply(this,arguments)},E.prototype.nod=function(e,t,n){return this.node(e,t,n)},E.prototype.txt=function(e){return this.text(e)},E.prototype.dat=function(e){return this.cdata(e)},E.prototype.com=function(e){return this.comment(e)},E.prototype.ins=function(e,t){return this.instruction(e,t)},E.prototype.dec=function(e,t,n){return this.declaration(e,t,n)},E.prototype.dtd=function(e,t,n){return this.doctype(e,t,n)},E.prototype.e=function(e,t,n){return this.element(e,t,n)},E.prototype.n=function(e,t,n){return this.node(e,t,n)},E.prototype.t=function(e){return this.text(e)},E.prototype.d=function(e){return this.cdata(e)},E.prototype.c=function(e){return this.comment(e)},E.prototype.r=function(e){return this.raw(e)},E.prototype.i=function(e,t){return this.instruction(e,t)},E.prototype.att=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},E.prototype.a=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},E.prototype.ent=function(e,t){return this.entity(e,t)},E.prototype.pent=function(e,t){return this.pEntity(e,t)},E.prototype.not=function(e,t){return this.notation(e,t)},E}()}.call(S_)),i=C_.exports,a=v_(),s=L_(),e=NL(),t=h_(),gL.create=function(e,t,n,i){var s,a;if(null==e)throw new Error("Root element needs a name.");return i=o({},t,n,i),a=(s=new r(i)).element(e),i.headless||(s.declaration(i),null==i.pubID&&null==i.sysID||s.dtd(i)),a},gL.begin=function(e,t,n){var s;return A(e)&&(t=(s=[e,t])[0],n=s[1],e={}),t?new i(e,t,n):new r(e)},gL.stringWriter=function(e){return new a(e)},gL.streamWriter=function(e,t){return new s(e,t)},gL.implementation=new n,gL.nodeType=e,gL.writerState=t}.call(gL)),gL}var __={},U_={};const P_=t(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var R_,O_={},Q_={exports:{}},N_={},M_={};var H_,j_,$_,K_,V_,G_={};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function W_(){return j_||(j_=1,function(e){var t=function(){if(R_)return M_;R_=1,M_.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},M_.toByteArray=function(e){var r,i,a=s(e),o=a[0],A=a[1],l=new n(function(e,t,n){return 3*(t+n)/4-n}(0,o,A)),c=0,u=A>0?o-4:o;for(i=0;i<u;i+=4)r=t[e.charCodeAt(i)]<<18|t[e.charCodeAt(i+1)]<<12|t[e.charCodeAt(i+2)]<<6|t[e.charCodeAt(i+3)],l[c++]=r>>16&255,l[c++]=r>>8&255,l[c++]=255&r;return 2===A&&(r=t[e.charCodeAt(i)]<<2|t[e.charCodeAt(i+1)]>>4,l[c++]=255&r),1===A&&(r=t[e.charCodeAt(i)]<<10|t[e.charCodeAt(i+1)]<<4|t[e.charCodeAt(i+2)]>>2,l[c++]=r>>8&255,l[c++]=255&r),l},M_.fromByteArray=function(t){for(var n,r=t.length,i=r%3,s=[],a=16383,A=0,l=r-i;A<l;A+=a)s.push(o(t,A,A+a>l?l:A+a));return 1===i?(n=t[r-1],s.push(e[n>>2]+e[n<<4&63]+"==")):2===i&&(n=(t[r-2]<<8)+t[r-1],s.push(e[n>>10]+e[n>>4&63]+e[n<<2&63]+"=")),s.join("")};for(var e=[],t=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)e[i]=r[i],t[r.charCodeAt(i)]=i;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function a(t){return e[t>>18&63]+e[t>>12&63]+e[t>>6&63]+e[63&t]}function o(e,t,n){for(var r,i=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(a(r));return i.join("")}return t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63,M_}(),n=(H_||(H_=1,G_.read=function(e,t,n,r,i){var s,a,o=8*i-r-1,A=(1<<o)-1,l=A>>1,c=-7,u=n?i-1:0,d=n?-1:1,h=e[t+u];for(u+=d,s=h&(1<<-c)-1,h>>=-c,c+=o;c>0;s=256*s+e[t+u],u+=d,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=r;c>0;a=256*a+e[t+u],u+=d,c-=8);if(0===s)s=1-l;else{if(s===A)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),s-=l}return(h?-1:1)*a*Math.pow(2,s-r)},G_.write=function(e,t,n,r,i,s){var a,o,A,l=8*s-i-1,c=(1<<l)-1,u=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:s-1,f=r?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(A=Math.pow(2,-a))<1&&(a--,A*=2),(t+=a+u>=1?d/A:d*Math.pow(2,1-u))*A>=2&&(a++,A/=2),a+u>=c?(o=0,a=c):a+u>=1?(o=(t*A-1)*Math.pow(2,i),a+=u):(o=t*Math.pow(2,u-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&o,h+=f,o/=256,i-=8);for(a=a<<i|o,l+=i;l>0;e[n+h]=255&a,h+=f,a/=256,l-=8);e[n+h-f]|=128*p}),G_),r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=function(e){+e!=e&&(e=0);return a.alloc(+e)},e.INSPECT_MAX_BYTES=50;var i=2147483647;function s(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return o(e,t,n)}function o(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|h(e,t),r=s(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(N(e,Uint8Array)){var t=new Uint8Array(e);return u(t.buffer,t.byteOffset,t.byteLength)}return c(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(N(e,ArrayBuffer)||e&&N(e.buffer,ArrayBuffer))return u(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(N(e,SharedArrayBuffer)||e&&N(e.buffer,SharedArrayBuffer)))return u(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);var i=function(e){if(a.isBuffer(e)){var t=0|d(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||M(e.length)?s(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function A(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return A(e),s(e<0?0:0|d(e))}function c(e){for(var t=e.length<0?0:0|d(e.length),n=s(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function u(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,a.prototype),r}function d(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function h(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||N(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return R(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return O(e).length;default:if(i)return r?-1:R(e).length;t=(""+t).toLowerCase(),i=!0}}function f(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return x(this,t,n);case"base64":return B(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),M(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var s,a=1,o=e.length,A=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,o/=2,A/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(s=n;s<o;s++)if(l(e,s)===l(t,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===A)return c*a}else-1!==c&&(s-=s-c),c=-1}else for(n+A>o&&(n=o-A),s=n;s>=0;s--){for(var u=!0,d=0;d<A;d++)if(l(e,s+d)!==l(t,d)){u=!1;break}if(u)return s}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var s=t.length;r>s/2&&(r=s/2);for(var a=0;a<r;++a){var o=parseInt(t.substr(2*a,2),16);if(M(o))return a;e[n+a]=o}return a}function v(e,t,n,r){return Q(R(t,e.length-n),e,n,r)}function w(e,t,n,r){return Q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n,r){return Q(O(t),e,n,r)}function E(e,t,n,r){return Q(function(e,t){for(var n,r,i,s=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,s.push(i),s.push(r);return s}(t,e.length-n),e,n,r)}function B(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var s,a,o,A,l=e[i],c=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u<=n)switch(u){case 1:l<128&&(c=l);break;case 2:128==(192&(s=e[i+1]))&&(A=(31&l)<<6|63&s)>127&&(c=A);break;case 3:s=e[i+1],a=e[i+2],128==(192&s)&&128==(192&a)&&(A=(15&l)<<12|(63&s)<<6|63&a)>2047&&(A<55296||A>57343)&&(c=A);break;case 4:s=e[i+1],a=e[i+2],o=e[i+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&(A=(15&l)<<18|(63&s)<<12|(63&a)<<6|63&o)>65535&&A<1114112&&(c=A)}null===c?(c=65533,u=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=u}return function(e){var t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=S));return n}(r)}e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(c$){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,n){return o(e,t,n)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,n){return function(e,t,n){return A(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},a.allocUnsafe=function(e){return l(e)},a.allocUnsafeSlow=function(e){return l(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(N(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),N(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(N(s,Uint8Array))i+s.length>r.length?a.from(s).copy(r,i):Uint8Array.prototype.set.call(r,s,i);else{if(!a.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i)}i+=s.length}return r},a.byteLength=h,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?C(this,0,e):f.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(e,t,n,r,i){if(N(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),A=Math.min(s,o),l=this.slice(r,i),c=e.slice(t,n),u=0;u<A;++u)if(l[u]!==c[u]){s=l[u],o=c[u];break}return s<o?-1:o<s?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return b(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function k(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=t;s<n;++s)i+=H[e[s]];return i}function I(e,t,n){for(var r=e.slice(t,n),i="",s=0;s<r.length-1;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function F(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,i,s){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r,i,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function _(e,t,r,i,s){return t=+t,r>>>=0,s||D(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function U(e,t,r,i,s){return t=+t,r>>>=0,s||D(e,0,r,8),n.write(e,t,r,i,52,8),r+8}a.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,a.prototype),r},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);for(var r=t,i=1,s=this[e+--r];r>0&&(i*=256);)s+=this[e+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},a.prototype.readInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||F(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||F(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||F(e,4,this.length),n.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||F(e,4,this.length),n.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||F(e,8,this.length),n.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||F(e,8,this.length),n.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||L(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||L(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var s=0,a=1,o=0;for(this[t]=255&e;++s<n&&(a*=256);)e<0&&0===o&&0!==this[t+s-1]&&(o=1),this[t+s]=(e/a|0)-o&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var s=n-1,a=1,o=0;for(this[t+s]=255&e;--s>=0&&(a*=256);)e<0&&0===o&&0!==this[t+s+1]&&(o=1),this[t+s]=(e/a|0)-o&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,n){return _(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return _(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var o=a.isBuffer(e)?e:a.from(e,r),A=o.length;if(0===A)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-t;++s)this[s+t]=o[s%A]}return this};var P=/[^+/0-9A-Za-z-_]/g;function R(e,t){var n;t=t||1/0;for(var r=e.length,i=null,s=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function O(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(P,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function N(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function M(e){return e!=e}var H=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}()}(N_)),N_}
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */function z_(){if(K_)return O_;K_=1;var e=($_||($_=1,function(e,t){var n=W_(),r=n.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=s),s.prototype=Object.create(r.prototype),i(r,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}}(Q_,Q_.exports)),Q_.exports).Buffer,t=e.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(n){var r;switch(this.encoding=function(n){var r=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(n);if("string"!=typeof r&&(e.isEncoding===t||!t(n)))throw new Error("Unknown encoding: "+n);return r||n}(n),this.encoding){case"utf16le":this.text=s,this.end=a,r=4;break;case"utf8":this.fillLast=i,r=4;break;case"base64":this.text=o,this.end=A,r=3;break;default:return this.write=l,void(this.end=c)}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(r)}function r(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function i(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function s(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function a(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function o(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function A(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function l(e){return e.toString(this.encoding)}function c(e){return e&&e.length?this.write(e):""}return O_.StringDecoder=n,n.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},n.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},n.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var s=r(t[i]);if(s>=0)return s>0&&(e.lastNeed=s-1),s;if(--i<n||-2===s)return 0;if(s=r(t[i]),s>=0)return s>0&&(e.lastNeed=s-2),s;if(--i<n||-2===s)return 0;if(s=r(t[i]),s>=0)return s>0&&(2===s?s=0:e.lastNeed=s-3),s;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},n.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length},O_}function Y_(){return V_||(V_=1,function(e){e.parser=function(e,t){return new r(e,t)},e.SAXParser=r,e.SAXStream=s,e.createStream=function(e,t){return new s(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function r(t,i){if(!(this instanceof r))return new r(t,i);var s=this;!function(e){for(var t=0,r=n.length;t<r;t++)e[n[t]]=""}(s),s.q=s.c="",s.bufferCheckPosition=e.MAX_BUFFER_LENGTH,s.opt=i||{},s.opt.lowercase=s.opt.lowercase||s.opt.lowercasetags,s.looseCase=s.opt.lowercase?"toLowerCase":"toUpperCase",s.tags=[],s.closed=s.closedRoot=s.sawRoot=!1,s.tag=s.error=null,s.strict=!!t,s.noscript=!(!t&&!s.opt.noscript),s.state=B.BEGIN,s.strictEntities=s.opt.strictEntities,s.ENTITIES=s.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),s.attribList=[],s.opt.xmlns&&(s.ns=Object.create(c)),void 0===s.opt.unquotedAttributeValues&&(s.opt.unquotedAttributeValues=!t),s.trackPosition=!1!==s.opt.position,s.trackPosition&&(s.position=s.line=s.column=0),S(s,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),r.prototype={end:function(){F(this)},write:function(t){var r=this;if(this.error)throw this.error;if(r.closed)return I(r,"Cannot write after close. Assign an onready handler.");if(null===t)return F(r);"object"==typeof t&&(t=t.toString());for(var i=0,s="";s=N(t,i++),r.c=s,s;)switch(r.trackPosition&&(r.position++,"\n"===s?(r.line++,r.column=0):r.column++),r.state){case B.BEGIN:if(r.state=B.BEGIN_WHITESPACE,"\ufeff"===s)continue;Q(r,s);continue;case B.BEGIN_WHITESPACE:Q(r,s);continue;case B.TEXT:if(r.sawRoot&&!r.closedRoot){for(var A=i-1;s&&"<"!==s&&"&"!==s;)(s=N(t,i++))&&r.trackPosition&&(r.position++,"\n"===s?(r.line++,r.column=0):r.column++);r.textNode+=t.substring(A,i-1)}"<"!==s||r.sawRoot&&r.closedRoot&&!r.strict?(p(s)||r.sawRoot&&!r.closedRoot||L(r,"Text data outside of root node."),"&"===s?r.state=B.TEXT_ENTITY:r.textNode+=s):(r.state=B.OPEN_WAKA,r.startTagPosition=r.position);continue;case B.SCRIPT:"<"===s?r.state=B.SCRIPT_ENDING:r.script+=s;continue;case B.SCRIPT_ENDING:"/"===s?r.state=B.CLOSE_TAG:(r.script+="<"+s,r.state=B.SCRIPT);continue;case B.OPEN_WAKA:if("!"===s)r.state=B.SGML_DECL,r.sgmlDecl="";else if(p(s));else if(y(u,s))r.state=B.OPEN_TAG,r.tagName=s;else if("/"===s)r.state=B.CLOSE_TAG,r.tagName="";else if("?"===s)r.state=B.PROC_INST,r.procInstName=r.procInstBody="";else{if(L(r,"Unencoded <"),r.startTagPosition+1<r.position){var l=r.position-r.startTagPosition;s=new Array(l).join(" ")+s}r.textNode+="<"+s,r.state=B.TEXT}continue;case B.SGML_DECL:if(r.sgmlDecl+s==="--"){r.state=B.COMMENT,r.comment="",r.sgmlDecl="";continue}r.doctype&&!0!==r.doctype&&r.sgmlDecl?(r.state=B.DOCTYPE_DTD,r.doctype+="<!"+r.sgmlDecl+s,r.sgmlDecl=""):(r.sgmlDecl+s).toUpperCase()===a?(T(r,"onopencdata"),r.state=B.CDATA,r.sgmlDecl="",r.cdata=""):(r.sgmlDecl+s).toUpperCase()===o?(r.state=B.DOCTYPE,(r.doctype||r.sawRoot)&&L(r,"Inappropriately located doctype declaration"),r.doctype="",r.sgmlDecl=""):">"===s?(T(r,"onsgmldeclaration",r.sgmlDecl),r.sgmlDecl="",r.state=B.TEXT):g(s)?(r.state=B.SGML_DECL_QUOTED,r.sgmlDecl+=s):r.sgmlDecl+=s;continue;case B.SGML_DECL_QUOTED:s===r.q&&(r.state=B.SGML_DECL,r.q=""),r.sgmlDecl+=s;continue;case B.DOCTYPE:">"===s?(r.state=B.TEXT,T(r,"ondoctype",r.doctype),r.doctype=!0):(r.doctype+=s,"["===s?r.state=B.DOCTYPE_DTD:g(s)&&(r.state=B.DOCTYPE_QUOTED,r.q=s));continue;case B.DOCTYPE_QUOTED:r.doctype+=s,s===r.q&&(r.q="",r.state=B.DOCTYPE);continue;case B.DOCTYPE_DTD:"]"===s?(r.doctype+=s,r.state=B.DOCTYPE):"<"===s?(r.state=B.OPEN_WAKA,r.startTagPosition=r.position):g(s)?(r.doctype+=s,r.state=B.DOCTYPE_DTD_QUOTED,r.q=s):r.doctype+=s;continue;case B.DOCTYPE_DTD_QUOTED:r.doctype+=s,s===r.q&&(r.state=B.DOCTYPE_DTD,r.q="");continue;case B.COMMENT:"-"===s?r.state=B.COMMENT_ENDING:r.comment+=s;continue;case B.COMMENT_ENDING:"-"===s?(r.state=B.COMMENT_ENDED,r.comment=k(r.opt,r.comment),r.comment&&T(r,"oncomment",r.comment),r.comment=""):(r.comment+="-"+s,r.state=B.COMMENT);continue;case B.COMMENT_ENDED:">"!==s?(L(r,"Malformed comment"),r.comment+="--"+s,r.state=B.COMMENT):r.doctype&&!0!==r.doctype?r.state=B.DOCTYPE_DTD:r.state=B.TEXT;continue;case B.CDATA:"]"===s?r.state=B.CDATA_ENDING:r.cdata+=s;continue;case B.CDATA_ENDING:"]"===s?r.state=B.CDATA_ENDING_2:(r.cdata+="]"+s,r.state=B.CDATA);continue;case B.CDATA_ENDING_2:">"===s?(r.cdata&&T(r,"oncdata",r.cdata),T(r,"onclosecdata"),r.cdata="",r.state=B.TEXT):"]"===s?r.cdata+="]":(r.cdata+="]]"+s,r.state=B.CDATA);continue;case B.PROC_INST:"?"===s?r.state=B.PROC_INST_ENDING:p(s)?r.state=B.PROC_INST_BODY:r.procInstName+=s;continue;case B.PROC_INST_BODY:if(!r.procInstBody&&p(s))continue;"?"===s?r.state=B.PROC_INST_ENDING:r.procInstBody+=s;continue;case B.PROC_INST_ENDING:">"===s?(T(r,"onprocessinginstruction",{name:r.procInstName,body:r.procInstBody}),r.procInstName=r.procInstBody="",r.state=B.TEXT):(r.procInstBody+="?"+s,r.state=B.PROC_INST_BODY);continue;case B.OPEN_TAG:y(d,s)?r.tagName+=s:(D(r),">"===s?P(r):"/"===s?r.state=B.OPEN_TAG_SLASH:(p(s)||L(r,"Invalid character in tag name"),r.state=B.ATTRIB));continue;case B.OPEN_TAG_SLASH:">"===s?(P(r,!0),R(r)):(L(r,"Forward-slash in opening tag not followed by >"),r.state=B.ATTRIB);continue;case B.ATTRIB:if(p(s))continue;">"===s?P(r):"/"===s?r.state=B.OPEN_TAG_SLASH:y(u,s)?(r.attribName=s,r.attribValue="",r.state=B.ATTRIB_NAME):L(r,"Invalid attribute name");continue;case B.ATTRIB_NAME:"="===s?r.state=B.ATTRIB_VALUE:">"===s?(L(r,"Attribute without value"),r.attribValue=r.attribName,U(r),P(r)):p(s)?r.state=B.ATTRIB_NAME_SAW_WHITE:y(d,s)?r.attribName+=s:L(r,"Invalid attribute name");continue;case B.ATTRIB_NAME_SAW_WHITE:if("="===s)r.state=B.ATTRIB_VALUE;else{if(p(s))continue;L(r,"Attribute without value"),r.tag.attributes[r.attribName]="",r.attribValue="",T(r,"onattribute",{name:r.attribName,value:""}),r.attribName="",">"===s?P(r):y(u,s)?(r.attribName=s,r.state=B.ATTRIB_NAME):(L(r,"Invalid attribute name"),r.state=B.ATTRIB)}continue;case B.ATTRIB_VALUE:if(p(s))continue;g(s)?(r.q=s,r.state=B.ATTRIB_VALUE_QUOTED):(r.opt.unquotedAttributeValues||I(r,"Unquoted attribute value"),r.state=B.ATTRIB_VALUE_UNQUOTED,r.attribValue=s);continue;case B.ATTRIB_VALUE_QUOTED:if(s!==r.q){"&"===s?r.state=B.ATTRIB_VALUE_ENTITY_Q:r.attribValue+=s;continue}U(r),r.q="",r.state=B.ATTRIB_VALUE_CLOSED;continue;case B.ATTRIB_VALUE_CLOSED:p(s)?r.state=B.ATTRIB:">"===s?P(r):"/"===s?r.state=B.OPEN_TAG_SLASH:y(u,s)?(L(r,"No whitespace between attributes"),r.attribName=s,r.attribValue="",r.state=B.ATTRIB_NAME):L(r,"Invalid attribute name");continue;case B.ATTRIB_VALUE_UNQUOTED:if(!m(s)){"&"===s?r.state=B.ATTRIB_VALUE_ENTITY_U:r.attribValue+=s;continue}U(r),">"===s?P(r):r.state=B.ATTRIB;continue;case B.CLOSE_TAG:if(r.tagName)">"===s?R(r):y(d,s)?r.tagName+=s:r.script?(r.script+="</"+r.tagName,r.tagName="",r.state=B.SCRIPT):(p(s)||L(r,"Invalid tagname in closing tag"),r.state=B.CLOSE_TAG_SAW_WHITE);else{if(p(s))continue;v(u,s)?r.script?(r.script+="</"+s,r.state=B.SCRIPT):L(r,"Invalid tagname in closing tag."):r.tagName=s}continue;case B.CLOSE_TAG_SAW_WHITE:if(p(s))continue;">"===s?R(r):L(r,"Invalid characters in closing tag");continue;case B.TEXT_ENTITY:case B.ATTRIB_VALUE_ENTITY_Q:case B.ATTRIB_VALUE_ENTITY_U:var c,w;switch(r.state){case B.TEXT_ENTITY:c=B.TEXT,w="textNode";break;case B.ATTRIB_VALUE_ENTITY_Q:c=B.ATTRIB_VALUE_QUOTED,w="attribValue";break;case B.ATTRIB_VALUE_ENTITY_U:c=B.ATTRIB_VALUE_UNQUOTED,w="attribValue"}if(";"===s){var b=O(r);r.opt.unparsedEntities&&!Object.values(e.XML_ENTITIES).includes(b)?(r.entity="",r.state=c,r.write(b)):(r[w]+=b,r.entity="",r.state=c)}else y(r.entity.length?f:h,s)?r.entity+=s:(L(r,"Invalid character in entity name"),r[w]+="&"+r.entity+s,r.entity="",r.state=c);continue;default:throw new Error(r,"Unknown state: "+r.state)}return r.position>=r.bufferCheckPosition&&function(t){for(var r=Math.max(e.MAX_BUFFER_LENGTH,10),i=0,s=0,a=n.length;s<a;s++){var o=t[n[s]].length;if(o>r)switch(n[s]){case"textNode":x(t);break;case"cdata":T(t,"oncdata",t.cdata),t.cdata="";break;case"script":T(t,"onscript",t.script),t.script="";break;default:I(t,"Max buffer length exceeded: "+n[s])}i=Math.max(i,o)}var A=e.MAX_BUFFER_LENGTH-i;t.bufferCheckPosition=A+t.position}(r),r}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;x(e=this),""!==e.cdata&&(T(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(T(e,"onscript",e.script),e.script="")}};try{t=P_.Stream}catch(M){t=function(){}}t||(t=function(){});var i=e.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});function s(e,n){if(!(this instanceof s))return new s(e,n);t.apply(this),this._parser=new r(e,n),this.writable=!0,this.readable=!0;var a=this;this._parser.onend=function(){a.emit("end")},this._parser.onerror=function(e){a.emit("error",e),a._parser.error=null},this._decoder=null,i.forEach(function(e){Object.defineProperty(a,"on"+e,{get:function(){return a._parser["on"+e]},set:function(t){if(!t)return a.removeAllListeners(e),a._parser["on"+e]=t,t;a.on(e,t)},enumerable:!0,configurable:!1})})}s.prototype=Object.create(t.prototype,{constructor:{value:s}}),s.prototype.write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=z_().StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},s.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},s.prototype.on=function(e,n){var r=this;return r._parser["on"+e]||-1===i.indexOf(e)||(r._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),r.emit.apply(r,t)}),t.prototype.on.call(r,e,n)};var a="[CDATA[",o="DOCTYPE",A="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/2000/xmlns/",c={xml:A,xmlns:l},u=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,h=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function p(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function g(e){return'"'===e||"'"===e}function m(e){return">"===e||p(e)}function y(e,t){return e.test(t)}function v(e,t){return!y(e,t)}var w,b,E,B=0;for(var C in e.STATE={BEGIN:B++,BEGIN_WHITESPACE:B++,TEXT:B++,TEXT_ENTITY:B++,OPEN_WAKA:B++,SGML_DECL:B++,SGML_DECL_QUOTED:B++,DOCTYPE:B++,DOCTYPE_QUOTED:B++,DOCTYPE_DTD:B++,DOCTYPE_DTD_QUOTED:B++,COMMENT_STARTING:B++,COMMENT:B++,COMMENT_ENDING:B++,COMMENT_ENDED:B++,CDATA:B++,CDATA_ENDING:B++,CDATA_ENDING_2:B++,PROC_INST:B++,PROC_INST_BODY:B++,PROC_INST_ENDING:B++,OPEN_TAG:B++,OPEN_TAG_SLASH:B++,ATTRIB:B++,ATTRIB_NAME:B++,ATTRIB_NAME_SAW_WHITE:B++,ATTRIB_VALUE:B++,ATTRIB_VALUE_QUOTED:B++,ATTRIB_VALUE_CLOSED:B++,ATTRIB_VALUE_UNQUOTED:B++,ATTRIB_VALUE_ENTITY_Q:B++,ATTRIB_VALUE_ENTITY_U:B++,CLOSE_TAG:B++,CLOSE_TAG_SAW_WHITE:B++,SCRIPT:B++,SCRIPT_ENDING:B++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(t){var n=e.ENTITIES[t],r="number"==typeof n?String.fromCharCode(n):n;e.ENTITIES[t]=r}),e.STATE)e.STATE[e.STATE[C]]=C;function S(e,t,n){e[t]&&e[t](n)}function T(e,t,n){e.textNode&&x(e),S(e,t,n)}function x(e){e.textNode=k(e.opt,e.textNode),e.textNode&&S(e,"ontext",e.textNode),e.textNode=""}function k(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function I(e,t){return x(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,S(e,"onerror",t),e}function F(e){return e.sawRoot&&!e.closedRoot&&L(e,"Unclosed root tag"),e.state!==B.BEGIN&&e.state!==B.BEGIN_WHITESPACE&&e.state!==B.TEXT&&I(e,"Unexpected end"),x(e),e.c="",e.closed=!0,S(e,"onend"),r.call(e,e.strict,e.opt),e}function L(e,t){if("object"!=typeof e||!(e instanceof r))throw new Error("bad call to strictFail");e.strict&&I(e,t)}function D(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,T(e,"onopentagstart",n)}function _(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),r=n[0],i=n[1];return t&&"xmlns"===e&&(r="xmlns",i=""),{prefix:r,local:i}}function U(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=_(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==A)L(e,"xml: prefix must be bound to "+A+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==l)L(e,"xmlns: prefix must be bound to "+l+"\nActual: "+e.attribValue);else{var i=e.tag,s=e.tags[e.tags.length-1]||e;i.ns===s.ns&&(i.ns=Object.create(s.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,T(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function P(e,t){if(e.opt.xmlns){var n=e.tag,r=_(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(L(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(t){T(e,"onopennamespace",{prefix:t,uri:n.ns[t]})});for(var s=0,a=e.attribList.length;s<a;s++){var o=e.attribList[s],A=o[0],l=o[1],c=_(A,!0),u=c.prefix,d=c.local,h=""===u?"":n.ns[u]||"",f={name:A,value:l,prefix:u,local:d,uri:h};u&&"xmlns"!==u&&!h&&(L(e,"Unbound namespace prefix: "+JSON.stringify(u)),f.uri=u),e.tag.attributes[A]=f,T(e,"onattribute",f)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),T(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=B.TEXT:e.state=B.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function R(e){if(!e.tagName)return L(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=B.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=B.SCRIPT);T(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--&&e.tags[t].name!==r;)L(e,"Unexpected close tag");if(t<0)return L(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=B.TEXT);e.tagName=n;for(var i=e.tags.length;i-- >t;){var s=e.tag=e.tags.pop();e.tagName=e.tag.name,T(e,"onclosetag",e.tagName);var a={};for(var o in s.ns)a[o]=s.ns[o];var A=e.tags[e.tags.length-1]||e;e.opt.xmlns&&s.ns!==A.ns&&Object.keys(s.ns).forEach(function(t){var n=s.ns[t];T(e,"onclosenamespace",{prefix:t,uri:n})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=B.TEXT}function O(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:("#"===(n=r).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),i=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),i=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(t)||i.toLowerCase()!==n?(L(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function Q(e,t){"<"===t?(e.state=B.OPEN_WAKA,e.startTagPosition=e.position):p(t)||(L(e,"Non-whitespace before first tag."),e.textNode=t,e.state=B.TEXT)}function N(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}B=e.STATE,String.fromCodePoint||(w=String.fromCharCode,b=Math.floor,E=function(){var e,t,n=[],r=-1,i=arguments.length;if(!i)return"";for(var s="";++r<i;){var a=Number(arguments[r]);if(!isFinite(a)||a<0||a>1114111||b(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?n.push(a):(e=55296+((a-=65536)>>10),t=a%1024+56320,n.push(e,t)),(r+1===i||n.length>16384)&&(s+=w.apply(null,n),n.length=0)}return s},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:E,configurable:!0,writable:!0}):String.fromCodePoint=E)}(U_)),U_}var q_,X_={};var J_,Z_,eU,tU,nU,rU,iU,sU,aU,oU,AU,lU,cU,uU,dU,hU,fU,pU,gU,mU,yU,vU,wU,bU,EU,BU,CU,SU,TU,xU,kU,IU,FU,LU,DU,_U,UU,PU={};function RU(){return J_||(J_=1,function(){var e;e=new RegExp(/(?!xmlns)^.*:/),PU.normalize=function(e){return e.toLowerCase()},PU.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},PU.stripPrefix=function(t){return t.replace(e,"")},PU.parseNumbers=function(e){return isNaN(e)||(e=e%1==0?parseInt(e,10):parseFloat(e)),e},PU.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e="true"===e.toLowerCase()),e}}.call(PU)),PU}function OU(){return Z_||(Z_=1,e=__,function(){var t,n,r,i,s,a,o,A,l=function(e,t){return function(){return e.apply(t,arguments)}},c={}.hasOwnProperty;o=Y_(),r=P_,q_||(q_=1,function(){X_.stripBOM=function(e){return"\ufeff"===e[0]?e.substring(1):e}}.call(X_)),t=X_,a=RU(),A=P_.setImmediate,n=hL().defaults,i=function(e){return"object"==typeof e&&null!=e&&0===Object.keys(e).length},s=function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++)t=(0,e[r])(t,n);return t},e.Parser=function(r){function u(t){var r,i,s;if(this.parseStringPromise=l(this.parseStringPromise,this),this.parseString=l(this.parseString,this),this.reset=l(this.reset,this),this.assignOrPush=l(this.assignOrPush,this),this.processAsync=l(this.processAsync,this),!(this instanceof e.Parser))return new e.Parser(t);for(r in this.options={},i=n[.2])c.call(i,r)&&(s=i[r],this.options[r]=s);for(r in t)c.call(t,r)&&(s=t[r],this.options[r]=s);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(a.normalize)),this.reset()}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(u,r),u.prototype.processAsync=function(){var e,t;try{return this.remaining.length<=this.options.chunkSize?(e=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(e),this.saxParser.close()):(e=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(e),A(this.processAsync))}catch(n){if(t=n,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(t)}},u.prototype.assignOrPush=function(e,t,n){return t in e?(e[t]instanceof Array||(e[t]=[e[t]]),e[t].push(n)):this.options.explicitArray?e[t]=[n]:e[t]=n},u.prototype.reset=function(){var e,t,n,r;return this.removeAllListeners(),this.saxParser=o.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(e){return function(t){if(e.saxParser.resume(),!e.saxParser.errThrown)return e.saxParser.errThrown=!0,e.emit("error",t)}}(this),this.saxParser.onend=function(e){return function(){if(!e.saxParser.ended)return e.saxParser.ended=!0,e.emit("end",e.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,r=[],e=this.options.attrkey,t=this.options.charkey,this.saxParser.onopentag=function(n){return function(i){var a,o,A,l,u;if((A={})[t]="",!n.options.ignoreAttrs)for(a in u=i.attributes)c.call(u,a)&&(e in A||n.options.mergeAttrs||(A[e]={}),o=n.options.attrValueProcessors?s(n.options.attrValueProcessors,i.attributes[a],a):i.attributes[a],l=n.options.attrNameProcessors?s(n.options.attrNameProcessors,a):a,n.options.mergeAttrs?n.assignOrPush(A,l,o):A[e][l]=o);return A["#name"]=n.options.tagNameProcessors?s(n.options.tagNameProcessors,i.name):i.name,n.options.xmlns&&(A[n.options.xmlnskey]={uri:i.uri,local:i.local}),r.push(A)}}(this),this.saxParser.onclosetag=function(e){return function(){var n,a,o,A,l,u,d,h,f,p;if(u=r.pop(),l=u["#name"],e.options.explicitChildren&&e.options.preserveChildrenOrder||delete u["#name"],!0===u.cdata&&(n=u.cdata,delete u.cdata),f=r[r.length-1],u[t].match(/^\s*$/)&&!n?(a=u[t],delete u[t]):(e.options.trim&&(u[t]=u[t].trim()),e.options.normalize&&(u[t]=u[t].replace(/\s{2,}/g," ").trim()),u[t]=e.options.valueProcessors?s(e.options.valueProcessors,u[t],l):u[t],1===Object.keys(u).length&&t in u&&!e.EXPLICIT_CHARKEY&&(u=u[t])),i(u)&&(u=""!==e.options.emptyTag?e.options.emptyTag:a),null!=e.options.validator&&(p="/"+function(){var e,t,n;for(n=[],e=0,t=r.length;e<t;e++)A=r[e],n.push(A["#name"]);return n}().concat(l).join("/"),function(){var t;try{return u=e.options.validator(p,f&&f[l],u)}catch(n){return t=n,e.emit("error",t)}}()),e.options.explicitChildren&&!e.options.mergeAttrs&&"object"==typeof u)if(e.options.preserveChildrenOrder){if(f){for(o in f[e.options.childkey]=f[e.options.childkey]||[],d={},u)c.call(u,o)&&(d[o]=u[o]);f[e.options.childkey].push(d),delete u["#name"],1===Object.keys(u).length&&t in u&&!e.EXPLICIT_CHARKEY&&(u=u[t])}}else A={},e.options.attrkey in u&&(A[e.options.attrkey]=u[e.options.attrkey],delete u[e.options.attrkey]),!e.options.charsAsChildren&&e.options.charkey in u&&(A[e.options.charkey]=u[e.options.charkey],delete u[e.options.charkey]),Object.getOwnPropertyNames(u).length>0&&(A[e.options.childkey]=u),u=A;return r.length>0?e.assignOrPush(f,l,u):(e.options.explicitRoot&&(h=u,(u={})[l]=h),e.resultObject=u,e.saxParser.ended=!0,e.emit("end",e.resultObject))}}(this),n=function(e){return function(n){var i,s;if(s=r[r.length-1])return s[t]+=n,e.options.explicitChildren&&e.options.preserveChildrenOrder&&e.options.charsAsChildren&&(e.options.includeWhiteChars||""!==n.replace(/\\n/g,"").trim())&&(s[e.options.childkey]=s[e.options.childkey]||[],(i={"#name":"__text__"})[t]=n,e.options.normalize&&(i[t]=i[t].replace(/\s{2,}/g," ").trim()),s[e.options.childkey].push(i)),s}}(this),this.saxParser.ontext=n,this.saxParser.oncdata=function(){return function(e){var t;if(t=n(e))return t.cdata=!0}}()},u.prototype.parseString=function(e,n){var r;null!=n&&"function"==typeof n&&(this.on("end",function(e){return this.reset(),n(null,e)}),this.on("error",function(e){return this.reset(),n(e)}));try{return""===(e=e.toString()).trim()?(this.emit("end",null),!0):(e=t.stripBOM(e),this.options.async?(this.remaining=e,A(this.processAsync),this.saxParser):this.saxParser.write(e).close())}catch(i){if(r=i,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",r),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw r}},u.prototype.parseStringPromise=function(e){return new Promise(function(t){return function(n,r){return t.parseString(e,function(e,t){return e?r(e):n(t)})}}(this))},u}(r),e.parseString=function(t,n,r){var i,s;return null!=r?("function"==typeof r&&(i=r),"object"==typeof n&&(s=n)):("function"==typeof n&&(i=n),s={}),new e.Parser(s).parseString(t,i)},e.parseStringPromise=function(t,n){var r;return"object"==typeof n&&(r=n),new e.Parser(r).parseStringPromise(t)}}.call(__)),__;var e}function QU(){return eU||(eU=1,function(){var e,t,n,r,i={}.hasOwnProperty;t=hL(),k_||(k_=1,function(){var e,t,n,r,i,s={}.hasOwnProperty;e=D_(),t=hL().defaults,r=function(e){return"string"==typeof e&&(e.indexOf("&")>=0||e.indexOf(">")>=0||e.indexOf("<")>=0)},i=function(e){return"<![CDATA["+n(e)+"]]>"},n=function(e){return e.replace("]]>","]]]]><![CDATA[>")},pL.Builder=function(){function n(e){var n,r,i;for(n in this.options={},r=t[.2])s.call(r,n)&&(i=r[n],this.options[n]=i);for(n in e)s.call(e,n)&&(i=e[n],this.options[n]=i)}return n.prototype.buildObject=function(n){var a,o,A,l,c;return a=this.options.attrkey,o=this.options.charkey,1===Object.keys(n).length&&this.options.rootName===t[.2].rootName?n=n[c=Object.keys(n)[0]]:c=this.options.rootName,A=function(e){return function(t,n){var l,c,u,d,h,f;if("object"!=typeof n)e.options.cdata&&r(n)?t.raw(i(n)):t.txt(n);else if(Array.isArray(n)){for(d in n)if(s.call(n,d))for(h in c=n[d])u=c[h],t=A(t.ele(h),u).up()}else for(h in n)if(s.call(n,h))if(c=n[h],h===a){if("object"==typeof c)for(l in c)f=c[l],t=t.att(l,f)}else if(h===o)t=e.options.cdata&&r(c)?t.raw(i(c)):t.txt(c);else if(Array.isArray(c))for(d in c)s.call(c,d)&&(t="string"==typeof(u=c[d])?e.options.cdata&&r(u)?t.ele(h).raw(i(u)).up():t.ele(h,u).up():A(t.ele(h),u).up());else"object"==typeof c?t=A(t.ele(h),c).up():"string"==typeof c&&e.options.cdata&&r(c)?t=t.ele(h).raw(i(c)).up():(null==c&&(c=""),t=t.ele(h,c.toString()).up());return t}}(this),l=e.create(c,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),A(l,n).end(this.options.renderOpts)},n}()}.call(pL)),e=pL,n=OU(),r=RU(),uL.defaults=t.defaults,uL.processors=r,uL.ValidationError=function(){function e(e){this.message=e}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(e,Error),e}(),uL.Builder=e.Builder,uL.Parser=n.Parser,uL.parseString=n.parseString,uL.parseStringPromise=n.parseStringPromise}.call(uL)),uL}function NU(){if(nU)return tU;nU=1;const{Parser:e}=QU(),t=HF,n=UC(),{SUBTITLE_SCHEMA:r}=YF(),{timecodeToMicroseconds:i,cleanUpText:s}=qF();return tU=function(a,o){const A={success:!0,invalidEntries:[]};let l;new e({async:!1}).parseString(a,(e,t)=>{e&&A.invalidEntries.push(e),l=t});const{error:c,value:u}=n.validate(function(e,n){const{removeTextFormatting:r}=n,a=t.path(["tt","$"],e),o=t.path(["tt","body","0","div","0","p"],e);return{global:{language:a["xml:lang"]},body:o.map((e,n)=>({id:n.toString(),startMicro:i(t.path(["$","begin"],e)),endMicro:i(t.path(["$","end"],e)),text:s(e._,r)})).filter(e=>e.text).map((e,t)=>(e.id=(t+1).toString(),e)),source:e}}(l,o),r,{abortEarly:!1});if(c)throw Error(c);return A.invalidEntries.length&&(A.success=!1),{data:u,status:A}}}function MU(){if(iU)return rU;function e(e,t){this.message=e,this.error=t}iU=1,e.prototype=Object.create(Error.prototype);const t=/([0-9]{1,2})?:?([0-9]{2}):([0-9]{2}\.[0-9]{3})/;function n(n,s){let a="",o=0,A=.01,l="",c="";const u=n.split("\n").filter(Boolean);if(u.length>0&&u[0].trim().startsWith("NOTE"))return null;if(1===u.length&&!u[0].includes("--\x3e"))throw new e(`Cue identifier cannot be standalone (cue #${s})`);if(u.length>1&&!u[0].includes("--\x3e")&&!u[1].includes("--\x3e")){throw new e(`Cue identifier needs to be followed by timestamp (cue #${s})`)}u.length>1&&u[1].includes("--\x3e")&&(a=u.shift());const d=u[0].split(" --\x3e ");if(2!==d.length||!r(d[0])||!r(d[1]))throw new e(`Invalid cue timestamp (cue #${s})`);if(o=i(d[0]),A=i(d[1]),o>A)throw new e(`Start timestamp greater than end (cue #${s})`);if(A<=o)throw new e(`End must be greater than start (cue #${s})`);return c=d[1].replace(t,"").trim(),u.shift(),l=u.join("\n"),!!l&&{identifier:a,start:o,end:A,text:l,styles:c}}function r(e){return t.test(e)}function i(e){const n=e.match(t);let r=parseFloat(n[3]);return r+=60*parseFloat(n[2]),r+=60*parseFloat(n[1]||0)*60,r}return rU={ParserError:e,parse:function(t,r){if(r||(r={}),r={meta:!0===r.meta},"string"!=typeof t)throw new e("Input must be a string");const i=(t=(t=(t=t.trim()).replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).split("\n\n"),s=i.shift();if(!s.startsWith("WEBVTT"))throw new e('Must start with "WEBVTT"');const a=s.split("\n"),o=a[0].replace("WEBVTT","");if(o.length>0&&" "!==o[0]&&"\t"!==o[0])throw new e("Header comment must start with space or tab");if(0===i.length&&1===a.length)return{valid:!0,cues:[]};if(!r.meta&&a.length>1&&""!==a[1])throw new e("Missing blank line after signature");const A=function(e){return e.map(n).filter(Boolean)}(i),l=r.meta?function(e){const t={};return e.slice(1).forEach(e=>{const[n,r]=e.split(":").map(e=>e.trim());t[n]=r}),Object.keys(t).length>0?t:null}(a):null,c={valid:!0,cues:A};return r.meta&&(c.meta=l),c}}}function HU(){if(aU)return sU;function e(e,t){this.message=e,this.error=t}function t(e){const t=n(function(e){return Math.floor(e/60/60)}(e),2),r=n(function(e){return Math.floor(e/60)%60}(e),2),i=n(function(e){return Math.floor(e%60)}(e),2),s=n(function(e){return Math.floor(e%1*1e3)}(e),3);return`${t}:${r}:${i}.${s}`}function n(e,t){let n=`${e}`;for(;n.length<t;)n=`0${n}`;return n}return aU=1,e.prototype=Object.create(Error.prototype),sU={CompilerError:e,compile:function(n){if(!n)throw new e("Input must be non-null");if("object"!=typeof n)throw new e("Input must be an object");if(Array.isArray(n))throw new e("Input cannot be array");if(!n.valid)throw new e("Input must be valid");let r="WEBVTT\n";return n.cues.forEach(n=>{r+="\n",r+=function(n){if("object"!=typeof n)throw new e("Cue malformed: not of type object");if("string"!=typeof n.identifier&&"number"!=typeof n.identifier&&null!==n.identifier)throw new e(`Cue malformed: identifier value is not a string.\n    ${JSON.stringify(n)}`);if(isNaN(n.start))throw new e(`Cue malformed: null start value.\n    ${JSON.stringify(n)}`);if(isNaN(n.end))throw new e(`Cue malformed: null end value.\n    ${JSON.stringify(n)}`);if(n.start>=n.end)throw new e(`Cue malformed: start timestamp greater than end\n    ${JSON.stringify(n)}`);if("string"!=typeof n.text)throw new e(`Cue malformed: null text value.\n    ${JSON.stringify(n)}`);if("string"!=typeof n.styles)throw new e(`Cue malformed: null styles value.\n    ${JSON.stringify(n)}`);let r="";n.identifier.length>0&&(r+=`${n.identifier}\n`);const i=t(n.start),s=t(n.end);return r+=`${i} --\x3e ${s}`,r+=n.styles?` ${n.styles}`:"",r+=`\n${n.text}`,r}(n),r+="\n"}),r}}}function jU(){if(AU)return oU;AU=1;const e=MU().parse;function t(e,t){return e+=t-e%t}return oU={segment:function(n,r){r=r||10;const i=e(n),s=[];let a=[],o=null,A=0,l=0;return i.cues.forEach((e,n)=>{const c=0===n,u=n===i.cues.length-1,d=e.start,h=e.end,f=u?1/0:i.cues[n+1].start,p=c?h:h-d,g=c?0:d-i.cues[n-1].end;A=A+p+g,s.length,o&&(a.push(o),A+=o.end-l,o=null),a.push(e);let m=f-h<r&&g<r&&A>r;if(function(e,n,r,i){const s=t(i,n),a=i<=n||s+e<r;return a&&r-e>=n}(l,r,f,g)){const e=function(e,n,r,i,s){let a=r;i>r&&(a=t(i-r,r));a=e?parseFloat((n-s).toFixed(2)):Math.round(a);return a}(u,h,r,A,l);s.push({duration:e,cues:a}),l+=e,A=0,a=[]}else m=!1;m&&(o=e)}),s}},oU}function $U(){if(cU)return lU;cU=1;const e=jU().segment;function t(e,t){return`${"0".repeat(Math.max(0,t-e.toString().length))}${e}`}function n(e){return`${e}.vtt`}function r(e){const n=(e%1).toFixed(3);e=Math.round(e-n);const r=Math.floor(e/3600),i=Math.floor((e-3600*r)/60),s=e-3600*r-60*i;return`${`${t(r,2)}:`}${t(i,2)}:${t(s,2)}.${t(1e3*n,3)}`}return lU={hlsSegment:function(t,i,s){void 0===s&&(s="900000");const a=e(t,i),o=[];return a.forEach((e,t)=>{const i=`WEBVTT\nX-TIMESTAMP-MAP=MPEGTS:${s},LOCAL:00:00:00.000\n\n${function(e){const t=[];return e.forEach(e=>{t.push(function(e){const t=[];e.identifier&&t.push(e.identifier);const n=r(e.start),i=r(e.end),s=e.styles?`${e.styles}`:"";return t.push(`${n} --\x3e ${i} ${s}`),t.push(e.text),t.join("\n")}(e))}),t.join("\n\n")}(e.cues)}\n`,a=n(t);o.push({filename:a,content:i})}),o},hlsSegmentPlaylist:function(t,r){const i=e(t,r),s=function(e){const t=[];return e.forEach((e,r)=>{t.push(`#EXTINF:${e.duration.toFixed(5)},\n${n(r)}`)}),t.join("\n")}(i);return`#EXTM3U\n#EXT-X-TARGETDURATION:${Math.round(function(e){let t=0;return e.forEach(e=>{e.duration>t&&(t=e.duration)}),t}(i))}\n#EXT-X-VERSION:3\n#EXT-X-MEDIA-SEQUENCE:0\n#EXT-X-PLAYLIST-TYPE:VOD\n${s}\n#EXT-X-ENDLIST\n`}},lU}function KU(){if(dU)return uU;dU=1;const e=MU().parse,t=HU().compile,n=jU().segment,r=$U();return uU={parse:e,compile:t,segment:n,hls:r}}function VU(){if(fU)return hU;fU=1;const{parse:e}=KU(),t=UC(),{SUBTITLE_SCHEMA:n}=YF(),{secondsToMicroseconds:r,cleanUpText:i}=qF();return hU=function(s,a){const o={success:!0,invalidEntries:[]},A=e(s,{meta:!0}),{error:l,value:c}=t.validate(function(e,t){const{removeTextFormatting:n}=t;return{global:{},body:e.cues.map((e,t)=>{const s=e.styles?e.styles.split(" ").reduce((e,t)=>{const[n,r]=t.split(":");return e[n]=r,e},{}):{};return{id:t.toString(),startMicro:r(e.start),endMicro:r(e.end),styles:s,text:i(e.text,n)}}).filter(e=>e.text).map((e,t)=>(e.id=(t+1).toString(),e)),source:e}}(A,a),n,{abortEarly:!1});if(l)throw Error(l);return o.invalidEntries.length&&(o.success=!1),{data:c,status:o}}}function GU(){if(gU)return pU;gU=1;const{trim:e,zipObj:t,reduce:n}=HF,r=/\[Events\]\nFormat:(.*)\n/,i=/Dialogue:/;return pU=s=>{const a=(s=s.replace(/(\r\n|\r)/g,"\n")).split(/\n/),o=(t=>{const[,n]=t.match(r)||[];if(!n)throw new Error("Failed to parse keys in .ass file");return n.split(",").map(e)})(s);return n((n,r)=>{if(!(e=>i.test(e))(r))return n;const s=r.replace(/\\N/,"\n").split(/,(?! )/).map(e),a=t(o,s);return n.concat(a)},[],a)}}function WU(){if(yU)return mU;yU=1;const e=UC(),t=GU(),{SUBTITLE_SCHEMA:n}=YF(),{cleanUpText:r,timecodeToMicroseconds:i}=qF(),s=e=>`${e}0`;return mU=function(a,o){const A={success:!0,invalidEntries:[]},l=t(a),{error:c,value:u}=e.validate(function(e,t){const{removeTextFormatting:n}=t;return{global:{},body:e.map(e=>({timecode:e.Start,startMicro:i(s(e.Start)),endMicro:i(s(e.End)),text:r(e.Text,n)})).filter(e=>e.text).map((e,t)=>(e.id=(t+1).toString(),e)),source:e}}(l,o),n,{abortEarly:!1});if(c)throw Error(c);return A.invalidEntries.length&&(A.success=!1),{data:u,status:A}}}function zU(){if(wU)return vU;wU=1;const e=oL(),t=lL(),n=NU(),r=VU(),i=WU();return vU=function(s,a,o={}){switch(a){case".srt":return t(s,o);case".scc":return e(s,o);case".vtt":return r(s,o);case".ass":return i(s,o);case".dfxp":case".ttml":return n(s,o);default:throw Error(`File type ${a} is not supported. Supported input file types include:\ndfxp, scc, srt, ttml, vtt, and ass`)}}}function YU(){if(DU)return LU;DU=1;const e=function(){if(EU)return bU;EU=1;const{last:e,update:t,assoc:n}=HF;return bU=function(r){return r.length?r.reduce((n,r)=>{const i=e(n)||{};if(r.startMicro<i.endMicro){const e={startMicro:i.startMicro,endMicro:r.endMicro,text:`${i.text}\n${r.text}`};return t(-1,e,n)}return n.concat(r)},[]).map((e,t)=>n("id",t+1,e)):r}}(),t=function(){if(CU)return BU;CU=1;const{secondsToMicroseconds:e}=qF();return BU=function(t,n=!1){return t.length?!1===n?t:t.map((r,i)=>{if(i<1)return r;const s=t[i-1],{startMicro:a}=r,{endMicro:o}=s;return o>a&&o-a<=e(n)&&(r.startMicro=o),r}):t}}(),n=TU?SU:(TU=1,SU=function(e,t,n){const r=t/n;return e.map(e=>(e.startMicro*=r,e.endMicro*=r,e))}),r=function(){if(kU)return xU;kU=1;const{secondsToMicroseconds:e}=qF();return xU=function(t,n){const r=e(n);return t.map(e=>{if(e.startMicro+=r,e.endMicro+=r,e.startMicro<0||e.endMicro<0)throw Error(`shift by ${n} failed`);return e})}}(),i=function(){if(FU)return IU;FU=1;const{hoursToMicroseconds:e}=qF();return IU=function(t){if(!t.length)return t;const n=e(1),r=Math.floor(t[0].startMicro/n);if(r<1)return t;const i=r*n;return t.forEach(e=>{if(e.startMicro-=i,e.endMicro-=i,e.startMicro<0||e.endMicro<0)throw Error("shift to zero hour failed")}),t}}();return LU=function(s,a){const{timecodeOverlapLimiter:o,combineOverlapping:A,shiftTimecode:l,sourceFps:c,outputFps:u,startAtZeroHour:d}=a;let h=s;return!1!==o&&(h=t(h,o)),A&&(h=e(h)),l&&(h=r(h,l)),c&&u&&(h=n(h,c,u)),d&&(h=i(h)),h}}function qU(){if(UU)return _U;return UU=1,_U=function(e,t={startsAtZeroHour:!0,reversedTimecodes:!0,overlappingTimecodes:!0,formattedText:!0}){const n=function(e){const t={success:!0};return e.startsAtZeroHour&&(t.startsAtZeroHour=!0),e.reversedTimecodes&&(t.reversedTimecodes=[]),e.overlappingTimecodes&&(t.overlappingTimecodes=[]),e.formattedText&&(t.formattedText=[]),t}(t);let r=0;return e.forEach((e,i)=>{const{id:s,timecode:a,startMicro:o,endMicro:A,text:l}=e;t.startsAtZeroHour&&0===i&&o>=36e8&&(n.startsAtZeroHour=!1,n.success=!1),t.overlappingTimecodes&&o<r&&(n.overlappingTimecodes.push({id:s,timecode:a}),n.success=!1),t.reversedTimecodes&&o>A&&(n.reversedTimecodes.push({id:s,timecode:a}),n.success=!1),t.formattedText&&l.match(/{|}|<|>/)&&(n.formattedText.push({id:s,text:l}),n.success=!1),r=A}),n}}var XU,JU,ZU,eP,tP,nP,rP,iP,sP,aP,oP,AP={exports:{}};function lP(){if(ZU)return JU;ZU=1;const{toSrt:e}=XU?AP.exports:(XU=1,t={fromSrt:function(e,t){var r=!!t;(e=(e=e.replace(/\r/g,"")).split(/(\d+)\n(\d{2}:\d{2}:\d{2},\d{3}) --> (\d{2}:\d{2}:\d{2},\d{3})/g)).shift();for(var i=[],s=0;s<e.length;s+=4)i.push({id:e[s].trim(),startTime:r?n(e[s+1].trim()):e[s+1].trim(),endTime:r?n(e[s+2].trim()):e[s+2].trim(),text:e[s+3].trim()});return i},toSrt:function(e){if(!e instanceof Array)return"";for(var t="",n=0;n<e.length;n++){var i=e[n];isNaN(i.startTime)||isNaN(i.endTime)||(i.startTime=r(parseInt(i.startTime,10)),i.endTime=r(parseInt(i.endTime,10))),t+=i.id+"\r\n",t+=i.startTime+" --\x3e "+i.endTime+"\r\n",t+=i.text.replace("\n","\r\n")+"\r\n\r\n"}return t}},n=function(e){var t=/(\d+):(\d{2}):(\d{2}),(\d{3})/.exec(e);if(null===t)return 0;for(var n=1;n<5;n++)t[n]=parseInt(t[n],10),isNaN(t[n])&&(t[n]=0);return 36e5*t[1]+6e4*t[2]+1e3*t[3]+t[4]},r=function(e){var t=[36e5,6e4,1e3],n=[];for(var r in t){var i=(e/t[r]|0).toString();i.length<2&&(i="0"+i),e%=t[r],n.push(i)}var s=e.toString();if(s.length<3)for(r=0;r<=3-s.length;r++)s="0"+s;return n.join(":")+","+s},AP.exports=t);var t,n,r;const{microsecondsToMilliseconds:i}=qF();return JU=function(t){const n=function(e){return e.body.map(e=>({id:e.id,startTime:i(e.startMicro),endTime:i(e.endMicro),text:e.text}))}(t);return e(n)}}function cP(){if(tP)return eP;tP=1;const{compile:e}=KU(),{microsecondsToSeconds:t}=qF();return eP=function(n){const r=function(e){return{valid:!0,cues:e.body.map(e=>{const n=e.styles?Object.keys(e.styles).map(t=>`${t}:${e.styles[t]}`).join(" "):"";return{identifier:e.id,start:t(e.startMicro),end:t(e.endMicro),text:e.text,styles:n}})}}(n);return e(r)}}function uP(){if(rP)return nP;rP=1;const e=UC(),{isEmpty:t}=HF,n=zU(),r=YU(),i=qU(),s=lP(),a=cP(),{PARAM_SCHEMA:o}=YF(),{getExtension:A}=qF();return nP=function(l,c,u={timecodeOverlapLimiter:!1}){const{error:d}=e.validate({subtitleText:l,outputExtension:c,options:u},o,{abortEarly:!1});if(d)throw Error(d);const{data:h,status:f}=n(l,A(l),u);if(t(h.body))throw Error("Parsed file is empty");const p=r(h.body,u),g={startsAtZeroHour:u.startAtZeroHour,reversedTimecodes:!0,overlappingTimecodes:!0,formattedText:u.removeTextFormatting},m=i(p,g);h.body=p;return{subtitle:function(e,t){switch(t){case".srt":return s(e);case".vtt":return a(e);default:throw Error(`File type ${t} is not supported. Supported output file types include: '.srt', '.vtt'`)}}(h,c),status:{...f,...m,success:f.success&&m.success}}}}var dP=function(){if(oP)return aP;oP=1;const e=uP(),t=function(){if(sP)return iP;sP=1;const{isEmpty:e}=HF,t=zU(),n=qU(),{getExtension:r}=qF();return iP=function(i,s,a){const{data:o,status:A}=t(i,r(i)||s,a);if(e(o.body))throw Error("Parsed file is empty");const l=n(o.body,a),c=A.success&&l.success;return{...A,...l,success:c}}}();return aP={convert:e,validate:t}}(),hP=function(e,t){return(hP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};
/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function fP(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}hP(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var pP=function(){return pP=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},pP.apply(this,arguments)};function gP(e,t,n,r){return new(n||(n=Promise))(function(t,i){function s(e){try{o(r.next(e))}catch(c$){i(c$)}}function a(e){try{o(r.throw(e))}catch(c$){i(c$)}}function o(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n(function(e){e(r)})).then(s,a)}o((r=r.apply(e,[])).next())})}function mP(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(c$){s=[6,c$],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}function yP(e,t,n){if(2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||t)}for(var vP=function(){function e(e,t,n,r){this.left=e,this.top=t,this.width=n,this.height=r}return e.prototype.add=function(t,n,r,i){return new e(this.left+t,this.top+n,this.width+r,this.height+i)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var r=Array.from(n).find(function(e){return 0!==e.width});return r?new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),wP=function(e,t){return vP.fromClientRect(e,t.getBoundingClientRect())},bP=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=e.charCodeAt(n++);56320==(64512&s)?t.push(((1023&i)<<10)+(1023&s)+65536):(t.push(i),n--)}else t.push(i)}return t},EP=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],i=-1,s="";++i<n;){var a=e[i];a<=65535?r.push(a):(a-=65536,r.push(55296+(a>>10),a%1024+56320)),(i+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},BP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",CP="undefined"==typeof Uint8Array?[]:new Uint8Array(256),SP=0;SP<64;SP++)CP[BP.charCodeAt(SP)]=SP;for(var TP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xP="undefined"==typeof Uint8Array?[]:new Uint8Array(256),kP=0;kP<64;kP++)xP[TP.charCodeAt(kP)]=kP;for(var IP=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},FP=function(){function e(e,t,n,r,i,s){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=s}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>5])<<2)+(31&e),this.data[t];if(e<=65535)return t=((t=this.index[2048+(e-55296>>5)])<<2)+(31&e),this.data[t];if(e<this.highStart)return t=2080+(e>>11),t=this.index[t],t+=e>>5&63,t=((t=this.index[t])<<2)+(31&e),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),LP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",DP="undefined"==typeof Uint8Array?[]:new Uint8Array(256),_P=0;_P<64;_P++)DP[LP.charCodeAt(_P)]=_P;var UP,PP,RP,OP,QP,NP,MP,HP,jP=10,$P=13,KP=15,VP=17,GP=18,WP=19,zP=20,YP=21,qP=22,XP=24,JP=25,ZP=26,eR=27,tR=28,nR=30,rR=32,iR=33,sR=34,aR=35,oR=37,AR=38,lR=39,cR=40,uR=42,dR=[9001,65288],hR="",fR="",pR=(OP=function(e){var t,n,r,i,s,a=.75*e.length,o=e.length,A=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(a):new Array(a),c=Array.isArray(l)?l:new Uint8Array(l);for(t=0;t<o;t+=4)n=xP[e.charCodeAt(t)],r=xP[e.charCodeAt(t+1)],i=xP[e.charCodeAt(t+2)],s=xP[e.charCodeAt(t+3)],c[A++]=n<<2|r>>4,c[A++]=(15&r)<<4|i>>2,c[A++]=(3&i)<<6|63&s;return l}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),QP=Array.isArray(OP)?function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n}(OP):new Uint32Array(OP),NP=Array.isArray(OP)?function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n}(OP):new Uint16Array(OP),MP=IP(NP,12,QP[4]/2),HP=2===QP[5]?IP(NP,(24+QP[4])/2):(UP=QP,PP=Math.ceil((24+QP[4])/4),UP.slice?UP.slice(PP,RP):new Uint32Array(Array.prototype.slice.call(UP,PP,RP))),new FP(QP[0],QP[1],QP[2],QP[3],MP,HP)),gR=[nR,36],mR=[1,2,3,5],yR=[jP,8],vR=[eR,ZP],wR=mR.concat(yR),bR=[AR,lR,cR,sR,aR],ER=[KP,$P],BR=function(e,t,n,r){var i=r[n];if(Array.isArray(e)?-1!==e.indexOf(i):e===i)for(var s=n;s<=r.length;){if((A=r[++s])===t)return!0;if(A!==jP)break}if(i===jP)for(s=n;s>0;){var a=r[--s];if(Array.isArray(e)?-1!==e.indexOf(a):e===a)for(var o=n;o<=r.length;){var A;if((A=r[++o])===t)return!0;if(A!==jP)break}if(a!==jP)break}return!1},CR=function(e,t){for(var n=e;n>=0;){var r=t[n];if(r!==jP)return r;n--}return 0},SR=function(e,t,n,r,i){if(0===n[r])return hR;var s=r-1;if(Array.isArray(i)&&!0===i[s])return hR;var a=s-1,o=s+1,A=t[s],l=a>=0?t[a]:0,c=t[o];if(2===A&&3===c)return hR;if(-1!==mR.indexOf(A))return"!";if(-1!==mR.indexOf(c))return hR;if(-1!==yR.indexOf(c))return hR;if(8===CR(s,t))return fR;if(11===pR.get(e[s]))return hR;if((A===rR||A===iR)&&11===pR.get(e[o]))return hR;if(7===A||7===c)return hR;if(9===A)return hR;if(-1===[jP,$P,KP].indexOf(A)&&9===c)return hR;if(-1!==[VP,GP,WP,XP,tR].indexOf(c))return hR;if(CR(s,t)===qP)return hR;if(BR(23,qP,s,t))return hR;if(BR([VP,GP],YP,s,t))return hR;if(BR(12,12,s,t))return hR;if(A===jP)return fR;if(23===A||23===c)return hR;if(16===c||16===A)return fR;if(-1!==[$P,KP,YP].indexOf(c)||14===A)return hR;if(36===l&&-1!==ER.indexOf(A))return hR;if(A===tR&&36===c)return hR;if(c===zP)return hR;if(-1!==gR.indexOf(c)&&A===JP||-1!==gR.indexOf(A)&&c===JP)return hR;if(A===eR&&-1!==[oR,rR,iR].indexOf(c)||-1!==[oR,rR,iR].indexOf(A)&&c===ZP)return hR;if(-1!==gR.indexOf(A)&&-1!==vR.indexOf(c)||-1!==vR.indexOf(A)&&-1!==gR.indexOf(c))return hR;if(-1!==[eR,ZP].indexOf(A)&&(c===JP||-1!==[qP,KP].indexOf(c)&&t[o+1]===JP)||-1!==[qP,KP].indexOf(A)&&c===JP||A===JP&&-1!==[JP,tR,XP].indexOf(c))return hR;if(-1!==[JP,tR,XP,VP,GP].indexOf(c))for(var u=s;u>=0;){if((d=t[u])===JP)return hR;if(-1===[tR,XP].indexOf(d))break;u--}if(-1!==[eR,ZP].indexOf(c))for(u=-1!==[VP,GP].indexOf(A)?a:s;u>=0;){var d;if((d=t[u])===JP)return hR;if(-1===[tR,XP].indexOf(d))break;u--}if(AR===A&&-1!==[AR,lR,sR,aR].indexOf(c)||-1!==[lR,sR].indexOf(A)&&-1!==[lR,cR].indexOf(c)||-1!==[cR,aR].indexOf(A)&&c===cR)return hR;if(-1!==bR.indexOf(A)&&-1!==[zP,ZP].indexOf(c)||-1!==bR.indexOf(c)&&A===eR)return hR;if(-1!==gR.indexOf(A)&&-1!==gR.indexOf(c))return hR;if(A===XP&&-1!==gR.indexOf(c))return hR;if(-1!==gR.concat(JP).indexOf(A)&&c===qP&&-1===dR.indexOf(e[o])||-1!==gR.concat(JP).indexOf(c)&&A===GP)return hR;if(41===A&&41===c){for(var h=n[s],f=1;h>0&&41===t[--h];)f++;if(f%2!=0)return hR}return A===rR&&c===iR?hR:fR},TR=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=function(e,t){void 0===t&&(t="strict");var n=[],r=[],i=[];return e.forEach(function(e,s){var a=pR.get(e);if(a>50?(i.push(!0),a-=50):i.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return r.push(s),n.push(16);if(4===a||11===a){if(0===s)return r.push(s),n.push(nR);var o=n[s-1];return-1===wR.indexOf(o)?(r.push(r[s-1]),n.push(o)):(r.push(s),n.push(nR))}return r.push(s),31===a?n.push("strict"===t?YP:oR):a===uR||29===a?n.push(nR):43===a?e>=131072&&e<=196605||e>=196608&&e<=262141?n.push(oR):n.push(nR):void n.push(a)}),[r,n,i]}(e,t.lineBreak),r=n[0],i=n[1],s=n[2];"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(i=i.map(function(e){return-1!==[JP,nR,uR].indexOf(e)?oR:e}));var a="keep-all"===t.wordBreak?s.map(function(t,n){return t&&e[n]>=19968&&e[n]<=40959}):void 0;return[r,i,a]},xR=function(){function e(e,t,n,r){this.codePoints=e,this.required="!"===t,this.start=n,this.end=r}return e.prototype.slice=function(){return EP.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),kR=45,IR=43,FR=-1,LR=function(e){return e>=48&&e<=57},DR=function(e){return LR(e)||e>=65&&e<=70||e>=97&&e<=102},_R=function(e){return 10===e||9===e||32===e},UR=function(e){return function(e){return function(e){return e>=97&&e<=122}(e)||function(e){return e>=65&&e<=90}(e)}(e)||function(e){return e>=128}(e)||95===e},PR=function(e){return UR(e)||LR(e)||e===kR},RR=function(e){return e>=0&&e<=8||11===e||e>=14&&e<=31||127===e},OR=function(e,t){return 92===e&&10!==t},QR=function(e,t,n){return e===kR?UR(t)||OR(t,n):!!UR(e)||!(92!==e||!OR(e,t))},NR=function(e,t,n){return e===IR||e===kR?!!LR(t)||46===t&&LR(n):LR(46===e?t:e)},MR=function(e){var t=0,n=1;e[t]!==IR&&e[t]!==kR||(e[t]===kR&&(n=-1),t++);for(var r=[];LR(e[t]);)r.push(e[t++]);var i=r.length?parseInt(EP.apply(void 0,r),10):0;46===e[t]&&t++;for(var s=[];LR(e[t]);)s.push(e[t++]);var a=s.length,o=a?parseInt(EP.apply(void 0,s),10):0;69!==e[t]&&101!==e[t]||t++;var A=1;e[t]!==IR&&e[t]!==kR||(e[t]===kR&&(A=-1),t++);for(var l=[];LR(e[t]);)l.push(e[t++]);var c=l.length?parseInt(EP.apply(void 0,l),10):0;return n*(i+o*Math.pow(10,-a))*Math.pow(10,A*c)},HR={type:2},jR={type:3},$R={type:4},KR={type:13},VR={type:8},GR={type:21},WR={type:9},zR={type:10},YR={type:11},qR={type:12},XR={type:14},JR={type:23},ZR={type:1},eO={type:25},tO={type:24},nO={type:26},rO={type:27},iO={type:28},sO={type:29},aO={type:31},oO={type:32},AO=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(bP(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==oO;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case 34:return this.consumeStringToken(34);case 35:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(PR(t)||OR(n,r)){var i=QR(t,n,r)?2:1;return{type:5,value:this.consumeName(),flags:i}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),KR;break;case 39:return this.consumeStringToken(39);case 40:return HR;case 41:return jR;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),XR;break;case IR:if(NR(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 44:return $R;case kR:var s=e,a=this.peekCodePoint(0),o=this.peekCodePoint(1);if(NR(s,a,o))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(QR(s,a,o))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(a===kR&&62===o)return this.consumeCodePoint(),this.consumeCodePoint(),tO;break;case 46:if(NR(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var A=this.consumeCodePoint();if(42===A&&47===(A=this.consumeCodePoint()))return this.consumeToken();if(A===FR)return this.consumeToken()}break;case 58:return nO;case 59:return rO;case 60:if(33===this.peekCodePoint(0)&&this.peekCodePoint(1)===kR&&this.peekCodePoint(2)===kR)return this.consumeCodePoint(),this.consumeCodePoint(),eO;break;case 64:var l=this.peekCodePoint(0),c=this.peekCodePoint(1),u=this.peekCodePoint(2);if(QR(l,c,u))return{type:7,value:this.consumeName()};break;case 91:return iO;case 92:if(OR(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case 93:return sO;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),VR;break;case 123:return YR;case 125:return qR;case 117:case 85:var d=this.peekCodePoint(0),h=this.peekCodePoint(1);return d!==IR||!DR(h)&&63!==h||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),WR;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),GR;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),zR;break;case FR:return oO}return _R(e)?(this.consumeWhiteSpace(),aO):LR(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):UR(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:EP(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return void 0===e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();DR(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;63===t&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n)return{type:30,start:parseInt(EP.apply(void 0,e.map(function(e){return 63===e?48:e})),16),end:parseInt(EP.apply(void 0,e.map(function(e){return 63===e?70:e})),16)};var r=parseInt(EP.apply(void 0,e),16);if(this.peekCodePoint(0)===kR&&DR(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var i=[];DR(t)&&i.length<6;)i.push(t),t=this.consumeCodePoint();return{type:30,start:r,end:parseInt(EP.apply(void 0,i),16)}}return{type:30,start:r,end:r}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===FR)return{type:22,value:""};var t=this.peekCodePoint(0);if(39===t||34===t){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===FR||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),JR)}for(;;){var r=this.consumeCodePoint();if(r===FR||41===r)return{type:22,value:EP.apply(void 0,e)};if(_R(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===FR||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:EP.apply(void 0,e)}):(this.consumeBadUrlRemnants(),JR);if(34===r||39===r||40===r||RR(r))return this.consumeBadUrlRemnants(),JR;if(92===r){if(!OR(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),JR;e.push(this.consumeEscapedCodePoint())}else e.push(r)}},e.prototype.consumeWhiteSpace=function(){for(;_R(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(41===e||e===FR)return;OR(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t="";e>0;){var n=Math.min(5e4,e);t+=EP.apply(void 0,this._value.splice(0,n)),e-=n}return this._value.shift(),t},e.prototype.consumeStringToken=function(e){for(var t="",n=0;;){var r=this._value[n];if(r===FR||void 0===r||r===e)return{type:0,value:t+=this.consumeStringSlice(n)};if(10===r)return this._value.splice(0,n),ZR;if(92===r){var i=this._value[n+1];i!==FR&&void 0!==i&&(10===i?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):OR(r,i)&&(t+=this.consumeStringSlice(n),t+=EP(this.consumeEscapedCodePoint()),n=-1))}n++}},e.prototype.consumeNumber=function(){var e=[],t=4,n=this.peekCodePoint(0);for(n!==IR&&n!==kR||e.push(this.consumeCodePoint());LR(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(46===n&&LR(r))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;LR(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((69===n||101===n)&&((r===IR||r===kR)&&LR(i)||LR(r)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;LR(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[MR(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],r=this.peekCodePoint(0),i=this.peekCodePoint(1),s=this.peekCodePoint(2);return QR(r,i,s)?{type:15,number:t,flags:n,unit:this.consumeName()}:37===r?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(DR(e)){for(var t=EP(e);DR(this.peekCodePoint(0))&&t.length<6;)t+=EP(this.consumeCodePoint());_R(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return 0===n||function(e){return e>=55296&&e<=57343}(n)||n>1114111?65533:n}return e===FR?65533:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(PR(t))e+=EP(t);else{if(!OR(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=EP(this.consumeEscapedCodePoint())}}},e}(),lO=function(){function e(e){this._tokens=e}return e.create=function(t){var n=new AO;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(32===n.type||yO(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(32===n.type||3===n.type)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return void 0===e?oO:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),cO=function(e){return 15===e.type},uO=function(e){return 17===e.type},dO=function(e){return 20===e.type},hO=function(e){return 0===e.type},fO=function(e,t){return dO(e)&&e.value===t},pO=function(e){return 31!==e.type},gO=function(e){return 31!==e.type&&4!==e.type},mO=function(e){var t=[],n=[];return e.forEach(function(e){if(4===e.type){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(n),void(n=[])}31!==e.type&&n.push(e)}),n.length&&t.push(n),t},yO=function(e,t){return 11===t&&12===e.type||(28===t&&29===e.type||2===t&&3===e.type)},vO=function(e){return 17===e.type||15===e.type},wO=function(e){return 16===e.type||vO(e)},bO=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},EO={type:17,number:0,flags:4},BO={type:16,number:50,flags:4},CO={type:16,number:100,flags:4},SO=function(e,t,n){var r=e[0],i=e[1];return[TO(r,t),TO(void 0!==i?i:r,n)]},TO=function(e,t){if(16===e.type)return e.number/100*t;if(cO(e))switch(e.unit){case"rem":case"em":return 16*e.number;default:return e.number}return e.number},xO="grad",kO="turn",IO=function(e,t){if(15===t.type)switch(t.unit){case"deg":return Math.PI*t.number/180;case xO:return Math.PI/200*t.number;case"rad":return t.number;case kO:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")},FO=function(e){return 15===e.type&&("deg"===e.unit||e.unit===xO||"rad"===e.unit||e.unit===kO)},LO=function(e){switch(e.filter(dO).map(function(e){return e.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[EO,EO];case"to top":case"bottom":return DO(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[EO,CO];case"to right":case"left":return DO(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[CO,CO];case"to bottom":case"top":return DO(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[CO,EO];case"to left":case"right":return DO(270)}return 0},DO=function(e){return Math.PI*e/180},_O=function(e,t){if(18===t.type){var n=HO[t.name];if(void 0===n)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(5===t.type){if(3===t.value.length){var r=t.value.substring(0,1),i=t.value.substring(1,2),s=t.value.substring(2,3);return RO(parseInt(r+r,16),parseInt(i+i,16),parseInt(s+s,16),1)}if(4===t.value.length){r=t.value.substring(0,1),i=t.value.substring(1,2),s=t.value.substring(2,3);var a=t.value.substring(3,4);return RO(parseInt(r+r,16),parseInt(i+i,16),parseInt(s+s,16),parseInt(a+a,16)/255)}if(6===t.value.length){r=t.value.substring(0,2),i=t.value.substring(2,4),s=t.value.substring(4,6);return RO(parseInt(r,16),parseInt(i,16),parseInt(s,16),1)}if(8===t.value.length){r=t.value.substring(0,2),i=t.value.substring(2,4),s=t.value.substring(4,6),a=t.value.substring(6,8);return RO(parseInt(r,16),parseInt(i,16),parseInt(s,16),parseInt(a,16)/255)}}if(20===t.type){var o=$O[t.value.toUpperCase()];if(void 0!==o)return o}return $O.TRANSPARENT},UO=function(e){return!(255&e)},PO=function(e){var t=255&e,n=255&e>>8,r=255&e>>16,i=255&e>>24;return t<255?"rgba("+i+","+r+","+n+","+t/255+")":"rgb("+i+","+r+","+n+")"},RO=function(e,t,n,r){return(e<<24|t<<16|n<<8|Math.round(255*r))>>>0},OO=function(e,t){if(17===e.type)return e.number;if(16===e.type){var n=3===t?1:255;return 3===t?e.number/100*n:Math.round(e.number/100*n)}return 0},QO=function(e,t){var n=t.filter(gO);if(3===n.length){var r=n.map(OO),i=r[0],s=r[1],a=r[2];return RO(i,s,a,1)}if(4===n.length){var o=n.map(OO),A=(i=o[0],s=o[1],a=o[2],o[3]);return RO(i,s,a,A)}return 0};function NO(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<.5?t:n<2/3?6*(t-e)*(2/3-n)+e:e}var MO=function(e,t){var n=t.filter(gO),r=n[0],i=n[1],s=n[2],a=n[3],o=(17===r.type?DO(r.number):IO(e,r))/(2*Math.PI),A=wO(i)?i.number/100:0,l=wO(s)?s.number/100:0,c=void 0!==a&&wO(a)?TO(a,1):1;if(0===A)return RO(255*l,255*l,255*l,1);var u=l<=.5?l*(A+1):l+A-l*A,d=2*l-u,h=NO(d,u,o+1/3),f=NO(d,u,o),p=NO(d,u,o-1/3);return RO(255*h,255*f,255*p,c)},HO={hsl:MO,hsla:MO,rgb:QO,rgba:QO},jO=function(e,t){return _O(e,lO.create(t).parseComponentValue())},$O={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},KO={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(e){if(dO(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},VO={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},GO=function(e,t){var n=_O(e,t[0]),r=t[1];return r&&wO(r)?{color:n,stop:r}:{color:n,stop:null}},WO=function(e,t){var n=e[0],r=e[e.length-1];null===n.stop&&(n.stop=EO),null===r.stop&&(r.stop=CO);for(var i=[],s=0,a=0;a<e.length;a++){var o=e[a].stop;if(null!==o){var A=TO(o,t);A>s?i.push(A):i.push(s),s=A}else i.push(null)}var l=null;for(a=0;a<i.length;a++){var c=i[a];if(null===c)null===l&&(l=a);else if(null!==l){for(var u=a-l,d=(c-i[l-1])/(u+1),h=1;h<=u;h++)i[l+h-1]=d*h;l=null}}return e.map(function(e,n){return{color:e.color,stop:Math.max(Math.min(1,i[n]/t),0)}})},zO=function(e,t,n){var r="number"==typeof e?e:function(e,t,n){var r=t/2,i=n/2,s=TO(e[0],t)-r,a=i-TO(e[1],n);return(Math.atan2(a,s)+2*Math.PI)%(2*Math.PI)}(e,t,n),i=Math.abs(t*Math.sin(r))+Math.abs(n*Math.cos(r)),s=t/2,a=n/2,o=i/2,A=Math.sin(r-Math.PI/2)*o,l=Math.cos(r-Math.PI/2)*o;return[i,s-l,s+l,a-A,a+A]},YO=function(e,t){return Math.sqrt(e*e+t*t)},qO=function(e,t,n,r,i){return[[0,0],[0,t],[e,0],[e,t]].reduce(function(e,t){var s=t[0],a=t[1],o=YO(n-s,r-a);return(i?o<e.optimumDistance:o>e.optimumDistance)?{optimumCorner:t,optimumDistance:o}:e},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},XO=function(e,t){var n=DO(180),r=[];return mO(t).forEach(function(t,i){if(0===i){var s=t[0];if(20===s.type&&-1!==["top","left","right","bottom"].indexOf(s.value))return void(n=LO(t));if(FO(s))return void(n=(IO(e,s)+DO(270))%DO(360))}var a=GO(e,t);r.push(a)}),{angle:n,stops:r,type:1}},JO="closest-side",ZO="farthest-side",eQ="closest-corner",tQ="farthest-corner",nQ="circle",rQ="ellipse",iQ="cover",sQ="contain",aQ=function(e,t){var n=0,r=3,i=[],s=[];return mO(t).forEach(function(t,a){var o=!0;if(0===a?o=t.reduce(function(e,t){if(dO(t))switch(t.value){case"center":return s.push(BO),!1;case"top":case"left":return s.push(EO),!1;case"right":case"bottom":return s.push(CO),!1}else if(wO(t)||vO(t))return s.push(t),!1;return e},o):1===a&&(o=t.reduce(function(e,t){if(dO(t))switch(t.value){case nQ:return n=0,!1;case rQ:return n=1,!1;case sQ:case JO:return r=0,!1;case ZO:return r=1,!1;case eQ:return r=2,!1;case iQ:case tQ:return r=3,!1}else if(vO(t)||wO(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e},o)),o){var A=GO(e,t);i.push(A)}}),{size:r,shape:n,stops:i,position:s,type:2}},oQ=function(e,t){if(22===t.type){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(18===t.type){var r=cQ[t.name];if(void 0===r)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return r(e,t.values)}throw new Error("Unsupported image type "+t.type)};var AQ,lQ,cQ={"linear-gradient":function(e,t){var n=DO(180),r=[];return mO(t).forEach(function(t,i){if(0===i){var s=t[0];if(20===s.type&&"to"===s.value)return void(n=LO(t));if(FO(s))return void(n=IO(e,s))}var a=GO(e,t);r.push(a)}),{angle:n,stops:r,type:1}},"-moz-linear-gradient":XO,"-ms-linear-gradient":XO,"-o-linear-gradient":XO,"-webkit-linear-gradient":XO,"radial-gradient":function(e,t){var n=0,r=3,i=[],s=[];return mO(t).forEach(function(t,a){var o=!0;if(0===a){var A=!1;o=t.reduce(function(e,t){if(A)if(dO(t))switch(t.value){case"center":return s.push(BO),e;case"top":case"left":return s.push(EO),e;case"right":case"bottom":return s.push(CO),e}else(wO(t)||vO(t))&&s.push(t);else if(dO(t))switch(t.value){case nQ:return n=0,!1;case rQ:return n=1,!1;case"at":return A=!0,!1;case JO:return r=0,!1;case iQ:case ZO:return r=1,!1;case sQ:case eQ:return r=2,!1;case tQ:return r=3,!1}else if(vO(t)||wO(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e},o)}if(o){var l=GO(e,t);i.push(l)}}),{size:r,shape:n,stops:i,position:s,type:2}},"-moz-radial-gradient":aQ,"-ms-radial-gradient":aQ,"-o-radial-gradient":aQ,"-webkit-radial-gradient":aQ,"-webkit-gradient":function(e,t){var n=DO(180),r=[],i=1;return mO(t).forEach(function(t,n){var s=t[0];if(0===n){if(dO(s)&&"linear"===s.value)return void(i=1);if(dO(s)&&"radial"===s.value)return void(i=2)}if(18===s.type)if("from"===s.name){var a=_O(e,s.values[0]);r.push({stop:EO,color:a})}else if("to"===s.name){a=_O(e,s.values[0]);r.push({stop:CO,color:a})}else if("color-stop"===s.name){var o=s.values.filter(gO);if(2===o.length){a=_O(e,o[1]);var A=o[0];uO(A)&&r.push({stop:{type:16,number:100*A.number,flags:A.flags},color:a})}}}),1===i?{angle:(n+DO(180))%DO(360),stops:r,type:i}:{size:3,shape:0,stops:r,position:[],type:i}}},uQ={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t.filter(function(e){return gO(e)&&function(e){return!(20===e.type&&"none"===e.value||18===e.type&&!cQ[e.name])}(e)}).map(function(t){return oQ(e,t)})}},dQ={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(e){if(dO(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},hQ={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return mO(t).map(function(e){return e.filter(wO)}).map(bO)}},fQ={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return mO(t).map(function(e){return e.filter(dO).map(function(e){return e.value}).join(" ")}).map(pQ)}},pQ=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};(lQ=AQ||(AQ={})).AUTO="auto",lQ.CONTAIN="contain",lQ.COVER="cover";var gQ,mQ,yQ={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return mO(t).map(function(e){return e.filter(vQ)})}},vQ=function(e){return dO(e)||wO(e)},wQ=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},bQ=wQ("top"),EQ=wQ("right"),BQ=wQ("bottom"),CQ=wQ("left"),SQ=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return bO(t.filter(wO))}}},TQ=SQ("top-left"),xQ=SQ("top-right"),kQ=SQ("bottom-right"),IQ=SQ("bottom-left"),FQ=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},LQ=FQ("top"),DQ=FQ("right"),_Q=FQ("bottom"),UQ=FQ("left"),PQ=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return cO(t)?t.number:0}}},RQ=PQ("top"),OQ=PQ("right"),QQ=PQ("bottom"),NQ=PQ("left"),MQ={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},HQ={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){return"rtl"===t?1:0}},jQ={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(dO).reduce(function(e,t){return e|$Q(t.value)},0)}},$Q=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},KQ={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},VQ={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};(mQ=gQ||(gQ={})).NORMAL="normal",mQ.STRICT="strict";var GQ,WQ,zQ={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"strict"===t?gQ.STRICT:gQ.NORMAL}},YQ={name:"line-height",initialValue:"normal",prefix:!1,type:4},qQ=function(e,t){return dO(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:wO(e)?TO(e,t):t},XQ={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:oQ(e,t)}},JQ={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){return"inside"===t?0:1}},ZQ={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},eN=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},tN=eN("top"),nN=eN("right"),rN=eN("bottom"),iN=eN("left"),sN={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(dO).map(function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},aN={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"break-word"===t?"break-word":"normal"}},oN=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},AN=oN("top"),lN=oN("right"),cN=oN("bottom"),uN=oN("left"),dN={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},hN={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},fN={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&fO(t[0],"none")?[]:mO(t).map(function(t){for(var n={color:$O.TRANSPARENT,offsetX:EO,offsetY:EO,blur:EO},r=0,i=0;i<t.length;i++){var s=t[i];vO(s)?(0===r?n.offsetX=s:1===r?n.offsetY=s:n.blur=s,r++):n.color=_O(e,s)}return n})}},pN={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},gN={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var n=mN[t.name];if(void 0===n)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},mN={matrix:function(e){var t=e.filter(function(e){return 17===e.type}).map(function(e){return e.number});return 6===t.length?t:null},matrix3d:function(e){var t=e.filter(function(e){return 17===e.type}).map(function(e){return e.number}),n=t[0],r=t[1];t[2],t[3];var i=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var a=t[12],o=t[13];return t[14],t[15],16===t.length?[n,r,i,s,a,o]:null}},yN={type:16,number:50,flags:4},vN=[yN,yN],wN={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(wO);return 2!==n.length?vN:[n[0],n[1]]}},bN={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}};(WQ=GQ||(GQ={})).NORMAL="normal",WQ.BREAK_ALL="break-all",WQ.KEEP_ALL="keep-all";for(var EN={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return GQ.BREAK_ALL;case"keep-all":return GQ.KEEP_ALL;default:return GQ.NORMAL}}},BN={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(uO(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},CN=function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")},SN={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return uO(t)?t.number:1}},TN={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},xN={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(dO).map(function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(e){return 0!==e})}},kN={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],r=[];return t.forEach(function(e){switch(e.type){case 20:case 0:n.push(e.value);break;case 17:n.push(e.number.toString());break;case 4:r.push(n.join(" ")),n.length=0}}),n.length&&r.push(n.join(" ")),r.map(function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"})}},IN={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},FN={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){return uO(t)?t.number:dO(t)&&"bold"===t.value?700:400}},LN={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(dO).map(function(e){return e.value})}},DN={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},_N=function(e,t){return 0!==(e&t)},UN={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t}},PN={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;for(var r=[],i=t.filter(pO),s=0;s<i.length;s++){var a=i[s],o=i[s+1];if(20===a.type){var A=o&&uO(o)?o.number:1;r.push({counter:a.value,increment:A})}}return r}},RN={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var n=[],r=t.filter(pO),i=0;i<r.length;i++){var s=r[i],a=r[i+1];if(dO(s)&&"none"!==s.value){var o=a&&uO(a)?a.number:0;n.push({counter:s.value,reset:o})}}return n}},ON={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(cO).map(function(t){return CN(e,t)})}},QN={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;var r=[],i=t.filter(hO);if(i.length%2!=0)return null;for(var s=0;s<i.length;s+=2){var a=i[s].value,o=i[s+1].value;r.push({open:a,close:o})}return r}},NN=function(e,t,n){if(!e)return"";var r=e[Math.min(t,e.length-1)];return r?n?r.open:r.close:""},MN={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&fO(t[0],"none")?[]:mO(t).map(function(t){for(var n={color:255,offsetX:EO,offsetY:EO,blur:EO,spread:EO,inset:!1},r=0,i=0;i<t.length;i++){var s=t[i];fO(s,"inset")?n.inset=!0:vO(s)?(0===r?n.offsetX=s:1===r?n.offsetY=s:2===r?n.blur=s:n.spread=s,r++):n.color=_O(e,s)}return n})}},HN={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[];return t.filter(dO).forEach(function(e){switch(e.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2)}}),[0,1,2].forEach(function(e){-1===n.indexOf(e)&&n.push(e)}),n}},jN={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},$N={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return cO(t)?t.number:0}},KN=function(){function e(e,t){var n,r;this.animationDuration=WN(e,ON,t.animationDuration),this.backgroundClip=WN(e,KO,t.backgroundClip),this.backgroundColor=WN(e,VO,t.backgroundColor),this.backgroundImage=WN(e,uQ,t.backgroundImage),this.backgroundOrigin=WN(e,dQ,t.backgroundOrigin),this.backgroundPosition=WN(e,hQ,t.backgroundPosition),this.backgroundRepeat=WN(e,fQ,t.backgroundRepeat),this.backgroundSize=WN(e,yQ,t.backgroundSize),this.borderTopColor=WN(e,bQ,t.borderTopColor),this.borderRightColor=WN(e,EQ,t.borderRightColor),this.borderBottomColor=WN(e,BQ,t.borderBottomColor),this.borderLeftColor=WN(e,CQ,t.borderLeftColor),this.borderTopLeftRadius=WN(e,TQ,t.borderTopLeftRadius),this.borderTopRightRadius=WN(e,xQ,t.borderTopRightRadius),this.borderBottomRightRadius=WN(e,kQ,t.borderBottomRightRadius),this.borderBottomLeftRadius=WN(e,IQ,t.borderBottomLeftRadius),this.borderTopStyle=WN(e,LQ,t.borderTopStyle),this.borderRightStyle=WN(e,DQ,t.borderRightStyle),this.borderBottomStyle=WN(e,_Q,t.borderBottomStyle),this.borderLeftStyle=WN(e,UQ,t.borderLeftStyle),this.borderTopWidth=WN(e,RQ,t.borderTopWidth),this.borderRightWidth=WN(e,OQ,t.borderRightWidth),this.borderBottomWidth=WN(e,QQ,t.borderBottomWidth),this.borderLeftWidth=WN(e,NQ,t.borderLeftWidth),this.boxShadow=WN(e,MN,t.boxShadow),this.color=WN(e,MQ,t.color),this.direction=WN(e,HQ,t.direction),this.display=WN(e,jQ,t.display),this.float=WN(e,KQ,t.cssFloat),this.fontFamily=WN(e,kN,t.fontFamily),this.fontSize=WN(e,IN,t.fontSize),this.fontStyle=WN(e,DN,t.fontStyle),this.fontVariant=WN(e,LN,t.fontVariant),this.fontWeight=WN(e,FN,t.fontWeight),this.letterSpacing=WN(e,VQ,t.letterSpacing),this.lineBreak=WN(e,zQ,t.lineBreak),this.lineHeight=WN(e,YQ,t.lineHeight),this.listStyleImage=WN(e,XQ,t.listStyleImage),this.listStylePosition=WN(e,JQ,t.listStylePosition),this.listStyleType=WN(e,ZQ,t.listStyleType),this.marginTop=WN(e,tN,t.marginTop),this.marginRight=WN(e,nN,t.marginRight),this.marginBottom=WN(e,rN,t.marginBottom),this.marginLeft=WN(e,iN,t.marginLeft),this.opacity=WN(e,SN,t.opacity);var i=WN(e,sN,t.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=WN(e,aN,t.overflowWrap),this.paddingTop=WN(e,AN,t.paddingTop),this.paddingRight=WN(e,lN,t.paddingRight),this.paddingBottom=WN(e,cN,t.paddingBottom),this.paddingLeft=WN(e,uN,t.paddingLeft),this.paintOrder=WN(e,HN,t.paintOrder),this.position=WN(e,hN,t.position),this.textAlign=WN(e,dN,t.textAlign),this.textDecorationColor=WN(e,TN,null!==(n=t.textDecorationColor)&&void 0!==n?n:t.color),this.textDecorationLine=WN(e,xN,null!==(r=t.textDecorationLine)&&void 0!==r?r:t.textDecoration),this.textShadow=WN(e,fN,t.textShadow),this.textTransform=WN(e,pN,t.textTransform),this.transform=WN(e,gN,t.transform),this.transformOrigin=WN(e,wN,t.transformOrigin),this.visibility=WN(e,bN,t.visibility),this.webkitTextStrokeColor=WN(e,jN,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=WN(e,$N,t.webkitTextStrokeWidth),this.wordBreak=WN(e,EN,t.wordBreak),this.zIndex=WN(e,BN,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return UO(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return _N(this.display,4)||_N(this.display,33554432)||_N(this.display,268435456)||_N(this.display,536870912)||_N(this.display,67108864)||_N(this.display,134217728)},e}(),VN=function(){return function(e,t){this.content=WN(e,UN,t.content),this.quotes=WN(e,QN,t.quotes)}}(),GN=function(){return function(e,t){this.counterIncrement=WN(e,PN,t.counterIncrement),this.counterReset=WN(e,RN,t.counterReset)}}(),WN=function(e,t,n){var r=new AO,i=null!=n?n.toString():t.initialValue;r.write(i);var s=new lO(r.read());switch(t.type){case 2:var a=s.parseComponentValue();return t.parse(e,dO(a)?a.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return IO(e,s.parseComponentValue());case"color":return _O(e,s.parseComponentValue());case"image":return oQ(e,s.parseComponentValue());case"length":var o=s.parseComponentValue();return vO(o)?o:EO;case"length-percentage":var A=s.parseComponentValue();return wO(A)?A:EO;case"time":return CN(e,s.parseComponentValue())}}},zN=function(e,t){var n=function(e){switch(e.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(e);return 1===n||t===n},YN=function(){return function(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,zN(t,3),this.styles=new KN(e,window.getComputedStyle(t,null)),eH(t)&&(this.styles.animationDuration.some(function(e){return e>0})&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=wP(this.context,t),zN(t,4)&&(this.flags|=16)}}(),qN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",XN="undefined"==typeof Uint8Array?[]:new Uint8Array(256),JN=0;JN<64;JN++)XN[qN.charCodeAt(JN)]=JN;for(var ZN=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},eM=function(){function e(e,t,n,r,i,s){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=s}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>5])<<2)+(31&e),this.data[t];if(e<=65535)return t=((t=this.index[2048+(e-55296>>5)])<<2)+(31&e),this.data[t];if(e<this.highStart)return t=2080+(e>>11),t=this.index[t],t+=e>>5&63,t=((t=this.index[t])<<2)+(31&e),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),tM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nM="undefined"==typeof Uint8Array?[]:new Uint8Array(256),rM=0;rM<64;rM++)nM[tM.charCodeAt(rM)]=rM;var iM,sM,aM=8,oM=9,AM=11,lM=12,cM=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],i=-1,s="";++i<n;){var a=e[i];a<=65535?r.push(a):(a-=65536,r.push(55296+(a>>10),a%1024+56320)),(i+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},uM=function(e){var t=function(e){var t,n,r,i,s,a=.75*e.length,o=e.length,A=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(a):new Array(a),c=Array.isArray(l)?l:new Uint8Array(l);for(t=0;t<o;t+=4)n=XN[e.charCodeAt(t)],r=XN[e.charCodeAt(t+1)],i=XN[e.charCodeAt(t+2)],s=XN[e.charCodeAt(t+3)],c[A++]=n<<2|r>>4,c[A++]=(15&r)<<4|i>>2,c[A++]=(3&i)<<6|63&s;return l}(e),n=Array.isArray(t)?function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n}(t):new Uint32Array(t),r=Array.isArray(t)?function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n}(t):new Uint16Array(t),i=ZN(r,12,n[4]/2),s=2===n[5]?ZN(r,(24+n[4])/2):function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))}(n,Math.ceil((24+n[4])/4));return new eM(n[0],n[1],n[2],n[3],i,s)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),dM="",hM=function(e){return uM.get(e)},fM=function(e,t,n){var r=n-2,i=t[r],s=t[n-1],a=t[n];if(2===s&&3===a)return dM;if(2===s||3===s||4===s)return"";if(2===a||3===a||4===a)return"";if(s===aM&&-1!==[aM,oM,AM,lM].indexOf(a))return dM;if(!(s!==AM&&s!==oM||a!==oM&&10!==a))return dM;if((s===lM||10===s)&&10===a)return dM;if(13===a||5===a)return dM;if(7===a)return dM;if(1===s)return dM;if(13===s&&14===a){for(;5===i;)i=t[--r];if(14===i)return dM}if(15===s&&15===a){for(var o=0;15===i;)o++,i=t[--r];if(o%2==0)return dM}return""},pM=function(e){var t=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=e.charCodeAt(n++);56320==(64512&s)?t.push(((1023&i)<<10)+(1023&s)+65536):(t.push(i),n--)}else t.push(i)}return t}(e),n=t.length,r=0,i=0,s=t.map(hM);return{next:function(){if(r>=n)return{done:!0,value:null};for(var e=dM;r<n&&(e=fM(0,s,++r))===dM;);if(e!==dM||r===n){var a=cM.apply(null,t.slice(i,r));return i=r,{value:a,done:!1}}return{done:!0,value:null}}}},gM=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},mM=function(e,t,n,r,i){var s="http://www.w3.org/2000/svg",a=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return a.setAttributeNS(null,"width",e.toString()),a.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(o),o.appendChild(i),a},yM=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})},vM={get SUPPORT_RANGE_BOUNDS(){var e=function(e){if(e.createRange){var t=e.createRange();if(t.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height="123px",n.style.display="block",e.body.appendChild(n),t.selectNode(n);var r=t.getBoundingClientRect(),i=Math.round(r.height);if(e.body.removeChild(n),123===i)return!0}}return!1}(document);return Object.defineProperty(vM,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=vM.SUPPORT_RANGE_BOUNDS&&function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var r=t.firstChild,i=bP(r.data).map(function(e){return EP(e)}),s=0,a={},o=i.every(function(e,t){n.setStart(r,s),n.setEnd(r,s+e.length);var i=n.getBoundingClientRect();s+=e.length;var o=i.x>a.x||i.y>a.y;return a=i,0===t||o});return e.body.removeChild(t),o}(document);return Object.defineProperty(vM,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=function(e){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),n.toDataURL()}catch(c$){return!1}return!0}(document);return Object.defineProperty(vM,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"==typeof Array.from&&"function"==typeof window.fetch?function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var r=t.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var i=new Image,s=t.toDataURL();i.src=s;var a=mM(n,n,0,0,i);return r.fillStyle="red",r.fillRect(0,0,n,n),yM(a).then(function(t){r.drawImage(t,0,0);var i=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var a=e.createElement("div");return a.style.backgroundImage="url("+s+")",a.style.height=n+"px",gM(i)?yM(mM(n,n,0,0,a)):Promise.reject(!1)}).then(function(e){return r.drawImage(e,0,0),gM(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(vM,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=void 0!==(new Image).crossOrigin;return Object.defineProperty(vM,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(vM,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(vM,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(vM,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},wM=function(){return function(e,t){this.text=e,this.bounds=t}}(),bM=function(e,t){var n=t.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var i=t.parentNode;if(i){i.replaceChild(r,t);var s=wP(e,r);return r.firstChild&&i.replaceChild(r.firstChild,r),s}}return vP.EMPTY},EM=function(e,t,n){var r=e.ownerDocument;if(!r)throw new Error("Node has no owner document");var i=r.createRange();return i.setStart(e,t),i.setEnd(e,t+n),i},BM=function(e){if(vM.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(e){return e.segment})}return function(e){for(var t,n=pM(e),r=[];!(t=n.next()).done;)t.value&&r.push(t.value.slice());return r}(e)},CM=function(e,t){return 0!==t.letterSpacing?BM(e):function(e,t){if(vM.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map(function(e){return e.segment})}return TM(e,t)}(e,t)},SM=[32,160,4961,65792,65793,4153,4241],TM=function(e,t){for(var n,r=function(e,t){var n=bP(e),r=TR(n,t),i=r[0],s=r[1],a=r[2],o=n.length,A=0,l=0;return{next:function(){if(l>=o)return{done:!0,value:null};for(var e=hR;l<o&&(e=SR(n,s,i,++l,a))===hR;);if(e!==hR||l===o){var t=new xR(n,e,A,l);return A=l,{value:t,done:!1}}return{done:!0,value:null}}}}(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),i=[],s=function(){if(n.value){var e=n.value.slice(),t=bP(e),r="";t.forEach(function(e){-1===SM.indexOf(e)?r+=EP(e):(r.length&&i.push(r),i.push(EP(e)),r="")}),r.length&&i.push(r)}};!(n=r.next()).done;)s();return i},xM=function(){return function(e,t,n){this.text=kM(t.data,n.textTransform),this.textBounds=function(e,t,n,r){var i=CM(t,n),s=[],a=0;return i.forEach(function(t){if(n.textDecorationLine.length||t.trim().length>0)if(vM.SUPPORT_RANGE_BOUNDS){var i=EM(r,a,t.length).getClientRects();if(i.length>1){var o=BM(t),A=0;o.forEach(function(t){s.push(new wM(t,vP.fromDOMRectList(e,EM(r,A+a,t.length).getClientRects()))),A+=t.length})}else s.push(new wM(t,vP.fromDOMRectList(e,i)))}else{var l=r.splitText(t.length);s.push(new wM(t,bM(e,r))),r=l}else vM.SUPPORT_RANGE_BOUNDS||(r=r.splitText(t.length));a+=t.length}),s}(e,this.text,n,t)}}(),kM=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(IM,FM);case 2:return e.toUpperCase();default:return e}},IM=/(^|\s|:|-|\(|\))([a-z])/g,FM=function(e,t,n){return e.length>0?t+n.toUpperCase():e},LM=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return fP(t,e),t}(YN),DM=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return fP(t,e),t}(YN),_M=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=new XMLSerializer,s=wP(t,n);return n.setAttribute("width",s.width+"px"),n.setAttribute("height",s.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return fP(t,e),t}(YN),UM=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return fP(t,e),t}(YN),PM=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.start=n.start,r.reversed="boolean"==typeof n.reversed&&!0===n.reversed,r}return fP(t,e),t}(YN),RM=[{type:15,flags:0,unit:"px",number:3}],OM=[{type:16,flags:0,number:50}],QM="checkbox",NM="radio",MM="password",HM=707406591,jM=function(e){function t(t,n){var r,i,s,a=e.call(this,t,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=0===(i=(r=n).type===MM?new Array(r.value.length+1).join(""):r.value).length?r.placeholder||"":i,a.type!==QM&&a.type!==NM||(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=(s=a.bounds).width>s.height?new vP(s.left+(s.width-s.height)/2,s.top,s.height,s.height):s.width<s.height?new vP(s.left,s.top+(s.height-s.width)/2,s.width,s.width):s),a.type){case QM:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=RM;break;case NM:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=OM}return a}return fP(t,e),t}(YN),$M=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=n.options[n.selectedIndex||0];return r.value=i&&i.text||"",r}return fP(t,e),t}(YN),KM=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return fP(t,e),t}(YN),VM=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=YM(t,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?jO(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):$O.TRANSPARENT,s=n.contentWindow.document.body?jO(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):$O.TRANSPARENT;r.backgroundColor=UO(i)?UO(s)?r.styles.backgroundColor:s:i}}catch(c$){}return r}return fP(t,e),t}(YN),GM=["OL","UL","MENU"],WM=function(e,t,n,r){for(var i=t.firstChild,s=void 0;i;i=s)if(s=i.nextSibling,JM(i)&&i.data.trim().length>0)n.textNodes.push(new xM(e,i,n.styles));else if(ZM(i))if(fH(i)&&i.assignedNodes)i.assignedNodes().forEach(function(t){return WM(e,t,n,r)});else{var a=zM(e,i);a.styles.isVisible()&&(qM(i,a,r)?a.flags|=4:XM(a.styles)&&(a.flags|=2),-1!==GM.indexOf(i.tagName)&&(a.flags|=8),n.elements.push(a),i.slot,i.shadowRoot?WM(e,i.shadowRoot,a,r):dH(i)||sH(i)||hH(i)||WM(e,i,a,r))}},zM=function(e,t){return lH(t)?new LM(e,t):oH(t)?new DM(e,t):sH(t)?new _M(e,t):nH(t)?new UM(e,t):rH(t)?new PM(e,t):iH(t)?new jM(e,t):hH(t)?new $M(e,t):dH(t)?new KM(e,t):cH(t)?new VM(e,t):new YN(e,t)},YM=function(e,t){var n=zM(e,t);return n.flags|=4,WM(e,t,n,n),n},qM=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||aH(e)&&n.styles.isTransparent()},XM=function(e){return e.isPositioned()||e.isFloating()},JM=function(e){return e.nodeType===Node.TEXT_NODE},ZM=function(e){return e.nodeType===Node.ELEMENT_NODE},eH=function(e){return ZM(e)&&void 0!==e.style&&!tH(e)},tH=function(e){return"object"==typeof e.className},nH=function(e){return"LI"===e.tagName},rH=function(e){return"OL"===e.tagName},iH=function(e){return"INPUT"===e.tagName},sH=function(e){return"svg"===e.tagName},aH=function(e){return"BODY"===e.tagName},oH=function(e){return"CANVAS"===e.tagName},AH=function(e){return"VIDEO"===e.tagName},lH=function(e){return"IMG"===e.tagName},cH=function(e){return"IFRAME"===e.tagName},uH=function(e){return"STYLE"===e.tagName},dH=function(e){return"TEXTAREA"===e.tagName},hH=function(e){return"SELECT"===e.tagName},fH=function(e){return"SLOT"===e.tagName},pH=function(e){return e.tagName.indexOf("-")>0},gH=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach(function(e){return t.counters[e].pop()})},e.prototype.parse=function(e){var t=this,n=e.counterIncrement,r=e.counterReset,i=!0;null!==n&&n.forEach(function(e){var n=t.counters[e.counter];n&&0!==e.increment&&(i=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=e.increment)});var s=[];return i&&r.forEach(function(e){var n=t.counters[e.counter];s.push(e.counter),n||(n=t.counters[e.counter]=[]),n.push(e.reset)}),s},e}(),mH={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},yH={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},vH={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},wH={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},bH=function(e,t,n,r,i,s){return e<t||e>n?FH(e,i,s.length>0):r.integers.reduce(function(t,n,i){for(;e>=n;)e-=n,t+=r.values[i];return t},"")+s},EH=function(e,t,n,r){var i="";do{n||e--,i=r(e)+i,e/=t}while(e*t>=t);return i},BH=function(e,t,n,r,i){var s=n-t+1;return(e<0?"-":"")+(EH(Math.abs(e),s,r,function(e){return EP(Math.floor(e%s)+t)})+i)},CH=function(e,t,n){void 0===n&&(n=". ");var r=t.length;return EH(Math.abs(e),r,!1,function(e){return t[Math.floor(e%r)]})+n},SH=function(e,t,n,r,i,s){if(e<-9999||e>9999)return FH(e,4,i.length>0);var a=Math.abs(e),o=i;if(0===a)return t[0]+o;for(var A=0;a>0&&A<=4;A++){var l=a%10;0===l&&_N(s,1)&&""!==o?o=t[l]+o:l>1||1===l&&0===A||1===l&&1===A&&_N(s,2)||1===l&&1===A&&_N(s,4)&&e>100||1===l&&A>1&&_N(s,8)?o=t[l]+(A>0?n[A-1]:"")+o:1===l&&A>0&&(o=n[A-1]+o),a=Math.floor(a/10)}return(e<0?r:"")+o},TH="",xH="",kH="",IH="",FH=function(e,t,n){var r=n?". ":"",i=n?"":"",s=n?", ":"",a=n?" ":"";switch(t){case 0:return""+a;case 1:return""+a;case 2:return""+a;case 5:var o=BH(e,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return CH(e,"",i);case 6:return bH(e,1,3999,mH,3,r).toLowerCase();case 7:return bH(e,1,3999,mH,3,r);case 8:return BH(e,945,969,!1,r);case 9:return BH(e,97,122,!1,r);case 10:return BH(e,65,90,!1,r);case 11:return BH(e,1632,1641,!0,r);case 12:case 49:return bH(e,1,9999,yH,3,r);case 35:return bH(e,1,9999,yH,3,r).toLowerCase();case 13:return BH(e,2534,2543,!0,r);case 14:case 30:return BH(e,6112,6121,!0,r);case 15:return CH(e,"",i);case 16:return CH(e,"",i);case 17:case 48:return SH(e,"",TH,"",i,14);case 47:return SH(e,"",xH,"",i,15);case 42:return SH(e,"",TH,"",i,14);case 41:return SH(e,"",xH,"",i,15);case 26:return SH(e,"","",kH,i,0);case 25:return SH(e,"","",kH,i,7);case 31:return SH(e,"","",IH,s,7);case 33:return SH(e,"","",IH,s,0);case 32:return SH(e,"","",IH,s,7);case 18:return BH(e,2406,2415,!0,r);case 20:return bH(e,1,19999,wH,3,r);case 21:return BH(e,2790,2799,!0,r);case 22:return BH(e,2662,2671,!0,r);case 22:return bH(e,1,10999,vH,3,r);case 23:return CH(e,"");case 24:return CH(e,"");case 27:return BH(e,3302,3311,!0,r);case 28:return CH(e,"",i);case 29:return CH(e,"",i);case 34:return BH(e,3792,3801,!0,r);case 37:return BH(e,6160,6169,!0,r);case 38:return BH(e,4160,4169,!0,r);case 39:return BH(e,2918,2927,!0,r);case 40:return BH(e,1776,1785,!0,r);case 43:return BH(e,3046,3055,!0,r);case 44:return BH(e,3174,3183,!0,r);case 45:return BH(e,3664,3673,!0,r);case 46:return BH(e,3872,3881,!0,r);default:return BH(e,48,57,!0,r)}},LH="data-html2canvas-ignore",DH=function(){function e(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new gH,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var n=this,r=PH(e,t);if(!r.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,s=e.defaultView.pageYOffset,a=r.contentWindow,o=a.document,A=QH(r).then(function(){return gP(n,0,void 0,function(){var e,n;return mP(this,function(i){switch(i.label){case 0:return this.scrolledElements.forEach($H),a&&(a.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||a.scrollY===t.top&&a.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-t.left,a.scrollY-t.top,0,0))),e=this.options.onclone,void 0===(n=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:o.fonts&&o.fonts.ready?[4,o.fonts.ready]:[3,2];case 1:i.sent(),i.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,OH(o)]:[3,4];case 3:i.sent(),i.label=4;case 4:return"function"==typeof e?[2,Promise.resolve().then(function(){return e(o,n)}).then(function(){return r})]:[2,r]}})})});return o.open(),o.write(HH(document.doctype)+"<html></html>"),jH(this.referenceElement.ownerDocument,i,s),o.replaceChild(o.adoptNode(this.documentElement),o.documentElement),o.close(),A},e.prototype.createElementClone=function(e){if(zN(e,2),oH(e))return this.createCanvasClone(e);if(AH(e))return this.createVideoClone(e);if(uH(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return lH(t)&&(lH(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),pH(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return MH(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce(function(e,t){return t&&"string"==typeof t.cssText?e+t.cssText:e},""),r=e.cloneNode(!1);return r.textContent=n,r}}catch(c$){if(this.context.logger.error("Unable to access cssRules property",c$),"SecurityError"!==c$.name)throw c$}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch(c$){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var r=e.cloneNode(!1);try{r.width=e.width,r.height=e.height;var i=e.getContext("2d"),s=r.getContext("2d");if(s)if(!this.options.allowTaint&&i)s.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var a=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(a){var o=a.getContextAttributes();!1===(null==o?void 0:o.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}s.drawImage(e,0,0)}return r}catch(c$){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return r},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch(c$){this.context.logger.info("Unable to clone video as it is tainted",e)}var r=e.ownerDocument.createElement("canvas");return r.width=e.offsetWidth,r.height=e.offsetHeight,r},e.prototype.appendChildNode=function(e,t,n){ZM(t)&&("SCRIPT"===t.tagName||t.hasAttribute(LH)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&ZM(t)&&uH(t)||e.appendChild(this.cloneNode(t,n))},e.prototype.cloneChildNodes=function(e,t,n){for(var r=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(ZM(i)&&fH(i)&&"function"==typeof i.assignedNodes){var s=i.assignedNodes();s.length&&s.forEach(function(e){return r.appendChildNode(t,e,n)})}else this.appendChildNode(t,i,n)},e.prototype.cloneNode=function(e,t){if(JM(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&ZM(e)&&(eH(e)||tH(e))){var r=this.createElementClone(e);r.style.transitionProperty="none";var i=n.getComputedStyle(e),s=n.getComputedStyle(e,":before"),a=n.getComputedStyle(e,":after");this.referenceElement===e&&eH(r)&&(this.clonedReferenceElement=r),aH(r)&&WH(r);var o=this.counters.parse(new GN(this.context,i)),A=this.resolvePseudoContent(e,r,s,iM.BEFORE);pH(e)&&(t=!0),AH(e)||this.cloneChildNodes(e,r,t),A&&r.insertBefore(A,r.firstChild);var l=this.resolvePseudoContent(e,r,a,iM.AFTER);return l&&r.appendChild(l),this.counters.pop(o),(i&&(this.options.copyStyles||tH(e))&&!cH(e)||t)&&MH(i,r),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([r,e.scrollLeft,e.scrollTop]),(dH(e)||hH(e))&&(dH(r)||hH(r))&&(r.value=e.value),r}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,n,r){var i=this;if(n){var s=n.content,a=t.ownerDocument;if(a&&s&&"none"!==s&&"-moz-alt-content"!==s&&"none"!==n.display){this.counters.parse(new GN(this.context,n));var o=new VN(this.context,n),A=a.createElement("html2canvaspseudoelement");MH(n,A),o.content.forEach(function(t){if(0===t.type)A.appendChild(a.createTextNode(t.value));else if(22===t.type){var n=a.createElement("img");n.src=t.value,n.style.opacity="1",A.appendChild(n)}else if(18===t.type){if("attr"===t.name){var r=t.values.filter(dO);r.length&&A.appendChild(a.createTextNode(e.getAttribute(r[0].value)||""))}else if("counter"===t.name){var s=t.values.filter(gO),l=s[0],c=s[1];if(l&&dO(l)){var u=i.counters.getCounterValue(l.value),d=c&&dO(c)?ZQ.parse(i.context,c.value):3;A.appendChild(a.createTextNode(FH(u,d,!1)))}}else if("counters"===t.name){var h=t.values.filter(gO),f=(l=h[0],h[1]);c=h[2];if(l&&dO(l)){var p=i.counters.getCounterValues(l.value),g=c&&dO(c)?ZQ.parse(i.context,c.value):3,m=f&&0===f.type?f.value:"",y=p.map(function(e){return FH(e,g,!1)}).join(m);A.appendChild(a.createTextNode(y))}}}else if(20===t.type)switch(t.value){case"open-quote":A.appendChild(a.createTextNode(NN(o.quotes,i.quoteDepth++,!0)));break;case"close-quote":A.appendChild(a.createTextNode(NN(o.quotes,--i.quoteDepth,!1)));break;default:A.appendChild(a.createTextNode(t.value))}}),A.className=KH+" "+VH;var l=r===iM.BEFORE?" "+KH:" "+VH;return tH(t)?t.className.baseValue+=l:t.className+=l,A}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();(sM=iM||(iM={}))[sM.BEFORE=0]="BEFORE",sM[sM.AFTER=1]="AFTER";var _H,UH,PH=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(LH,"true"),e.body.appendChild(n),n},RH=function(e){return new Promise(function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()})},OH=function(e){return Promise.all([].slice.call(e.images,0).map(RH))},QH=function(e){return new Promise(function(t,n){var r=e.contentWindow;if(!r)return n("No window assigned for iframe");var i=r.document;r.onload=e.onload=function(){r.onload=e.onload=null;var n=setInterval(function(){i.body.childNodes.length>0&&"complete"===i.readyState&&(clearInterval(n),t(e))},50)}})},NH=["all","d","content"],MH=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e.item(n);-1===NH.indexOf(r)&&t.style.setProperty(r,e.getPropertyValue(r))}return t},HH=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},jH=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},$H=function(e){var t=e[0],n=e[1],r=e[2];t.scrollLeft=n,t.scrollTop=r},KH="___html2canvas___pseudoelement_before",VH="___html2canvas___pseudoelement_after",GH='{\n    content: "" !important;\n    display: none !important;\n}',WH=function(e){zH(e,"."+KH+":before"+GH+"\n         ."+VH+":after"+GH)},zH=function(e,t){var n=e.ownerDocument;if(n){var r=n.createElement("style");r.textContent=t,e.appendChild(r)}},YH=function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),qH=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:rj(e)||ej(e)?((this._cache[e]=this.loadImage(e)).catch(function(){}),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return gP(this,0,void 0,function(){var t,n,r,i,s=this;return mP(this,function(a){switch(a.label){case 0:return t=YH.isSameOrigin(e),n=!tj(e)&&!0===this._options.useCORS&&vM.SUPPORT_CORS_IMAGES&&!t,r=!tj(e)&&!t&&!rj(e)&&"string"==typeof this._options.proxy&&vM.SUPPORT_CORS_XHR&&!n,t||!1!==this._options.allowTaint||tj(e)||rj(e)||r||n?(i=e,r?[4,this.proxy(i)]:[3,2]):[2];case 1:i=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,(nj(i)||n)&&(r.crossOrigin="anonymous"),r.src=i,!0===r.complete&&setTimeout(function(){return e(r)},500),s._options.imageTimeout>0&&setTimeout(function(){return t("Timed out ("+s._options.imageTimeout+"ms) loading image")},s._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},e.prototype.has=function(e){return void 0!==this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=e.substring(0,256);return new Promise(function(i,s){var a=vM.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(200===o.status)if("text"===a)i(o.response);else{var e=new FileReader;e.addEventListener("load",function(){return i(e.result)},!1),e.addEventListener("error",function(e){return s(e)},!1),e.readAsDataURL(o.response)}else s("Failed to proxy resource "+r+" with status code "+o.status)},o.onerror=s;var A=n.indexOf("?")>-1?"&":"?";if(o.open("GET",""+n+A+"url="+encodeURIComponent(e)+"&responseType="+a),"text"!==a&&o instanceof XMLHttpRequest&&(o.responseType=a),t._options.imageTimeout){var l=t._options.imageTimeout;o.timeout=l,o.ontimeout=function(){return s("Timed out ("+l+"ms) proxying "+r)}}o.send()})},e}(),XH=/^data:image\/svg\+xml/i,JH=/^data:image\/.*;base64,/i,ZH=/^data:image\/.*/i,ej=function(e){return vM.SUPPORT_SVG_DRAWING||!ij(e)},tj=function(e){return ZH.test(e)},nj=function(e){return JH.test(e)},rj=function(e){return"blob"===e.substr(0,4)},ij=function(e){return"svg"===e.substr(-3).toLowerCase()||XH.test(e)},sj=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),aj=function(e,t,n){return new sj(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},oj=function(){function e(e,t,n,r){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=r}return e.prototype.subdivide=function(t,n){var r=aj(this.start,this.startControl,t),i=aj(this.startControl,this.endControl,t),s=aj(this.endControl,this.end,t),a=aj(r,i,t),o=aj(i,s,t),A=aj(a,o,t);return n?new e(this.start,r,a,A):new e(A,o,s,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Aj=function(e){return 1===e.type},lj=function(){return function(e){var t=e.styles,n=e.bounds,r=SO(t.borderTopLeftRadius,n.width,n.height),i=r[0],s=r[1],a=SO(t.borderTopRightRadius,n.width,n.height),o=a[0],A=a[1],l=SO(t.borderBottomRightRadius,n.width,n.height),c=l[0],u=l[1],d=SO(t.borderBottomLeftRadius,n.width,n.height),h=d[0],f=d[1],p=[];p.push((i+o)/n.width),p.push((h+c)/n.width),p.push((s+f)/n.height),p.push((A+u)/n.height);var g=Math.max.apply(Math,p);g>1&&(i/=g,s/=g,o/=g,A/=g,c/=g,u/=g,h/=g,f/=g);var m=n.width-o,y=n.height-u,v=n.width-c,w=n.height-f,b=t.borderTopWidth,E=t.borderRightWidth,B=t.borderBottomWidth,C=t.borderLeftWidth,S=TO(t.paddingTop,e.bounds.width),T=TO(t.paddingRight,e.bounds.width),x=TO(t.paddingBottom,e.bounds.width),k=TO(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||s>0?cj(n.left+C/3,n.top+b/3,i-C/3,s-b/3,_H.TOP_LEFT):new sj(n.left+C/3,n.top+b/3),this.topRightBorderDoubleOuterBox=i>0||s>0?cj(n.left+m,n.top+b/3,o-E/3,A-b/3,_H.TOP_RIGHT):new sj(n.left+n.width-E/3,n.top+b/3),this.bottomRightBorderDoubleOuterBox=c>0||u>0?cj(n.left+v,n.top+y,c-E/3,u-B/3,_H.BOTTOM_RIGHT):new sj(n.left+n.width-E/3,n.top+n.height-B/3),this.bottomLeftBorderDoubleOuterBox=h>0||f>0?cj(n.left+C/3,n.top+w,h-C/3,f-B/3,_H.BOTTOM_LEFT):new sj(n.left+C/3,n.top+n.height-B/3),this.topLeftBorderDoubleInnerBox=i>0||s>0?cj(n.left+2*C/3,n.top+2*b/3,i-2*C/3,s-2*b/3,_H.TOP_LEFT):new sj(n.left+2*C/3,n.top+2*b/3),this.topRightBorderDoubleInnerBox=i>0||s>0?cj(n.left+m,n.top+2*b/3,o-2*E/3,A-2*b/3,_H.TOP_RIGHT):new sj(n.left+n.width-2*E/3,n.top+2*b/3),this.bottomRightBorderDoubleInnerBox=c>0||u>0?cj(n.left+v,n.top+y,c-2*E/3,u-2*B/3,_H.BOTTOM_RIGHT):new sj(n.left+n.width-2*E/3,n.top+n.height-2*B/3),this.bottomLeftBorderDoubleInnerBox=h>0||f>0?cj(n.left+2*C/3,n.top+w,h-2*C/3,f-2*B/3,_H.BOTTOM_LEFT):new sj(n.left+2*C/3,n.top+n.height-2*B/3),this.topLeftBorderStroke=i>0||s>0?cj(n.left+C/2,n.top+b/2,i-C/2,s-b/2,_H.TOP_LEFT):new sj(n.left+C/2,n.top+b/2),this.topRightBorderStroke=i>0||s>0?cj(n.left+m,n.top+b/2,o-E/2,A-b/2,_H.TOP_RIGHT):new sj(n.left+n.width-E/2,n.top+b/2),this.bottomRightBorderStroke=c>0||u>0?cj(n.left+v,n.top+y,c-E/2,u-B/2,_H.BOTTOM_RIGHT):new sj(n.left+n.width-E/2,n.top+n.height-B/2),this.bottomLeftBorderStroke=h>0||f>0?cj(n.left+C/2,n.top+w,h-C/2,f-B/2,_H.BOTTOM_LEFT):new sj(n.left+C/2,n.top+n.height-B/2),this.topLeftBorderBox=i>0||s>0?cj(n.left,n.top,i,s,_H.TOP_LEFT):new sj(n.left,n.top),this.topRightBorderBox=o>0||A>0?cj(n.left+m,n.top,o,A,_H.TOP_RIGHT):new sj(n.left+n.width,n.top),this.bottomRightBorderBox=c>0||u>0?cj(n.left+v,n.top+y,c,u,_H.BOTTOM_RIGHT):new sj(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=h>0||f>0?cj(n.left,n.top+w,h,f,_H.BOTTOM_LEFT):new sj(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||s>0?cj(n.left+C,n.top+b,Math.max(0,i-C),Math.max(0,s-b),_H.TOP_LEFT):new sj(n.left+C,n.top+b),this.topRightPaddingBox=o>0||A>0?cj(n.left+Math.min(m,n.width-E),n.top+b,m>n.width+E?0:Math.max(0,o-E),Math.max(0,A-b),_H.TOP_RIGHT):new sj(n.left+n.width-E,n.top+b),this.bottomRightPaddingBox=c>0||u>0?cj(n.left+Math.min(v,n.width-C),n.top+Math.min(y,n.height-B),Math.max(0,c-E),Math.max(0,u-B),_H.BOTTOM_RIGHT):new sj(n.left+n.width-E,n.top+n.height-B),this.bottomLeftPaddingBox=h>0||f>0?cj(n.left+C,n.top+Math.min(w,n.height-B),Math.max(0,h-C),Math.max(0,f-B),_H.BOTTOM_LEFT):new sj(n.left+C,n.top+n.height-B),this.topLeftContentBox=i>0||s>0?cj(n.left+C+k,n.top+b+S,Math.max(0,i-(C+k)),Math.max(0,s-(b+S)),_H.TOP_LEFT):new sj(n.left+C+k,n.top+b+S),this.topRightContentBox=o>0||A>0?cj(n.left+Math.min(m,n.width+C+k),n.top+b+S,m>n.width+C+k?0:o-C+k,A-(b+S),_H.TOP_RIGHT):new sj(n.left+n.width-(E+T),n.top+b+S),this.bottomRightContentBox=c>0||u>0?cj(n.left+Math.min(v,n.width-(C+k)),n.top+Math.min(y,n.height+b+S),Math.max(0,c-(E+T)),u-(B+x),_H.BOTTOM_RIGHT):new sj(n.left+n.width-(E+T),n.top+n.height-(B+x)),this.bottomLeftContentBox=h>0||f>0?cj(n.left+C+k,n.top+w,Math.max(0,h-(C+k)),f-(B+x),_H.BOTTOM_LEFT):new sj(n.left+C+k,n.top+n.height-(B+x))}}();(UH=_H||(_H={}))[UH.TOP_LEFT=0]="TOP_LEFT",UH[UH.TOP_RIGHT=1]="TOP_RIGHT",UH[UH.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",UH[UH.BOTTOM_LEFT=3]="BOTTOM_LEFT";var cj=function(e,t,n,r,i){var s=(Math.sqrt(2)-1)/3*4,a=n*s,o=r*s,A=e+n,l=t+r;switch(i){case _H.TOP_LEFT:return new oj(new sj(e,l),new sj(e,l-o),new sj(A-a,t),new sj(A,t));case _H.TOP_RIGHT:return new oj(new sj(e,t),new sj(e+a,t),new sj(A,l-o),new sj(A,l));case _H.BOTTOM_RIGHT:return new oj(new sj(A,t),new sj(A,t+o),new sj(e+a,l),new sj(e,l));case _H.BOTTOM_LEFT:default:return new oj(new sj(A,l),new sj(A-a,l),new sj(e,t+o),new sj(e,t))}},uj=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},dj=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},hj=function(){return function(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}}(),fj=function(){return function(e,t){this.path=e,this.target=t,this.type=1}}(),pj=function(){return function(e){this.opacity=e,this.type=2,this.target=6}}(),gj=function(e){return 1===e.type},mj=function(e,t){return e.length===t.length&&e.some(function(e,n){return e===t[n]})},yj=function(){return function(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}}(),vj=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new lj(this.container),this.container.styles.opacity<1&&this.effects.push(new pj(this.container.styles.opacity)),null!==this.container.styles.transform){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new hj(n,r,i))}if(0!==this.container.styles.overflowX){var s=uj(this.curves),a=dj(this.curves);mj(s,a)?this.effects.push(new fj(s,6)):(this.effects.push(new fj(s,2)),this.effects.push(new fj(a,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,r=this.effects.slice(0);n;){var i=n.effects.filter(function(e){return!gj(e)});if(t||0!==n.container.styles.position||!n.parent){if(r.unshift.apply(r,i),t=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var s=uj(n.curves),a=dj(n.curves);mj(s,a)||r.unshift(new fj(a,6))}}else r.unshift.apply(r,i);n=n.parent}return r.filter(function(t){return _N(t.target,e)})},e}(),wj=function(e,t,n,r){e.container.elements.forEach(function(i){var s=_N(i.flags,4),a=_N(i.flags,2),o=new vj(i,e);_N(i.styles.display,2048)&&r.push(o);var A=_N(i.flags,8)?[]:r;if(s||a){var l=s||i.styles.isPositioned()?n:t,c=new yj(o);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var u=i.styles.zIndex.order;if(u<0){var d=0;l.negativeZIndex.some(function(e,t){return u>e.element.container.styles.zIndex.order?(d=t,!1):d>0}),l.negativeZIndex.splice(d,0,c)}else if(u>0){var h=0;l.positiveZIndex.some(function(e,t){return u>=e.element.container.styles.zIndex.order?(h=t+1,!1):h>0}),l.positiveZIndex.splice(h,0,c)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else i.styles.isFloating()?l.nonPositionedFloats.push(c):l.nonPositionedInlineLevel.push(c);wj(o,c,s?c:n,A)}else i.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),wj(o,t,n,A);_N(i.flags,8)&&bj(i,A)})},bj=function(e,t){for(var n=e instanceof PM?e.start:1,r=e instanceof PM&&e.reversed,i=0;i<t.length;i++){var s=t[i];s.container instanceof UM&&"number"==typeof s.container.value&&0!==s.container.value&&(n=s.container.value),s.listValue=FH(n,s.container.styles.listStyleType,!0),n+=r?-1:1}},Ej=function(e,t){switch(t){case 0:return Cj(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Cj(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Cj(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return Cj(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Bj=function(e,t){var n=[];return Aj(e)?n.push(e.subdivide(.5,!1)):n.push(e),Aj(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},Cj=function(e,t,n,r){var i=[];return Aj(e)?i.push(e.subdivide(.5,!1)):i.push(e),Aj(n)?i.push(n.subdivide(.5,!0)):i.push(n),Aj(r)?i.push(r.subdivide(.5,!0).reverse()):i.push(r),Aj(t)?i.push(t.subdivide(.5,!1).reverse()):i.push(t),i},Sj=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},Tj=function(e){var t=e.styles,n=e.bounds,r=TO(t.paddingLeft,n.width),i=TO(t.paddingRight,n.width),s=TO(t.paddingTop,n.width),a=TO(t.paddingBottom,n.width);return n.add(r+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+i),-(t.borderTopWidth+t.borderBottomWidth+s+a))},xj=function(e,t,n){var r,i,s=(r=Lj(e.styles.backgroundOrigin,t),i=e,0===r?i.bounds:2===r?Tj(i):Sj(i)),a=function(e,t){return 0===e?t.bounds:2===e?Tj(t):Sj(t)}(Lj(e.styles.backgroundClip,t),e),o=Fj(Lj(e.styles.backgroundSize,t),n,s),A=o[0],l=o[1],c=SO(Lj(e.styles.backgroundPosition,t),s.width-A,s.height-l);return[Dj(Lj(e.styles.backgroundRepeat,t),c,o,s,a),Math.round(s.left+c[0]),Math.round(s.top+c[1]),A,l]},kj=function(e){return dO(e)&&e.value===AQ.AUTO},Ij=function(e){return"number"==typeof e},Fj=function(e,t,n){var r=t[0],i=t[1],s=t[2],a=e[0],o=e[1];if(!a)return[0,0];if(wO(a)&&o&&wO(o))return[TO(a,n.width),TO(o,n.height)];var A=Ij(s);if(dO(a)&&(a.value===AQ.CONTAIN||a.value===AQ.COVER))return Ij(s)?n.width/n.height<s!=(a.value===AQ.COVER)?[n.width,n.width/s]:[n.height*s,n.height]:[n.width,n.height];var l=Ij(r),c=Ij(i),u=l||c;if(kj(a)&&(!o||kj(o)))return l&&c?[r,i]:A||u?u&&A?[l?r:i*s,c?i:r/s]:[l?r:n.width,c?i:n.height]:[n.width,n.height];if(A){var d=0,h=0;return wO(a)?d=TO(a,n.width):wO(o)&&(h=TO(o,n.height)),kj(a)?d=h*s:o&&!kj(o)||(h=d/s),[d,h]}var f=null,p=null;if(wO(a)?f=TO(a,n.width):o&&wO(o)&&(p=TO(o,n.height)),null===f||o&&!kj(o)||(p=l&&c?f/r*i:n.height),null!==p&&kj(a)&&(f=l&&c?p/i*r:n.width),null!==f&&null!==p)return[f,p];throw new Error("Unable to calculate background-size for element")},Lj=function(e,t){var n=e[t];return void 0===n?e[0]:n},Dj=function(e,t,n,r,i){var s=t[0],a=t[1],o=n[0],A=n[1];switch(e){case 2:return[new sj(Math.round(r.left),Math.round(r.top+a)),new sj(Math.round(r.left+r.width),Math.round(r.top+a)),new sj(Math.round(r.left+r.width),Math.round(A+r.top+a)),new sj(Math.round(r.left),Math.round(A+r.top+a))];case 3:return[new sj(Math.round(r.left+s),Math.round(r.top)),new sj(Math.round(r.left+s+o),Math.round(r.top)),new sj(Math.round(r.left+s+o),Math.round(r.height+r.top)),new sj(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new sj(Math.round(r.left+s),Math.round(r.top+a)),new sj(Math.round(r.left+s+o),Math.round(r.top+a)),new sj(Math.round(r.left+s+o),Math.round(r.top+a+A)),new sj(Math.round(r.left+s),Math.round(r.top+a+A))];default:return[new sj(Math.round(i.left),Math.round(i.top)),new sj(Math.round(i.left+i.width),Math.round(i.top)),new sj(Math.round(i.left+i.width),Math.round(i.height+i.top)),new sj(Math.round(i.left),Math.round(i.height+i.top))]}},_j="Hidden Text",Uj=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),r=this._document.createElement("img"),i=this._document.createElement("span"),s=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",s.appendChild(n),r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=t,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(_j)),n.appendChild(i),n.appendChild(r);var a=r.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(_j)),n.style.lineHeight="normal",r.style.verticalAlign="super";var o=r.offsetTop-n.offsetTop+2;return s.removeChild(n),{baseline:a,middle:o}},e.prototype.getMetrics=function(e,t){var n=e+" "+t;return void 0===this._data[n]&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},e}(),Pj=function(){return function(e,t){this.context=e,this.options=t}}(),Rj=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new Uj(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}return fP(t,e),t.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach(function(e){return t.applyEffect(e)})},t.prototype.applyEffect=function(e){this.ctx.save(),function(e){return 2===e.type}(e)&&(this.ctx.globalAlpha=e.opacity),function(e){return 0===e.type}(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),gj(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(e){return gP(this,0,void 0,function(){return mP(this,function(t){switch(t.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(e){return gP(this,0,void 0,function(){return mP(this,function(t){switch(t.label){case 0:return _N(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(e,t,n){var r=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+n):BM(e.text).reduce(function(t,i){return r.ctx.fillText(i,t,e.bounds.top+n),t+r.ctx.measureText(i).width},e.bounds.left)},t.prototype.createFontStyle=function(e){var t=e.fontVariant.filter(function(e){return"normal"===e||"small-caps"===e}).join(""),n=Hj(e.fontFamily).join(", "),r=cO(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,r,n].join(" "),n,r]},t.prototype.renderTextNode=function(e,t){return gP(this,0,void 0,function(){var n,r,i,s,a,o,A,l,c=this;return mP(this,function(u){return n=this.createFontStyle(t),r=n[0],i=n[1],s=n[2],this.ctx.font=r,this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(i,s),o=a.baseline,A=a.middle,l=t.paintOrder,e.textBounds.forEach(function(e){l.forEach(function(n){switch(n){case 0:c.ctx.fillStyle=PO(t.color),c.renderTextWithLetterSpacing(e,t.letterSpacing,o);var r=t.textShadow;r.length&&e.text.trim().length&&(r.slice(0).reverse().forEach(function(n){c.ctx.shadowColor=PO(n.color),c.ctx.shadowOffsetX=n.offsetX.number*c.options.scale,c.ctx.shadowOffsetY=n.offsetY.number*c.options.scale,c.ctx.shadowBlur=n.blur.number,c.renderTextWithLetterSpacing(e,t.letterSpacing,o)}),c.ctx.shadowColor="",c.ctx.shadowOffsetX=0,c.ctx.shadowOffsetY=0,c.ctx.shadowBlur=0),t.textDecorationLine.length&&(c.ctx.fillStyle=PO(t.textDecorationColor||t.color),t.textDecorationLine.forEach(function(t){switch(t){case 1:c.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+o),e.bounds.width,1);break;case 2:c.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:c.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+A),e.bounds.width,1)}}));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(c.ctx.strokeStyle=PO(t.webkitTextStrokeColor),c.ctx.lineWidth=t.webkitTextStrokeWidth,c.ctx.lineJoin=window.chrome?"miter":"round",c.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+o)),c.ctx.strokeStyle="",c.ctx.lineWidth=0,c.ctx.lineJoin="miter"}})}),[2]})})},t.prototype.renderReplacedElement=function(e,t,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var r=Tj(e),i=dj(t);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(e){return gP(this,0,void 0,function(){var n,r,i,s,a,o,A,l,c,u,d,h,f,p,g,m,y,v;return mP(this,function(w){switch(w.label){case 0:this.applyEffects(e.getEffects(4)),n=e.container,r=e.curves,i=n.styles,s=0,a=n.textNodes,w.label=1;case 1:return s<a.length?(o=a[s],[4,this.renderTextNode(o,i)]):[3,4];case 2:w.sent(),w.label=3;case 3:return s++,[3,1];case 4:if(!(n instanceof LM))return[3,8];w.label=5;case 5:return w.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return g=w.sent(),this.renderReplacedElement(n,r,g),[3,8];case 7:return w.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof DM&&this.renderReplacedElement(n,r,n.canvas),!(n instanceof _M))return[3,12];w.label=9;case 9:return w.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return g=w.sent(),this.renderReplacedElement(n,r,g),[3,12];case 11:return w.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof VM&&n.tree?[4,new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}).render(n.tree)]:[3,14];case 13:A=w.sent(),n.width&&n.height&&this.ctx.drawImage(A,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),w.label=14;case 14:if(n instanceof jM&&(l=Math.min(n.bounds.width,n.bounds.height),n.type===QM?n.checked&&(this.ctx.save(),this.path([new sj(n.bounds.left+.39363*l,n.bounds.top+.79*l),new sj(n.bounds.left+.16*l,n.bounds.top+.5549*l),new sj(n.bounds.left+.27347*l,n.bounds.top+.44071*l),new sj(n.bounds.left+.39694*l,n.bounds.top+.5649*l),new sj(n.bounds.left+.72983*l,n.bounds.top+.23*l),new sj(n.bounds.left+.84*l,n.bounds.top+.34085*l),new sj(n.bounds.left+.39363*l,n.bounds.top+.79*l)]),this.ctx.fillStyle=PO(HM),this.ctx.fill(),this.ctx.restore()):n.type===NM&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+l/2,n.bounds.top+l/2,l/4,0,2*Math.PI,!0),this.ctx.fillStyle=PO(HM),this.ctx.fill(),this.ctx.restore())),Oj(n)&&n.value.length){switch(c=this.createFontStyle(i),y=c[0],u=c[1],d=this.fontMetrics.getMetrics(y,u).baseline,this.ctx.font=y,this.ctx.fillStyle=PO(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Nj(n.styles.textAlign),v=Tj(n),h=0,n.styles.textAlign){case 1:h+=v.width/2;break;case 2:h+=v.width}f=v.add(h,0,0,-v.height/2+1),this.ctx.save(),this.path([new sj(v.left,v.top),new sj(v.left+v.width,v.top),new sj(v.left+v.width,v.top+v.height),new sj(v.left,v.top+v.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new wM(n.value,f),i.letterSpacing,d),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!_N(n.styles.display,2048))return[3,20];if(null===n.styles.listStyleImage)return[3,19];if(0!==(p=n.styles.listStyleImage).type)return[3,18];g=void 0,m=p.url,w.label=15;case 15:return w.trys.push([15,17,,18]),[4,this.context.cache.match(m)];case 16:return g=w.sent(),this.ctx.drawImage(g,n.bounds.left-(g.width+10),n.bounds.top),[3,18];case 17:return w.sent(),this.context.logger.error("Error loading list-style-image "+m),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==n.styles.listStyleType&&(y=this.createFontStyle(i)[0],this.ctx.font=y,this.ctx.fillStyle=PO(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",v=new vP(n.bounds.left,n.bounds.top+TO(n.styles.paddingTop,n.bounds.width),n.bounds.width,qQ(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new wM(e.listValue,v),i.letterSpacing,qQ(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),w.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(e){return gP(this,0,void 0,function(){var t,n,r,i,s,a,o,A,l,c,u,d,h,f,p;return mP(this,function(g){switch(g.label){case 0:return _N(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:g.sent(),t=0,n=e.negativeZIndex,g.label=2;case 2:return t<n.length?(p=n[t],[4,this.renderStack(p)]):[3,5];case 3:g.sent(),g.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:g.sent(),r=0,i=e.nonInlineLevel,g.label=7;case 7:return r<i.length?(p=i[r],[4,this.renderNode(p)]):[3,10];case 8:g.sent(),g.label=9;case 9:return r++,[3,7];case 10:s=0,a=e.nonPositionedFloats,g.label=11;case 11:return s<a.length?(p=a[s],[4,this.renderStack(p)]):[3,14];case 12:g.sent(),g.label=13;case 13:return s++,[3,11];case 14:o=0,A=e.nonPositionedInlineLevel,g.label=15;case 15:return o<A.length?(p=A[o],[4,this.renderStack(p)]):[3,18];case 16:g.sent(),g.label=17;case 17:return o++,[3,15];case 18:l=0,c=e.inlineLevel,g.label=19;case 19:return l<c.length?(p=c[l],[4,this.renderNode(p)]):[3,22];case 20:g.sent(),g.label=21;case 21:return l++,[3,19];case 22:u=0,d=e.zeroOrAutoZIndexOrTransformedOrOpacity,g.label=23;case 23:return u<d.length?(p=d[u],[4,this.renderStack(p)]):[3,26];case 24:g.sent(),g.label=25;case 25:return u++,[3,23];case 26:h=0,f=e.positiveZIndex,g.label=27;case 27:return h<f.length?(p=f[h],[4,this.renderStack(p)]):[3,30];case 28:g.sent(),g.label=29;case 29:return h++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},t.prototype.formatPath=function(e){var t=this;e.forEach(function(e,n){var r=Aj(e)?e.start:e;0===n?t.ctx.moveTo(r.x,r.y):t.ctx.lineTo(r.x,r.y),Aj(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)})},t.prototype.renderRepeat=function(e,t,n,r){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},t.prototype.resizeImage=function(e,t,n){var r;if(e.width===t&&e.height===n)return e;var i=(null!==(r=this.canvas.ownerDocument)&&void 0!==r?r:document).createElement("canvas");return i.width=Math.max(1,t),i.height=Math.max(1,n),i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),i},t.prototype.renderBackgroundImage=function(e){return gP(this,0,void 0,function(){var t,n,r,i,s,a;return mP(this,function(o){switch(o.label){case 0:t=e.styles.backgroundImage.length-1,n=function(n){var i,s,a,o,A,l,c,u,d,h,f,p,g,m,y,v,w,b,E,B,C,S,T,x,k,I,F,L,D,_,U;return mP(this,function(P){switch(P.label){case 0:if(0!==n.type)return[3,5];i=void 0,s=n.url,P.label=1;case 1:return P.trys.push([1,3,,4]),[4,r.context.cache.match(s)];case 2:return i=P.sent(),[3,4];case 3:return P.sent(),r.context.logger.error("Error loading background-image "+s),[3,4];case 4:return i&&(a=xj(e,t,[i.width,i.height,i.width/i.height]),v=a[0],S=a[1],T=a[2],E=a[3],B=a[4],m=r.ctx.createPattern(r.resizeImage(i,E,B),"repeat"),r.renderRepeat(v,m,S,T)),[3,6];case 5:1===n.type?(o=xj(e,t,[null,null,null]),v=o[0],S=o[1],T=o[2],E=o[3],B=o[4],A=zO(n.angle,E,B),l=A[0],c=A[1],u=A[2],d=A[3],h=A[4],(f=document.createElement("canvas")).width=E,f.height=B,p=f.getContext("2d"),g=p.createLinearGradient(c,d,u,h),WO(n.stops,l).forEach(function(e){return g.addColorStop(e.stop,PO(e.color))}),p.fillStyle=g,p.fillRect(0,0,E,B),E>0&&B>0&&(m=r.ctx.createPattern(f,"repeat"),r.renderRepeat(v,m,S,T))):function(e){return 2===e.type}(n)&&(y=xj(e,t,[null,null,null]),v=y[0],w=y[1],b=y[2],E=y[3],B=y[4],C=0===n.position.length?[BO]:n.position,S=TO(C[0],E),T=TO(C[C.length-1],B),x=function(e,t,n,r,i){var s=0,a=0;switch(e.size){case 0:0===e.shape?s=a=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-i)):1===e.shape&&(s=Math.min(Math.abs(t),Math.abs(t-r)),a=Math.min(Math.abs(n),Math.abs(n-i)));break;case 2:if(0===e.shape)s=a=Math.min(YO(t,n),YO(t,n-i),YO(t-r,n),YO(t-r,n-i));else if(1===e.shape){var o=Math.min(Math.abs(n),Math.abs(n-i))/Math.min(Math.abs(t),Math.abs(t-r)),A=qO(r,i,t,n,!0),l=A[0],c=A[1];a=o*(s=YO(l-t,(c-n)/o))}break;case 1:0===e.shape?s=a=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-i)):1===e.shape&&(s=Math.max(Math.abs(t),Math.abs(t-r)),a=Math.max(Math.abs(n),Math.abs(n-i)));break;case 3:if(0===e.shape)s=a=Math.max(YO(t,n),YO(t,n-i),YO(t-r,n),YO(t-r,n-i));else if(1===e.shape){o=Math.max(Math.abs(n),Math.abs(n-i))/Math.max(Math.abs(t),Math.abs(t-r));var u=qO(r,i,t,n,!1);l=u[0],c=u[1],a=o*(s=YO(l-t,(c-n)/o))}}return Array.isArray(e.size)&&(s=TO(e.size[0],r),a=2===e.size.length?TO(e.size[1],i):s),[s,a]}(n,S,T,E,B),k=x[0],I=x[1],k>0&&I>0&&(F=r.ctx.createRadialGradient(w+S,b+T,0,w+S,b+T,k),WO(n.stops,2*k).forEach(function(e){return F.addColorStop(e.stop,PO(e.color))}),r.path(v),r.ctx.fillStyle=F,k!==I?(L=e.bounds.left+.5*e.bounds.width,D=e.bounds.top+.5*e.bounds.height,U=1/(_=I/k),r.ctx.save(),r.ctx.translate(L,D),r.ctx.transform(1,0,0,_,0,0),r.ctx.translate(-L,-D),r.ctx.fillRect(w,U*(b-D)+D,E,B*U),r.ctx.restore()):r.ctx.fill())),P.label=6;case 6:return t--,[2]}})},r=this,i=0,s=e.styles.backgroundImage.slice(0).reverse(),o.label=1;case 1:return i<s.length?(a=s[i],[5,n(a)]):[3,4];case 2:o.sent(),o.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(e,t,n){return gP(this,0,void 0,function(){return mP(this,function(r){return this.path(Ej(n,t)),this.ctx.fillStyle=PO(e),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(e,t,n,r){return gP(this,0,void 0,function(){var i,s;return mP(this,function(a){switch(a.label){case 0:return t<3?[4,this.renderSolidBorder(e,n,r)]:[3,2];case 1:return a.sent(),[2];case 2:return i=function(e,t){switch(t){case 0:return Cj(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Cj(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Cj(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return Cj(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}}(r,n),this.path(i),this.ctx.fillStyle=PO(e),this.ctx.fill(),s=function(e,t){switch(t){case 0:return Cj(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Cj(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Cj(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return Cj(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}}(r,n),this.path(s),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(e){return gP(this,0,void 0,function(){var t,n,r,i,s,a,o,A,l=this;return mP(this,function(c){switch(c.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,n=!UO(t.backgroundColor)||t.backgroundImage.length,r=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],i=Qj(Lj(t.backgroundClip,0),e.curves),n||t.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),UO(t.backgroundColor)||(this.ctx.fillStyle=PO(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:c.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach(function(t){l.ctx.save();var n,r,i,s,a,o=uj(e.curves),A=t.inset?0:1e4,c=(n=o,r=-A+(t.inset?1:-1)*t.spread.number,i=(t.inset?1:-1)*t.spread.number,s=t.spread.number*(t.inset?-2:2),a=t.spread.number*(t.inset?-2:2),n.map(function(e,t){switch(t){case 0:return e.add(r,i);case 1:return e.add(r+s,i);case 2:return e.add(r+s,i+a);case 3:return e.add(r,i+a)}return e}));t.inset?(l.path(o),l.ctx.clip(),l.mask(c)):(l.mask(o),l.ctx.clip(),l.path(c)),l.ctx.shadowOffsetX=t.offsetX.number+A,l.ctx.shadowOffsetY=t.offsetY.number,l.ctx.shadowColor=PO(t.color),l.ctx.shadowBlur=t.blur.number,l.ctx.fillStyle=t.inset?PO(t.color):"rgba(0,0,0,1)",l.ctx.fill(),l.ctx.restore()}),c.label=2;case 2:s=0,a=0,o=r,c.label=3;case 3:return a<o.length?0!==(A=o[a]).style&&!UO(A.color)&&A.width>0?2!==A.style?[3,5]:[4,this.renderDashedDottedBorder(A.color,A.width,s,e.curves,2)]:[3,11]:[3,13];case 4:return c.sent(),[3,11];case 5:return 3!==A.style?[3,7]:[4,this.renderDashedDottedBorder(A.color,A.width,s,e.curves,3)];case 6:return c.sent(),[3,11];case 7:return 4!==A.style?[3,9]:[4,this.renderDoubleBorder(A.color,A.width,s,e.curves)];case 8:return c.sent(),[3,11];case 9:return[4,this.renderSolidBorder(A.color,s,e.curves)];case 10:c.sent(),c.label=11;case 11:s++,c.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(e,t,n,r,i){return gP(this,0,void 0,function(){var s,a,o,A,l,c,u,d,h,f,p,g,m,y,v,w;return mP(this,function(b){return this.ctx.save(),s=function(e,t){switch(t){case 0:return Bj(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return Bj(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return Bj(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return Bj(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}}(r,n),a=Ej(r,n),2===i&&(this.path(a),this.ctx.clip()),Aj(a[0])?(o=a[0].start.x,A=a[0].start.y):(o=a[0].x,A=a[0].y),Aj(a[1])?(l=a[1].end.x,c=a[1].end.y):(l=a[1].x,c=a[1].y),u=0===n||2===n?Math.abs(o-l):Math.abs(A-c),this.ctx.beginPath(),3===i?this.formatPath(s):this.formatPath(a.slice(0,2)),d=t<3?3*t:2*t,h=t<3?2*t:t,3===i&&(d=t,h=t),f=!0,u<=2*d?f=!1:u<=2*d+h?(d*=p=u/(2*d+h),h*=p):(g=Math.floor((u+h)/(d+h)),m=(u-g*d)/(g-1),h=(y=(u-(g+1)*d)/g)<=0||Math.abs(h-m)<Math.abs(h-y)?m:y),f&&(3===i?this.ctx.setLineDash([0,d+h]):this.ctx.setLineDash([d,h])),3===i?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=PO(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===i&&(Aj(a[0])&&(v=a[3],w=a[0],this.ctx.beginPath(),this.formatPath([new sj(v.end.x,v.end.y),new sj(w.start.x,w.start.y)]),this.ctx.stroke()),Aj(a[1])&&(v=a[1],w=a[2],this.ctx.beginPath(),this.formatPath([new sj(v.end.x,v.end.y),new sj(w.start.x,w.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(e){return gP(this,0,void 0,function(){var t;return mP(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=PO(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=new vj(e,null),i=new yj(r),wj(r,i,i,s=[]),bj(r.container,s),t=i,[4,this.renderStack(t)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}var r,i,s})})},t}(Pj),Oj=function(e){return e instanceof KM||(e instanceof $M||e instanceof jM&&e.type!==NM&&e.type!==QM)},Qj=function(e,t){switch(e){case 0:return uj(t);case 2:return function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]}(t);default:return dj(t)}},Nj=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},Mj=["-apple-system","system-ui"],Hj=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(e){return-1===Mj.indexOf(e)}):e},jj=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}return fP(t,e),t.prototype.render=function(e){return gP(this,0,void 0,function(){var t,n;return mP(this,function(r){switch(r.label){case 0:return t=mM(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,$j(t)];case 1:return n=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=PO(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(Pj),$j=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})},Kj=function(){function e(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,yP([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,yP([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,yP([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,yP([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),Vj=function(){function e(t,n){var r;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new Kj({id:this.instanceName,enabled:t.logging}),this.cache=null!==(r=t.cache)&&void 0!==r?r:new qH(this,t)}return e.instanceCount=1,e}();"undefined"!=typeof window&&YH.setContext(window);var Gj=function(e,t){return gP(void 0,0,void 0,function(){var n,r,i,s,a,o,A,l,c,u,d,h,f,p,g,m,y,v,w,b,E,B,C,S,T,x,k,I,F,L,D,_,U,P,R,O,Q,N;return mP(this,function(M){switch(M.label){case 0:if(!e||"object"!=typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(n=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(r=n.defaultView))throw new Error("Document is not attached to a Window");return i={allowTaint:null!==(B=t.allowTaint)&&void 0!==B&&B,imageTimeout:null!==(C=t.imageTimeout)&&void 0!==C?C:15e3,proxy:t.proxy,useCORS:null!==(S=t.useCORS)&&void 0!==S&&S},s=pP({logging:null===(T=t.logging)||void 0===T||T,cache:t.cache},i),a={windowWidth:null!==(x=t.windowWidth)&&void 0!==x?x:r.innerWidth,windowHeight:null!==(k=t.windowHeight)&&void 0!==k?k:r.innerHeight,scrollX:null!==(I=t.scrollX)&&void 0!==I?I:r.pageXOffset,scrollY:null!==(F=t.scrollY)&&void 0!==F?F:r.pageYOffset},o=new vP(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),A=new Vj(s,o),l=null!==(L=t.foreignObjectRendering)&&void 0!==L&&L,c={allowTaint:null!==(D=t.allowTaint)&&void 0!==D&&D,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:l,copyStyles:l},A.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),u=new DH(A,e,c),(d=u.clonedReferenceElement)?[4,u.toIFrame(n,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=M.sent(),f=aH(d)||"HTML"===d.tagName?function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),i=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new vP(0,0,r,i)}(d.ownerDocument):wP(A,d),p=f.width,g=f.height,m=f.left,y=f.top,v=Wj(A,d,t.backgroundColor),w={canvas:t.canvas,backgroundColor:v,scale:null!==(U=null!==(_=t.scale)&&void 0!==_?_:r.devicePixelRatio)&&void 0!==U?U:1,x:(null!==(P=t.x)&&void 0!==P?P:0)+m,y:(null!==(R=t.y)&&void 0!==R?R:0)+y,width:null!==(O=t.width)&&void 0!==O?O:Math.ceil(p),height:null!==(Q=t.height)&&void 0!==Q?Q:Math.ceil(g)},l?(A.logger.debug("Document cloned, using foreign object rendering"),[4,new jj(A,w).render(d)]):[3,3];case 2:return b=M.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at "+m+","+y+" with size "+p+"x"+g+" using computed rendering"),A.logger.debug("Starting DOM parsing"),E=YM(A,d),v===E.styles.backgroundColor&&(E.styles.backgroundColor=$O.TRANSPARENT),A.logger.debug("Starting renderer for element at "+w.x+","+w.y+" with size "+w.width+"x"+w.height),[4,new Rj(A,w).render(E)];case 4:b=M.sent(),M.label=5;case 5:return(null===(N=t.removeContainer)||void 0===N||N)&&(DH.destroy(h)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,b]}})})},Wj=function(e,t,n){var r=t.ownerDocument,i=r.documentElement?jO(e,getComputedStyle(r.documentElement).backgroundColor):$O.TRANSPARENT,s=r.body?jO(e,getComputedStyle(r.body).backgroundColor):$O.TRANSPARENT,a="string"==typeof n?jO(e,n):null===n?$O.TRANSPARENT:4294967295;return t===r.documentElement?UO(i)?UO(s)?a:s:i:a};"undefined"!=typeof HTMLVideoElement&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(e){const t=performance.now(),n=this.getVideoPlaybackQuality(),r=this.mozPresentedFrames||this.mozPaintedFrames||n.totalVideoFrames-n.droppedVideoFrames,i=(s,a)=>{const o=this.getVideoPlaybackQuality(),A=this.mozPresentedFrames||this.mozPaintedFrames||o.totalVideoFrames-o.droppedVideoFrames;if(A>r){const r=this.mozFrameDelay||o.totalFrameDelay-n.totalFrameDelay||0,i=a-s;e(a,{presentationTime:a+1e3*r,expectedDisplayTime:a+i,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+i/1e3,presentedFrames:A,processingDuration:r}),delete this._rvfcpolyfillmap[t]}else this._rvfcpolyfillmap[t]=requestAnimationFrame(e=>i(a,e))};return this._rvfcpolyfillmap[t]=requestAnimationFrame(e=>i(t,e)),t},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(e){cancelAnimationFrame(this._rvfcpolyfillmap[e]),delete this._rvfcpolyfillmap[e]});const zj={bt709:"BT709",bt470bg:"BT601",smpte170m:"BT601"},Yj={BT601:{BT709:"1.0863 -0.0723 -0.014 0 0 0.0965 0.8451 0.0584 0 0 -0.0141 -0.0277 1.0418"},BT709:{BT601:"0.9137 0.0784 0.0079 0 0 -0.1049 1.1722 -0.0671 0 0 0.0096 0.0322 0.9582"},FCC:{BT709:"1.0873 -0.0736 -0.0137 0 0 0.0974 0.8494 0.0531 0 0 -0.0127 -0.0251 1.0378",BT601:"1.001 -0.0008 -0.0002 0 0 0.0009 1.005 -0.006 0 0 0.0013 0.0027 0.996"},SMPTE240M:{BT709:"0.9993 0.0006 0.0001 0 0 -0.0004 0.9812 0.0192 0 0 -0.0034 -0.0114 1.0148",BT601:"0.913 0.0774 0.0096 0 0 -0.1051 1.1508 -0.0456 0 0 0.0063 0.0207 0.973"}};class qj extends EventTarget{constructor(e){if(super(),!globalThis.Worker)throw this.destroy("Worker not supported");if(!e)throw this.destroy("No options provided");this._loaded=new Promise(e=>{this._init=e});const t=qj._test();if(this._onDemandRender="requestVideoFrameCallback"in HTMLVideoElement.prototype&&(e.onDemandRender??!0),this._offscreenRender="transferControlToOffscreen"in HTMLCanvasElement.prototype&&!e.canvas&&(e.offscreenRender??!0),this.timeOffset=e.timeOffset||0,this._video=e.video,this._videoHeight=0,this._videoWidth=0,this._videoColorSpace=null,this._canvas=e.canvas,this._video&&!this._canvas)this._canvasParent=document.createElement("div"),this._canvasParent.className="JASSUB",this._canvasParent.style.position="relative",this._canvas=this._createCanvas(),this._video.insertAdjacentElement("afterend",this._canvasParent);else if(!this._canvas)throw this.destroy("Don't know where to render: you should give video or canvas in options.");if(this._bufferCanvas=document.createElement("canvas"),this._bufferCtx=this._bufferCanvas.getContext("2d"),!this._bufferCtx)throw this.destroy("Canvas rendering not supported");this._canvasctrl=this._offscreenRender?this._canvas.transferControlToOffscreen():this._canvas,this._ctx=!this._offscreenRender&&this._canvasctrl.getContext("2d"),this._lastRenderTime=0,this.debug=!!e.debug,this.prescaleFactor=e.prescaleFactor||1,this.prescaleHeightLimit=e.prescaleHeightLimit||1080,this.maxRenderHeight=e.maxRenderHeight||0,this._boundResize=this.resize.bind(this),this._boundTimeUpdate=this._timeupdate.bind(this),this._boundSetRate=this.setRate.bind(this),this._boundUpdateColorSpace=this._updateColorSpace.bind(this),this._video&&this.setVideo(e.video),this._onDemandRender&&(this.busy=!1,this._lastDemandTime=null),this._worker=new Worker(e.workerUrl||"jassub-worker.js"),this._worker.onmessage=e=>this._onmessage(e),this._worker.onerror=e=>this._error(e),t.then(()=>{this._worker.postMessage({target:"init",wasmUrl:qj._supportsSIMD&&e.modernWasmUrl?e.modernWasmUrl:e.wasmUrl??"jassub-worker.wasm",legacyWasmUrl:e.legacyWasmUrl??"jassub-worker.wasm.js",asyncRender:"undefined"!=typeof createImageBitmap&&(e.asyncRender??!0),onDemandRender:this._onDemandRender,width:this._canvasctrl.width||0,height:this._canvasctrl.height||0,blendMode:e.blendMode||"js",subUrl:e.subUrl,subContent:e.subContent||null,fonts:e.fonts||[],availableFonts:e.availableFonts||{"liberation sans":"./default.woff2"},fallbackFont:e.fallbackFont||"liberation sans",debug:this.debug,targetFps:e.targetFps||24,dropAllAnimations:e.dropAllAnimations,dropAllBlur:e.dropAllBlur,libassMemoryLimit:e.libassMemoryLimit||0,libassGlyphLimit:e.libassGlyphLimit||0,useLocalFonts:"undefined"!=typeof queryLocalFonts&&(e.useLocalFonts??!0),hasBitmapBug:qj._hasBitmapBug}),!0===this._offscreenRender&&this.sendMessage("offscreenCanvas",null,[this._canvasctrl])})}_createCanvas(){return this._canvas=document.createElement("canvas"),this._canvas.style.display="block",this._canvas.style.position="absolute",this._canvas.style.pointerEvents="none",this._canvasParent.appendChild(this._canvas),this._canvas}static _supportsSIMD=null;static _hasAlphaBug=null;static _hasBitmapBug=null;static _testSIMD(){if(null===qj._supportsSIMD)try{qj._supportsSIMD=WebAssembly.validate(Uint8Array.of(0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11))}catch(c$){qj._supportsSIMD=!1}}static async _testImageBugs(){if(null!==qj._hasBitmapBug)return;const e=document.createElement("canvas"),t=e.getContext("2d",{willReadFrequently:!0});if(!t)throw new Error("Canvas rendering not supported");if("function"==typeof ImageData.prototype.constructor)try{new ImageData(new Uint8ClampedArray([0,0,0,0]),1,1)}catch(c$){console.log("Detected that ImageData is not constructable despite browser saying so"),self.ImageData=function(e,n,r){const i=t.createImageData(n,r);return e&&i.data.set(e),i}}const n=document.createElement("canvas"),r=n.getContext("2d",{willReadFrequently:!0});if(!r)throw new Error("Canvas rendering not supported");e.width=n.width=1,e.height=n.height=1,t.clearRect(0,0,1,1),r.clearRect(0,0,1,1);const i=r.getImageData(0,0,1,1).data;t.putImageData(new ImageData(new Uint8ClampedArray([0,255,0,0]),1,1),0,0),r.drawImage(e,0,0);const s=r.getImageData(0,0,1,1).data;if(qj._hasAlphaBug=i[1]!==s[1],qj._hasAlphaBug&&console.log("Detected a browser having issue with transparent pixels, applying workaround"),"undefined"!=typeof createImageBitmap){const e=new Uint8ClampedArray([255,0,255,0,255]).subarray(1,5);r.drawImage(await createImageBitmap(new ImageData(e,1)),0,0);const{data:t}=r.getImageData(0,0,1,1);qj._hasBitmapBug=!1;for(const[n,r]of t.entries())if(Math.abs(e[n]-r)>15){qj._hasBitmapBug=!0,console.log("Detected a browser having issue with partial bitmaps, applying workaround");break}}else qj._hasBitmapBug=!1;e.remove(),n.remove()}static async _test(){qj._testSIMD(),await qj._testImageBugs()}resize(e=0,t=0,n=0,r=0,i=this._video?.paused){if((!e||!t)&&this._video){const i=this._getVideoPosition();let s=null;if(this._videoWidth){const e=this._video.videoWidth/this._videoWidth,t=this._video.videoHeight/this._videoHeight;s=this._computeCanvasSize((i.width||0)/e,(i.height||0)/t)}else s=this._computeCanvasSize(i.width||0,i.height||0);e=s.width,t=s.height,this._canvasParent&&(n=i.y-(this._canvasParent.getBoundingClientRect().top-this._video.getBoundingClientRect().top),r=i.x),this._canvas.style.width=i.width+"px",this._canvas.style.height=i.height+"px"}this._canvas.style.top=n+"px",this._canvas.style.left=r+"px",i&&!1===this.busy?this.busy=!0:i=!1,this.sendMessage("canvas",{width:e,height:t,videoWidth:this._videoWidth||this._video.videoWidth,videoHeight:this._videoHeight||this._video.videoHeight,force:i})}_getVideoPosition(e=this._video.videoWidth,t=this._video.videoHeight){const n=e/t,{offsetWidth:r,offsetHeight:i}=this._video;e=r,t=i,r/i>n?e=Math.floor(i*n):t=Math.floor(r/n);return{width:e,height:t,x:(r-e)/2,y:(i-t)/2}}_computeCanvasSize(e=0,t=0){const n=this.prescaleFactor<=0?1:this.prescaleFactor,r=self.devicePixelRatio||1;if(t<=0||e<=0)e=0,t=0;else{const i=n<1?-1:1;let s=t*r;i*s*n<=i*this.prescaleHeightLimit?s*=n:i*s<i*this.prescaleHeightLimit&&(s=this.prescaleHeightLimit),this.maxRenderHeight>0&&s>this.maxRenderHeight&&(s=this.maxRenderHeight),e*=s/t,t=s}return{width:e,height:t}}_timeupdate({type:e}){const t={seeking:!0,waiting:!0,playing:!1}[e];null!=t&&(this._playstate=t),this.setCurrentTime(this._video.paused||this._playstate,this._video.currentTime+this.timeOffset)}setVideo(e){e instanceof HTMLVideoElement?(this._removeListeners(),this._video=e,this._onDemandRender?this._video.requestVideoFrameCallback(this._handleRVFC.bind(this)):(this._playstate=e.paused,e.addEventListener("timeupdate",this._boundTimeUpdate,!1),e.addEventListener("progress",this._boundTimeUpdate,!1),e.addEventListener("waiting",this._boundTimeUpdate,!1),e.addEventListener("seeking",this._boundTimeUpdate,!1),e.addEventListener("playing",this._boundTimeUpdate,!1),e.addEventListener("ratechange",this._boundSetRate,!1),e.addEventListener("resize",this._boundResize,!1)),"VideoFrame"in window&&(e.addEventListener("loadedmetadata",this._boundUpdateColorSpace,!1),e.readyState>2&&this._updateColorSpace()),e.videoWidth>0&&this.resize(),"undefined"!=typeof ResizeObserver&&(this._ro||(this._ro=new ResizeObserver(()=>this.resize())),this._ro.observe(e))):this._error("Video element invalid!")}runBenchmark(){this.sendMessage("runBenchmark")}setTrackByUrl(e){this.sendMessage("setTrackByUrl",{url:e}),this._reAttachOffscreen(),this._ctx&&(this._ctx.filter="none")}setTrack(e){this.sendMessage("setTrack",{content:e}),this._reAttachOffscreen(),this._ctx&&(this._ctx.filter="none")}freeTrack(){this.sendMessage("freeTrack")}setIsPaused(e){this.sendMessage("video",{isPaused:e})}setRate(e){this.sendMessage("video",{rate:e})}setCurrentTime(e,t,n){this.sendMessage("video",{isPaused:e,currentTime:t,rate:n,colorSpace:this._videoColorSpace})}createEvent(e){this.sendMessage("createEvent",{event:e})}setEvent(e,t){this.sendMessage("setEvent",{event:e,index:t})}removeEvent(e){this.sendMessage("removeEvent",{index:e})}getEvents(e){this._fetchFromWorker({target:"getEvents"},(t,{events:n})=>{e(t,n)})}styleOverride(e){this.sendMessage("styleOverride",{style:e})}disableStyleOverride(){this.sendMessage("disableStyleOverride")}createStyle(e){this.sendMessage("createStyle",{style:e})}setStyle(e,t){this.sendMessage("setStyle",{style:e,index:t})}removeStyle(e){this.sendMessage("removeStyle",{index:e})}getStyles(e){this._fetchFromWorker({target:"getStyles"},(t,{styles:n})=>{e(t,n)})}addFont(e){this.sendMessage("addFont",{font:e})}setDefaultFont(e){this.sendMessage("defaultFont",{font:e})}_sendLocalFont(e){try{queryLocalFonts().then(t=>{const n=t?.find(t=>t.fullName.toLowerCase()===e);n&&n.blob().then(e=>{e.arrayBuffer().then(e=>{this.addFont(new Uint8Array(e))})})})}catch(c$){console.warn("Local fonts API:",c$)}}_getLocalFont({font:e}){try{navigator?.permissions?.query?navigator.permissions.query({name:"local-fonts"}).then(t=>{"granted"===t.state&&this._sendLocalFont(e)}):this._sendLocalFont(e)}catch(c$){console.warn("Local fonts API:",c$)}}_unbusy(){this._lastDemandTime?this._demandRender(this._lastDemandTime):this.busy=!1}_handleRVFC(e,{mediaTime:t,width:n,height:r}){if(this._destroyed)return null;this.busy?this._lastDemandTime={mediaTime:t,width:n,height:r}:(this.busy=!0,this._demandRender({mediaTime:t,width:n,height:r})),this._video.requestVideoFrameCallback(this._handleRVFC.bind(this))}_demandRender({mediaTime:e,width:t,height:n}){this._lastDemandTime=null,t===this._videoWidth&&n===this._videoHeight||(this._videoWidth=t,this._videoHeight=n,this.resize()),this.sendMessage("demand",{time:e+this.timeOffset})}_detachOffscreen(){if(!this._offscreenRender||this._ctx)return null;this._canvas.remove(),this._createCanvas(),this._canvasctrl=this._canvas,this._ctx=this._canvasctrl.getContext("2d"),this.sendMessage("detachOffscreen"),this.busy=!1,this.resize(0,0,0,0,!0)}_reAttachOffscreen(){if(!this._offscreenRender||!this._ctx)return null;this._canvas.remove(),this._createCanvas(),this._canvasctrl=this._canvas.transferControlToOffscreen(),this._ctx=!1,this.sendMessage("offscreenCanvas",null,[this._canvasctrl]),this.resize(0,0,0,0,!0)}_updateColorSpace(){this._video.requestVideoFrameCallback(()=>{try{const e=new VideoFrame(this._video);this._videoColorSpace=zj[e.colorSpace.matrix],e.close(),this.sendMessage("getColorSpace")}catch(c$){console.warn(c$)}})}_verifyColorSpace({subtitleColorSpace:e,videoColorSpace:t=this._videoColorSpace}){e&&t&&e!==t&&(this._detachOffscreen(),this._ctx.filter=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='f'><feColorMatrix type='matrix' values='${Yj[e][t]} 0 0 0 0 0 1 0'/></filter></svg>#f")`)}_render({images:e,asyncRender:t,times:n,width:r,height:i,colorSpace:s}){this._unbusy(),this.debug&&(n.IPCTime=Date.now()-n.JSRenderTime),this._canvasctrl.width===r&&this._canvasctrl.height===i||(this._canvasctrl.width=r,this._canvasctrl.height=i,this._verifyColorSpace({subtitleColorSpace:s})),this._ctx.clearRect(0,0,this._canvasctrl.width,this._canvasctrl.height);for(const a of e)a.image&&(t?(this._ctx.drawImage(a.image,a.x,a.y),a.image.close()):(this._bufferCanvas.width=a.w,this._bufferCanvas.height=a.h,this._bufferCtx.putImageData(new ImageData(this._fixAlpha(new Uint8ClampedArray(a.image)),a.w,a.h),0,0),this._ctx.drawImage(this._bufferCanvas,a.x,a.y)));if(this.debug){n.JSRenderTime=Date.now()-n.JSRenderTime-n.IPCTime;let t=0;const r=n.bitmaps||e.length;delete n.bitmaps;for(const e in n)t+=n[e];console.log("Bitmaps: "+r+" Total: "+(0|t)+"ms",n)}}_fixAlpha(e){if(qj._hasAlphaBug)for(let t=3;t<e.length;t+=4)e[t]=e[t]>1?e[t]:1;return e}_ready(){this._init(),this.dispatchEvent(new CustomEvent("ready"))}async sendMessage(e,t={},n){await this._loaded,n?this._worker.postMessage({target:e,transferable:n,...t},[...n]):this._worker.postMessage({target:e,...t})}_fetchFromWorker(e,t){try{const n=e.target,r=setTimeout(()=>{s(new Error("Error: Timeout while try to fetch "+n))},5e3),i=({data:e})=>{e.target===n&&(t(null,e),this._worker.removeEventListener("message",i),this._worker.removeEventListener("error",s),clearTimeout(r))},s=e=>{t(e),this._worker.removeEventListener("message",i),this._worker.removeEventListener("error",s),clearTimeout(r)};this._worker.addEventListener("message",i),this._worker.addEventListener("error",s),this._worker.postMessage(e)}catch(n){this._error(n)}}_console({content:e,command:t}){console[t].apply(console,JSON.parse(e))}_onmessage({data:e}){this["_"+e.target]&&this["_"+e.target](e)}_error(e){const t=e instanceof Error?e:e instanceof ErrorEvent?e.error:new Error(e),n=e instanceof Event?new ErrorEvent(e.type,e):new ErrorEvent("error",{error:t});return this.dispatchEvent(n),console.error(t),t}_removeListeners(){this._video&&(this._ro&&this._ro.unobserve(this._video),this._ctx&&(this._ctx.filter="none"),this._video.removeEventListener("timeupdate",this._boundTimeUpdate),this._video.removeEventListener("progress",this._boundTimeUpdate),this._video.removeEventListener("waiting",this._boundTimeUpdate),this._video.removeEventListener("seeking",this._boundTimeUpdate),this._video.removeEventListener("playing",this._boundTimeUpdate),this._video.removeEventListener("ratechange",this._boundSetRate),this._video.removeEventListener("resize",this._boundResize),this._video.removeEventListener("loadedmetadata",this._boundUpdateColorSpace))}destroy(e){return e&&(e=this._error(e)),this._video&&this._canvasParent&&this._video.parentNode?.removeChild(this._canvasParent),this._destroyed=!0,this._removeListeners(),this.sendMessage("destroy"),this._worker?.terminate(),e}}const Xj=""+new URL("jassub-worker-DAOUR0c6.js",import.meta.url).href,Jj=""+new URL("jassub-worker-BG4vIwJE.wasm",import.meta.url).href,Zj=h.lazy(()=>pp(()=>import("./developerStats-DQgRn3v6.js"),[],import.meta.url));function e$(e){const t=new Date;let[n,r,i]=yd(e).split(":").reverse();if(i&&t.setMinutes(t.getHours()+parseInt(i)),r&&t.setMinutes(t.getMinutes()+parseInt(r)),n){let e=parseInt(n);e<=59&&t.setSeconds(t.getSeconds()+(e-1)),e<=0&&t.setSeconds(t.getSeconds()+(e+2))}return`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}const t$=["0.25","0.5","0.75","1","1.25","1.50","1.75","2"],n$=({player_data:e,anime_data:t,temp:n,setNextEpisode:r,volumeCacheFunc:i,PlayerVolume:s=0,time:a,exitFromPlayer:o})=>{const{t:l}=Pu(),c=Kh(e=>e.config),u=h.useRef(null),d=h.useRef(null),f=h.useRef(null),p=h.useRef(null),g=h.useRef(null),[m,y]=h.useState(s),[v,w]=h.useState(0),[b,E]=h.useState([]),[B,C]=h.useState(!1),S=h.useRef(null),[T,x]=h.useState(!1),k=h.useRef(null),[I,F]=h.useState(!1),[L,D]=h.useState(15),[_,U]=h.useState(!1),[P,R]=h.useState(!1),[O,Q]=h.useState(!1),[N,M]=h.useState({text:"",onClick:()=>"",type:""}),H=h.useRef(null),[j,$]=h.useState(!1),K=h.useRef(null),[V,G]=h.useState(!1),[W,z]=h.useState(!1),[Y,q]=h.useState(!0),[X,J]=h.useState(!0),[Z,ee]=h.useState(c.Player.general.Autoplay),[te,ne]=h.useState(!1),[re,ie]=h.useState([]),[se,ae]=h.useState(void 0),[oe,Ae]=h.useState(c.Player.upToNextEpisode.durationShow),[le,ce]=h.useState(!1),[ue,de]=h.useState(!1),[he,fe]=h.useState(void 0),[pe,ge]=h.useState(!1),[me,ye]=h.useState(!1),[ve,we]=h.useState(!1),[be,Ee]=h.useState(void 0),[Be,Ce]=h.useState([]),[Se,Te]=h.useState(void 0),[xe,ke]=h.useState([]),[Ie,Fe]=h.useState(void 0),[Le,De]=h.useState(void 0),[_e,Ue]=h.useState(void 0),Pe=h.useRef(null),Re=h.useRef(null),[Oe,Qe]=h.useState(void 0),[Ne,Me]=h.useState([]),[He,je]=h.useState(),[$e,Ke]=h.useState(void 0);function Ve(){q(!0),f.current&&clearTimeout(f.current),0==pe&&0==I&&(f.current=setTimeout(()=>q(!1),2e3))}async function Ge(){window.api&&(await window.BrowserWindow.isFullscreen()?(window.BrowserWindow.setFullscreen(!1),ne(!1)):(window.BrowserWindow.setFullscreen(!0),ne(!0)))}async function We(e){if(!(e.length<=0)){for(let t=0;t<e.length;t++){const n=e[t];if(n.lang==uu.language&&!n.label.includes("Forced"))return void At(n)}At(e[0])}}async function ze(t){if(!u.current)return;if(t.resolution.length<=0)return Qt.info(l("player.errors.missingResoltions"),hu),void we(()=>!0);const n=u.current.currentTime;if(t.subtitles&&ke(()=>[{url:"",format:"",lang:"",label:"Off"},...t.subtitles]),t.storyboardVTT&&Ke(await async function(e){let t=await fetch(e);if(!t.ok)return;let n=await t.text();const r=n.split("\n").map(e=>e.trim());let i={src:"",metadata:[]};const s=e.slice(0,e.lastIndexOf("/")+1);let a=[];for(let o=0;o<r.length;o++)if(r[o].includes("--\x3e")){const[e,t]=r[o].split(" --\x3e "),n=r[o+1];if(!n)continue;const[A,l]=n.split("#");let c=0,u=0;if(l?.startsWith("xywh=")){const[e,t]=l.replace("xywh=","").split(",").map(Number);c=e,u=t}const d=`${s}${A}`;i={...i,src:d},a.push({start:kd(e),end:kd(t),imgX:c,imgY:u})}return{...i,metadata:a}}(t.storyboardVTT)),t.resolution[0].defaultSubtitles&&t.subtitles&&We(t.subtitles),t.hls)return fe(()=>t),void(await async function(t,n){const r=new xC({maxBufferLength:60,autoStartLoad:!0});if(Ee(()=>r),xC.isSupported()&&u.current){const i=u.current.currentTime;r.loadSource(t),r.attachMedia(u.current),u.current.currentTime=i,r.on(xC.Events.MANIFEST_PARSED,(e,t)=>{const n=t.levels.map(e=>e.height);if(t.audioTracks.length>0){for(let e=0;e<t.audioTracks.length;e++){const n=t.audioTracks[e];n.default&&je(()=>({id:n.id,label:n.name,lang:n.lang}))}Me(t.audioTracks.map(e=>({id:e.id,label:e.name,lang:e.lang})))}n.reverse(),ie(n.map(e=>({res:e.toString(),url:""}))),r.currentLevel=r.levels.findIndex(e=>e.height===n[0]),ae({res:n[0].toString(),url:""})}),r.on(xC.Events.ERROR,(t,i)=>{if(i.fatal){let t;switch(i.type){case xC.ErrorTypes.NETWORK_ERROR:t=l("player.errors.MEDIA_ERR_NETWORK"),r.destroy(),function(t){if(e.length<=1)return;const n=e.findIndex(e=>e.hostname==t);n<0||null!=e[n+1]&&ze(e[n+1])}(n);break;case xC.ErrorTypes.MEDIA_ERROR:t=l("player.errors.MEDIA_ERR_DECODE"),r.recoverMediaError();break;default:t=l("player.errors.default"),r.destroy()}Qt.error(t,hu)}})}}(t.resolution[0].url,t.hostname));be&&be.destroy(),ae(t.resolution[0]),ie(()=>t.resolution),fe(()=>t),u.current.src=t.resolution[0].url,u.current.currentTime=n}function Ye(e,t=!1){u.current&&(u.current.volume=e/100,y(()=>e),i(e),t||qe(S,C))}function qe(e,t){e.current&&clearTimeout(e.current),t(!0),S.current=setTimeout(()=>{t(!1)},500)}function Xe(){const e=u.current;e&&(ee(t=>t?(e.pause(),!1):(e.play(),!0)),k.current&&clearTimeout(k.current),x(()=>!0),k.current=setTimeout(()=>{x(()=>!1)},300))}function Je(){z(e=>!e),Ye(m)}async function Ze(){document.pictureInPictureElement&&await document.exitPictureInPicture(),window.api&&window.BrowserWindow.setFullscreen(!1),o()}function et(){c&&u.current&&(u.current.currentTime>=parseInt(c.History.continue.MinimalTimeSave.toString())&&u.current.currentTime<=u.current.duration-parseInt(c.History.continue.MaximizeTimeSave.toString())?async function(e){await Mu(e,"continueWatch")}({AnimeData:{...t.AnimeData,nextAiringEpisode:void 0},saveData:{pluginName:vh.getState().plugin.playerPlugin.name,last_Time:u.current.currentTime,episode:n.episode,type:n.type}}):async function(e){await Nu(e,"continueWatch")}({AnimeData:{...t.AnimeData},saveData:{pluginName:"",last_Time:0,episode:n.episode,type:n.type}}),Ed())}async function tt(){const e=u.current;try{document.pictureInPictureElement?await document.exitPictureInPicture():e&&await e.requestPictureInPicture()}catch(t){console.error("Error PiP:",t),Qt.error("Failed open Picture in Picture Mode")}}function nt(){_||(U(()=>!0),p.current=setInterval(()=>{D(e=>e<=1||_?(rt(),15):e-1)},1e3))}function rt(){p.current&&(clearInterval(p.current),D(15),U(()=>!1))}function it(){u.current&&(et(),w(u.current.currentTime),function(){if(!c)return;if(!u.current)return;if(!c.Player.upToNextEpisode.enable)return;if(!he)return;const e=u.current.duration,t=u.current.currentTime;if(e<=60*c.Player.upToNextEpisode.durationShow)return;let r=!1,i=parseInt(e.toFixed(0))-parseInt(c.History.continue.MaximizeTimeSave.toString())-parseInt(t.toFixed(0))+parseInt(c.Player.upToNextEpisode.interval.toString());if(he.listChapters)for(let n=0;n<he.listChapters.length;n++){const s=he.listChapters[n];t>=s.start&&t<=s.end&&"ending"==s.type&&(r=!0,i=parseInt(e.toFixed(0))-(parseInt(e.toFixed(0))-s.start)-parseInt(t.toFixed(0))+parseInt(c.Player.upToNextEpisode.interval.toString()))}else r=t>e-parseInt(c.History.continue.MaximizeTimeSave.toString());0==ue&&null!=n.episodes[n.episodes.findIndex(e=>n.episode==e.ep)+1]&&r?(ce(!0),Ae(i)):(Ae(parseInt(c.Player.upToNextEpisode.interval.toString())),ce(!1));0==ue&&oe<=0&&at("next")}(),ct(),he&&he.listChapters&&he.listChapters.forEach(e=>{if(!u.current)return;let t=u.current.currentTime;t>=e.start&&t<=e.end&&"opening"==e.type&&(c.Player.general.autoSkipOpenings&&st(e.end),P||c.Player.general.autoSkipOpenings||(M(()=>({text:"Skip Opening",onClick:()=>{rt(),st(e.end)},type:"opening"})),nt(),R(()=>!0))),t>=e.start&&t<=e.end&&"ending"==e.type&&(c.Player.general.autoSkipEndings&&st(e.end),O||(M(()=>({text:"Skip Ending",onClick:()=>{rt(),st(e.end)},type:"ending"})),nt(),Q(()=>!0)))}),c.General.discordRPC&&window.api&&window.api.rpc.setActivity(l("discordrpc.player",{title:t.AnimeData.title.romaji,ep:n.episode}),`${yd(u.current.currentTime)} / ${yd(u.current.duration)}`),c.Player.general.AutoSkipEpisode&&u.current.duration==u.current.currentTime&&at("next"))}function st(e){u.current&&(u.current.currentTime=e)}function at(e){let t=n.episodes.findIndex(e=>e.ep===n.episode);t<0||("prev"==e&&(t-=1),"next"==e&&(t+=1),void 0!==n.episodes[t].ep&&r(n.episodes[t].ep))}function ot(e){if(!e.currentTarget)return;let t=e.currentTarget;if(!t.activeCues)return;let n=t.activeCues[0];try{n.text?Qe(n.text):Qe(void 0)}catch(r){Qe(void 0)}}async function At(e){if(!u.current)return;if(Le&&(Le.destroy(),Le._canvas.remove(),De(()=>{})),window.api&&"development"==window.electronAPI.process.env.NODE_ENV&&Le&&Pe.current&&(Pe.current.innerHTML=""),Se&&(Te(()=>{}),Qe(()=>{})),"Off"==e.label&&e.format,e.lang,""==e.url)return void Ue({url:"",format:"",lang:"",label:"Off"});if("ass"==e.format){const t=new qj({video:u.current,subUrl:e.url,workerUrl:Xj,wasmUrl:Jj});return De(t),void Ue(()=>e)}let t=await fetch(e.url);if(!t.ok)return;let n=await t.text();const r=await dP.convert(n,".vtt",{removeTextFormatting:!0}),i=new Blob([r.subtitle],{type:"text/vtt"});Te(URL.createObjectURL(i)),Ue(()=>e);let s=u.current.textTracks[0];s.mode="hidden",s.oncuechange=ot}h.useEffect(()=>{ze(e[0]),Ye(s,!0),Ve(),c.Player.general.AutoFullscreen&&window.api&&(window.BrowserWindow.setFullscreen(!0),ne(!0)),u.current&&(u.current.currentTime=a,w(()=>a))},[]),(e=>{const t=h.useRef([]),n=h.useRef(e);h.useEffect(()=>{n.current=e},[e]),h.useEffect(()=>{const e=e=>{const r=wd(e.key);if(!t.current.includes(r))return t.current.push(r),void n.current(t.current.join("+"));n.current(r)},r=e=>{const r=wd(e.key);t.current=t.current.filter(e=>e!==r),n.current(t.current.join("+"))};return window.addEventListener("keydown",e,{passive:!0}),window.addEventListener("keyup",r,{passive:!0}),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",r)}},[])})(e=>{"CTRL+SHIFT+D"==e&&ye(e=>!e),console.log(e),function(e){if(u.current){var t=u.current.currentTime;switch(e.toLowerCase()){case wd(c.Player.keybinds.Pause.toLowerCase()).toLowerCase():Xe();break;case wd(c.Player.keybinds.TimeSkipRight.toLowerCase()).toLowerCase():st(t+=parseInt(c.Player.general.TimeSkipRight.toString())),qe(K,G),it();break;case wd(c.Player.keybinds.TimeSkipLeft.toLowerCase()).toLowerCase():st(t-=parseInt(c.Player.general.TimeSkipLeft.toString())),qe(H,$),it();break;case wd(c.Player.keybinds.LongTimeSkipForward.toLowerCase()).toLowerCase():st(t+=parseInt(c.Player.general.LongTimeSkipForward.toString())),qe(K,G),it();break;case wd(c.Player.keybinds.LongTimeSkipBack.toLowerCase()).toLowerCase():st(t-=parseInt(c.Player.general.LongTimeSkipBack.toString())),qe(H,$),it();break;case wd(c.Player.keybinds.Fullscreen.toLowerCase()).toLowerCase():Ge();break;case wd(c.Player.keybinds.ExitPlayer.toLowerCase()).toLowerCase():Ze();break;case wd(c.Player.keybinds.FrameSkipForward.toLowerCase()).toLowerCase():st(t+=.0416),it();break;case wd(c.Player.keybinds.FrameSkipBack.toLowerCase()).toLowerCase():st(t-=.0416),it();break;case wd(c.Player.keybinds.VolumeDown.toLowerCase()).toLowerCase():Ye(100*u.current.volume-1);break;case wd(c.Player.keybinds.VolumeUp.toLowerCase()).toLowerCase():Ye(100*u.current.volume+1);break;case wd(c.Player.keybinds.ScreenShot.toLowerCase()).toLowerCase():!async function(){if(!g.current)return;if(null==c)return;if(!u.current)return;const e=new Date,[t,n,r,i,s,a]=[e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()].map(e=>String(e).padStart(2,"0")),o=`-${t}-${n}-${r}-${i}-${s}-${a}`;let A="data:,";if(Le){const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)return void Qt.error(l("player.toastscreenshot.failed"),hu);e.width=u.current.videoWidth,e.height=u.current.videoHeight,t.drawImage(u.current,0,0,u.current.videoWidth,u.current.videoHeight),t.drawImage(Le._canvas,0,0,u.current.videoWidth,u.current.videoHeight),A=e.toDataURL("image/png")}else{A=(await(d=g.current,void 0===h&&(h={}),Gj(d,h))).toDataURL("image/png")}var d,h;if(console.log(A),"data:,"==A)return void Qt.error(l("player.toastscreenshot.failed"),hu);if("Clipboard"==c.Player.screenShot.saveType||"Both"==c.Player.screenShot.saveType){const e=await(await fetch(A)).blob();if(await navigator.clipboard.write([new ClipboardItem({"image/png":e})]),Qt.success(l("player.toastscreenshot.doneclip"),hu),"Clipboard"==c.Player.screenShot.saveType)return}if(c.Player.screenShot.alwaysAsk)var f=await window.api.os.saveDialog(`${c.Player.screenShot.path}/screenshot${o}.png`,A.replace(/^data:image\/png;base64,/,""),`screenshot${o}.png`,"png",["PNG"],"base64");else f=await window.api.os.write(`${c.Player.screenShot.path}/screenshot${o}.png`,A.replace(/^data:image\/png;base64,/,""),"base64");if(f)return void Qt.success(l("player.toastscreenshot.donefile",{path:c.Player.screenShot.path}),hu);Qt.error(l("player.toastscreenshot.failed"),hu)}();break;case wd(c.Player.keybinds.VolumeMute.toLowerCase()).toLowerCase():Je();break;case wd(c.Player.keybinds.NextEpisode.toLowerCase()).toLowerCase():at("next");break;case wd(c.Player.keybinds.PrevEpisode.toLowerCase()).toLowerCase():at("prev");break;case wd(c.Player.keybinds.PictureInPicture.toLowerCase()).toLowerCase():tt();break;case wd(c.Player.keybinds.toggleSubtitles.toLowerCase()).toLowerCase():!function(){if(xe.length<=0)return;if(_e&&"Off"!=_e.label)return Fe(()=>_e),void At(xe[0]);Ie&&At(Ie)}();break;case wd(c.Player.keybinds.skipOpeningEnding.toLowerCase()).toLowerCase():"ending"==N.type&&de(!0),N.onClick()}}}(e)});const lt=[{option:l("contextMenu.nerdstats"),onClick:()=>ye(e=>!e)}],ct=()=>{if(!c.Player.general.showBrokenBuffer&&!be)return;const e=u.current;if(e&&e.duration>0&&e.buffered.length>0){let t=[];for(let n=0;n<e.buffered.length;n++){const r=e.buffered.start(n)/e.duration*100,i=e.buffered.end(n)/e.duration*100-r;t.push({position:r,width:i})}E(()=>t)}},ut={hidden:{opacity:0,display:"none"},visible:{opacity:1,display:""}};function dt(e){if(!I&&!pe)return e}function ht(e){let t=0;for(let n=0;n<e.length;n++){e[n].img&&(t+=1)}return e.length<=t}function ft(){if(he&&he.listChapters&&u.current)for(let e=0;e<he.listChapters.length;e++){const t=he.listChapters[e];if(u.current.currentTime>=t.start&&u.current.currentTime<=t.end&&t.name)return t.name}}function pt(){const e=yt("next");if(e)for(let t=0;t<n.episodes.length;t++){const r=n.episodes[t];if(r.ep==e.ep&&r.img)return r.img}}const gt={hidden:{opacity:0,x:400,display:"none"},visible:{opacity:1,x:0,display:""}};function mt(){return"old"!=c.Player.upToNextEpisode.variants||0!=le}function yt(e){return"next"==e?n.episodes[n.episodes.findIndex(e=>n.episode==e.ep)+1]:"prev"==e?n.episodes[n.episodes.findIndex(e=>n.episode==e.ep)-1]:void 0}return A.jsxs("div",{className:Y?"player-video-container":"player-video-container player-hide-cursor",ref:d,onMouseMove:Ve,onContextMenu:e=>Gh(Bd(void 0,lt),e),children:[A.jsxs("div",{ref:g,className:Y?"player-video-container":"player-video-container player-hide-cursor",children:[A.jsx("video",{ref:u,className:"video-player",onTimeUpdate:it,onProgress:it,onSeeked:it,onClick:()=>{Xe(),ge(()=>!1),F(()=>!1)},autoPlay:Z,onWaiting:()=>{J(()=>!0)},onCanPlay:()=>{J(()=>!1)},onError:t=>function(t){const n=t.currentTarget.error;var r;if(!n)return;switch(n.code){case n.MEDIA_ERR_ABORTED:r=l("player.errors.MEDIA_ERR_ABORTED");break;case n.MEDIA_ERR_NETWORK:r=l("player.errors.MEDIA_ERR_NETWORK");break;case n.MEDIA_ERR_DECODE:r=l("player.errors.MEDIA_ERR_DECODE");break;case n.MEDIA_ERR_SRC_NOT_SUPPORTED:r=l("player.errors.MEDIA_ERR_SRC_NOT_SUPPORTED");break;default:r=l("player.errors.default")}if(Qt.error(r,hu),!he)return;let i=e.findIndex(e=>e.hostname==he.hostname);e[i+1]&&ze(e[i+1])}(t),onLoadedMetadata:()=>{it(),he&&he.listChapters&&function(e){if(!u.current)return;let t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push({left:r.start/u.current.duration*100,width:(r.end-r.start)/u.current.duration*100,name:r.name,type:r.type})}Ce(()=>t)}(he.listChapters)},preload:"auto",muted:W,style:c.Player.general.VideoStreching?{objectFit:"cover"}:{},children:A.jsx("track",{src:Se,kind:"subtitles",default:!0,ref:Re})}),Oe&&A.jsx("div",{className:"player-subtitle-container "+(Y?"up":"down"),children:Oe.split("\n").map(e=>A.jsx("span",{className:"player-subtitle-content",children:e}))}),A.jsx("div",{ref:Pe,style:{position:"absolute",top:"0",left:"0"}})]}),Y&&A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"player-mask top"}),A.jsx("div",{className:"player-mask bottom"})]}),A.jsxs("div",{className:"video-overlay",children:[A.jsxs("div",{className:mt()?Y?"video-top":"video-top player-hidden":"video-top",children:[A.jsx(zt,{icon:"arrow_back",ButtonClass:"player-buttons",onClick:async()=>await Ze()}),A.jsx("div",{className:"player-title ",children:Td({title:t.AnimeData.title,ep:n.episode,format:t.AnimeData.format})})]}),A.jsxs("div",{className:"video-center",children:[" ",!c.Player.ui.DisableSkipAnimation&&A.jsxs(A.Fragment,{children:[A.jsx($l.div,{variants:ut,animate:j?"visible":"hidden",initial:"hidden",transition:{duration:.4},className:"player-loading-animation-container player-fast-rewind-ui",children:A.jsx("div",{className:"material-symbols-outlined player-icon-ui",children:"fast_rewind"})}),A.jsx($l.div,{variants:ut,animate:V?"visible":"hidden",initial:"hidden",transition:{duration:.4},className:"player-loading-animation-container player-fast-forward-ui",children:A.jsx("div",{className:"material-symbols-outlined player-icon-ui",children:"fast_forward"})})]}),ve&&A.jsx($l.div,{className:"player-loading-animation-container player-buffering-animation",variants:ut,initial:"visible",transition:{duration:.4},children:A.jsx("div",{className:"player-icon-ui material-symbols-outlined",children:"error"})}),!c.Player.ui.DisableLoadingAnimation&&!ve&&A.jsx($l.div,{className:"player-loading-animation-container player-buffering-animation",variants:ut,animate:X?"visible":"hidden",initial:"hidden",transition:{duration:.4},children:A.jsx("div",{className:"player-waiting material-symbols-outlined",children:"progress_activity"})}),!c.Player.ui.DisableSpaceAnimation&&A.jsx($l.div,{className:"player-loading-animation-container",variants:ut,animate:T&&0==X?"visible":"hidden",initial:"hidden",transition:{duration:.2},children:A.jsx("div",{className:"player-icon-ui material-symbols-outlined",children:Z?"pause":"play_arrow"})})]}),A.jsxs("div",{className:Y&&mt()?"video-bottom":"video-bottom player-hidden",children:[A.jsx(op,{chapterList:Be,thumbnail:$e,secondBarValues:b,currentValue:v,maxValue:u.current?.duration,onSeek:e=>{!function(e){u.current&&(u.current.currentTime=e,w(()=>e),!isNaN(e)&&c&&e>u.current.duration-parseInt(c.History.continue.MaximizeTimeSave.toString())&&de(!0),he&&he.listChapters&&he.listChapters.forEach(t=>{e>=t.start&&e<=t.end||"opening"!=t.type||"opening"!=N.type||rt(),e>=t.start&&e<=t.end||"ending"!=t.type||"ending"!=N.type||rt()}))}(e)},type:"time",classes:{container:"player-seekbar"},screen:!0}),A.jsxs("div",{className:"player-bottom-section",children:[A.jsxs("div",{className:"player-left",children:[void 0!==yt("prev")&&A.jsx(FC,{title:l("player.previous",{ep:yt("prev")?.ep}),icon:"skip_previous",onClick:()=>at("prev"),ButtonClass:"player-buttons"}),A.jsx(FC,{icon:Z?"pause":"play_arrow",title:l(Z?"player.Pause":"player.play"),ButtonClass:"player-buttons",onClick:Xe}),void 0!==yt("next")&&A.jsx(FC,{icon:"skip_next",ButtonClass:"material-symbols-outlined player-buttons",title:l("player.next",{ep:yt("next")?.ep}),onClick:()=>at("next")}),A.jsxs("div",{className:"player-time-display",children:[yd(v)," / ",yd(u.current?.duration)]}),A.jsx("div",{className:"player-end-time-display",children:l("player.episodeEndsOn",{time:e$(u.current?.duration?u.current.duration-v:0)})})]}),A.jsxs("div",{className:"player-right",children:[ft()&&A.jsx("span",{children:l("player.chapter",{name:ft()})}),A.jsx(FC,{icon:W?"volume_off":"volume_up",title:l(W?"player.unmute":"player.mute"),ButtonClass:"player-buttons volume-button",onClick:Je}),A.jsx("div",{className:"player-volume-seek",children:A.jsx(op,{currentValue:m,maxValue:100,onSeek:e=>Ye(e),classes:{container:"player-seekbar"}})}),A.jsx(FC,{icon:"picture_in_picture",onClick:tt,title:dt("Picture In Picture"),ButtonClass:"player-buttons"}),A.jsx(FC,{icon:"video_library",title:dt("Select Episode"),ButtonClass:"player-buttons",onClick:()=>{F(e=>!e),ge(()=>!1)}}),A.jsxs($l.div,{initial:{opacity:0,display:"none"},animate:I?{opacity:1,display:""}:{opacity:0,display:"none"},transition:{duration:.2},className:"player-select-episode-container",children:[A.jsx("div",{className:"player-select-episode-title",children:l("player.changeEpisode")}),!ht(n.episodes)&&A.jsx("div",{className:"player-select-episode-content",children:n.episodes.map(e=>A.jsx("div",{className:`information-episode-button ${parseInt(e.ep)<parseInt(n.episode)?"watched":""} ${parseInt(e.ep)==parseInt(n.episode)?"current":""}`,onClick:()=>r(e.ep),children:e.ep}))}),ht(n.episodes)&&A.jsx("div",{className:"player-select-episode-content-list",children:n.episodes.map(e=>A.jsx(LC,{nextEpisode:r,animeTitle:t.AnimeData.title.romaji,episodes:e,currentEpisode:n.episode}))})]}),A.jsx(IC,{state:pe,sources:e.map(t=>({name:t.hostname,change:()=>ze(e[e.findIndex(e=>e.hostname===t.hostname)])})),resolution:re.map(e=>({res:e.res,change:()=>function(e){if(!e)return;if(!u.current)return;const t=u.current.currentTime;if(e.defaultSubtitles?We(xe):At(xe[0]),be&&""==e.url)return ae(e),void(be.currentLevel=be.levels.findIndex(t=>t.height===parseInt(e.res)));ae(e),u.current.src=e.url,u.current.currentTime=t}(e)})),speed:t$.map(e=>({speed:parseFloat(e),change:()=>{return t=e,void(u.current&&(u.current.playbackRate=parseFloat(t)));var t}})),subtitles:xe.map(e=>({sub:e.label,change:()=>At(e)})),audioTrack:Ne.map(e=>({track:e.label,change:()=>function(e){try{be&&(be.audioTrack=e.id,je(()=>e))}catch(t){Qt.error("Failed Changing audio",hu)}}(e)})),disableSettings:()=>ge(()=>!1),current:{currentHost:he?he.hostname:l("player.other.unknown"),currentResolution:se?se.res:l("player.other.unknown"),currentSpeed:u.current?.playbackRate?u.current?.playbackRate:1,currentSub:_e?_e.label:l("player.other.off"),currentTrack:He?He.label:l("player.other.default")}}),A.jsx(FC,{icon:"settings",ButtonClass:"player-buttons",title:dt(l("global.settings")),onClick:()=>{ge(e=>!e),F(()=>!1)}}),A.jsx(FC,{icon:te?"fullscreen_exit":"fullscreen",ButtonClass:"player-buttons",title:dt(l("player.fullscreen")),onClick:async()=>await Ge()})]})]})]})]}),A.jsxs($l.button,{onClick:e=>{"ending"==N.type&&de(!0),N.onClick()},variants:ut,initial:"hidden",animate:_?"visible":"hidden",className:"player-skip-chapters-button",children:[N.text,", ",`${L}s`]}),"old"==c.Player.upToNextEpisode.variants&&A.jsxs($l.div,{variants:gt,transition:{duration:.2},animate:le?"visible":"hidden",initial:"hidden",className:"player-up-Next-container old",children:[A.jsx("div",{className:"player-up-Next-Title old",children:l("player.upNext.title",{sec:parseInt(oe.toString())})}),A.jsx("div",{className:"player-up-Next-Anime old",children:l("player.upNext.titleAnime",{ep:yt("next")?.ep,title:t.AnimeData.title.romaji})}),A.jsxs("div",{className:"player-up-Next-Buttons old",children:[A.jsx(zt,{content:l("player.upNext.nextEp"),ButtonClass:"player-up-Next-Button old",onClick:()=>at("next")}),A.jsx(zt,{content:l("player.upNext.hide"),ButtonClass:"player-up-Next-Button old",onClick:()=>{de(!0),ce(!1)}})]})]}),"var2"==c.Player.upToNextEpisode.variants&&A.jsxs($l.div,{variants:gt,transition:{duration:.2},animate:le?"visible":"hidden",initial:"hidden",className:"player-up-Next-background",style:{backgroundImage:`url(${pt()})`},onClick:()=>at("next"),children:[A.jsxs("div",{className:"player-up-Next-container-var2 ",children:[A.jsx("span",{className:"material-symbols-outlined player-up-Next-icon",children:"skip_next"}),A.jsxs("div",{className:"player-up-Next-content var2",children:[A.jsx("div",{className:"player-up-Next-title",children:t.AnimeData.title.romaji}),A.jsx("div",{className:"player-up-Next-episode",children:l("player.upNext.nextEpisode",{episode:yt("next")?.ep})}),A.jsx("div",{className:"player-up-Next-text",children:l("player.upNext.nextPlaying",{time:parseInt(oe.toString())})})]})]}),A.jsx("button",{className:"material-symbols-outlined player-up-Next-button-close",onClick:e=>{e.stopPropagation(),de(!0),ce(!1)},children:"close"})]}),"var1"==c.Player.upToNextEpisode.variants&&A.jsxs($l.div,{variants:gt,transition:{duration:.2},animate:le?"visible":"hidden",initial:"hidden",className:"player-up-Next-container",onClick:()=>at("next"),children:[A.jsx("img",{src:pt(),className:"player-up-Next-image"}),A.jsx("span",{className:"material-symbols-outlined player-up-Next-icon",children:"skip_next"}),A.jsxs("div",{className:"player-up-Next-content",children:[A.jsx("div",{className:"player-up-Next-title",children:t.AnimeData.title.romaji}),A.jsx("div",{className:"player-up-Next-episode",children:l("player.upNext.nextEpisode",{episode:yt("next")?.ep})}),A.jsx("div",{className:"player-up-Next-text",children:l("player.upNext.nextPlaying",{time:parseInt(oe.toString())})})]}),A.jsx("button",{className:"material-symbols-outlined player-up-Next-button-close",onClick:e=>{e.stopPropagation(),de(!0),ce(!1)},children:"close"})]}),!c.Player.ui.DisableVolumeAnimation&&A.jsxs($l.div,{className:"player-volume-ui-container",variants:{hidden:{x:400},visible:{x:0}},animate:B?"visible":"hidden",initial:"hidden",transition:{duration:.2},children:[A.jsx("span",{className:"player-volume-ui-icon material-symbols-outlined",children:W?"volume_off":"volume_up"}),A.jsx("div",{className:"player-volume-ui-bar-container",children:A.jsx("div",{className:"player-volume-ui-bar-progress",style:{width:`${m}%`}})}),A.jsxs("span",{className:"player-volume-ui-text",children:[parseInt(m.toString()),"%"]})]}),me&&A.jsx(kC,{video:u,volume:m,currentTime:v}),c.Developer.playerDebug&&A.jsx(Zj,{isMuted:W,isFullscreen:te,isHideUpNextEpisode:ue,isPlaying:Z,isUpNextEpisode:le,isVisible:Y,isWaitingPlayer:X,ListResolution:re.map(e=>e.res),currentHost:he?he.hostname:"Unknown",currentResolution:se?se.res:"Unknown",currentSettings:pe,hls:be,time:a,timeNextEpisode:oe,episode:{ep:n.episode,type:n.type},episodes:n.episodes,episodesUrl:e,showNerdStats:me,PlayerVolume:s})]})},r$=()=>{const e=ye().state,t=be(),n=Kh(e=>e.config),r=Kh(e=>e.plugin.playerPlugin),[i,s]=h.useState(n.Player.general.Volume),a=h.useRef({actual:e.data.saveData?e.data.saveData.episode:"1",type:e.data.saveData?e.data.saveData.type:"sub",episodelist:e.episodelist,time:e.data.saveData?e.data.saveData?.last_Time:0}),[o,l]=h.useState(n.Player.external.type),{data:c,isFetching:u,refetch:d}=tp({queryKey:[e.data.AnimeData.player_ID],queryFn:async({queryKey:e})=>{const[t]=e;return await r.player.getUrls(a.current.type,a.current.actual,t)},refetchOnWindowFocus:!1,staleTime:72e5,cacheTime:72e5});function f(e){a.current={...a.current,time:0,actual:e},d()}async function p(){window.BrowserWindow.setFullscreen(!1),ud(),e.continueWatch||"home"===n.Player.general.PlayerBehavior?t("/"):t("/info",{state:{anime:e.data.AnimeData,saveData:e.data.saveData}})}return h.useEffect(()=>{!async function(e){await Mu(e,"history")}({saveData:{pluginName:e.data.saveData&&""==e.data.saveData.pluginName?"Allmanga":n.plugins.player,last_Time:0,type:a.current.type,episode:a.current.actual.toString()},AnimeData:{...e.data.AnimeData,nextAiringEpisode:void 0}}),Ed()},[a]),oc("Escape",async()=>{await p()}),0==u&&c&&c.length<=0?(s$(p,{title:e.data.AnimeData.title,ep:a.current.actual,format:e.data.AnimeData.format},a.current),void cd({type:"refresh",title:du("player.error.notfound"),buttons:{firstbutton:()=>d(),secondbutton:()=>p()}})):c&&0==u&&n.Player.external.enable&&window.api?A.jsx(dp,{animeData:e.data,playerData:c,time:a.current.time,setNextEpisode:f,now_episodes:{episode:a.current.actual,type:a.current.type,episodes:a.current.episodelist},externalPlayerData:{onChage:e=>l(e),current:o}}):c&&0==u?A.jsx(n$,{player_data:c,anime_data:e.data,temp:{episode:a.current.actual,type:a.current.type,episodes:a.current.episodelist},setNextEpisode:f,volumeCacheFunc:s,PlayerVolume:i,time:a.current.time,exitFromPlayer:p}):s$(p,{title:e.data.AnimeData.title,ep:a.current.actual,format:e.data.AnimeData.format},a.current)};function i$(e){for(let t=0;t<e.episodelist.length;t++){const n=e.episodelist[t];if(n.ep==e.actual&&n.img)return n.img}}function s$(e,t,n){return A.jsxs("div",{className:"player-loading-container",style:{backgroundImage:`url(${i$(n)})`},children:[A.jsx("div",{className:"player-loading-container-black"}),A.jsxs("div",{className:"player-loading-top",children:[A.jsx(zt,{icon:"arrow_back",ButtonClass:"player-buttons",onClick:e}),A.jsx("div",{className:"player-title ",children:Td(t)})]}),A.jsx("div",{className:"player-loading-animation-container",style:{maxHeight:"min-content"},children:A.jsx("div",{className:"player-waiting material-symbols-outlined",children:"progress_activity"})})]})}class a$ extends f.Component{constructor(e){super(e),this.state={hasError:!1,error:void 0}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Catched Error",e,t)}render(){return this.state.hasError?A.jsxs("div",{className:"main-error-container",children:[A.jsx("div",{className:"main-error-text",children:du("globalError")}),A.jsxs("div",{className:"main-error-button-container",children:[A.jsx(zt,{content:du("errorboundary.gotohome"),ButtonClass:"error-button",onClick:()=>window.location.href=`${window.location.origin}${window.location.pathname}`}),A.jsx(zt,{content:du("errorboundary.leaveanimu"),ButtonClass:"error-button",onClick:()=>window.api?window.BrowserWindow.exit():""})]}),this.state.error&&A.jsx("div",{className:"main-error-show",children:du("errorboundary.errormessage",{error:this.state.error.message})})]}):this.props.children}}function o$(){const[e,t]=h.useState(!0),[n,r]=h.useState("Loading Config...");async function i(){await async function(){if(!(await mh()))return;const e=await ph();window.api&&e.General.discordRPC&&"development"!=window.electronAPI.process.env.NODE_ENV&&window.api.rpc.runDiscordRPC();await vd(e.General.theme),uu.changeLanguage(e.General.language),e.General.Window.AutoMaximize&&window.BrowserWindow.setMaximize();e.Developer.DevToolsOnStart&&window.BrowserWindow.openDevTools();window.api&&(window.BrowserWindow.setZoom(md(parseFloat(e.General.Window.Zoom.toString()))),window.BrowserWindow.setFullscreen(e.General.Window.AutoFullscreen));"On Start"==e.update.type&&await lp();"Every Day"==e.update.type&&gd(e.update.lastTime,"day")&&await lp();"Every Week"==e.update.type&&gd(e.update.lastTime,"week")&&await lp();vh.dispatch({type:"setConfig",payload:e}),await async function(){0==await Hu("continueWatch")&&await id()}(),await async function(){0==await Hu("history")&&await Ad()}()}(),r(()=>"Loading Plugins..."),Ch(),t(()=>!1)}return oc("F12",()=>{vh.getState().config.Developer.DevTools&&window.BrowserWindow.openDevTools()}),oc("ctrl+shift+r",async()=>{vh.getState().config.Developer.DeveloperMode&&(await vd(vh.getState().config.General.theme),Qt.info("Reloaded Theme",hu))}),oc("ctrl+i",()=>{console.log(vh.getState().config),vh.dispatch({type:"setIcognitoMode",payload:!vh.getState().global.incognito}),Qt.info("Incognito Mode: "+(vh.getState().global.incognito?"On":"Off"),hu)}),h.useEffect(()=>{i()},[]),e?A$(n):A.jsxs(a$,{children:[A.jsx(Gt,{}),A.jsx(nt,{children:A.jsx(h.Suspense,{fallback:A$(),children:A.jsxs(Ue,{children:[A.jsx(De,{path:"/",element:A.jsx(Zh,{})}),A.jsx(De,{path:"/info",element:A.jsx(rp,{})}),A.jsx(De,{path:"/settings",element:A.jsx(cp,{})}),A.jsx(De,{path:"/player",element:A.jsx(r$,{})})]})})})]})}function A$(e){return A.jsxs("div",{className:"app-loading-container",children:[A.jsx("div",{className:"material-symbols-outlined app-loading-animation",children:"progress_activity"}),e&&A.jsx("div",{className:"app-loading-information",children:e})]})}const l$=new Mf({defaultOptions:{queries:{staleTime:1e3}}});L.createRoot(document.getElementById("root")).render(A.jsx(f.StrictMode,{children:A.jsx(dd,{children:A.jsx(zh,{children:A.jsx(Xf,{client:l$,children:A.jsx(Nh,{store:vh,children:A.jsx(o$,{})})})})})}));export{A as j};
